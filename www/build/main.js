webpackJsonp([0],{

/***/ 113:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MonitorService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




var MonitorService = /** @class */ (function () {
    function MonitorService(http, appConfig, mutilservice) {
        this.http = http;
        this.appConfig = appConfig;
        this.mutilservice = mutilservice;
        this.summaryUrl = this.appConfig.apiEndpoint + '/api/m/v2/station/summary'; // 获取页面上半部分信息
        this.energiesUrl = this.appConfig.apiEndpoint + '/api/m/v2/station/energies'; // 获取发电曲线数据
        this.alarmCountUrl = this.appConfig.apiEndpoint + '/api/m/v2/station/alarmCount'; // 获取电站告警数量
        this.inverterrankUrl = this.appConfig.apiEndpoint + '/api/m/v2/station/inverterrank'; // 获取逆变器发电排行
        this.provincesUrl = this.appConfig.apiEndpoint + '/api/m/v2/station/provinces'; // 电站区域查询条件
        this.stationTypesUrl = this.appConfig.apiEndpoint + '/api/m/v2/station/stationTypes'; // 电站类型查询条件
        this.stationlistUrl = this.appConfig.apiEndpoint + '/api/m/v2/station/list'; // 电站类型查询条件
        this.equipmentListUrl = this.appConfig.apiEndpoint + '/api/m/v2/device/list'; //设备列表
        this.devicesListUrl = this.appConfig.apiEndpoint + '/api/m/v2/device/devices'; //设备列表
        this.equipmentTypeUrl = this.appConfig.apiEndpoint + '/api/m/v2/device/models'; //设备类型查询
        this.deviceClassesUrl = this.appConfig.apiEndpoint + '/api/m/v2/device/classes'; //设备类型查询
        this.equipmentAreaUrl = this.appConfig.apiEndpoint + '/api/m/v2/area/stationAreaList'; //设备区域查询
        this.equipmentInfoUrl = this.appConfig.apiEndpoint + '/api/m/v2/device/monitor'; //设备监视信息
        this.deviceAlarmCountUrl = this.appConfig.apiEndpoint + '/api/m/v2/device/alarmCount'; //设备告警
    }
    /**
     * 获取页面上半部分信息
     */
    MonitorService.prototype.getsummary = function (stationId) {
        var url = this.summaryUrl;
        if (stationId) {
            url = url + '?stationId=' + stationId;
        }
        return this.http.get(url);
    };
    /**
     * 获取发电曲线数据
     */
    MonitorService.prototype.getenergies = function (timeType, stationId) {
        var url = this.energiesUrl + '?timeType=' + timeType;
        if (stationId) {
            url = url + '&stationId=' + stationId;
        }
        return this.http.get(url);
    };
    /**
     * 获取电站告警数量
     */
    MonitorService.prototype.getalarmCount = function (stationId) {
        var url = this.alarmCountUrl + '?stationId=' + stationId;
        return this.http.get(url);
    };
    /**
     * 获取逆变器发电排行
     */
    MonitorService.prototype.getinverterrankUrl = function (stationId, cateId, sort) {
        var url = this.inverterrankUrl +
            '?stationId=' +
            stationId +
            '&cateId=' +
            cateId +
            '&sort=' +
            sort;
        return this.http.get(url);
    };
    /**
     * 电站区域查询条件
     */
    MonitorService.prototype.getprovinces = function () {
        var url = this.provincesUrl;
        return this.http.get(url);
    };
    /**
     * 电站类型查询条件
     */
    MonitorService.prototype.getstationTypes = function () {
        var url = this.stationTypesUrl;
        return this.http.get(url);
    };
    /**
     * 查询电站列表
     */
    MonitorService.prototype.getstationlist = function (stationName, provinceIds, stationTypes, page) {
        var url = this.stationlistUrl +
            '?stationName=' +
            stationName +
            '&provinceIds=' +
            provinceIds +
            '&stationTypes=' +
            stationTypes +
            '&size=10' +
            '&page=' +
            page;
        return this.http.get(url);
    };
    /**
     * 查询设备列表
     */
    MonitorService.prototype.getEquipmentList = function (stationId, deviceNoOrName, modelIds, areaIds, page) {
        var url = this.equipmentListUrl +
            '?stationId=' +
            stationId +
            '&deviceNoOrName=' +
            deviceNoOrName +
            '&modelIds=' +
            modelIds +
            '&areaIds=' +
            areaIds +
            '&size=10' +
            '&page=' +
            page;
        return this.http.get(url);
    };
    /**
     * 查询设备列表
     */
    MonitorService.prototype.getDevicesListUrl = function (params) {
        var url = this.devicesListUrl;
        return this.http.get(url, { params: this.mutilservice.filterEffectParam(params) });
    };
    /**
     * 设备区域查询条件
     */
    MonitorService.prototype.getEquipmentArea = function (stationId) {
        var url = this.equipmentAreaUrl + '?stationId=' + stationId;
        return this.http.get(url);
    };
    /**
     * 设备类型查询条件
     */
    MonitorService.prototype.getEquipmentTypes = function (stationId) {
        var url = this.equipmentTypeUrl + '?stationId=' + stationId;
        return this.http.get(url);
    };
    /**
     * 设备类型查询条件
     */
    MonitorService.prototype.getDeviceClasses = function (params) {
        return this.http.get(this.deviceClassesUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    /**
     * 设备监视信息
     */
    MonitorService.prototype.getEquipmentInfo = function (deviceId) {
        var url = this.equipmentInfoUrl + '?deviceId=' + deviceId;
        return this.http.get(url);
    };
    /**
     * 设备告警
     */
    MonitorService.prototype.getDeviceAlarmCount = function (deviceId) {
        var url = this.deviceAlarmCountUrl + '?deviceId=' + deviceId;
        return this.http.get(url);
    };
    MonitorService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__auth_http_service__["a" /* AuthHttpService */], Object, __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__["a" /* MutilService */]])
    ], MonitorService);
    return MonitorService;
}());

//# sourceMappingURL=monitor.service.js.map

/***/ }),

/***/ 1229:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ComponentsModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__homepage2_modules_homepage2_modules__ = __webpack_require__(1230);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ngx_echarts__ = __webpack_require__(462);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_common__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__upload_files_upload_files__ = __webpack_require__(1251);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__upload_pics_upload_pics__ = __webpack_require__(1252);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__cc_cc__ = __webpack_require__(1253);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__comment_comment__ = __webpack_require__(1254);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};









var ComponentsModule = /** @class */ (function () {
    function ComponentsModule() {
    }
    ComponentsModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_1__homepage2_modules_homepage2_modules__["a" /* Homepage2ModulesComponent */],
                __WEBPACK_IMPORTED_MODULE_5__upload_files_upload_files__["a" /* UploadFilesComponent */],
                __WEBPACK_IMPORTED_MODULE_6__upload_pics_upload_pics__["a" /* UploadPicsComponent */],
                __WEBPACK_IMPORTED_MODULE_7__cc_cc__["a" /* CcComponent */],
                __WEBPACK_IMPORTED_MODULE_8__comment_comment__["a" /* CommentComponent */],
            ],
            imports: [__WEBPACK_IMPORTED_MODULE_3__angular_common__["CommonModule"], __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["i" /* IonicModule */], __WEBPACK_IMPORTED_MODULE_2_ngx_echarts__["a" /* NgxEchartsModule */]],
            exports: [
                __WEBPACK_IMPORTED_MODULE_1__homepage2_modules_homepage2_modules__["a" /* Homepage2ModulesComponent */],
                __WEBPACK_IMPORTED_MODULE_5__upload_files_upload_files__["a" /* UploadFilesComponent */],
                __WEBPACK_IMPORTED_MODULE_6__upload_pics_upload_pics__["a" /* UploadPicsComponent */],
                __WEBPACK_IMPORTED_MODULE_7__cc_cc__["a" /* CcComponent */],
                __WEBPACK_IMPORTED_MODULE_8__comment_comment__["a" /* CommentComponent */],
            ],
        })
    ], ComponentsModule);
    return ComponentsModule;
}());

//# sourceMappingURL=components.module.js.map

/***/ }),

/***/ 1230:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Homepage2ModulesComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__pages_operations_inspections_inspections__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__pages_operations_operate_tickets_operate_tickets__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages_operations_repair_ticket_repair_ticket__ = __webpack_require__(130);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages_operations_defect_management_defect_management__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_home_modules_details_modules_details1_modules_details1__ = __webpack_require__(795);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_modules_service__ = __webpack_require__(92);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_operations_job_record_job_record__ = __webpack_require__(346);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__pages_operations_inventoris_inventoris__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_home_daily_report_daily_report__ = __webpack_require__(347);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__pages_home_modules_details_modules_details2_modules_details2__ = __webpack_require__(806);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pages_home_modules_details_modules_details3_modules_details3__ = __webpack_require__(807);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__pages_home_modules_details_modules_details4_modules_details4__ = __webpack_require__(349);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__pages_operations_maintains_maintains__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__pages_home_report_production_monthly_ly_report_production_monthly_ly__ = __webpack_require__(813);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__pages_home_energy_report_energy_report__ = __webpack_require__(814);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__pages_operations_inventoris_inventoris_record_inventoris_record__ = __webpack_require__(341);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


















/**
 * Generated class for the Homepage2ModulesComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var Homepage2ModulesComponent = /** @class */ (function () {
    function Homepage2ModulesComponent(navCtrl, modalCtrl, modulesService) {
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.modulesService = modulesService;
        this.getmodules2();
    }
    /**拼接图片路径 */
    Homepage2ModulesComponent.prototype.getImg = function (imgName) {
        return 'assets/imgs/module/' + imgName;
    };
    /**获取图标列表 */
    Homepage2ModulesComponent.prototype.getmodules2 = function () {
        var _this = this;
        this.modulesService.modules2().subscribe(function (e) {
            console.log(e);
            if (e) {
                _this.modules = e.map(function (item) {
                    return __assign(__assign({}, item), { modules: item.modules.filter(function (module) {
                            return module.show;
                        }) });
                });
            }
        });
    };
    Homepage2ModulesComponent.prototype.toSearchPage = function (m) {
        if (m.id === 'APP_MT_STATION_LIST') {
            var searchModal = void 0;
            if (m && m.param) {
                if (m.name === '运行效率') {
                    // group
                    // this.navCtrl.push(ModulesDetails2Page, {
                    //     param: 'group'
                    // });
                    searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_11__pages_home_modules_details_modules_details2_modules_details2__["a" /* ModulesDetails2Page */], { param: 'group' }, { showBackdrop: true });
                }
                else {
                    // this.navCtrl.push(ModulesDetails1Page, {
                    //     param: m.param
                    // });
                    searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__pages_home_modules_details_modules_details1_modules_details1__["a" /* ModulesDetails1Page */], { param: m.param }, { showBackdrop: true });
                }
                searchModal.present();
            }
        }
        else {
            this.toPage(m);
        }
    };
    Homepage2ModulesComponent.prototype.toPage = function (m) {
        var id = m.id;
        var searchModal;
        switch (id) {
            //集团日报
            case 'APP_ENERGY_RPT':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__pages_home_daily_report_daily_report__["a" /* DailyReport */]);
                break;
            // 运行日报
            case 'APP_JOB_RECORD':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__pages_operations_job_record_job_record__["a" /* JobRecordPage */]);
                break;
            // 缺陷管理
            case 'APP_DEFECT':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__pages_operations_defect_management_defect_management__["a" /* DefectManagementPage */]);
                break;
            // 物资库存
            case 'APP_MATERIAL':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__pages_operations_inventoris_inventoris__["a" /* InventorisPage */], {
                    materialType: '',
                });
                break;
            // 物资记录
            case 'APP_IOSTORAGE':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_17__pages_operations_inventoris_inventoris_record_inventoris_record__["a" /* InventorisRecordPage */], {
                    materialType: '',
                });
                break;
            // 工作票
            case 'APP_OP_WORK_TICKET':
                // this.navCtrl.push(JobRecordPage);
                break;
            // 操作票
            case 'APP_OP_OPERATE_TICKET':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_1__pages_operations_operate_tickets_operate_tickets__["a" /* OperateTicketsPage */]);
                break;
            // 抢修单
            case 'APP_OP_REPAIR':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__pages_operations_repair_ticket_repair_ticket__["a" /* RepairTicketPage */]);
                break;
            // 检修预试
            case 'APP_OP_CHECK':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_14__pages_operations_maintains_maintains__["a" /* MaintainsPage */]);
                break;
            // 电站生产月报
            case 'APP_RPT_PROD_M_LY':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__pages_home_report_production_monthly_ly_report_production_monthly_ly__["a" /* ReportProductionMonthlyLyPage */], {
                    param: id,
                    title: m.name,
                });
                break;
            // 损失电量统计
            case 'APP_RPT_LOSS1':
                searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_12__pages_home_modules_details_modules_details3_modules_details3__["a" /* ModulesDetails3Page */], { param: id, title: m.name }, { showBackdrop: true });
                searchModal.present();
                break;
            // 损失电量明细
            case 'APP_RPT_LOSS2':
                searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_13__pages_home_modules_details_modules_details4_modules_details4__["a" /* ModulesDetails4Page */], { id: id, title: m.name }, { showBackdrop: true });
                searchModal.present();
                break;
            // 巡视检查
            case 'APP_INSPECTION':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__pages_operations_inspections_inspections__["a" /* InspectionsPage */]);
                break;
            // 发电量报表
            case 'APP_RPT_ENERGY':
                searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_16__pages_home_energy_report_energy_report__["a" /* EnergyReportPage */], {
                    showBackdrop: true,
                });
                searchModal.present();
                break;
            default:
                break;
        }
    };
    Homepage2ModulesComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["Component"])({
            selector: 'homepage2-modules',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/homepage2-modules/homepage2-modules.html"*/'<!-- Generated template for the Homepage2ModulesComponent component -->\n<div>\n  <div class="home-page2-modules2" *ngFor="let module of modules;let i = index">\n    <h1 class="divider-dashed">\n      <div class="left-line">\n        <img src="assets/imgs/home/title-icon.png" alt="" />\n      </div>\n      <span class="divider-inner-text"> {{module && module.name || \'\'}} </span>\n      <div class="right-line"></div>\n    </h1>\n    <div class="modules-list">\n      <ng-container>\n        <ng-container *ngFor="let m of module.modules;let i = index">\n          <div\n            class="modules"\n            [ngClass]="{\'no-right-line\': (i+1)%4===0}"\n            (click)="toSearchPage(m)"\n          >\n            <img [src]="getImg(m.icon)" />\n            <p>{{m.name}}</p>\n          </div>\n          <div *ngIf="(i+1)%4===0" class="divider-line"></div>\n        </ng-container>\n      </ng-container>\n    </div>\n  </div>\n</div>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/homepage2-modules/homepage2-modules.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_modules_service__["a" /* ModulesService */]])
    ], Homepage2ModulesComponent);
    return Homepage2ModulesComponent;
}());

//# sourceMappingURL=homepage2-modules.js.map

/***/ }),

/***/ 1245:
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": 640,
	"./af.js": 640,
	"./ar": 641,
	"./ar-dz": 642,
	"./ar-dz.js": 642,
	"./ar-kw": 643,
	"./ar-kw.js": 643,
	"./ar-ly": 644,
	"./ar-ly.js": 644,
	"./ar-ma": 645,
	"./ar-ma.js": 645,
	"./ar-sa": 646,
	"./ar-sa.js": 646,
	"./ar-tn": 647,
	"./ar-tn.js": 647,
	"./ar.js": 641,
	"./az": 648,
	"./az.js": 648,
	"./be": 649,
	"./be.js": 649,
	"./bg": 650,
	"./bg.js": 650,
	"./bm": 651,
	"./bm.js": 651,
	"./bn": 652,
	"./bn-bd": 653,
	"./bn-bd.js": 653,
	"./bn.js": 652,
	"./bo": 654,
	"./bo.js": 654,
	"./br": 655,
	"./br.js": 655,
	"./bs": 656,
	"./bs.js": 656,
	"./ca": 657,
	"./ca.js": 657,
	"./cs": 658,
	"./cs.js": 658,
	"./cv": 659,
	"./cv.js": 659,
	"./cy": 660,
	"./cy.js": 660,
	"./da": 661,
	"./da.js": 661,
	"./de": 662,
	"./de-at": 663,
	"./de-at.js": 663,
	"./de-ch": 664,
	"./de-ch.js": 664,
	"./de.js": 662,
	"./dv": 665,
	"./dv.js": 665,
	"./el": 666,
	"./el.js": 666,
	"./en-au": 667,
	"./en-au.js": 667,
	"./en-ca": 668,
	"./en-ca.js": 668,
	"./en-gb": 669,
	"./en-gb.js": 669,
	"./en-ie": 670,
	"./en-ie.js": 670,
	"./en-il": 671,
	"./en-il.js": 671,
	"./en-in": 672,
	"./en-in.js": 672,
	"./en-nz": 673,
	"./en-nz.js": 673,
	"./en-sg": 674,
	"./en-sg.js": 674,
	"./eo": 675,
	"./eo.js": 675,
	"./es": 676,
	"./es-do": 677,
	"./es-do.js": 677,
	"./es-mx": 678,
	"./es-mx.js": 678,
	"./es-us": 679,
	"./es-us.js": 679,
	"./es.js": 676,
	"./et": 680,
	"./et.js": 680,
	"./eu": 681,
	"./eu.js": 681,
	"./fa": 682,
	"./fa.js": 682,
	"./fi": 683,
	"./fi.js": 683,
	"./fil": 684,
	"./fil.js": 684,
	"./fo": 685,
	"./fo.js": 685,
	"./fr": 686,
	"./fr-ca": 687,
	"./fr-ca.js": 687,
	"./fr-ch": 688,
	"./fr-ch.js": 688,
	"./fr.js": 686,
	"./fy": 689,
	"./fy.js": 689,
	"./ga": 690,
	"./ga.js": 690,
	"./gd": 691,
	"./gd.js": 691,
	"./gl": 692,
	"./gl.js": 692,
	"./gom-deva": 693,
	"./gom-deva.js": 693,
	"./gom-latn": 694,
	"./gom-latn.js": 694,
	"./gu": 695,
	"./gu.js": 695,
	"./he": 696,
	"./he.js": 696,
	"./hi": 697,
	"./hi.js": 697,
	"./hr": 698,
	"./hr.js": 698,
	"./hu": 699,
	"./hu.js": 699,
	"./hy-am": 700,
	"./hy-am.js": 700,
	"./id": 701,
	"./id.js": 701,
	"./is": 702,
	"./is.js": 702,
	"./it": 703,
	"./it-ch": 704,
	"./it-ch.js": 704,
	"./it.js": 703,
	"./ja": 705,
	"./ja.js": 705,
	"./jv": 706,
	"./jv.js": 706,
	"./ka": 707,
	"./ka.js": 707,
	"./kk": 708,
	"./kk.js": 708,
	"./km": 709,
	"./km.js": 709,
	"./kn": 710,
	"./kn.js": 710,
	"./ko": 711,
	"./ko.js": 711,
	"./ku": 712,
	"./ku.js": 712,
	"./ky": 713,
	"./ky.js": 713,
	"./lb": 714,
	"./lb.js": 714,
	"./lo": 715,
	"./lo.js": 715,
	"./lt": 716,
	"./lt.js": 716,
	"./lv": 717,
	"./lv.js": 717,
	"./me": 718,
	"./me.js": 718,
	"./mi": 719,
	"./mi.js": 719,
	"./mk": 720,
	"./mk.js": 720,
	"./ml": 721,
	"./ml.js": 721,
	"./mn": 722,
	"./mn.js": 722,
	"./mr": 723,
	"./mr.js": 723,
	"./ms": 724,
	"./ms-my": 725,
	"./ms-my.js": 725,
	"./ms.js": 724,
	"./mt": 726,
	"./mt.js": 726,
	"./my": 727,
	"./my.js": 727,
	"./nb": 728,
	"./nb.js": 728,
	"./ne": 729,
	"./ne.js": 729,
	"./nl": 730,
	"./nl-be": 731,
	"./nl-be.js": 731,
	"./nl.js": 730,
	"./nn": 732,
	"./nn.js": 732,
	"./oc-lnc": 733,
	"./oc-lnc.js": 733,
	"./pa-in": 734,
	"./pa-in.js": 734,
	"./pl": 735,
	"./pl.js": 735,
	"./pt": 736,
	"./pt-br": 737,
	"./pt-br.js": 737,
	"./pt.js": 736,
	"./ro": 738,
	"./ro.js": 738,
	"./ru": 739,
	"./ru.js": 739,
	"./sd": 740,
	"./sd.js": 740,
	"./se": 741,
	"./se.js": 741,
	"./si": 742,
	"./si.js": 742,
	"./sk": 743,
	"./sk.js": 743,
	"./sl": 744,
	"./sl.js": 744,
	"./sq": 745,
	"./sq.js": 745,
	"./sr": 746,
	"./sr-cyrl": 747,
	"./sr-cyrl.js": 747,
	"./sr.js": 746,
	"./ss": 748,
	"./ss.js": 748,
	"./sv": 749,
	"./sv.js": 749,
	"./sw": 750,
	"./sw.js": 750,
	"./ta": 751,
	"./ta.js": 751,
	"./te": 752,
	"./te.js": 752,
	"./tet": 753,
	"./tet.js": 753,
	"./tg": 754,
	"./tg.js": 754,
	"./th": 755,
	"./th.js": 755,
	"./tk": 756,
	"./tk.js": 756,
	"./tl-ph": 757,
	"./tl-ph.js": 757,
	"./tlh": 758,
	"./tlh.js": 758,
	"./tr": 759,
	"./tr.js": 759,
	"./tzl": 760,
	"./tzl.js": 760,
	"./tzm": 761,
	"./tzm-latn": 762,
	"./tzm-latn.js": 762,
	"./tzm.js": 761,
	"./ug-cn": 763,
	"./ug-cn.js": 763,
	"./uk": 764,
	"./uk.js": 764,
	"./ur": 765,
	"./ur.js": 765,
	"./uz": 766,
	"./uz-latn": 767,
	"./uz-latn.js": 767,
	"./uz.js": 766,
	"./vi": 768,
	"./vi.js": 768,
	"./x-pseudo": 769,
	"./x-pseudo.js": 769,
	"./yo": 770,
	"./yo.js": 770,
	"./zh-cn": 771,
	"./zh-cn.js": 771,
	"./zh-hk": 772,
	"./zh-hk.js": 772,
	"./zh-mo": 773,
	"./zh-mo.js": 773,
	"./zh-tw": 774,
	"./zh-tw.js": 774
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 1245;

/***/ }),

/***/ 1246:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = buildWorkFlow;
function buildWorkFlow(links, nodes) {
    //节点样式
    var itemStyles = {
        '01': { color: '#5EADE7', borderColor: '#AFD6F3', borderWidth: 3 },
        '02': { color: '#70AD47', borderColor: '#C5E0B3', borderWidth: 3 },
        '03': { color: '#BFBFBF', borderColor: '#D8D8D8', borderWidth: 3 },
    };
    var symbolSize = 20;
    //根据节点状态动态修改节点name：把已完成节点和当前节点的name改为带用户名的name
    var objects = {};
    for (var i in nodes) {
        nodes[i]['children'] = [];
        nodes[i]['parents'] = [];
        nodes[i]['nodeName'] = nodes[i].name;
        if (nodes[i].status == '01') {
            nodes[i].statusText = '已完成';
        }
        else if (nodes[i].status == '02') {
            nodes[i].statusText = '执行中';
        }
        else {
            nodes[i].statusText = '未开始';
        }
        if (nodes[i].status == '01' || nodes[i].status == '02') {
            var newName = nodes[i].name + '\n' + nodes[i].user;
            for (var j in links) {
                if (links[j].source == nodes[i].name) {
                    links[j].source = newName;
                }
                if (links[j].target == nodes[i].name) {
                    links[j].target = newName;
                }
            }
            nodes[i].name = newName;
        }
        objects[nodes[i].name] = nodes[i];
    }
    //1. 对于死循环节点，设置线条为弧形，避免来回两条线条重合
    //2. 更新所有节点的父节点列表和子节点列表
    for (var i_1 = 0; i_1 < links.length; ++i_1) {
        for (var j_1 = i_1; j_1 < links.length; ++j_1) {
            if (links[i_1].source == links[j_1].target &&
                links[i_1].target == links[j_1].source) {
                links[i_1].lineStyle = { curveness: 0.2 };
                links[j_1].lineStyle = { curveness: 0.2 };
            }
        }
        objects[links[i_1].source].children.push(objects[links[i_1].target]);
        objects[links[i_1].target].parents.push(objects[links[i_1].source]);
    }
    //找到根节点，根节点只能有一个
    var root = null;
    for (var i in objects) {
        if (objects[i].parents.length == 0) {
            root = objects[i];
        }
    }
    root.level = 0;
    root.back = false;
    root.x = 0;
    root.y = 0;
    function setLevel(parent, node) {
        for (var i in node.children) {
            //标记死循环节点
            node.back = parent != null && parent.name == node.children[i].name;
            //设置每个节点的级别，为了避免死循环，已经标记过的节点不重复标记
            if (node.children[i].level == null) {
                node.children[i].level = node.level + 1;
                if (parent == null || parent.name != node.children[i].name) {
                    setLevel(node, node.children[i]);
                }
            }
            else if (node.children[i].nodeType == '05' &&
                node.level >= node.children[i].level) {
                //05是正常结束节点，不会死循环也不会有子节点，正常情况下应该赋值到可能的最大层级
                node.children[i].level = node.level + 1;
            }
        }
    }
    setLevel(null, root);
    //按级别汇总节点对象
    var levels = {};
    for (var i in objects) {
        if (levels[objects[i].level] == undefined) {
            if (objects[i].back != true && objects[i].children.length > 0) {
                levels[objects[i].level] = {
                    main: objects[i],
                    others: [],
                };
                objects[i].main = true;
            }
            else {
                levels[objects[i].level] = {
                    main: null,
                    others: [objects[i]],
                };
            }
        }
        else {
            if (objects[i].back != true && objects[i].children.length > 0) {
                if (levels[objects[i].level].main != null) {
                    levels[objects[i].level].others.push(objects[i]);
                }
                else {
                    levels[objects[i].level].main = objects[i];
                    objects[i].main = true;
                }
            }
            else {
                levels[objects[i].level].others.push(objects[i]);
            }
        }
        //纵坐标按级别递增分配
        objects[i].y = objects[i].level * 5;
    }
    //横坐标在同一个级别内计算
    for (var i_2 in levels) {
        if (levels.hasOwnProperty(i_2)) {
            var offset = 0;
            //保持最长主线上的节点排成中间的纵向直线
            if (levels[i_2].main != null) {
                levels[i_2].main.x = 0;
                offset = 1;
            }
            //修正结束节点未标记为main的问题
            if (levels[i_2].main == null && levels[i_2].others.length == 1) {
                levels[i_2].main = levels[i_2].others[0];
                levels[i_2].main.main = true;
            }
            //非最长主线上的节点在主线两层顺序展开
            for (var j_2 in levels[i_2].others) {
                if (levels[i_2].others.hasOwnProperty(j_2)) {
                    if (parseInt(j_2) % 2 == 0) {
                        levels[i_2].others[j_2].x = (parseInt(j_2) + offset) * 10;
                    }
                    else {
                        levels[i_2].others[j_2].x = (parseInt(j_2) + offset - 1) * -10;
                    }
                }
            }
        }
    }
    //创建图表用的nodes
    var datas = [];
    for (var i in objects) {
        datas.push({
            name: objects[i].name,
            x: objects[i].x,
            y: objects[i].y,
            itemStyle: itemStyles[objects[i].status],
            user: objects[i].user,
            nodeName: objects[i].nodeName,
            statusText: objects[i].statusText,
        });
    }
    //主线上如果有多条相互重叠在一起的连线，则把其中跨级别的变成弧线
    for (var i in links) {
        if (objects[links[i].source].main && objects[links[i].target].main) {
            if (objects[links[i].source].level < objects[links[i].target].level - 1) {
                links[i].lineStyle = { curveness: -0.3 };
            }
            if (objects[links[i].source].level > objects[links[i].target].level) {
                links[i].lineStyle = { curveness: 0.3 };
            }
        }
    }
    //////////////////////////////////////////////////////////////////
    // 指定图表的配置项和数据
    var option = (option = {
        backgroundColor: 'rgba(255,255,255,0)',
        tooltip: {
            formatter: function (param) {
                if (param.dataType == 'node') {
                    return ('节点: ' +
                        param.data.nodeName +
                        '</br>用户: ' +
                        param.data.user +
                        '</br>状态: ' +
                        param.data.statusText +
                        '</br>');
                }
                else {
                    return null;
                }
            },
        },
        //animationDurationUpdate: 1500,
        //animationEasingUpdate: 'quinticInOut',
        series: [
            {
                type: 'graph',
                roam: false,
                layout: 'none',
                draggable: true,
                focusNodeAdjacency: true,
                symbol: 'circle',
                symbolSize: symbolSize,
                label: {
                    show: true,
                    position: 'right',
                    color: '#727272',
                },
                edgeSymbol: ['circle', 'arrow'],
                edgeSymbolSize: [4, 8],
                lineStyle: {},
                data: datas,
                // links: [],
                links: links,
            },
        ],
    });
    return option;
}
//# sourceMappingURL=work-flow.chart.js.map

/***/ }),

/***/ 1247:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = buildWorkFlow;
function buildWorkFlow(links, nodes) {
    //节点样式
    var itemStyles = {
        '01': { color: '#5EADE7', borderColor: '#AFD6F3', borderWidth: 3 },
        '02': { color: '#70AD47', borderColor: '#C5E0B3', borderWidth: 3 },
        '03': { color: '#BFBFBF', borderColor: '#D8D8D8', borderWidth: 3 }
    };
    var symbolSize = 20;
    //根据节点状态动态修改节点name：把已完成节点和当前节点的name改为带用户名的name
    var objects = {};
    for (var i in nodes) {
        nodes[i]['children'] = [];
        nodes[i]['parents'] = [];
        nodes[i]['nodeName'] = nodes[i].name;
        if (nodes[i].status == '01') {
            nodes[i].statusText = '已完成';
        }
        else if (nodes[i].status == '02') {
            nodes[i].statusText = '执行中';
        }
        else {
            nodes[i].statusText = '未开始';
        }
        if (nodes[i].status == '01' || nodes[i].status == '02') {
            var newName = nodes[i].name + '\n' + nodes[i].user;
            for (var j in links) {
                if (links[j].source == nodes[i].name) {
                    links[j].source = newName;
                }
                if (links[j].target == nodes[i].name) {
                    links[j].target = newName;
                }
            }
            nodes[i].name = newName;
        }
        objects[nodes[i].name] = nodes[i];
    }
    //1. 对于死循环节点，设置线条为弧形，避免来回两条线条重合
    //2. 更新所有节点的父节点列表和子节点列表
    for (var i_1 = 0; i_1 < links.length; ++i_1) {
        for (var j_1 = i_1; j_1 < links.length; ++j_1) {
            if (links[i_1].source == links[j_1].target &&
                links[i_1].target == links[j_1].source) {
                links[i_1].lineStyle = { curveness: 0.2 };
                links[j_1].lineStyle = { curveness: 0.2 };
            }
        }
        objects[links[i_1].source].children.push(objects[links[i_1].target]);
        objects[links[i_1].target].parents.push(objects[links[i_1].source]);
    }
    //找到根节点，根节点只能有一个
    var root = null;
    for (var i in objects) {
        if (objects[i].parents.length == 0) {
            root = objects[i];
        }
    }
    root.level = 0;
    root.back = false;
    root.x = 0;
    root.y = 0;
    function setLevel(parent, node) {
        for (var i in node.children) {
            //标记死循环节点
            node.back = parent != null && parent.name == node.children[i].name;
            //设置每个节点的级别，为了避免死循环，已经标记过的节点不重复标记
            if (node.children[i].level == null) {
                node.children[i].level = node.level + 1;
                if (parent == null || parent.name != node.children[i].name) {
                    setLevel(node, node.children[i]);
                }
            }
            else if (node.children[i].nodeType == '05' &&
                node.level >= node.children[i].level) {
                //05是正常结束节点，不会死循环也不会有子节点，正常情况下应该赋值到可能的最大层级
                node.children[i].level = node.level + 1;
            }
        }
    }
    setLevel(null, root);
    //按级别汇总节点对象
    var levels = {};
    for (var i in objects) {
        if (levels[objects[i].level] == undefined) {
            if (objects[i].back != true && objects[i].children.length > 0) {
                levels[objects[i].level] = {
                    main: objects[i],
                    others: []
                };
                objects[i].main = true;
            }
            else {
                levels[objects[i].level] = {
                    main: null,
                    others: [objects[i]]
                };
            }
        }
        else {
            if (objects[i].back != true && objects[i].children.length > 0) {
                if (levels[objects[i].level].main != null) {
                    levels[objects[i].level].others.push(objects[i]);
                }
                else {
                    levels[objects[i].level].main = objects[i];
                    objects[i].main = true;
                }
            }
            else {
                levels[objects[i].level].others.push(objects[i]);
            }
        }
        //纵坐标按级别递增分配
        objects[i].y = objects[i].level * 5;
    }
    //横坐标在同一个级别内计算
    for (var i_2 in levels) {
        if (levels.hasOwnProperty(i_2)) {
            var offset = 0;
            //保持最长主线上的节点排成中间的纵向直线
            if (levels[i_2].main != null) {
                levels[i_2].main.x = 0;
                offset = 1;
            }
            //修正结束节点未标记为main的问题
            if (levels[i_2].main == null && levels[i_2].others.length == 1) {
                levels[i_2].main = levels[i_2].others[0];
                levels[i_2].main.main = true;
            }
            //非最长主线上的节点在主线两层顺序展开
            for (var j_2 in levels[i_2].others) {
                if (levels[i_2].others.hasOwnProperty(j_2)) {
                    if (parseInt(j_2) % 2 == 0) {
                        levels[i_2].others[j_2].x = (parseInt(j_2) + offset) * 10;
                    }
                    else {
                        levels[i_2].others[j_2].x =
                            (parseInt(j_2) + offset - 1) * -10;
                    }
                }
            }
        }
    }
    //创建图表用的nodes
    var datas = [];
    for (var i in objects) {
        datas.push({
            name: objects[i].name,
            x: objects[i].x,
            y: objects[i].y,
            itemStyle: itemStyles[objects[i].status],
            user: objects[i].user,
            nodeName: objects[i].nodeName,
            statusText: objects[i].statusText
        });
    }
    //主线上如果有多条相互重叠在一起的连线，则把其中跨级别的变成弧线
    for (var i in links) {
        if (objects[links[i].source].main && objects[links[i].target].main) {
            if (objects[links[i].source].level <
                objects[links[i].target].level - 1) {
                links[i].lineStyle = { curveness: -0.3 };
            }
            if (objects[links[i].source].level > objects[links[i].target].level) {
                links[i].lineStyle = { curveness: 0.3 };
            }
        }
    }
    //////////////////////////////////////////////////////////////////
    // 指定图表的配置项和数据
    var option = (option = {
        tooltip: {
            formatter: function (param) {
                if (param.dataType == 'node') {
                    return ('节点: ' +
                        param.data.nodeName +
                        '</br>用户: ' +
                        param.data.user +
                        '</br>状态: ' +
                        param.data.statusText +
                        '</br>');
                }
                else {
                    return null;
                }
            }
        },
        //animationDurationUpdate: 1500,
        //animationEasingUpdate: 'quinticInOut',
        series: [
            {
                type: 'graph',
                roam: false,
                layout: 'none',
                draggable: true,
                focusNodeAdjacency: true,
                symbol: 'circle',
                symbolSize: symbolSize,
                label: {
                    show: true,
                    position: 'right',
                    color: '#727272'
                },
                edgeSymbol: ['circle', 'arrow'],
                edgeSymbolSize: [4, 8],
                lineStyle: {},
                data: datas,
                // links: [],
                links: links
            }
        ]
    });
    return option;
}
//# sourceMappingURL=work-flow.chart.js.map

/***/ }),

/***/ 1248:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = buildWorkFlow;
function buildWorkFlow(links, nodes) {
    //节点样式
    var itemStyles = {
        '01': { color: '#5EADE7', borderColor: '#AFD6F3', borderWidth: 3 },
        '02': { color: '#70AD47', borderColor: '#C5E0B3', borderWidth: 3 },
        '03': { color: '#BFBFBF', borderColor: '#D8D8D8', borderWidth: 3 }
    };
    var symbolSize = 20;
    //根据节点状态动态修改节点name：把已完成节点和当前节点的name改为带用户名的name
    var objects = {};
    for (var i in nodes) {
        nodes[i]['children'] = [];
        nodes[i]['parents'] = [];
        nodes[i]['nodeName'] = nodes[i].name;
        if (nodes[i].status == '01') {
            nodes[i].statusText = '已完成';
        }
        else if (nodes[i].status == '02') {
            nodes[i].statusText = '执行中';
        }
        else {
            nodes[i].statusText = '未开始';
        }
        if (nodes[i].status == '01' || nodes[i].status == '02') {
            var newName = nodes[i].name + '\n' + nodes[i].user;
            for (var j in links) {
                if (links[j].source == nodes[i].name) {
                    links[j].source = newName;
                }
                if (links[j].target == nodes[i].name) {
                    links[j].target = newName;
                }
            }
            nodes[i].name = newName;
        }
        objects[nodes[i].name] = nodes[i];
    }
    //1. 对于死循环节点，设置线条为弧形，避免来回两条线条重合
    //2. 更新所有节点的父节点列表和子节点列表
    for (var i_1 = 0; i_1 < links.length; ++i_1) {
        for (var j_1 = i_1; j_1 < links.length; ++j_1) {
            if (links[i_1].source == links[j_1].target &&
                links[i_1].target == links[j_1].source) {
                links[i_1].lineStyle = { curveness: 0.2 };
                links[j_1].lineStyle = { curveness: 0.2 };
            }
        }
        objects[links[i_1].source].children.push(objects[links[i_1].target]);
        objects[links[i_1].target].parents.push(objects[links[i_1].source]);
    }
    //找到根节点，根节点只能有一个
    var root = null;
    for (var i in objects) {
        if (objects[i].parents.length == 0) {
            root = objects[i];
        }
    }
    root.level = 0;
    root.back = false;
    root.x = 0;
    root.y = 0;
    function setLevel(parent, node) {
        for (var i in node.children) {
            //标记死循环节点
            node.back = parent != null && parent.name == node.children[i].name;
            //设置每个节点的级别，为了避免死循环，已经标记过的节点不重复标记
            if (node.children[i].level == null) {
                node.children[i].level = node.level + 1;
                if (parent == null || parent.name != node.children[i].name) {
                    setLevel(node, node.children[i]);
                }
            }
            else if (node.children[i].nodeType == '05' &&
                node.level >= node.children[i].level) {
                //05是正常结束节点，不会死循环也不会有子节点，正常情况下应该赋值到可能的最大层级
                node.children[i].level = node.level + 1;
            }
        }
    }
    setLevel(null, root);
    //按级别汇总节点对象
    var levels = {};
    for (var i in objects) {
        if (levels[objects[i].level] == undefined) {
            if (objects[i].back != true && objects[i].children.length > 0) {
                levels[objects[i].level] = {
                    main: objects[i],
                    others: []
                };
                objects[i].main = true;
            }
            else {
                levels[objects[i].level] = {
                    main: null,
                    others: [objects[i]]
                };
            }
        }
        else {
            if (objects[i].back != true && objects[i].children.length > 0) {
                if (levels[objects[i].level].main != null) {
                    levels[objects[i].level].others.push(objects[i]);
                }
                else {
                    levels[objects[i].level].main = objects[i];
                    objects[i].main = true;
                }
            }
            else {
                levels[objects[i].level].others.push(objects[i]);
            }
        }
        //纵坐标按级别递增分配
        objects[i].y = objects[i].level * 5;
    }
    //横坐标在同一个级别内计算
    for (var i_2 in levels) {
        if (levels.hasOwnProperty(i_2)) {
            var offset = 0;
            //保持最长主线上的节点排成中间的纵向直线
            if (levels[i_2].main != null) {
                levels[i_2].main.x = 0;
                offset = 1;
            }
            //修正结束节点未标记为main的问题
            if (levels[i_2].main == null && levels[i_2].others.length == 1) {
                levels[i_2].main = levels[i_2].others[0];
                levels[i_2].main.main = true;
            }
            //非最长主线上的节点在主线两层顺序展开
            for (var j_2 in levels[i_2].others) {
                if (levels[i_2].others.hasOwnProperty(j_2)) {
                    if (parseInt(j_2) % 2 == 0) {
                        levels[i_2].others[j_2].x = (parseInt(j_2) + offset) * 10;
                    }
                    else {
                        levels[i_2].others[j_2].x =
                            (parseInt(j_2) + offset - 1) * -10;
                    }
                }
            }
        }
    }
    //创建图表用的nodes
    var datas = [];
    for (var i in objects) {
        datas.push({
            name: objects[i].name,
            x: objects[i].x,
            y: objects[i].y,
            itemStyle: itemStyles[objects[i].status],
            user: objects[i].user,
            nodeName: objects[i].nodeName,
            statusText: objects[i].statusText
        });
    }
    //主线上如果有多条相互重叠在一起的连线，则把其中跨级别的变成弧线
    for (var i in links) {
        if (objects[links[i].source].main && objects[links[i].target].main) {
            if (objects[links[i].source].level <
                objects[links[i].target].level - 1) {
                links[i].lineStyle = { curveness: -0.3 };
            }
            if (objects[links[i].source].level > objects[links[i].target].level) {
                links[i].lineStyle = { curveness: 0.3 };
            }
        }
    }
    //////////////////////////////////////////////////////////////////
    // 指定图表的配置项和数据
    var option = (option = {
        tooltip: {
            formatter: function (param) {
                if (param.dataType == 'node') {
                    return ('节点: ' +
                        param.data.nodeName +
                        '</br>用户: ' +
                        param.data.user +
                        '</br>状态: ' +
                        param.data.statusText +
                        '</br>');
                }
                else {
                    return null;
                }
            }
        },
        //animationDurationUpdate: 1500,
        //animationEasingUpdate: 'quinticInOut',
        series: [
            {
                type: 'graph',
                roam: false,
                layout: 'none',
                draggable: true,
                focusNodeAdjacency: true,
                symbol: 'circle',
                symbolSize: symbolSize,
                label: {
                    show: true,
                    position: 'right',
                    color: '#727272'
                },
                edgeSymbol: ['circle', 'arrow'],
                edgeSymbolSize: [4, 8],
                lineStyle: {},
                data: datas,
                // links: [],
                links: links
            }
        ]
    });
    return option;
}
//# sourceMappingURL=work-flow.chart.js.map

/***/ }),

/***/ 1250:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = buildWorkFlow;
function buildWorkFlow(links, nodes) {
    //节点样式
    var itemStyles = {
        '01': { color: '#5EADE7', borderColor: '#AFD6F3', borderWidth: 3 },
        '02': { color: '#70AD47', borderColor: '#C5E0B3', borderWidth: 3 },
        '03': { color: '#BFBFBF', borderColor: '#D8D8D8', borderWidth: 3 }
    };
    var symbolSize = 20;
    //根据节点状态动态修改节点name：把已完成节点和当前节点的name改为带用户名的name
    var objects = {};
    for (var i in nodes) {
        nodes[i]['children'] = [];
        nodes[i]['parents'] = [];
        nodes[i]['nodeName'] = nodes[i].name;
        if (nodes[i].status == '01') {
            nodes[i].statusText = '已完成';
        }
        else if (nodes[i].status == '02') {
            nodes[i].statusText = '执行中';
        }
        else {
            nodes[i].statusText = '未开始';
        }
        if (nodes[i].status == '01' || nodes[i].status == '02') {
            var newName = nodes[i].name + '\n' + nodes[i].user;
            for (var j in links) {
                if (links[j].source == nodes[i].name) {
                    links[j].source = newName;
                }
                if (links[j].target == nodes[i].name) {
                    links[j].target = newName;
                }
            }
            nodes[i].name = newName;
        }
        objects[nodes[i].name] = nodes[i];
    }
    //1. 对于死循环节点，设置线条为弧形，避免来回两条线条重合
    //2. 更新所有节点的父节点列表和子节点列表
    for (var i_1 = 0; i_1 < links.length; ++i_1) {
        for (var j_1 = i_1; j_1 < links.length; ++j_1) {
            if (links[i_1].source == links[j_1].target &&
                links[i_1].target == links[j_1].source) {
                links[i_1].lineStyle = { curveness: 0.2 };
                links[j_1].lineStyle = { curveness: 0.2 };
            }
        }
        objects[links[i_1].source].children.push(objects[links[i_1].target]);
        objects[links[i_1].target].parents.push(objects[links[i_1].source]);
    }
    //找到根节点，根节点只能有一个
    var root = null;
    for (var i in objects) {
        if (objects[i].parents.length == 0) {
            root = objects[i];
        }
    }
    root.level = 0;
    root.back = false;
    root.x = 0;
    root.y = 0;
    function setLevel(parent, node) {
        for (var i in node.children) {
            //标记死循环节点
            node.back = parent != null && parent.name == node.children[i].name;
            //设置每个节点的级别，为了避免死循环，已经标记过的节点不重复标记
            if (node.children[i].level == null) {
                node.children[i].level = node.level + 1;
                if (parent == null || parent.name != node.children[i].name) {
                    setLevel(node, node.children[i]);
                }
            }
            else if (node.children[i].nodeType == '05' &&
                node.level >= node.children[i].level) {
                //05是正常结束节点，不会死循环也不会有子节点，正常情况下应该赋值到可能的最大层级
                node.children[i].level = node.level + 1;
            }
        }
    }
    setLevel(null, root);
    //按级别汇总节点对象
    var levels = {};
    for (var i in objects) {
        if (levels[objects[i].level] == undefined) {
            if (objects[i].back != true && objects[i].children.length > 0) {
                levels[objects[i].level] = {
                    main: objects[i],
                    others: []
                };
                objects[i].main = true;
            }
            else {
                levels[objects[i].level] = {
                    main: null,
                    others: [objects[i]]
                };
            }
        }
        else {
            if (objects[i].back != true && objects[i].children.length > 0) {
                if (levels[objects[i].level].main != null) {
                    levels[objects[i].level].others.push(objects[i]);
                }
                else {
                    levels[objects[i].level].main = objects[i];
                    objects[i].main = true;
                }
            }
            else {
                levels[objects[i].level].others.push(objects[i]);
            }
        }
        //纵坐标按级别递增分配
        objects[i].y = objects[i].level * 5;
    }
    //横坐标在同一个级别内计算
    for (var i_2 in levels) {
        if (levels.hasOwnProperty(i_2)) {
            var offset = 0;
            //保持最长主线上的节点排成中间的纵向直线
            if (levels[i_2].main != null) {
                levels[i_2].main.x = 0;
                offset = 1;
            }
            //修正结束节点未标记为main的问题
            if (levels[i_2].main == null && levels[i_2].others.length == 1) {
                levels[i_2].main = levels[i_2].others[0];
                levels[i_2].main.main = true;
            }
            //非最长主线上的节点在主线两层顺序展开
            for (var j_2 in levels[i_2].others) {
                if (levels[i_2].others.hasOwnProperty(j_2)) {
                    if (parseInt(j_2) % 2 == 0) {
                        levels[i_2].others[j_2].x = (parseInt(j_2) + offset) * 10;
                    }
                    else {
                        levels[i_2].others[j_2].x =
                            (parseInt(j_2) + offset - 1) * -10;
                    }
                }
            }
        }
    }
    //创建图表用的nodes
    var datas = [];
    for (var i in objects) {
        datas.push({
            name: objects[i].name,
            x: objects[i].x,
            y: objects[i].y,
            itemStyle: itemStyles[objects[i].status],
            user: objects[i].user,
            nodeName: objects[i].nodeName,
            statusText: objects[i].statusText
        });
    }
    //主线上如果有多条相互重叠在一起的连线，则把其中跨级别的变成弧线
    for (var i in links) {
        if (objects[links[i].source].main && objects[links[i].target].main) {
            if (objects[links[i].source].level <
                objects[links[i].target].level - 1) {
                links[i].lineStyle = { curveness: -0.3 };
            }
            if (objects[links[i].source].level > objects[links[i].target].level) {
                links[i].lineStyle = { curveness: 0.3 };
            }
        }
    }
    //////////////////////////////////////////////////////////////////
    // 指定图表的配置项和数据
    var option = (option = {
        tooltip: {
            formatter: function (param) {
                if (param.dataType == 'node') {
                    return ('节点: ' +
                        param.data.nodeName +
                        '</br>用户: ' +
                        param.data.user +
                        '</br>状态: ' +
                        param.data.statusText +
                        '</br>');
                }
                else {
                    return null;
                }
            }
        },
        //animationDurationUpdate: 1500,
        //animationEasingUpdate: 'quinticInOut',
        series: [
            {
                type: 'graph',
                roam: false,
                layout: 'none',
                draggable: true,
                focusNodeAdjacency: true,
                symbol: 'circle',
                symbolSize: symbolSize,
                label: {
                    show: true,
                    position: 'right',
                    color: '#727272'
                },
                edgeSymbol: ['circle', 'arrow'],
                edgeSymbolSize: [4, 8],
                lineStyle: {},
                data: datas,
                // links: [],
                links: links
            }
        ]
    });
    return option;
}
//# sourceMappingURL=work-flow.chart.js.map

/***/ }),

/***/ 1251:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UploadFilesComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_plugin_service__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_chooser__ = __webpack_require__(375);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_picker__ = __webpack_require__(97);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};








/**
 * Generated class for the UploadFilesComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var UploadFilesComponent = /** @class */ (function () {
    function UploadFilesComponent(appConfig, pluginservice, mutilservice, platform, fileChooser, filePicker) {
        this.appConfig = appConfig;
        this.pluginservice = pluginservice;
        this.mutilservice = mutilservice;
        this.platform = platform;
        this.fileChooser = fileChooser;
        this.filePicker = filePicker;
        this.orderId = null;
        this.docsEvent = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["EventEmitter"]();
        this.docs = [];
        this.docPermission = 2;
        console.log('Hello UploadFilesComponent Component');
        this.downloadUrl = this.appConfig.apiEndpoint + '/api/doc/download';
    }
    UploadFilesComponent.prototype.upload = function () {
        var _this = this;
        if (this.platform.is('android')) {
            this.fileChooser
                .open()
                .then(function (uri) {
                _this.pluginservice
                    .uploadDoc(uri, _this.orderId
                    ? '/api/workOrders/uploadDocs?orderId=' + _this.orderId
                    : '/api/workOrders/uploadDocs')
                    .then(function (res) {
                    _this.docs.push(res);
                    _this.docsEvent.emit(_this.docs);
                    _this.mutilservice.popToastView('上传成功');
                })
                    .catch(function (err) {
                    console.log(err);
                });
            })
                .catch(function (e) { return console.log(e); });
        }
        else {
            this.filePicker
                .pickFile()
                .then(function (uri) {
                _this.pluginservice
                    .uploadDoc(uri, _this.orderId
                    ? '/api/workOrders/uploadDocs?orderId=' + _this.orderId
                    : '/api/workOrders/uploadDocs')
                    .then(function (res) {
                    _this.docs.push(res.data);
                    _this.docsEvent.emit(_this.docs);
                    _this.mutilservice.popToastView('上传成功');
                });
            })
                .catch(function (err) { return console.log('Error', err); });
        }
    };
    UploadFilesComponent.prototype.download = function (docId, docName) {
        var _this = this;
        this.mutilservice.customPrompt({ msg: '确定下载该文件吗?' }, function () {
            _this.pluginservice.downloadFile(_this.downloadUrl + '?docId=' + docId, docName);
        });
    };
    UploadFilesComponent.prototype.deleteDoc = function (docId) {
        var _this = this;
        this.pluginservice.deleteDoc(docId).subscribe(function (res) {
            __WEBPACK_IMPORTED_MODULE_7_lodash__["remove"](_this.docs, function (img) {
                return img.docId === docId;
            });
            _this.mutilservice.popToastView('删除成功');
        });
    };
    UploadFilesComponent.prototype.decodeFileName = function (filename) {
        return decodeURI(filename);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], UploadFilesComponent.prototype, "orderId", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Output"])(),
        __metadata("design:type", Object)
    ], UploadFilesComponent.prototype, "docsEvent", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], UploadFilesComponent.prototype, "docs", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], UploadFilesComponent.prototype, "docPermission", void 0);
    UploadFilesComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'upload-files',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/upload-files/upload-files.html"*/'<ion-list-header no-lines>\n  文件\n  <button\n    ion-button\n    icon-only\n    item-end\n    clear\n    type="button"\n    (tap)="upload()"\n    *ngIf="docPermission!==0"\n  >\n    <ion-icon name="md-add"></ion-icon>\n  </button>\n</ion-list-header>\n\n<div class="doc-container" *ngIf="docs.length>0">\n  <ion-grid>\n    <ion-row>\n      <ion-col col-12 *ngFor="let doc of docs" class="doc-col">\n        <ion-icon class="file-icon" [name]="\'file\'"></ion-icon>\n        <span (tap)="download(doc.docId,doc.docName)"\n          >{{decodeFileName(doc.docName)}}</span\n        >\n        <!-- <img\n                    src="assets/imgs/buttons/remove.png"\n                    alt=""\n                    class="remove-icon"\n                    (tap)="deleteDoc(doc.docId)"\n                    *ngIf="docPermission===2"\n                /> -->\n        <ion-icon\n          *ngIf="docPermission===2"\n          class="remove-icon"\n          (tap)="deleteDoc(doc.docId)"\n          [name]="\'remove\'"\n        ></ion-icon>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</div>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/upload-files/upload-files.html"*/,
        }),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [Object, __WEBPACK_IMPORTED_MODULE_3__providers_util_plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_chooser__["a" /* FileChooser */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_picker__["a" /* IOSFilePicker */]])
    ], UploadFilesComponent);
    return UploadFilesComponent;
}());

//# sourceMappingURL=upload-files.js.map

/***/ }),

/***/ 1252:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UploadPicsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_plugin_service__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_image_picker__ = __webpack_require__(114);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_camera__ = __webpack_require__(96);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_picker__ = __webpack_require__(97);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_photo_viewer__ = __webpack_require__(98);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};










/**
 * Generated class for the UploadPicsComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var UploadPicsComponent = /** @class */ (function () {
    function UploadPicsComponent(appConfig, imagePicker, pluginservice, mutilservice, actionSheetCtrl, camera, platform, filePicker, photoViewer) {
        this.appConfig = appConfig;
        this.imagePicker = imagePicker;
        this.pluginservice = pluginservice;
        this.mutilservice = mutilservice;
        this.actionSheetCtrl = actionSheetCtrl;
        this.camera = camera;
        this.platform = platform;
        this.filePicker = filePicker;
        this.photoViewer = photoViewer;
        this.orderId = null;
        this.picsEvent = new __WEBPACK_IMPORTED_MODULE_3__angular_core__["EventEmitter"]();
        this.pics = [];
        this.picPermission = 0;
        console.log('Hello UploadPicsComponent Component');
        this.fileBasePath = this.appConfig.fileEndpoint;
    }
    UploadPicsComponent.prototype.chooseType = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: [
                {
                    text: '拍照',
                    handler: function () {
                        _this.takePhoto();
                    },
                },
                {
                    text: '从相册选择',
                    handler: function () {
                        _this.upload();
                    },
                },
                {
                    text: '取消',
                    handler: function () {
                        console.log('cancel');
                    },
                },
            ],
            cssClass: 'commonSheet',
        });
        actionSheet.present().then(function (value) {
            return value;
        });
    };
    UploadPicsComponent.prototype.takePhoto = function () {
        var _this = this;
        var options = {
            quality: 100,
            allowEdit: false,
            targetWidth: 200,
            targetHeight: 200,
            saveToPhotoAlbum: true,
        };
        this.camera.getPicture(options).then(function (image) {
            console.log('Image URI: ' + image);
            // this.avatar = image.slice(7);
            _this.pluginservice
                .uploadPic(image, _this.orderId
                ? '/api/workOrders/uploadPics?orderId=' + _this.orderId
                : '/api/workOrders/uploadPics')
                .then(function (res) {
                _this.pics.push(res.data);
                _this.picsEvent.emit(_this.pics);
            });
        }, function (error) {
            console.log('Error: ' + error);
        });
    };
    UploadPicsComponent.prototype.upload = function () {
        var _this = this;
        // if (this.platform.is('android')) {
        this.imagePicker.getPictures({ maximumImagesCount: 1, width: 200, height: 200 }).then(function (results) {
            _this.pluginservice
                .uploadPic(results[0], _this.orderId
                ? '/api/workOrders/uploadPics?orderId=' + _this.orderId
                : '/api/workOrders/uploadPics')
                .then(function (res) {
                console.log(res.data);
                _this.pics.push(res.data);
                _this.picsEvent.emit(_this.pics);
                _this.mutilservice.popToastView('上传成功');
            });
        }, function (err) {
            console.log(err);
        });
        // } else {
        //   this.filePicker
        //     .pickFile()
        //     .then((uri) => {
        //       this.pluginservice
        //         .uploadDoc(
        //           uri,
        //           this.orderId
        //             ? '/api/workOrders/uploadDocs?orderId=' + this.orderId
        //             : '/api/workOrders/uploadDocs',
        //         )
        //         .then((res: any) => {
        //           this.pics.push(res);
        //           this.picsEvent.emit(this.pics);
        //           this.mutilservice.popToastView('上传成功');
        //         });
        //     })
        //     .catch((err) => console.log('Error', err));
        // }
    };
    UploadPicsComponent.prototype.deletePic = function (docId) {
        var _this = this;
        this.pluginservice.deleteDoc(docId).subscribe(function (res) {
            __WEBPACK_IMPORTED_MODULE_7_lodash__["remove"](_this.pics, function (img) {
                return img.docId === docId;
            });
            _this.mutilservice.popToastView('删除成功');
        });
    };
    UploadPicsComponent.prototype.viewPic = function (url) {
        this.photoViewer.show(url);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], UploadPicsComponent.prototype, "orderId", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Output"])(),
        __metadata("design:type", Object)
    ], UploadPicsComponent.prototype, "picsEvent", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], UploadPicsComponent.prototype, "pics", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], UploadPicsComponent.prototype, "picPermission", void 0);
    UploadPicsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'upload-pics',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/upload-pics/upload-pics.html"*/'<ion-list-header no-lines>\n  照片\n  <button\n    *ngIf="picPermission!==0"\n    ion-button\n    icon-only\n    item-end\n    clear\n    type="button"\n    (tap)="chooseType()"\n  >\n    <ion-icon name="md-add"></ion-icon>\n  </button>\n</ion-list-header>\n\n<div class="img-container" *ngIf="pics.length>0">\n  <ion-grid>\n    <ion-row>\n      <ion-col col-2 *ngFor="let pic of pics" class="img-col">\n        <div class="img-item" *ngIf="pic.uri">\n          <img\n            [src]="fileBasePath+pic.uri"\n            alt=""\n            (click)="viewPic(fileBasePath+pic.uri)"\n          />\n          <span\n            class="delete-img"\n            (click)="deletePic(pic.docId)"\n            *ngIf="picPermission===2"\n          >\n            <ion-icon [name]="\'delete-grey\'"></ion-icon>\n          </span>\n        </div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</div>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/upload-pics/upload-pics.html"*/,
        }),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_6__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [Object, __WEBPACK_IMPORTED_MODULE_4__ionic_native_image_picker__["a" /* ImagePicker */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_picker__["a" /* IOSFilePicker */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_photo_viewer__["a" /* PhotoViewer */]])
    ], UploadPicsComponent);
    return UploadPicsComponent;
}());

//# sourceMappingURL=upload-pics.js.map

/***/ }),

/***/ 1253:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CcComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages_util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the CcComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var CcComponent = /** @class */ (function () {
    function CcComponent(modalCtrl) {
        this.modalCtrl = modalCtrl;
        this.users = [];
        this.ccPermission = 2;
        this.userEvent = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["EventEmitter"]();
        console.log('Hello CcComponent Component');
        console.log(this.users);
    }
    CcComponent.prototype.ngOnChanges = function (changes) {
        console.log(changes.users);
        // if(changes.users&&changes.users.currentV){
        // }
    };
    CcComponent.prototype.addUser = function () {
        var _this = this;
        var selectedItem = [];
        this.users.map(function (item) {
            selectedItem.push({
                userId: item['userId'],
                realName: item['userName'],
                icon: item['userIcon']
            });
        });
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_2__pages_util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: false,
            selectedItem: selectedItem
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.users = [];
                    data.value.map(function (item) {
                        _this.users.push({
                            userName: item.realName,
                            userIcon: item.icon,
                            userId: item.userId
                        });
                    });
                    _this.userEvent.emit(_this.users);
                }
            }
            else if (data && data.length === 0) {
            }
        });
        modal.present();
    };
    CcComponent.prototype.deleteUser = function (userId) {
        __WEBPACK_IMPORTED_MODULE_3_lodash__["remove"](this.users, function (o) { return o.userId === userId; });
        this.userEvent.emit(this.users);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], CcComponent.prototype, "users", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], CcComponent.prototype, "ccPermission", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Output"])(),
        __metadata("design:type", Object)
    ], CcComponent.prototype, "userEvent", void 0);
    CcComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'cc',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/cc/cc.html"*/'<ion-list-header no-lines>\n  抄送\n  <button\n    ion-button\n    icon-only\n    item-end\n    clear\n    type="button"\n    (tap)="addUser()"\n    *ngIf="ccPermission!==0"\n  >\n    <ion-icon name="md-add"></ion-icon>\n  </button>\n</ion-list-header>\n\n<div class="user-container" *ngIf="users.length>0">\n  <ion-grid>\n    <ion-row>\n      <ion-col col-3 *ngFor="let user of users; let i = index">\n        <div class="img-container">\n          <img src="assets/imgs/avatar/{{user.userIcon||\'00.png\'}}" />\n          <!-- <img\n                        (tap)="deleteUser(user.userId)"\n                        class="delete-user"\n                        src="assets/imgs/buttons/delete-grey.png"\n                        *ngIf="ccPermission===2"\n                    /> -->\n          <ion-icon\n            (tap)="deleteUser(user.userId)"\n            class="delete-user"\n            name="delete-grey"\n            *ngIf="ccPermission===2"\n          ></ion-icon>\n        </div>\n        <p>{{user.userName}}</p>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</div>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/cc/cc.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["n" /* ModalController */]])
    ], CcComponent);
    return CcComponent;
}());

//# sourceMappingURL=cc.js.map

/***/ }),

/***/ 1254:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommentComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_comment_comment__ = __webpack_require__(815);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the CommentComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var CommentComponent = /** @class */ (function () {
    function CommentComponent(commentprovider, mutilservice) {
        this.commentprovider = commentprovider;
        this.mutilservice = mutilservice;
        this.commentsList = [];
        this.orderId = null;
        console.log('Hello CommentComponent Component');
    }
    CommentComponent.prototype.ngOnChanges = function (changes) {
        if (changes.commentsList && changes.commentsList.currentValue) {
            this.commentsList = changes.commentsList.currentValue;
        }
    };
    CommentComponent.prototype.addComment = function () {
        var _this = this;
        if (!this.commentContent) {
            return this.mutilservice.popToastView('评论内容不能为空！');
        }
        this.commentprovider
            .addComment({
            orderId: this.orderId,
            comment: this.commentContent
        })
            .subscribe(function (res) {
            _this.commentsList.unshift(res);
            _this.commentContent = '';
            _this.mutilservice.popToastView('评论成功');
        });
    };
    CommentComponent.prototype.deleteComment = function (commentId) {
        var _this = this;
        this.commentprovider.deleteComment(commentId).subscribe(function (res) {
            __WEBPACK_IMPORTED_MODULE_3_lodash__["remove"](_this.commentsList, function (o) {
                return o.commentId == commentId;
            });
            _this.mutilservice.popToastView('删除成功');
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], CommentComponent.prototype, "commentsList", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Input"])(),
        __metadata("design:type", Object)
    ], CommentComponent.prototype, "orderId", void 0);
    CommentComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'comment',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/comment/comment.html"*/'<!-- Generated template for the CommentComponent component -->\n<div class="comment-container">\n    <ion-grid>\n        <ion-row *ngFor="let comment of commentsList">\n            <ion-col col-2 style="text-align: right;">\n                <img class="comment-icon" src="assets/imgs/avatar/{{comment.userIcon||\'00.png\'}}" />\n            </ion-col>\n            <ion-col col-10>\n                <p class="comment-info">\n                    {{comment.updaterName}}丨{{comment.updateTime | date:\'yyyy-MM-dd HH:mm\'}}\n                </p>\n                <div class="comment-content">\n                    {{comment.comment}}\n                    <ion-icon\n                        *ngIf="comment.deleteBtn"\n                        name="md-close"\n                        class="delete-icon"\n                        (tap)="deleteComment(comment.commentId)"\n                    ></ion-icon>\n                </div>\n            </ion-col>\n        </ion-row>\n        <ion-row>\n            <ion-col col-12>\n                <textarea cols="30" rows="3" [(ngModel)]="commentContent"></textarea>\n            </ion-col>\n            <ion-col col-12 class="comment-btn">\n                <button ion-button (tap)="addComment()">评论</button>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n</div>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/components/comment/comment.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__providers_comment_comment__["a" /* CommentProvider */], __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */]])
    ], CommentComponent);
    return CommentComponent;
}());

//# sourceMappingURL=comment.js.map

/***/ }),

/***/ 1255:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AllCompanys; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular_navigation_nav_params__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_backend_service__ = __webpack_require__(75);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var AllCompanys = /** @class */ (function () {
    function AllCompanys(navCtrl, backendService, navParams, events, viewCtrl) {
        this.navCtrl = navCtrl;
        this.backendService = backendService;
        this.navParams = navParams;
        this.events = events;
        this.viewCtrl = viewCtrl;
        this.stationList = [];
        this.returnPage = this.navParams.get('returnPage');
        // this.type = this.navParams.get('type');
        this.stationIds = this.navParams.get('stationIds');
    }
    AllCompanys.prototype.powerStation = function (index) {
        this.stationList[index]['hidePower'] = !this.stationList[index]['hidePower'];
    };
    AllCompanys.prototype.ionViewWillEnter = function () {
        this.getSampleStations();
    };
    AllCompanys.prototype.getSampleStations = function () {
        var _this = this;
        this.backendService.getSampleStations().subscribe(function (e) {
            if (e && e['content'] && e['content'].length > 0) {
                var _loop_1 = function (station) {
                    if (_this.stationIds) {
                        station['select'] = _this.stationIds.indexOf(station['stationId']) > -1;
                    }
                    var rs = _this.stationList.find(function (data) {
                        if (data && data['provinceId'] == station['provinceId']) {
                            if (!data['content']) {
                                data['content'] = [];
                            }
                            data['content'].push(station);
                            return true;
                        }
                    });
                    if (!rs) {
                        _this.stationList.push({ provinceId: station['provinceId'], provinceName: station['provinceName'], content: [station] });
                    }
                };
                for (var _i = 0, _a = e['content']; _i < _a.length; _i++) {
                    var station = _a[_i];
                    _loop_1(station);
                }
            }
        });
    };
    // 返回监控数据页面
    AllCompanys.prototype.returnMonitor = function () {
        var stationIds = '';
        for (var _i = 0, _a = this.stationList; _i < _a.length; _i++) {
            var station = _a[_i];
            var contents = station["content"];
            for (var _b = 0, contents_1 = contents; _b < contents_1.length; _b++) {
                var content = contents_1[_b];
                if (content.select) {
                    stationIds = stationIds + content.stationId + ',';
                }
            }
        }
        if (stationIds) {
            stationIds = stationIds.slice(0, stationIds.length - 1);
        }
        switch (this.returnPage) {
            case 'DefectsPage':
                this.viewCtrl.dismiss({ stationIds: stationIds, miss: true });
                // this.navCtrl.setRoot(RunLog,{content:content})
                break;
        }
    };
    AllCompanys.prototype.searchShow = function (name) {
        if (this.search == '' || !this.search)
            return true;
        return name.indexOf(this.search) >= 0;
    };
    AllCompanys.prototype.getStationNumber = function (station) {
        var num = 0;
        if (!station || !station["content"])
            return num;
        for (var _i = 0, _a = station["content"]; _i < _a.length; _i++) {
            var content = _a[_i];
            if (this.searchShow(content.shortName)) {
                num++;
            }
        }
        return num;
    };
    AllCompanys.prototype.select = function (content) {
        content.select = !content.select;
    };
    AllCompanys.prototype.resetModel = function () {
        // this.stationList  = [];
        // this.getSampleStations();
        for (var _i = 0, _a = (this.stationList || []); _i < _a.length; _i++) {
            var station = _a[_i];
            var contents = station["content"];
            for (var _b = 0, _c = (contents || []); _b < _c.length; _b++) {
                var content = _c[_b];
                content.select = false;
            }
        }
    };
    AllCompanys = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'allcompany',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/common/allCompany/all-companys.html"*/'<ion-content>\n  <div [ngSwitch]="pet">\n    <!-- 公司 -->\n    <ion-list >\n      <div *ngFor = \'let station of stationList;let i = index\'>\n        <button ion-item  (click) = "powerStation(i)">\n          {{station.provinceName}}({{getStationNumber(station)}})\n        </button> \n        <ion-list   *ngIf="station[\'hidePower\']" class="power-station" >\n          <ng-container *ngFor = \'let content of station["content"]\'>\n              <ion-item  ion-item  (click) = "select(content)" [class.active] = \'content.select\'>{{content.shortName}}</ion-item>\n          </ng-container>\n        </ion-list>\n    </div>\n    </ion-list>\n  </div>\n</ion-content>\n<ion-footer >\n  <div class="bnt">\n      <div class="bnt-left" (click) = \'resetModel()\'>重置</div>\n      <div class="bnt-left bnt-right" (click) = \'returnMonitor()\'>确定</div>            \n  </div>  \n</ion-footer>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/common/allCompany/all-companys.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_backend_service__["a" /* BackendService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular_navigation_nav_params__["a" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["w" /* ViewController */]])
    ], AllCompanys);
    return AllCompanys;
}());

//# sourceMappingURL=all-companys.js.map

/***/ }),

/***/ 1256:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = buildDeviceTopo;
function buildDeviceTopo(data, deviceId) {
    if (data) {
        if (data.data.deviceId === deviceId) {
            data.name = data.data.deviceName;
            data.itemStyle = {
                color: '#37A2DA',
                borderWidth: 0,
                borderColor: '#37A2DA'
            };
            if (data.children) {
                data.children.map(function (item) {
                    item.name = item.data.deviceName;
                    item.itemStyle = {
                        color: '#9FE6B8',
                        borderWidth: 8,
                        borderColor: '#9FE6B8'
                    };
                });
            }
        }
        else {
            data.name = data.data.deviceName;
            data.itemStyle = {
                color: '#9FE6B8',
                borderWidth: 0,
                borderColor: '#9FE6B8'
            };
            if (data.children) {
                data.children.map(function (item) {
                    item.name = item.data.deviceName;
                    item.itemStyle = {
                        color: '#37A2DA',
                        borderWidth: 8,
                        borderColor: '#37A2DA'
                    };
                    if (item.children) {
                        item.children.map(function (i) {
                            i.name = i.data.deviceName;
                            i.itemStyle = {
                                color: '#9FE6B8',
                                borderWidth: 0,
                                borderColor: '#9FE6B8'
                            };
                        });
                    }
                });
            }
        }
    }
    console.log({
        //color: ['#2196F3', '#FFC107', '#45A349', '#FF5722', '#9C27B0', '#7FBCEC', '#21C7E2', '#84A9C1', '#409E8F'],
        backgroundColor: 'rgba(255, 255, 255, 0)',
        tooltip: {
            trigger: 'none'
        },
        series: [
            {
                left: '20%',
                right: '20%',
                layout: 'orthogonal',
                orient: 'TB',
                type: 'tree',
                symbol: 'circle',
                symbolSize: 16,
                roam: true,
                initialTreeDepth: 2,
                itemStyle: {
                    borderWidth: 1
                },
                label: {
                    normal: {
                        position: 'top',
                        verticalAlign: 'middle',
                        align: 'center',
                        fontSize: 14
                    }
                },
                leaves: {
                    label: {
                        normal: {
                            rotate: 45,
                            position: 'top',
                            verticalAlign: 'middle',
                            align: 'center',
                            fontSize: 10
                        }
                    }
                },
                data: [data]
            }
        ]
    });
    return {
        //color: ['#2196F3', '#FFC107', '#45A349', '#FF5722', '#9C27B0', '#7FBCEC', '#21C7E2', '#84A9C1', '#409E8F'],
        backgroundColor: 'rgba(255, 255, 255, 0)',
        tooltip: {
            trigger: 'none'
        },
        series: [
            {
                left: '20%',
                right: '20%',
                layout: 'orthogonal',
                orient: 'TB',
                type: 'tree',
                symbol: 'circle',
                symbolSize: 16,
                roam: true,
                initialTreeDepth: 2,
                itemStyle: {
                    borderWidth: 1
                },
                label: {
                    normal: {
                        position: 'top',
                        verticalAlign: 'middle',
                        align: 'center',
                        fontSize: 14
                    }
                },
                leaves: {
                    label: {
                        normal: {
                            rotate: 45,
                            position: 'top',
                            verticalAlign: 'middle',
                            align: 'center',
                            fontSize: 10
                        }
                    }
                },
                data: [data]
            }
        ]
    };
}
//# sourceMappingURL=device-topo.chart.js.map

/***/ }),

/***/ 1257:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MeterialCondition; });
var MeterialCondition = /** @class */ (function () {
    function MeterialCondition() {
        this.size = '20';
        this.chose = '1';
    }
    return MeterialCondition;
}());

//# sourceMappingURL=material.condition.js.map

/***/ }),

/***/ 1258:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RunlogReq; });
var RunlogReq = /** @class */ (function () {
    function RunlogReq() {
    }
    return RunlogReq;
}());

//# sourceMappingURL=runlog-req.js.map

/***/ }),

/***/ 1259:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RunLog; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_sample_stations_resp__ = __webpack_require__(1260);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__common_allCompany_all_company__ = __webpack_require__(816);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular_navigation_nav_params__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_angular_components_alert_alert_controller__ = __webpack_require__(191);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_runlog_service__ = __webpack_require__(133);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_backend_service__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__edit_log_edit_log__ = __webpack_require__(836);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__angular_common__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__new_log_new_log__ = __webpack_require__(835);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





// import { NewLog } from '../new-log/new-log';







var RunLog = /** @class */ (function () {
    function RunLog(navCtrl, alertCtrl, navParams, event, backendService, runLogService, mutil) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.alertCtrl = alertCtrl;
        this.navParams = navParams;
        this.event = event;
        this.backendService = backendService;
        this.runLogService = runLogService;
        this.mutil = mutil;
        this.station = new __WEBPACK_IMPORTED_MODULE_0__models_sample_stations_resp__["a" /* SampleStationsRespContent */]();
        this.runLogs = [];
        this.pipe = new __WEBPACK_IMPORTED_MODULE_9__angular_common__["DatePipe"]('en-US');
        this.event.subscribe("RunLogSelect", function (e) {
            _this.station = e;
            _this.initLog(e);
        });
        this.event.subscribe("RunLogUpdate", function () {
            _this.initLog(_this.station);
        });
    }
    /**
     * 增
     */
    RunLog.prototype.newLog = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__new_log_new_log__["a" /* NewLog_old */], {
            station: this.station
        });
    };
    /**
     * 删
     * @param runlog
     */
    RunLog.prototype.delLog = function (runlog) {
        var _this = this;
        console.log("delete log:" + runlog.recordId);
        this.mutil.customPrompt({ msg: "确定删除？" }, function () {
            _this.runLogService.delLog(runlog.recordId).subscribe(function () {
                _this.runLogs = _this.runLogs.filter(function (v) { return v.recordId != runlog.recordId; });
            });
        });
        this.list.closeSlidingItems();
    };
    /**
     * 改
     * @param runlog
     */
    RunLog.prototype.editLog = function (runlog) {
        console.log("edit log:" + runlog.recordId);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__edit_log_edit_log__["a" /* EditLog */], { viewOnly: false, runlog: runlog });
        this.list.closeSlidingItems();
    };
    /**
     * 查
     * @param runlog
     */
    RunLog.prototype.logDetail = function (runlog) {
        console.log("view log:" + runlog.recordId);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__edit_log_edit_log__["a" /* EditLog */], { viewOnly: true, runlog: runlog });
    };
    RunLog.prototype.changeLocation = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_1__common_allCompany_all_company__["a" /* AllCompany */], { returnPage: "RunLog" });
    };
    RunLog.prototype.ionViewDidLoad = function () {
        var _this = this;
        this.backendService.getGroupInfo().then(function (e) {
            _this.groupName = e && e['stationName'] || '';
        });
        this.backendService.getSampleStations().subscribe(function (e) {
            if (e && e['content'] && e['content'].length > 0) {
                _this.station = e.content[0];
                _this.initLog(_this.station);
            }
        });
    };
    RunLog.prototype.initLog = function (station) {
        var _this = this;
        var toDate = this.pipe.transform(new Date(), 'yyyy-MM-dd');
        var fromDate = this.pipe.transform(new Date(new Date().getTime() - 31 * 24 * 3600 * 1000), 'yyyy-MM-dd');
        this.runLogService.listLog(station.stationId, fromDate, toDate, 0, 10).subscribe(function (rs) {
            if (rs && rs['content']) {
                _this.runLogs = rs.content;
            }
            console.log(_this.runLogs);
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["k" /* List */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["k" /* List */])
    ], RunLog.prototype, "list", void 0);
    RunLog = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'run-log',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/run-log/run-log.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>运行日志</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <div class="location" (click)="changeLocation()">\n        <img src="assets/imgs/home/local.png">\n        <span>{{groupName}}/</span>\n        <span>{{station.shortName}}</span>\n    </div>\n    <ion-list no-lines>\n        <ion-item-sliding *ngFor = \'let runLog of runLogs;let i = index\'>\n            <ion-item [class.target] = \'i%2 == 1\' (click)="logDetail(runLog)">\n                <div class="time">{{runLog.reportDate}}   {{runLog.recordTypeText}} <span class="name">{{runLog.recorderName}}</span></div>\n                <div class="content">{{runLog.memo}}</div>\n            </ion-item>\n            <ion-item-options>\n                <button ion-button color="primary" icon-start (click)="editLog(runLog)">\n                修改\n                </button>\n                <button ion-button color="danger" icon-start (click)="delLog(runLog)">\n                删除\n                </button>\n            </ion-item-options>\n        </ion-item-sliding>\n        <!-- <ion-item-sliding>\n            <ion-item>\n                <div class="time">2018/03/05   运行日志 <span>王某某</span></div>\n                <div class="content">今日阳光明媚，天气异常晴朗温度适中特编号，日辐射量：50.04MJ/MDGD，设施运行日志</div>\n            </ion-item>\n            <ion-item-options>\n                <button ion-button color="primary" icon-start>\n                修改\n                </button>\n                <button ion-button color="danger" icon-start>\n                删除\n                </button>\n            </ion-item-options>\n        </ion-item-sliding>-->\n    </ion-list>\n</ion-content>\n<ion-footer>\n   <button ion-button full (click) = "newLog()">新建日志</button>\n</ion-footer>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/run-log/run-log.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular_components_alert_alert_controller__["a" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular_navigation_nav_params__["a" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_7__providers_backend_service__["a" /* BackendService */],
            __WEBPACK_IMPORTED_MODULE_6__providers_runlog_service__["a" /* RunLogService */],
            __WEBPACK_IMPORTED_MODULE_10__providers_util_Mutil_service__["a" /* MutilService */]])
    ], RunLog);
    return RunLog;
}());

//# sourceMappingURL=run-log.js.map

/***/ }),

/***/ 126:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InspectionsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__inspections_menus_inspections_menus__ = __webpack_require__(557);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_inspections_service__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__util_common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__inspections_details_inspections_details__ = __webpack_require__(777);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_debounce_service__ = __webpack_require__(344);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












/**
 * Generated class for the InspectionsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 * 巡检单
 */
var InspectionsPage = /** @class */ (function () {
    function InspectionsPage(navCtrl, navParams, menuCtrl, events, modalCtrl, mutilservice, alertCtrl, popoverCtrl, inspectionsprovider, debounceservice) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.menuCtrl = menuCtrl;
        this.events = events;
        this.modalCtrl = modalCtrl;
        this.mutilservice = mutilservice;
        this.alertCtrl = alertCtrl;
        this.popoverCtrl = popoverCtrl;
        this.inspectionsprovider = inspectionsprovider;
        this.debounceservice = debounceservice;
        this.inspectionsList = [];
        this.showMenu = false;
        // 查询条件
        this.aQueryFlag = [
            { first: '01', second: '我的待办' },
            { first: '02', second: '我负责的' },
            { first: '03', second: '我参与的' },
            { first: '04', second: '抄送我的' },
        ];
        this.station = null;
        this.customStartTimePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.startTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.customEndTimePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.endTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.responsiblePerson = null;
        this.equipment = null;
        this.searchParams = {
            queryFlag: null,
            startTime: __WEBPACK_IMPORTED_MODULE_5_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: __WEBPACK_IMPORTED_MODULE_5_moment__().format('YYYY-MM-DD'),
            ispectionCode: null,
            stationId: null,
            responsiblePerson: null,
        };
        this.page = 0;
        this.size = 10;
        console.log("constructor:-navParams:");
        console.log(navParams);
        var d = this.navParams.get('startDate');
        if (d) {
            this.searchParams.startTime = __WEBPACK_IMPORTED_MODULE_5_moment__(d)
                .startOf('month')
                .format('YYYY-MM-DD');
            this.searchParams.endTime = __WEBPACK_IMPORTED_MODULE_5_moment__(d).endOf('month').format('YYYY-MM-DD');
        }
        this.searchParams.queryFlag = this.navParams.get('queryFlag');
    }
    InspectionsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad InspectionsPage');
        if (this.navParams.get('stationId')) {
            this.station = {
                title: this.navParams.get('stationName'),
                id: this.navParams.get('stationId'),
            };
            this.searchParams.stationId = this.navParams.get('stationId');
        }
        this.equipment = this.navParams.get('equipment');
        this.searchParams.equipment = this.equipment;
        this.getInspectionsList(true);
    };
    InspectionsPage.prototype.ionViewWillEnter = function () {
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.freshPage = false;
            this.getInspectionsList(true);
        }
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.navParams.data.equipmentList = [];
            if (equipmentList.length > 0) {
                this.equipment = equipmentList[0];
                this.searchParams.equipment = this.equipment;
            }
            else {
                this.equipment = null;
                this.searchParams.equipment = null;
            }
        }
    };
    // 获取巡检列表
    InspectionsPage.prototype.getInspectionsList = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            queryFlag: this.searchParams.queryFlag,
            ispectionCode: this.searchParams.ispectionCode,
            stationId: this.searchParams.stationId,
            startTime: this.searchParams.startTime ||
                __WEBPACK_IMPORTED_MODULE_5_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: this.searchParams.endTime || __WEBPACK_IMPORTED_MODULE_5_moment__().format('YYYY-MM-DD'),
            responsiblePerson: this.searchParams.responsiblePerson &&
                this.searchParams.responsiblePerson.userId,
            deviceId: (this.searchParams.equipment && this.searchParams.equipment.deviceId) ||
                null,
            page: this.page,
            size: this.size,
        };
        this.inspectionsprovider.getInspectionsList(params).subscribe(function (res) {
            if (res) {
                _this.inspectionsList = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    // 搜素
    InspectionsPage.prototype.searchMenu = function () {
        var _this = this;
        this.showMenu = true;
        setTimeout(function () {
            _this.menuCtrl.enable(true, 'search');
            _this.menuCtrl.open('search');
        }, 0);
    };
    //新增巡检单
    InspectionsPage.prototype.addInspections = function (myEvent) {
        var _this = this;
        this.popover = this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_0__inspections_menus_inspections_menus__["a" /* InspectionsMenusPage */], {}, {
            cssClass: 'inspectionsMenus',
            showBackdrop: true,
        });
        this.popover.onDidDismiss(function (res) {
            if (res) {
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__inspections_details_inspections_details__["a" /* InspectionsDetailsPage */], {
                    type: 'add',
                    inspectionType: res.type,
                });
            }
        });
        this.popover.present({
            ev: myEvent,
        });
    };
    // 下拉刷新
    InspectionsPage.prototype.doRefresh = function (refresher) {
        this.debounceservice.throttle(this.getInspectionsList(true, refresher), 2000);
        // this.getInspectionsList(true, refresher);
    };
    /**
   * 节流方法
   * @param infiniteScroll 节流的事件
   * @param delay 节流的毫秒数
   */
    InspectionsPage.prototype.deBounceFnc = function (infiniteScroll, delay) {
        var _this = this;
        var timer = null;
        if (timer) {
            return false;
        }
        timer = setTimeout(function () {
            timer = null;
            _this.doInfinite(infiniteScroll);
            // fn.apply(ctx, args);
        }, delay);
    };
    // 加载更多
    InspectionsPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            queryFlag: this.searchParams.queryFlag,
            ispectionCode: this.searchParams.ispectionCode,
            stationId: this.searchParams.stationId,
            startTime: this.searchParams.startTime ||
                __WEBPACK_IMPORTED_MODULE_5_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: this.searchParams.endTime || __WEBPACK_IMPORTED_MODULE_5_moment__().format('YYYY-MM-DD'),
            responsiblePerson: this.searchParams.responsiblePerson &&
                this.searchParams.responsiblePerson.userId,
            deviceId: (this.searchParams.equipment && this.searchParams.equipment.deviceId) ||
                null,
            page: this.page,
            size: this.size,
        };
        this.inspectionsprovider
            .getInspectionsList(__assign({}, params))
            .subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.inspectionsList = _this.inspectionsList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.inspectionsList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    // 查看/编辑 巡检单
    InspectionsPage.prototype.editInspections = function (id, type) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__inspections_details_inspections_details__["a" /* InspectionsDetailsPage */], {
            inspectionId: id,
            inspectionType: type,
        });
    };
    // 快速查询
    InspectionsPage.prototype.selectQuickSearch = function (type) {
        if (this.searchParams.queryFlag === type) {
            this.searchParams.queryFlag = null;
        }
        else {
            this.searchParams.queryFlag = type;
        }
        this.menuCtrl.close('search');
        this.getInspectionsList(true);
    };
    // 电站选择
    InspectionsPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.station = e;
                _this.searchParams.stationId = e.id;
            }
        });
        modal.present({ keyboardClose: true });
    };
    // 清除电站
    InspectionsPage.prototype.clearStation = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchParams.stationId = null;
        this.station = null;
    };
    // 负责人
    InspectionsPage.prototype.selectUser = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.responsiblePerson = data.value[0];
                    _this.searchParams.responsiblePerson = _this.responsiblePerson;
                }
            }
        });
        modal.present();
    };
    InspectionsPage.prototype.clearUser = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchParams.responsiblePerson = null;
        this.responsiblePerson = null;
    };
    InspectionsPage.prototype.selectEquipment = function () {
        var equipment = this.equipment ? [this.equipment] : [];
        if (!this.station) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            stationId: this.station.id,
            isSingle: true,
            selectedItem: equipment,
        });
    };
    InspectionsPage.prototype.clearEquipment = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.equipment = null;
        this.searchParams.equipment = null;
    };
    // 查询按钮
    InspectionsPage.prototype.ok = function () {
        if (this.searchParams.startTime &&
            this.searchParams.endTime &&
            __WEBPACK_IMPORTED_MODULE_5_moment__(this.searchParams.startTime).valueOf() >
                __WEBPACK_IMPORTED_MODULE_5_moment__(this.searchParams.endTime).valueOf()) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选巡检时间范围不正确',
                buttons: ['确定'],
            });
            alert_1.present();
            return;
        }
        this.menuCtrl.close('search');
        this.getInspectionsList(true);
    };
    InspectionsPage.prototype.reset = function () {
        this.equipment = null;
        this.station = null;
        this.searchParams = {
            queryFlag: null,
            ispectionCode: null,
            stationId: null,
            startTime: __WEBPACK_IMPORTED_MODULE_5_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: __WEBPACK_IMPORTED_MODULE_5_moment__().format('YYYY-MM-DD'),
            responsiblePerson: null,
            deviceId: null,
        };
    };
    InspectionsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["Component"])({
            selector: 'page-inspections',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections/inspections.html"*/'<!--\n  Generated template for the InspectionsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>巡检单</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="searchMenu()">\n        <ion-icon name="search" style="font-size: 1.4em"></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="addInspections($event)">\n        <ion-icon name="add-square" style="font-size: 1.4em"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding class="card-list" #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div class="card-item" *ngFor="let inspectionsItem of inspectionsList">\n      <div class="left-line">\n        <div class="line-icon"></div>\n      </div>\n      <div class="right-content">\n        <div class="title">{{inspectionsItem.time}}</div>\n        <ion-card\n          (click)="editInspections(inspectionsItem.id,inspectionsItem.type)"\n        >\n          <ion-card-header>\n            {{inspectionsItem.title}}\n            <span\n              *ngIf="inspectionsItem.status"\n              class="inspectionsItem-info"\n              [ngClass]="{\'inspectionsItem-01\': inspectionsItem.status===\'已完成\',\'inspectionsItem-02\': inspectionsItem.status===\'处理中\',\'inspectionsItem-03\': inspectionsItem.status===\'未开始\',\'inspectionsItem-04\': inspectionsItem.status===\'未分配\'}"\n              >{{inspectionsItem.status}}</span\n            ></ion-card-header\n          >\n          <ul class="ion-card-content">\n            <li class="ell">{{inspectionsItem.item1}}</li>\n            <li class="ell">{{inspectionsItem.item2}}</li>\n            <li class="ell">{{inspectionsItem.item4}}</li>\n          </ul>\n          <!-- <div\n            *ngIf="inspectionsItem.status"\n            class="card-tip"\n            [style.background-color]="inspectionsItem.statusStyle"\n          >\n            {{inspectionsItem.status}}\n          </div> -->\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="deBounceFnc($event, 2000)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n\n<ng-container *ngIf="showMenu">\n  <ion-menu\n    [content]="search"\n    side="right"\n    id="search"\n    type="overlay"\n    [swipeEnabled]="true"\n    class="search-menu"\n  >\n    <ion-content class="outer-content" no-bounce>\n      <div class="common-search-container">\n        <div class="common-search">\n          <div class="select-picker border-bottom">\n            <div class="query-label">快速查询</div>\n            <ion-grid>\n              <ion-row>\n                <ion-col col-4 *ngFor="let item of aQueryFlag">\n                  <div\n                    class="select-option"\n                    [ngClass]="{\'active-option\': searchParams.queryFlag===item.first}"\n                    (click)="selectQuickSearch(item.first)"\n                  >\n                    {{item.second}}\n                  </div></ion-col\n                >\n              </ion-row>\n            </ion-grid>\n          </div>\n          <div class="input-picker border-bottom">\n            <div class="query-label">巡检单号</div>\n            <ion-input\n              type="text"\n              [(ngModel)]="searchParams.ispectionCode"\n            ></ion-input>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">电站</div>\n            <button\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectStation()"\n            >\n              {{(station?.title)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="station"\n                                (click)="clearStation($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="station"\n                (click)="clearStation($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="time-picker border-bottom">\n            <div class="query-label">巡检时间</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [(ngModel)]="searchParams.startTime"\n              [pickerOptions]="customStartTimePickerOptions"\n            ></ion-datetime>\n            <div class="line">-</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [pickerOptions]="customEndTimePickerOptions"\n              [(ngModel)]="searchParams.endTime"\n            ></ion-datetime>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">负责人</div>\n            <button ion-button round small color="light" (click)="selectUser()">\n              {{(responsiblePerson?.realName)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="responsiblePerson"\n                                (click)="clearUser($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="responsiblePerson"\n                (click)="clearUser($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="button-picker">\n            <div class="query-label">巡检设备</div>\n            <button\n              class="ell"\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectEquipment()"\n            >\n              {{(equipment?.deviceName)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="equipment"\n                                (click)="clearEquipment($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="equipment"\n                (click)="clearEquipment($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n        </div>\n        <ion-list>\n          <ion-row class="fix-bottom">\n            <ion-col col-6 text-center>\n              <button\n                ion-button\n                round\n                small\n                class="reset-btn"\n                color="light"\n                (click)="reset()"\n              >\n                重置\n              </button>\n            </ion-col>\n            <ion-col col-6 text-center>\n              <button ion-button round small class="query-btn" (click)="ok()">\n                查询\n              </button>\n            </ion-col>\n          </ion-row>\n        </ion-list>\n      </div>\n    </ion-content>\n  </ion-menu>\n</ng-container>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections/inspections.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["t" /* PopoverController */],
            __WEBPACK_IMPORTED_MODULE_1__providers_inspections_service__["a" /* InspectionsProvider */],
            __WEBPACK_IMPORTED_MODULE_10__providers_debounce_service__["a" /* DebounceService */]])
    ], InspectionsPage);
    return InspectionsPage;
}());

//# sourceMappingURL=inspections.js.map

/***/ }),

/***/ 1260:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export SampleStationsResp */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SampleStationsRespContent; });
var SampleStationsResp = /** @class */ (function () {
    function SampleStationsResp() {
    }
    return SampleStationsResp;
}());

var SampleStationsRespContent = /** @class */ (function () {
    function SampleStationsRespContent() {
    }
    return SampleStationsRespContent;
}());

//# sourceMappingURL=sample-stations-resp.js.map

/***/ }),

/***/ 1261:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ScanMessage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__warn_message_warn_message__ = __webpack_require__(176);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__equipment_message_equipment_message__ = __webpack_require__(90);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var ScanMessage = /** @class */ (function () {
    function ScanMessage(navCtrl) {
        this.navCtrl = navCtrl;
    }
    /**
     * 告警信息
     */
    ScanMessage.prototype.warnMessage = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__warn_message_warn_message__["a" /* WarnMessage */]);
    };
    /**
     * 设备检测信息
     */
    ScanMessage.prototype.equiMessage = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__equipment_message_equipment_message__["a" /* EquipmentMessage */]);
    };
    ScanMessage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'scan-message',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/scan-message/scan.message.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title></ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <div class="message" (click)="equiMessage()">\n        <img src="assets/imgs/home/shebei.png" />\n        <p>设备监视</p>\n    </div>\n    <div class="message" (click)="warnMessage()">\n        <img src="assets/imgs/home/gaojing.png"/>\n        <p>设备告警</p>\n    </div>\n    <div class="message">\n        <img src="assets/imgs/home/sbda.png" />\n        <p>设备档案</p>\n    </div>\n    <div class="message">\n        <img src="assets/imgs/home/shebeibug.png" />\n        <p>设备缺陷</p>\n    </div>\n    <div class="message">\n        <img src="assets/imgs/home/renwu.png" />\n        <p>运维任务</p>\n    </div>\n    <div class="message">\n        <img src="assets/imgs/home/bpbj.png" />\n        <p>备品备件</p>\n    </div>\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/scan-message/scan.message.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */]])
    ], ScanMessage);
    return ScanMessage;
}());

//# sourceMappingURL=scan.message.js.map

/***/ }),

/***/ 1262:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ToolPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__modal_check_warehouse_check_warehouse__ = __webpack_require__(351);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__modal_search_warehouse_search_warehouse__ = __webpack_require__(352);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__tool_borrow_tool_borrow__ = __webpack_require__(842);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tool_return_tool_return__ = __webpack_require__(843);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var ToolPage = /** @class */ (function () {
    function ToolPage(navCtrl, modalCtrl) {
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.kckind = false;
        this.wlkind = false;
    }
    //仓库筛选
    ToolPage.prototype.toWarehouse = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__modal_check_warehouse_check_warehouse__["a" /* CheckWarehouse */]);
    };
    //查找 TODO
    ToolPage.prototype.tomodal = function () {
        var searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_3__modal_search_warehouse_search_warehouse__["a" /* SearchWarehouse */], { type: "02" });
        searchModal.present();
    };
    //库存类别
    ToolPage.prototype.kctoggle = function () {
        this.kckind = !this.kckind;
        this.wlkind = false;
    };
    //物料类别
    ToolPage.prototype.wltoggle = function () {
        this.wlkind = !this.wlkind;
        this.kckind = false;
    };
    //弹框消失
    ToolPage.prototype.masktoggle = function () {
        this.wlkind = false;
        this.kckind = false;
    };
    //借用
    ToolPage.prototype.toBorrow = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__tool_borrow_tool_borrow__["a" /* ToolBorrow */]);
    };
    //归还
    ToolPage.prototype.toReturn = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__tool_return_tool_return__["a" /* ToolReturn */]);
    };
    ToolPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'tool-page',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/tool-page/tool-page.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>工具器</ion-title>\n    </ion-navbar>\n    <ion-icon name="search" class="search-icon" (click)=\'tomodal()\'></ion-icon>\n</ion-header>\n<ion-content>\n    <div class="sort-div-box">\n        <div class="sort-div" (click)="toWarehouse()">\n            <span class="sort_name">仓库筛选</span>\n            <span class="tirangle"></span>\n        </div>\n        <div class="sort-div" (click)="wltoggle()">\n            <span class="sort_name">工具类别</span>\n            <span class="tirangle"></span>\n        </div>\n        <div class="sort-div" (click)="kctoggle()">\n            <span class="sort_name">库存类别</span>\n            <span class="tirangle"></span>\n        </div>\n    </div>\n    <div class="mask" *ngIf="kckind||wlkind" (click)="masktoggle()"></div>\n    <div class="kucun-pop" *ngIf="kckind">\n        <ion-item>正常库存</ion-item>\n        <ion-item>异常库存</ion-item>\n    </div>\n    <div class="kucun-pop" *ngIf="wlkind">\n        <ion-item>物料类别1</ion-item>\n        <ion-item>物料类别2</ion-item>\n        <ion-item>物料类别3</ion-item>\n    </div>\n\n    <div>\n        <ion-list class="cango-list">\n            <ion-item-sliding #item>\n                <ion-item class="cango-item">\n                    <div class="wuliao-div">\n                        <span class="wl-name">物料名称</span>\n                        <span class="line1"></span>\n                        <span class="wl-num">料号KJ-0001</span>\n                    </div>\n                    <div class="wl-detail_box">\n                        <div class="wl-detail">所属仓库：仓库名称</div>\n                        <div class="wl-detail">规格型号：规格型号1</div>\n                        <div class="wl-detail">库存类别：<span class="color1">异常库存</span></div>\n                        <div class="wl-detail">物料数量：2000件</div>\n                    </div>\n                </ion-item>\n                <ion-item-options >\n                    <button ion-button class="chrku" (click)="toBorrow()">借用</button>\n                    <button ion-button class="chrku chkco" (click)="toReturn()">归还</button>\n                </ion-item-options>\n            </ion-item-sliding>\n        </ion-list>\n        <ion-list class="cango-list">\n                <ion-item-sliding #item>\n                    <ion-item class="cango-item">\n                        <div class="wuliao-div">\n                            <span class="wl-name">物料名称</span>\n                            <span class="line1"></span>\n                            <span class="wl-num">料号KJ-0001</span>\n                        </div>\n                        <div class="wl-detail_box">\n                            <div class="wl-detail">所属仓库：仓库名称</div>\n                            <div class="wl-detail">规格型号：规格型号1</div>\n                            <div class="wl-detail">库存类别：<span class="color2">异常库存</span></div>\n                            <div class="wl-detail">物料数量：2000件</div>\n                        </div>\n                    </ion-item>\n                    <ion-item-options >\n                        <button ion-button class="chrku">借用</button>\n                        <button ion-button class="chrku chkco">归还</button>\n                    </ion-item-options>\n                </ion-item-sliding>\n            </ion-list>\n            <ion-list class="cango-list">\n                    <ion-item-sliding #item>\n                        <ion-item class="cango-item">\n                            <div class="wuliao-div">\n                                <span class="wl-name">物料名称</span>\n                                <span class="line1"></span>\n                                <span class="wl-num">料号KJ-0001</span>\n                            </div>\n                            <div class="wl-detail_box">\n                                <div class="wl-detail">所属仓库：仓库名称</div>\n                                <div class="wl-detail">规格型号：规格型号1</div>\n                                <div class="wl-detail">库存类别：<span class="color1">异常库存</span></div>\n                                <div class="wl-detail">物料数量：2000件</div>\n                            </div>\n                        </ion-item>\n                        <ion-item-options >\n                            <button ion-button class="chrku">借用</button>\n                            <button ion-button class="chrku chkco">归还</button>\n                        </ion-item-options>\n                    </ion-item-sliding>\n                </ion-list>\n    </div>\n\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/tool-page/tool-page.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */]])
    ], ToolPage);
    return ToolPage;
}());

//# sourceMappingURL=tool-page.js.map

/***/ }),

/***/ 1263:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonDefectObjectsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__modal_defect_objects_defect_objects__ = __webpack_require__(844);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the CommonDefectObjectsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonDefectObjectsPage = /** @class */ (function () {
    function CommonDefectObjectsPage(navCtrl, navParams, viewCtrl, modalCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.modalCtrl = modalCtrl;
        this.defectObjects = [];
    }
    CommonDefectObjectsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonDefectObjectsPage');
        this.defectObjects = this.navParams.get('defectObjects');
        this.editable = this.navParams.get('editable') === false ? false : true;
    };
    CommonDefectObjectsPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonDefectObjectsPage.prototype.deleteDefectObject = function (event, index) {
        if (!this.editable) {
            return;
        }
        this.defectObjects.splice(index, 1);
    };
    CommonDefectObjectsPage.prototype.addObjects = function () {
        var _this = this;
        if (!this.editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_2__modal_defect_objects_defect_objects__["a" /* DefectObjectsPage */], {}, {
            cssClass: 'commonModal defectObjectModal',
            showBackdrop: true,
            enableBackdropDismiss: true
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                _this.defectObjects.push(data.value);
            }
            else {
            }
        });
        modal.present();
    };
    CommonDefectObjectsPage.prototype.commitObjects = function () {
        if (!this.editable) {
            this.viewCtrl.dismiss();
            return;
        }
        this.viewCtrl.dismiss({ value: this.defectObjects });
    };
    CommonDefectObjectsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-common-defect-objects',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-defect-objects/common-defect-objects.html"*/'<!--\n  Generated template for the CommonDefectObjectsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button icon-only (click)="close()">\n        <ion-icon name="arrow-back" style="color: #fff"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title> 其他设施 </ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <ion-grid class="obj-list">\n    <ion-row\n      class="obj-item"\n      *ngFor="let defectObject of defectObjects;let i = index;"\n    >\n      <ion-col col-10>\n        <p class="obj-name">{{defectObject.objName}}</p>\n        <p class="obj-company">厂家：{{defectObject.objCompany}}</p>\n        <p class="obj-provider">供应商：{{defectObject.objProvider}}</p>\n      </ion-col>\n      <ion-col col-2 class="delete-item">\n        <!-- <img\n                    src="assets/imgs/buttons/delete-grey.png"\n                    (click)="deleteDefectObject($event,i)"\n                /> -->\n        <ion-icon\n          (tap)="deleteDefectObject($event,i)"\n          name="delete-grey"\n        ></ion-icon>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar class="footer-bar">\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <button\n            ion-button\n            icon-end\n            small\n            outline\n            class="clear-btn"\n            color="light"\n            (click)="addObjects()"\n          >\n            添加\n          </button>\n        </ion-col>\n        <ion-col col-6>\n          <button ion-button small class="ok-btn" (click)="commitObjects()">\n            确定\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-defect-objects/common-defect-objects.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */]])
    ], CommonDefectObjectsPage);
    return CommonDefectObjectsPage;
}());

//# sourceMappingURL=common-defect-objects.js.map

/***/ }),

/***/ 1264:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return KeysPipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var KeysPipe = /** @class */ (function () {
    function KeysPipe() {
    }
    /**
     * Takes a value and makes it lowercase.
     */
    KeysPipe.prototype.transform = function (value, args) {
        var keys = [];
        for (var key in value) {
            keys.push({ key: key, value: value[key] });
        }
        return keys;
    };
    KeysPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
            name: 'keys',
        })
    ], KeysPipe);
    return KeysPipe;
}());

//# sourceMappingURL=keys.pipe.js.map

/***/ }),

/***/ 1265:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return httpInterceptorProviders; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(139);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__error_interceptor__ = __webpack_require__(1266);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__jwt_interceptor__ = __webpack_require__(1526);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__response_handler_interceptor__ = __webpack_require__(1527);




/** Http interceptor providers in outside-in order */
var httpInterceptorProviders = [
    { provide: __WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HTTP_INTERCEPTORS */], useClass: __WEBPACK_IMPORTED_MODULE_2__jwt_interceptor__["a" /* JwtInterceptor */], multi: true },
    {
        provide: __WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HTTP_INTERCEPTORS */],
        useClass: __WEBPACK_IMPORTED_MODULE_3__response_handler_interceptor__["a" /* ResponseHandlerInterceptor */],
        multi: true,
    },
    { provide: __WEBPACK_IMPORTED_MODULE_0__angular_common_http__["a" /* HTTP_INTERCEPTORS */], useClass: __WEBPACK_IMPORTED_MODULE_1__error_interceptor__["a" /* ErrorInterceptor */], multi: true },
];
//# sourceMappingURL=index.js.map

/***/ }),

/***/ 1266:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ErrorInterceptor; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs__ = __webpack_require__(845);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_operators__ = __webpack_require__(112);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_operators___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_operators__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util_Mutil_service__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var ErrorInterceptor = /** @class */ (function () {
    function ErrorInterceptor(mutilservice, events) {
        this.mutilservice = mutilservice;
        this.events = events;
    }
    ErrorInterceptor.prototype.intercept = function (request, next) {
        var _this = this;
        return next.handle(request).pipe(Object(__WEBPACK_IMPORTED_MODULE_3_rxjs_operators__["catchError"])(function (err) {
            var errorInfo = typeof err.error === 'object' ? err.error : JSON.parse(err.error);
            var error = errorInfo.message || err.statusText;
            if (err.status === 401 &&
                request.url.indexOf('/api/m/v2/framework/auth') !== -1) {
                return __WEBPACK_IMPORTED_MODULE_2_rxjs__["Observable"].throw('用户名或者密码错误');
            }
            else if (errorInfo.exception === 'com.cie.nems.common.exception.NemsException') {
                return __WEBPACK_IMPORTED_MODULE_2_rxjs__["Observable"].throw(errorInfo.message);
            }
            else if (errorInfo.exception ===
                'com.cie.nems.common.exception.SessionTimeoutException') {
                _this.events.publish('login:out');
                return __WEBPACK_IMPORTED_MODULE_2_rxjs__["Observable"].throw(error);
            }
            return __WEBPACK_IMPORTED_MODULE_2_rxjs__["Observable"].throw('系统错误，请联系管理员！');
        }));
    };
    ErrorInterceptor = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__util_Mutil_service__["a" /* MutilService */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */]])
    ], ErrorInterceptor);
    return ErrorInterceptor;
}());

//# sourceMappingURL=error-interceptor.js.map

/***/ }),

/***/ 127:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InspectionsProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util_Mutil_service__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




/*
  Generated class for the InspectionsProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var InspectionsProvider = /** @class */ (function () {
    function InspectionsProvider(http, appConfig, mutilservice) {
        this.http = http;
        this.appConfig = appConfig;
        this.mutilservice = mutilservice;
        this.inspectionsUrl = this.appConfig.apiEndpoint + '/api/m/v2/inspections';
        this.inspectionsTypesUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/inspections/types';
        this.inspectionsRemindUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/inspections/remind';
        this.inspectionsCheckUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/inspections/check';
        this.inspectionsTracksUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/inspections/tracks';
        this.inspectionObjUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/inspections/obj';
        this.inspectionObjItemhisUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/inspections/obj/itemhis';
    }
    InspectionsProvider.prototype.getInspectionsList = function (params) {
        return this.http.get(this.inspectionsUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    InspectionsProvider.prototype.getInspectionsTypes = function () {
        return this.http.get(this.inspectionsTypesUrl);
    };
    InspectionsProvider.prototype.getInspectionsDetails = function (inspectionId, params) {
        return this.http.get(this.inspectionsUrl + '/' + inspectionId, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    InspectionsProvider.prototype.inspectionsAction = function (params) {
        return this.http.post(this.inspectionsUrl, params);
    };
    InspectionsProvider.prototype.inspectionsUpdateAction = function (params) {
        return this.http.put(this.inspectionsUrl, params);
    };
    InspectionsProvider.prototype.deleteInspection = function (inspectionId) {
        return this.http.delete(this.inspectionsUrl, { params: { inspectionId: inspectionId } });
    };
    InspectionsProvider.prototype.getTracks = function (inspectionId) {
        return this.http.get(this.inspectionsTracksUrl, {
            params: { inspectionId: inspectionId },
        });
    };
    InspectionsProvider.prototype.saveTracks = function (inspectionId, params) {
        return this.http.put(this.inspectionsTracksUrl, params, {
            params: { inspectionId: inspectionId },
        });
    };
    InspectionsProvider.prototype.deleteObj = function (objId) {
        return this.http.delete(this.inspectionObjUrl + '?objId=' + objId);
    };
    InspectionsProvider.prototype.getObj = function (params) {
        return this.http.get(this.inspectionObjUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    InspectionsProvider.prototype.getObjItemHis = function (params) {
        return this.http.get(this.inspectionObjItemhisUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    InspectionsProvider.prototype.saveObj = function (params) {
        return this.http.post(this.inspectionObjUrl, params);
    };
    InspectionsProvider.prototype.check = function (params) {
        return this.http.put(this.inspectionsCheckUrl, params, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    InspectionsProvider.prototype.remind = function (inspectionId) {
        return this.http.put(this.inspectionsRemindUrl, { inspectionId: inspectionId }, {
            params: { inspectionId: inspectionId },
            responseType: 0,
        });
    };
    InspectionsProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__auth_http_service__["a" /* AuthHttpService */], Object, __WEBPACK_IMPORTED_MODULE_3__util_Mutil_service__["a" /* MutilService */]])
    ], InspectionsProvider);
    return InspectionsProvider;
}());

//# sourceMappingURL=inspections.service.js.map

/***/ }),

/***/ 128:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonCheckPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the CommonCheckPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonCheckPage = /** @class */ (function () {
    function CommonCheckPage(navCtrl, navParams, alertCtrl, viewCtrl, actionSheetCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.alertCtrl = alertCtrl;
        this.viewCtrl = viewCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.checkMemo = null;
        this.options = [];
        this.selectedOption = {
            checkStatus: null,
            checkStatusText: null
        };
    }
    CommonCheckPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonTextareaPage');
        this.options = this.navParams.get('options');
    };
    CommonCheckPage.prototype.checkResult = function () {
        var _this = this;
        var options = this.options;
        var buttons = options.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    _this.selectedOption = {
                        checkStatus: item.first,
                        checkStatusText: item.second
                    };
                }
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet'
        });
        actionSheet.present();
    };
    CommonCheckPage.prototype.ok = function () {
        if (!this.selectedOption.checkStatusText) {
            var alert_1 = this.alertCtrl.create({
                title: '警告',
                subTitle: "\u68C0\u67E5\u7ED3\u679C\u5FC5\u586B",
                buttons: ['确认']
            });
            alert_1.present();
            return;
        }
        if (this.checkMemo && this.checkMemo.length > 500) {
            var alert_2 = this.alertCtrl.create({
                title: '警告',
                subTitle: "\u68C0\u67E5\u5907\u6CE8\uFF0C\u4E0D\u8D85\u8FC7500\u5B57\u7B26",
                buttons: ['确认']
            });
            alert_2.present();
            return;
        }
        this.viewCtrl.dismiss({
            value: { checkStatus: this.selectedOption.checkStatus, checkMemo: this.checkMemo },
            type: 'ok'
        });
    };
    CommonCheckPage.prototype.clear = function () {
        this.viewCtrl.dismiss();
    };
    CommonCheckPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonCheckPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-common-check',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-check/common-check.html"*/'<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <h6>检查结果<b>*</b></h6>\n  <div class="check-result">\n    <ion-input\n      type="text"\n      [readonly]="true"\n      [(ngModel)]="selectedOption.checkStatusText"\n      (tap)="checkResult()"\n    ></ion-input>\n    <ion-icon name="ios-arrow-down"></ion-icon>\n  </div>\n  <h6>检查备注</h6>\n  <ion-textarea [(ngModel)]="checkMemo"></ion-textarea>\n  <ion-grid>\n    <ion-row>\n      <ion-col col-6>\n        <button\n          ion-button\n          small\n          color="light"\n          class="clear-btn"\n          (tap)="clear()"\n        >\n          取消\n        </button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button small class="ok-btn" (tap)="ok()">确定</button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-check/common-check.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */]])
    ], CommonCheckPage);
    return CommonCheckPage;
}());

//# sourceMappingURL=common-check.js.map

/***/ }),

/***/ 129:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RepairTicketDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__repair_ticket_repair_ticket__ = __webpack_require__(130);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_repair_tickets_service__ = __webpack_require__(231);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__util_common_teams_common_teams__ = __webpack_require__(783);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__util_common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__work_flow_chart__ = __webpack_require__(1247);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__util_modal_common_check_common_check__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__inventoris_inventoris_out_in_inventoris_out_in__ = __webpack_require__(173);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















/**
 * Generated class for the RepairTicketDetailsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var RepairTicketDetailsPage = /** @class */ (function () {
    function RepairTicketDetailsPage(navCtrl, navParams, repairticketsservice, fb, modalCtrl, actionSheetCtrl, mutilservice, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.repairticketsservice = repairticketsservice;
        this.fb = fb;
        this.modalCtrl = modalCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.mutilservice = mutilservice;
        this.alertCtrl = alertCtrl;
        this.toggleBaseInfo = true;
        this.toggleProcess = false;
        this.toggleProcessResult = false;
        this.toggleDefectInspection = false;
        this.toggleWorkFlow = false;
        this.toggleWorkflowLogs = false;
        this.toggleComment = false;
        this.buttonToggle = false;
        this.buttons = [];
        this.commentsList = [];
        this.ccUsers = [];
        this.orderId = null;
        this.initForm();
    }
    RepairTicketDetailsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad RepairTicketDetailsPage');
        this.ticketId = this.navParams.get('ticketId') ? this.navParams.get('ticketId') : 0;
        this.deviceId = this.navParams.get('deviceId') ? this.navParams.get('deviceId') : null;
        this.parentOrderId = this.navParams.get('parentOrderId')
            ? this.navParams.get('parentOrderId')
            : null;
        this.previousPageInfo = this.navParams.get('pageInfo');
        this.view = this.navParams.get('view');
        this.getRepairTicketsDetails();
    };
    RepairTicketDetailsPage.prototype.ionViewWillEnter = function () {
        var _this = this;
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.freshPage = false;
            this.getRepairTicketsDetails();
        }
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.navParams.data.equipmentList = [];
            var control_1 = this.form.get('repairDevices');
            while (control_1.length) {
                control_1.removeAt(control_1.length - 1);
            }
            var deviceText = equipmentList.map(function (item) {
                item.objId = item.deviceId;
                item.objName = item.displayName;
                item.psrId = item.psrId;
                item.deviceType = item.objType;
                control_1.push(_this.initDevice());
                return item.displayName;
            });
            this.form.get('repairDevices').patchValue(equipmentList);
            this.form.get('repairDevicesText').patchValue(deviceText.join(','));
        }
    };
    RepairTicketDetailsPage.prototype.initForm = function () {
        this.form = this.fb.group({
            ticketId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            ticketCode: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            parentOrderId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            customerId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            stationId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            responsiblePerson: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            responsiblePersonName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            creater: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            createrName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            teamId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            teamName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            teamUsers: this.fb.array([]),
            teamUsersText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](''),
            repairDevices: this.fb.array([]),
            repairDevicesText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](''),
            repairDesc: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            precautions: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            attentions: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            // 抢修许可
            extrPrecautions: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            permitUser: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            permitUserName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            permitTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            permitWorkTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            // 结果汇报
            startTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            endTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            workHours: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            repairStatus: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            repairStatusText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            resultDesc: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            reportTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            // 照片
            pics: this.fb.array([]),
            // 文件
            docs: this.fb.array([]),
            // 抢修单检查
            checkStatus: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checkStatusText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checker: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checkerName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checkTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checkMemo: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            // 工作流程
            workflow: this.fb.group({
                nodes: this.fb.array([]),
                links: this.fb.array([])
            }),
            // 流程日志
            workflowLogs: this.fb.array([]),
            //抄送
            ccUsers: this.fb.array([])
        });
    };
    RepairTicketDetailsPage.prototype.getRepairTicketsDetails = function () {
        var _this = this;
        this.repairticketsservice
            .getRepairTicketsDetails(this.ticketId, { deviceId: this.deviceId })
            .subscribe(function (res) {
            _this.title = res.title;
            _this.buttons = res.buttons;
            _this.fields = res.fields;
            var values = res.ticket;
            // 图片权限
            _this.picPermission = res.picPermission;
            // 文档权限
            _this.docPermission = res.docPermission;
            // 抄送权限
            _this.ccPermission = res.ccPermission;
            // 评论权限
            _this.commentPermission = res.commentPermission;
            _this.orderId = values.orderId;
            if (_this.parentOrderId) {
                values.parentOrderId = _this.parentOrderId;
            }
            if (_this.previousPageInfo) {
                values.stationId = _this.previousPageInfo.stationId;
                values.stationName = _this.previousPageInfo.stationName;
            }
            // 班组人员
            if (values.teamUsers !== null) {
                var control_2 = _this.form.get('teamUsers');
                while (control_2.length) {
                    control_2.removeAt(control_2.length - 1);
                }
                var teamUsers = values.teamUsers.map(function (item) {
                    control_2.push(_this.initTeamUsers());
                    return item.userName;
                });
                values.teamUsersText = teamUsers.join(',');
            }
            else {
                values.teamUsers = [];
            }
            // 抢修设备
            if (values.repairDevices !== null) {
                var control_3 = _this.form.get('repairDevices');
                while (control_3.length) {
                    control_3.removeAt(control_3.length - 1);
                }
                var deviceText = values.repairDevices.map(function (item) {
                    control_3.push(_this.initDevice());
                    return item.objName;
                });
                values.repairDevicesText = deviceText.join(',');
            }
            else {
                values.repairDevicesText = '';
                values.repairDevices = [];
            }
            // 许可同意时间
            values.permitTime = __WEBPACK_IMPORTED_MODULE_14_lodash__["isNumber"](values.permitTime)
                ? __WEBPACK_IMPORTED_MODULE_6_moment___default()(values.permitTime).format()
                : values.permitTime;
            // 许可抢修时间
            values.permitWorkTime = __WEBPACK_IMPORTED_MODULE_14_lodash__["isNumber"](values.permitWorkTime)
                ? __WEBPACK_IMPORTED_MODULE_6_moment___default()(values.permitWorkTime).format()
                : values.permitWorkTime;
            // 开始时间
            values.startTime = __WEBPACK_IMPORTED_MODULE_14_lodash__["isNumber"](values.startTime)
                ? __WEBPACK_IMPORTED_MODULE_6_moment___default()(values.startTime).format()
                : values.startTime;
            // 结束时间
            values.endTime = __WEBPACK_IMPORTED_MODULE_14_lodash__["isNumber"](values.endTime)
                ? __WEBPACK_IMPORTED_MODULE_6_moment___default()(values.endTime).format()
                : values.endTime;
            // 填写时间
            values.reportTime = __WEBPACK_IMPORTED_MODULE_14_lodash__["isNumber"](values.reportTime)
                ? __WEBPACK_IMPORTED_MODULE_6_moment___default()(values.reportTime).format()
                : values.reportTime;
            // 检查时间
            values.checkTime = __WEBPACK_IMPORTED_MODULE_14_lodash__["isNumber"](values.checkTime)
                ? __WEBPACK_IMPORTED_MODULE_6_moment___default()(values.checkTime).format()
                : values.checkTime;
            // 照片
            if (values.pics !== null) {
                var control_4 = _this.form.get('pics');
                while (control_4.length) {
                    control_4.removeAt(control_4.length - 1);
                }
                values.pics.map(function (item) {
                    control_4.push(_this.initDoc());
                });
            }
            else {
                values.pics = [];
            }
            // 文件
            if (values.docs !== null) {
                var control_5 = _this.form.get('docs');
                while (control_5.length) {
                    control_5.removeAt(control_5.length - 1);
                }
                values.docs.map(function (item) {
                    control_5.push(_this.initDoc());
                });
            }
            else {
                values.docs = [];
            }
            //工作流程
            if (values.workflow !== null) {
                var workflow = values.workflow;
                var _loop_1 = function (key) {
                    if (workflow.hasOwnProperty(key)) {
                        var element = workflow[key];
                        if (key === 'nodes') {
                            _this.nodes = element;
                            var control_6 = _this.form.get('workflow').controls[key];
                            while (control_6.length) {
                                control_6.removeAt(control_6.length - 1);
                            }
                            element.map(function (item) {
                                control_6.push(_this.initNodes());
                            });
                        }
                        else if (key === 'links') {
                            _this.links = element;
                            var control_7 = _this.form.get('workflow').controls[key];
                            while (control_7.length) {
                                control_7.removeAt(control_7.length - 1);
                            }
                            element.map(function (item) {
                                control_7.push(_this.initLinks());
                            });
                        }
                    }
                };
                for (var key in workflow) {
                    _loop_1(key);
                }
                _this.options = Object(__WEBPACK_IMPORTED_MODULE_13__work_flow_chart__["a" /* buildWorkFlow */])(_this.links, _this.nodes);
            }
            else {
                values.workflow = {};
            }
            // 流程日志
            if (values.workflowLogs) {
                var control_8 = _this.form.get('workflowLogs');
                while (control_8.length) {
                    control_8.removeAt(control_8.length - 1);
                }
                values.workflowLogs.map(function (item) {
                    control_8.push(_this.initWorkflowLogs());
                });
            }
            else {
                values.workflowLogs = [];
            }
            // 抄送
            if (values.ccUsers !== null) {
                var control_9 = _this.form.get('ccUsers');
                while (control_9.length) {
                    control_9.removeAt(control_9.length - 1);
                }
                values.ccUsers.map(function (item) {
                    control_9.push(_this.initCcUser());
                });
                _this.ccUsers = values.ccUsers;
            }
            else {
                _this.ccUsers = [];
                values.ccUsers = [];
            }
            if (values.comments !== null) {
                _this.commentsList = values.comments;
            }
            else {
                _this.commentsList = [];
                values.comments = [];
            }
            if (_this.view) {
                // 图片权限
                _this.picPermission = 0;
                // 文档权限
                _this.docPermission = 0;
                // 抄送权限
                _this.ccPermission = 0;
                // 评论权限
                _this.commentPermission = 0;
                for (var key in _this.fields) {
                    if (_this.fields.hasOwnProperty(key)) {
                        var element = _this.fields[key];
                        element.editable = false;
                    }
                }
                _this.buttons = [];
            }
            _this.form.patchValue(values);
        });
    };
    RepairTicketDetailsPage.prototype.openSheetModal = function (type, typeText) {
        var _this = this;
        var options = this.fields[type]['props'];
        var buttons = options.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    var _a;
                    _this.form.patchValue((_a = {},
                        _a[type] = item.first,
                        _a[typeText] = item.second,
                        _a));
                }
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet'
        });
        actionSheet.present();
    };
    RepairTicketDetailsPage.prototype.initWorkflowLogs = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            logId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            action: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            executeTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            flowId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            nextNodeId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            nextNodeName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            nodeId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            preNodeId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            preNodeName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    };
    // 电站选择
    RepairTicketDetailsPage.prototype.selectStation = function (event) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.form.patchValue({
                    stationId: e.id,
                    stationName: e.title
                });
            }
        });
        modal.present({ keyboardClose: true });
    };
    // 人员选择器
    RepairTicketDetailsPage.prototype.selectUser = function (id, name) {
        var _this = this;
        var value = this.form.value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
            selectedItem: [{ userId: value[id], userName: value[name] }]
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {},
                        _a[id] = data.value[0] ? data.value[0].userId : null,
                        _a[name] = data.value[0] ? data.value[0].realName : null,
                        _a));
                }
                else {
                    _this.form.patchValue((_b = {},
                        _b[id] = null,
                        _b[name] = null,
                        _b));
                }
            }
        });
        modal.present();
    };
    //班组
    RepairTicketDetailsPage.prototype.selectTeam = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_10__util_common_teams_common_teams__["a" /* CommonTeamsPage */], {
            team: this.team
        });
        modal.onDidDismiss(function (data) {
            if (data && data.type === 'ok') {
                _this.team = data.value;
                _this.form.patchValue({
                    teamId: _this.team.teamId,
                    teamName: _this.team.teamName
                });
                var control_10 = _this.form.get('teamUsers');
                while (control_10.length) {
                    control_10.removeAt(control_10.length - 1);
                }
                var teamUsers_1 = [];
                var teamUserText = _this.team.users.map(function (item) {
                    teamUsers_1.push({
                        userId: item.userId,
                        userName: item.userName,
                        account: item.account,
                        userIcon: item.userIcon,
                        deptName: item.deptName
                    });
                    control_10.push(_this.initTeamUsers());
                    return item.userName;
                });
                _this.form.get('teamUsersText').patchValue(teamUserText.join(','));
                _this.form.get('teamUsers').patchValue(teamUsers_1);
            }
            else if (data && data.type === 'clear') {
                _this.team = null;
                _this.form.patchValue({
                    teamId: _this.team.teamId,
                    teamName: _this.team.teamName,
                    teamUsersText: ''
                });
                var control = _this.form.get('teamUsers');
                while (control.length) {
                    control.removeAt(control.length - 1);
                }
            }
        });
        modal.present();
    };
    // 班组人员
    RepairTicketDetailsPage.prototype.selectTeamUsers = function (event, editable) {
        var _this = this;
        var value = this.form.value;
        var selectedItem = [];
        value.teamUsers.map(function (item) {
            selectedItem.push({
                userId: item.userId,
                realName: item.userName,
                userName: item.account,
                icon: item.userIcon,
                deptName: item.deptName
            });
        });
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: false,
            selectedItem: selectedItem,
            editable: editable
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    var control_11 = _this.form.get('teamUsers');
                    while (control_11.length) {
                        control_11.removeAt(control_11.length - 1);
                    }
                    var teamUsers_2 = [];
                    var teamUserText = data.value.map(function (item) {
                        teamUsers_2.push({
                            userId: item.userId,
                            userName: item.realName,
                            account: item.userName,
                            userIcon: item.icon,
                            deptName: item.deptName
                        });
                        control_11.push(_this.initTeamUsers());
                        return item.realName;
                    });
                    _this.form.get('teamUsers').patchValue(teamUsers_2);
                    _this.form.get('teamUsersText').patchValue(teamUserText.join(','));
                }
            }
            else if (data && data.length === 0) {
                _this.form.patchValue({
                    teamUsersText: '',
                    teamUsers: []
                });
            }
        });
        modal.present();
    };
    RepairTicketDetailsPage.prototype.initTeamUsers = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            account: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userIcon: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deptName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    };
    //选择设备
    RepairTicketDetailsPage.prototype.selectEquipment = function (editable) {
        if (!this.form.value.stationId) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        var selectedItem = [];
        if (this.form.value.repairDevices !== null) {
            this.form.value.repairDevices.map(function (item) {
                selectedItem.push({
                    deviceId: item.objId,
                    displayName: item.objName,
                    psrId: item.psrId,
                    objType: item.deviceType
                });
            });
        }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            stationId: this.form.value.stationId,
            isSingle: false,
            selectedItem: selectedItem,
            editable: editable
        });
    };
    // 多行文本内容
    RepairTicketDetailsPage.prototype.addTextarea = function (title, key, editable) {
        var _this = this;
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_12__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: title,
            value: this.form.value[key]
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {}, _a[key] = data.value, _a));
                }
                else if (data.type == 'clear') {
                    _this.form.patchValue((_b = {}, _b[key] = null, _b));
                }
            }
        });
        modal.present();
    };
    RepairTicketDetailsPage.prototype.openInputModal = function (type, editable) {
        var _this = this;
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_modal_common_input_common_input__["a" /* CommonInputPage */], {
            value: this.form.value[type],
            title: this.fields[type]['name']
        }, {
            cssClass: 'commonModal commonInputModal',
            showBackdrop: true,
            enableBackdropDismiss: true
        });
        modal.onDidDismiss(function (data) {
            var _a;
            if (data) {
                _this.form.patchValue((_a = {},
                    _a[type] = data.value ? parseFloat(data.value) : null,
                    _a));
            }
        });
        modal.present();
    };
    // 初始化 缺陷设备form
    RepairTicketDetailsPage.prototype.initDevice = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            objCompany: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            objId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            objName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            objProvider: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            objType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            psrId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            psrName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            relaId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    };
    RepairTicketDetailsPage.prototype.setPics = function (data) {
        var _this = this;
        var value = this.form.value.pics || [];
        var control = this.form.get('pics');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initDoc());
            value.push(item);
        });
        this.form.get('pics').patchValue(value);
    };
    RepairTicketDetailsPage.prototype.initDoc = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            docId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            docName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            docType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            folderId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            size: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            sizeDesc: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            orderNo: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            customerId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            uri: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            updateTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            updater: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            stationId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            realName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            recordType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            recordId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            updaterName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    };
    RepairTicketDetailsPage.prototype.setDocs = function (data) {
        var _this = this;
        var value = this.form.value.docs || [];
        var control = this.form.get('docs');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initDoc());
            value.push(item);
        });
        this.form.get('docs').patchValue(value);
    };
    RepairTicketDetailsPage.prototype.initNodes = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            statusText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            nodeType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            user: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            status: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    };
    RepairTicketDetailsPage.prototype.initLinks = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            sourceId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            targetId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            source: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            target: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    };
    RepairTicketDetailsPage.prototype.getWorkflowLogs = function (form) {
        return form.controls.workflowLogs.controls;
    };
    RepairTicketDetailsPage.prototype.ccUserEvent = function (data) {
        var _this = this;
        var control = this.form.get('ccUsers');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initCcUser());
        });
        this.form.patchValue({
            ccUsers: data
        });
    };
    RepairTicketDetailsPage.prototype.initCcUser = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    };
    RepairTicketDetailsPage.prototype.buttonFlex = function (length) {
        switch (length) {
            case 1:
                return 'col-12';
            case 2:
                return 'col-6';
            case 3:
                return 'col-4';
            case 4:
                return 'col-3';
            default:
                break;
        }
    };
    RepairTicketDetailsPage.prototype.showMoreButtons = function () {
        this.buttonToggle = !this.buttonToggle;
    };
    RepairTicketDetailsPage.prototype.formatISOTime = function () {
        if (this.form.value.startTime) {
            if (this.form.value.startTime.indexOf('Z') !== -1) {
                this.form.patchValue({
                    startTime: __WEBPACK_IMPORTED_MODULE_6_moment___default()(this.form.value.startTime.substr(0, this.form.value.startTime.length - 1)).format()
                });
            }
        }
        if (this.form.value.endTime) {
            if (this.form.value.endTime.indexOf('Z') !== -1) {
                this.form.patchValue({
                    endTime: __WEBPACK_IMPORTED_MODULE_6_moment___default()(this.form.value.endTime.substr(0, this.form.value.endTime.length - 1)).format()
                });
            }
        }
        if (this.form.value.startTime && this.form.value.endTime) {
            if (__WEBPACK_IMPORTED_MODULE_6_moment___default()(this.form.value.endTime).valueOf() -
                __WEBPACK_IMPORTED_MODULE_6_moment___default()(this.form.value.startTime).valueOf() <
                0) {
                this.mutilservice.popToastView('开始处理时间要小于处理完成时间！');
                this.form.patchValue({
                    startTime: null
                });
                return;
            }
        }
    };
    RepairTicketDetailsPage.prototype.buttonFunction = function (button) {
        for (var key in this.fields) {
            if (this.fields.hasOwnProperty(key)) {
                var element = this.fields[key];
                if (this.form.value[key] === null && !element.nullable) {
                    var alert_1 = this.alertCtrl.create({
                        title: '警告',
                        subTitle: element.name + '必填!',
                        buttons: ['关闭']
                    });
                    alert_1.present();
                    return;
                }
            }
        }
        this.switchFunction(button);
    };
    RepairTicketDetailsPage.prototype.switchFunction = function (button) {
        switch (button.buttonAction) {
            case '$remind$':
                this.remindFunction();
                break;
            case '$check$':
                this.checkFunction();
                break;
            case 'materialOut':
                this.materialOutFunction();
                break;
            case 'materialIn':
                this.materialInFunction();
                break;
            case 'reject':
                this.rejectFunction(button);
                break;
            case 'finish':
                this.actionFunction(button);
                break;
            case 'delete':
                this.deleteFunction();
                break;
            case 'create':
                this.actionFunction(button);
                break;
            case 'permit':
                this.actionFunction(button);
                break;
            default:
                // this.deleteFunction();
                break;
        }
    };
    RepairTicketDetailsPage.prototype.remindFunction = function () {
        var _this = this;
        this.repairticketsservice.remind(this.ticketId).subscribe(function (res) {
            _this.mutilservice.popToastView(res);
        });
    };
    // 检查操作
    RepairTicketDetailsPage.prototype.checkFunction = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_15__util_modal_common_check_common_check__["a" /* CommonCheckPage */], {
            options: this.fields['checkStatus'].props
        }, {
            cssClass: 'commonModal commonCheckModal',
            showBackdrop: true,
            enableBackdropDismiss: true
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    var params = {
                        ticketId: _this.ticketId,
                        checkStatus: data.value.checkStatus,
                        checkMemo: data.value.checkMemo
                    };
                    _this.repairticketsservice.check(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.form.patchValue({
                            checkStatus: res.checkStatus,
                            checkStatusText: res.checkStatusText,
                            checker: res.checker,
                            checkerName: res.checkerName,
                            checkMemo: res.checkMemo,
                            checkTime: __WEBPACK_IMPORTED_MODULE_14_lodash__["isNumber"](res.checkTime)
                                ? __WEBPACK_IMPORTED_MODULE_6_moment___default()(res.checkTime).format()
                                : res.checkTime
                        });
                    });
                }
            }
        });
        modal.present();
    };
    // 出库
    RepairTicketDetailsPage.prototype.materialOutFunction = function () {
        var user = JSON.parse(localStorage.getItem('USER_INFO'));
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_16__inventoris_inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
            type: 'out',
            relaBusinessTypeText: '抢修单号',
            value: {
                relaBusinessId: this.form.value.orderId,
                relaBusinessCode: this.form.value.ticketCode,
                ioOperator: user.userId,
                ioTime: __WEBPACK_IMPORTED_MODULE_6_moment___default()().format(),
                ioOperatorName: user.realName
            }
        });
    };
    // 入库
    RepairTicketDetailsPage.prototype.materialInFunction = function () {
        var user = JSON.parse(localStorage.getItem('USER_INFO'));
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_16__inventoris_inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
            type: 'in',
            relaBusinessTypeText: '抢修单号',
            value: {
                relaBusinessId: this.form.value.orderId,
                relaBusinessCode: this.form.value.ticketCode,
                ioOperator: user.userId,
                ioTime: __WEBPACK_IMPORTED_MODULE_6_moment___default()().format(),
                ioOperatorName: user.realName
            }
        });
    };
    // 申请/许可/完成
    RepairTicketDetailsPage.prototype.actionFunction = function (button) {
        var _this = this;
        this.mutilservice.customPrompt({ msg: '你确定提交吗?' }, function () {
            _this.formatISOTime();
            var params = {
                title: _this.title,
                ticket: _this.form.value,
                action: button,
                nextUserIds: null,
                memo: null
            };
            _this.repairticketsservice.create(params).subscribe(function (res) {
                if (_this.parentOrderId) {
                    _this.navCtrl.remove(1, 2);
                    _this.navCtrl.insertPages(1, [{ page: __WEBPACK_IMPORTED_MODULE_0__repair_ticket_repair_ticket__["a" /* RepairTicketPage */] }]);
                }
                _this.mutilservice.popToastView('提交成功');
                _this.navCtrl.getPrevious().data.freshPage = true;
                _this.navCtrl.pop();
            });
        });
    };
    // 驳回
    RepairTicketDetailsPage.prototype.rejectFunction = function (button) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_12__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: '说明'
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    _this.formatISOTime();
                    var params = {
                        title: _this.title,
                        ticket: _this.form.value,
                        action: button,
                        nextUserIds: null,
                        memo: data.value
                    };
                    _this.repairticketsservice.create(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.navCtrl.getPrevious().data.freshPage = true;
                        _this.navCtrl.pop();
                    });
                }
            }
        });
        modal.present();
    };
    // 删除
    RepairTicketDetailsPage.prototype.deleteFunction = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除该抢修单么?',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.repairticketsservice
                            .detelterepairTickets(_this.ticketId)
                            .subscribe(function (res) {
                            _this.mutilservice.popToastView('删除成功');
                            _this.navCtrl.getPrevious().data.freshPage = true;
                            _this.navCtrl.pop();
                        });
                    }
                }
            ]
        });
        confirm.present();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["ViewChild"])('echart'),
        __metadata("design:type", Object)
    ], RepairTicketDetailsPage.prototype, "echart", void 0);
    RepairTicketDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["Component"])({
            selector: 'page-repair-ticket-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/repair-ticket-details/repair-ticket-details.html"*/'<!--\n  Generated template for the RepairTicketDetailsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{title}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content\n  [ngClass]="{\'h0\': buttons.length==0,\'h44\': buttons.length>4&&buttonToggle==false,\'h88\': buttons.length<=4&&buttons.length>0,\'h180\':buttons.length>4&&buttons.length<=8&&buttonToggle==true,\'h240\':buttons.length>8&&buttons.length<=12&&buttonToggle==true,\'h300\':buttons.length>12&&buttons.length<=16&&buttonToggle==true}"\n>\n  <form [formGroup]="form">\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleBaseInfo = !toggleBaseInfo">\n        基础信息\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleBaseInfo?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 基础信息 -->\n      <ng-container *ngIf="toggleBaseInfo">\n        <!--电站名称  -->\n        <ion-item\n          *ngIf="fields?.stationId.show"\n          [attr.detail-push]="fields?.stationId.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.stationId.nullable">*</b\n            >{{fields?.stationId.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectStation($event)"\n            formControlName="stationName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="stationName"\n          ></ion-input>\n        </ion-item>\n        <!-- 工作负责人 -->\n        <ion-item\n          *ngIf="fields?.responsiblePerson.show"\n          [attr.detail-push]="fields?.responsiblePerson.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.responsiblePerson.nullable">*</b\n            >{{fields?.responsiblePerson.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.responsiblePerson.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'responsiblePerson\',\'responsiblePersonName\')"\n            formControlName="responsiblePersonName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.responsiblePerson.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="responsiblePersonName"\n          ></ion-input>\n        </ion-item>\n        <!-- 工作布置人 -->\n        <ion-item\n          *ngIf="fields?.creater.show"\n          [attr.detail-push]="fields?.creater.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.creater.nullable">*</b\n            >{{fields?.creater.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.creater.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'creater\',\'createrName\')"\n            formControlName="createrName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.creater.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="createrName"\n          ></ion-input>\n        </ion-item>\n        <!-- 班组 -->\n        <ion-item\n          *ngIf="fields?.teamId.show"\n          [attr.detail-push]="fields?.teamId.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.teamId.nullable">*</b\n            >{{fields?.teamId.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.teamId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectTeam(\'teamId\',\'teamName\')"\n            formControlName="teamName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.teamId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="teamName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 班组人员 -->\n        <ion-item *ngIf="fields?.teamUsers.show" detail-push no-lines>\n          <ion-label\n            ><b *ngIf="!fields?.teamUsers.nullable">*</b\n            >{{fields?.teamUsers.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectTeamUsers($event,fields?.teamUsers.editable)"\n            formControlName="teamUsersText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 抢修设备 -->\n        <ion-item *ngIf="fields?.repairDevices.show" detail-push no-lines>\n          <ion-label>\n            <b *ngIf="!fields?.repairDevices.nullable">*</b\n            >{{fields?.repairDevices.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="selectEquipment(fields?.repairDevices.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="repairDevicesText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 抢修任务 -->\n        <ion-item\n          *ngIf="fields?.repairDesc.show"\n          [attr.detail-push]="fields?.repairDesc.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.repairDesc.nullable">*</b\n            >{{fields?.repairDesc.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.repairDesc.name,\'repairDesc\',fields?.repairDesc.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            class="ell"\n            formControlName="repairDesc"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 安全措施 -->\n        <ion-item\n          *ngIf="fields?.precautions.show"\n          [attr.detail-push]="fields?.precautions.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.precautions.nullable">*</b\n            >{{fields?.precautions.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.precautions.name,\'precautions\',fields?.precautions.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            class="ell"\n            formControlName="precautions"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 注意事项 -->\n        <ion-item\n          *ngIf="fields?.attentions.show"\n          [attr.detail-push]="fields?.attentions.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.attentions.nullable">*</b\n            >{{fields?.attentions.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.attentions.name,\'attentions\',fields?.attentions.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            class="ell"\n            formControlName="attentions"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleProcess = !toggleProcess">\n        抢修许可\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleProcess?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleProcess">\n        <!-- 注意事项 -->\n        <ion-item\n          *ngIf="fields?.extrPrecautions.show"\n          [attr.detail-push]="fields?.extrPrecautions.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.extrPrecautions.nullable">*</b\n            >{{fields?.extrPrecautions.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.extrPrecautions.name,\'extrPrecautions\',fields?.extrPrecautions.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            class="ell"\n            formControlName="extrPrecautions"\n          ></ion-input>\n        </ion-item>\n        <!-- 许可人 -->\n        <ion-item\n          *ngIf="fields?.permitUser.show"\n          [attr.detail-push]="fields?.permitUser.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.permitUser.nullable">*</b\n            >{{fields?.permitUser.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.permitUser.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'permitUser\',\'permitUserName\')"\n            formControlName="permitUserName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.permitUser.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="permitUserName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 许可同意时间 -->\n        <ion-item\n          *ngIf="fields?.permitTime.show"\n          [attr.detail-push]="fields?.permitTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.permitTime.nullable">*</b\n            >{{fields?.permitTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.permitTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="permitTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.permitTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="permitTime"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 许可抢修时间 -->\n        <ion-item\n          *ngIf="fields?.permitWorkTime.show"\n          [attr.detail-push]="fields?.permitWorkTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.permitWorkTime.nullable">*</b\n            >{{fields?.permitWorkTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.permitWorkTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="permitWorkTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.permitWorkTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="permitWorkTime"\n          ></ion-datetime>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleProcessResult = !toggleProcessResult"\n      >\n        结果汇报\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleProcessResult?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 结果汇报 -->\n      <ng-container *ngIf="toggleProcessResult">\n        <!-- 开始时间 -->\n        <ion-item\n          *ngIf="fields?.startTime.show"\n          [attr.detail-push]="fields?.startTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.startTime.nullable">*</b\n            >{{fields?.startTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.startTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.startTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n          ></ion-datetime>\n        </ion-item>\n\n        <!-- 完成时间 -->\n        <ion-item\n          *ngIf="fields?.endTime.show"\n          [attr.detail-push]="fields?.endTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.endTime.nullable">*</b\n            >{{fields?.endTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.endTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.endTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n          ></ion-datetime>\n        </ion-item>\n\n        <!-- 工作量 -->\n        <ion-item\n          *ngIf="fields?.workHours.show"\n          [attr.detail-push]="fields?.workHours.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.workHours.nullable">*</b\n            >{{fields?.workHours.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'workHours\',fields?.workHours.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="workHours"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 处理结果 -->\n        <ion-item\n          *ngIf="fields?.repairStatus.show"\n          [attr.detail-push]="fields?.repairStatus.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.repairStatus.nullable">*</b\n            >{{fields?.repairStatus.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.repairStatus.editable"\n            (tap)="openSheetModal(\'repairStatus\',\'repairStatusText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="repairStatusText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.repairStatus.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="repairStatusText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 现场设备状态 -->\n        <ion-item\n          *ngIf="fields?.resultDesc.show"\n          [attr.detail-push]="fields?.resultDesc.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.resultDesc.nullable">*</b\n            >{{fields?.resultDesc.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.resultDesc.name,\'resultDesc\',fields?.resultDesc.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="resultDesc"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 完成时间 -->\n        <ion-item\n          *ngIf="fields?.reportTime.show"\n          [attr.detail-push]="fields?.reportTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.reportTime.nullable">*</b\n            >{{fields?.reportTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.reportTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="reportTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.reportTime.editable"\n            type="text"\n            [disabled]="true"\n            text-right\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="reportTime"\n          ></ion-datetime>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 照片 -->\n    <ion-list class="new-list">\n      <upload-pics\n        [orderId]="orderId"\n        [picPermission]="picPermission"\n        [pics]="form.value.pics"\n        (picsEvent)="setPics($event)"\n      ></upload-pics>\n    </ion-list>\n\n    <!-- 附件 -->\n    <ion-list class="new-list">\n      <upload-files\n        [orderId]="orderId"\n        [docPermission]="docPermission"\n        [docs]="form.value.docs"\n        (docsEvent)="setDocs($event)"\n      ></upload-files>\n    </ion-list>\n\n    <!-- 抢修单检查 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleDefectInspection = !toggleDefectInspection"\n      >\n        抢修单检查\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleDefectInspection?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleDefectInspection">\n        <!-- 检查结果 -->\n        <ion-item\n          *ngIf="fields?.checkStatus.show"\n          [attr.detail-push]="fields?.checkStatus.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkStatus.nullable">*</b\n            >{{fields?.checkStatus.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.checkStatus.editable"\n            (tap)="openSheetModal(\'checkStatus\',\'checkStatusText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.checkStatus.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查人 -->\n        <ion-item\n          *ngIf="fields?.checker.show"\n          [attr.detail-push]="fields?.checker.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checker.nullable">*</b\n            >{{fields?.checker.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkerName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查时间 -->\n        <ion-item\n          *ngIf="fields?.checkTime.show"\n          [attr.detail-push]="fields?.checkTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkTime.nullable">*</b\n            >{{fields?.checkTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="!fields?.reportTime.editable"\n            type="text"\n            [disabled]="true"\n            text-right\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="checkTime"\n          ></ion-datetime>\n        </ion-item>\n\n        <!-- 检查备注 -->\n        <ion-item\n          *ngIf="fields?.checkMemo.show"\n          [attr.detail-push]="fields?.checkMemo.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkMemo.nullable">*</b\n            >{{fields?.checkMemo.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.checkMemo.name,\'checkMemo\',fields?.checkMemo.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkMemo"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 工作流程 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWorkFlow = !toggleWorkFlow">\n        工作流程\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWorkFlow?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWorkFlow">\n        <div echarts #echart [options]="options" class="workflow-chart"></div>\n      </ng-container>\n    </ion-list>\n\n    <!-- 流程日志 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleWorkflowLogs = !toggleWorkflowLogs"\n      >\n        流程日志\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWorkflowLogs?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWorkflowLogs">\n        <ng-container formArrayName="workflowLogs">\n          <ng-container\n            *ngFor="let item of getWorkflowLogs(form); let i = index"\n            [formGroupName]="i"\n          >\n            <div class="workflow-log">\n              <p>\n                {{item.value.executeTime | date:\'yyyy-MM-dd HH:mm\'}}\n                {{item.value.userName }}\n              </p>\n              <div class="action-content">{{item.value.action}}</div>\n            </div>\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 抄送 -->\n    <ion-list class="new-list">\n      <cc\n        [ccPermission]="ccPermission"\n        [users]="ccUsers"\n        (userEvent)="ccUserEvent($event)"\n      ></cc>\n    </ion-list>\n\n    <!-- 评论  -->\n    <ion-list class="new-list" *ngIf="ticketId!==0">\n      <ion-list-header no-lines (tap)="toggleComment = !toggleComment">\n        评论\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleComment?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleComment">\n        <comment [orderId]="orderId" [commentsList]="commentsList"></comment>\n      </ng-container>\n    </ion-list>\n  </form>\n</ion-content>\n\n<ion-footer *ngIf="buttons.length>0">\n  <ion-toolbar class="footer-bar">\n    <ng-container *ngIf="buttons.length<=4">\n      <ion-grid>\n        <ion-row>\n          <ion-col\n            *ngFor="let button of buttons"\n            class="{{buttonFlex(buttons.length)}}"\n          >\n            <div class="btn">\n              <ion-icon\n                (tap)="buttonFunction(button)"\n                [name]="button.buttonIcon.split(\'.\')[0]"\n              ></ion-icon>\n              <p>{{button.buttonText}}</p>\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ng-container>\n    <ng-container *ngIf="buttons.length>4">\n      <button\n        ion-button\n        block\n        (tap)="showMoreButtons()"\n        *ngIf="buttonToggle==false"\n        style="background-color: #54a4e4"\n      >\n        <span style="margin-right: 5px">处理</span\n        ><ion-icon name="arrow-up"></ion-icon>\n      </button>\n      <ng-container *ngIf="buttonToggle==true">\n        <ion-grid>\n          <ion-row>\n            <ion-col *ngFor="let button of buttons" class="col-3">\n              <div class="btn">\n                <ion-icon\n                  (tap)="buttonFunction(button)"\n                  [name]="button.buttonIcon.split(\'.\')[0]"\n                ></ion-icon>\n                <p>{{button.buttonText}}</p>\n              </div>\n            </ion-col>\n          </ion-row>\n          <ion-row>\n            <ion-col col-12 style="padding-top: 10px">\n              <ion-icon\n                name="arrow-down"\n                (tap)="showMoreButtons()"\n                style="font-size: 1.6em"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ng-container>\n    </ng-container>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/repair-ticket-details/repair-ticket-details.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_repair_tickets_service__["a" /* RepairTicketsProvider */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["b" /* AlertController */]])
    ], RepairTicketDetailsPage);
    return RepairTicketDetailsPage;
}());

//# sourceMappingURL=repair-ticket-details.js.map

/***/ }),

/***/ 13:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return APP_CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DEV_CONFIG; });
/* unused harmony export RELEASE_CONFIG */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);

var APP_CONFIG = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["InjectionToken"]('app.config');
var DEV_CONFIG = {
    title: '测试地址',
    logo: 'others.png',
    // apiEndpoint: 'http://10.176.130.155:18000',
    // apiEndpoint: 'http://10.176.129.39:18000',
    // fileEndpoint: 'http://10.176.130.155:8088',
    apiEndpoint: 'http://dev.jszyet.com.cn:8444',
    fileEndpoint: 'http://dev.jszyet.com.cn:8802',
    showHomeTab: true,
    checkUpdateUrl: null,
    theme: 'light-theme',
};
var RELEASE_CONFIG = {
    title: '生产地址',
    logo: 'linyang.png',
    apiEndpoint: 'http://www.jszyet.com.cn:8442',
    fileEndpoint: 'http://www.jszyet.com.cn:8800',
    showHomeTab: true,
    checkUpdateUrl: null,
    theme: 'light-theme',
};
//# sourceMappingURL=app-config.js.map

/***/ }),

/***/ 130:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RepairTicketPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_repair_tickets_service__ = __webpack_require__(231);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__repair_ticket_details_repair_ticket_details__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_backend_service__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__util_common_equipment_equipmentList__ = __webpack_require__(50);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











/**
 * Generated class for the RepairTicketPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var RepairTicketPage = /** @class */ (function () {
    function RepairTicketPage(navCtrl, navParams, modalCtrl, repairticketsservice, mutilservice, menuCtrl, backendservice, alertCtrl) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modalCtrl = modalCtrl;
        this.repairticketsservice = repairticketsservice;
        this.mutilservice = mutilservice;
        this.menuCtrl = menuCtrl;
        this.backendservice = backendservice;
        this.alertCtrl = alertCtrl;
        this.page = 0;
        this.size = 10;
        this.searchParams = {
            queryFlag: '',
            startReportTime: __WEBPACK_IMPORTED_MODULE_4_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endReportTime: __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD'),
            repairStatus: [],
        };
        this.repairTicketList = [];
        this.freshPage = false;
        this.aQueryFlag = [
            { first: '01', second: '我的待办' },
            { first: '02', second: '我负责的' },
            { first: '03', second: '我许可的' },
            { first: '04', second: '我参与的' },
            { first: '05', second: '抄送我的' },
        ];
        this.customStartReportPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.startReportTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.customEndReportPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.endReportTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.customStartEndReportPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.startEndTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.customEndEndReportPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.endEndTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.showMenu = false;
        var d = this.navParams.get('startDate');
        if (d) {
            this.searchParams.startReportTime = __WEBPACK_IMPORTED_MODULE_4_moment__(d)
                .startOf('month')
                .format('YYYY-MM-DD');
            this.searchParams.endReportTime = __WEBPACK_IMPORTED_MODULE_4_moment__(d)
                .endOf('month')
                .format('YYYY-MM-DD');
        }
        this.searchParams.queryFlag =
            this.navParams.get('queryFlag') === '03'
                ? '04'
                : this.navParams.get('queryFlag'); // 其他页面我参与的为03  这边控制下
    }
    RepairTicketPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        this.searchParams.stationId = this.navParams.get('stationId');
        this.searchParams.stationName = this.navParams.get('stationName');
        if (this.searchParams.stationId && this.searchParams.stationName) {
            this.station = {
                id: this.searchParams.stationId,
                title: this.searchParams.stationName,
            };
        }
        this.searchParams.equipment = this.navParams.get('equipment');
        this.equipment = this.navParams.get('equipment');
        this.getRepairTicketsList(true);
        // 获取缺陷状态
        this.backendservice
            .getProps({ typeId: 'repairStatus' })
            .subscribe(function (res) {
            _this.aRepairStatus = res;
        });
    };
    RepairTicketPage.prototype.ionViewWillEnter = function () {
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.freshPage = false;
            this.getRepairTicketsList(true);
        }
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.navParams.data.equipmentList = [];
            if (equipmentList.length > 0) {
                this.equipment = equipmentList[0];
                this.searchParams.equipment = this.equipment;
            }
            else {
                this.equipment = null;
                this.searchParams.equipment = null;
            }
        }
    };
    RepairTicketPage.prototype.ionViewWillLeave = function () {
        this.menuCtrl.enable(false, 'search');
    };
    RepairTicketPage.prototype.getRepairTicketsList = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            queryFlag: this.searchParams.queryFlag || null,
            ticketCode: this.searchParams.ticketCode || null,
            stationId: this.searchParams.stationId || null,
            startReportTime: this.searchParams.startReportTime ||
                __WEBPACK_IMPORTED_MODULE_4_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endReportTime: this.searchParams.endReportTime || __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD'),
            startEndTime: this.searchParams.startEndTime || null,
            endEndTime: this.searchParams.endEndTime || null,
            repairStatus: this.searchParams.repairStatus || null,
            responsiblePerson: (this.searchParams.responsiblePerson &&
                this.searchParams.responsiblePerson.userId) ||
                null,
            deviceId: (this.searchParams.equipment && this.searchParams.equipment.deviceId) ||
                '',
            page: this.page,
            size: this.size,
        };
        this.repairticketsservice.getRepairTicketsList(params).subscribe(function (res) {
            if (res) {
                _this.repairTicketList = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    RepairTicketPage.prototype.doRefresh = function (refresher) {
        this.getRepairTicketsList(true, refresher);
    };
    RepairTicketPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            queryFlag: this.searchParams.queryFlag,
            ticketCode: this.searchParams.ticketCode,
            stationId: this.searchParams.stationId,
            startReportTime: this.searchParams.startReportTime,
            endReportTime: this.searchParams.endReportTime,
            startEndTime: this.searchParams.startEndTime,
            endEndTime: this.searchParams.endEndTime,
            repairStatus: this.searchParams.repairStatus,
            responsiblePerson: this.searchParams.responsiblePerson &&
                this.searchParams.responsiblePerson.userId,
            deviceId: (this.searchParams.equipment && this.searchParams.equipment.deviceId) ||
                '',
            page: this.page,
            size: this.size,
        };
        this.repairticketsservice.getRepairTicketsList(params).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.repairTicketList = _this.repairTicketList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.repairTicketList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    RepairTicketPage.prototype.remind = function (event, repairTicketId) {
        var _this = this;
        event.stopPropagation && event.stopPropagation();
        this.repairticketsservice
            .remind(repairTicketId)
            .subscribe(function (res) {
            _this.mutilservice.popToastView(res);
        });
    };
    RepairTicketPage.prototype.addRepairTicker = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */]);
    };
    RepairTicketPage.prototype.editRepairTicket = function (ticketId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */], {
            ticketId: ticketId,
        });
    };
    /**控制侧边栏 */
    RepairTicketPage.prototype.serchMenu = function () {
        var _this = this;
        this.showMenu = true;
        setTimeout(function () {
            _this.menuCtrl.enable(true, 'search');
            _this.menuCtrl.open('search');
        }, 0);
    };
    // 快速查询
    RepairTicketPage.prototype.selectQuickSearch = function (type) {
        if (this.searchParams.queryFlag === type) {
            this.searchParams.queryFlag = null;
        }
        else {
            this.searchParams.queryFlag = type;
        }
        this.menuCtrl.close('search');
        this.getRepairTicketsList(true);
    };
    // 电站选择
    RepairTicketPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.station = e;
                _this.searchParams.stationId = e.id;
            }
        });
        modal.present({ keyboardClose: true });
    };
    // 清除电站
    RepairTicketPage.prototype.clearStation = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchParams.stationId = null;
        this.station = null;
    };
    RepairTicketPage.prototype.selectRepairStatusOption = function (status) {
        var removeItem = __WEBPACK_IMPORTED_MODULE_9_lodash__["remove"](this.searchParams.repairStatus, function (n) { return status === n; });
        if (removeItem.length == 0) {
            this.searchParams.repairStatus.push(status);
        }
    };
    // 负责人
    RepairTicketPage.prototype.selectUser = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.responsiblePerson = data.value[0];
                    _this.searchParams.responsiblePerson = _this.responsiblePerson;
                }
            }
        });
        modal.present();
    };
    RepairTicketPage.prototype.clearUser = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchParams.responsiblePerson = null;
        this.responsiblePerson = null;
    };
    RepairTicketPage.prototype.selectEquipment = function () {
        var equipment = this.equipment ? [this.equipment] : [];
        if (!this.station) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            stationId: this.station.id,
            isSingle: true,
            selectedItem: equipment,
        });
    };
    RepairTicketPage.prototype.clearEquipment = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.equipment = null;
        this.searchParams.equipment = null;
    };
    RepairTicketPage.prototype.ok = function () {
        if (this.searchParams.startReportTime &&
            this.searchParams.endReportTime &&
            __WEBPACK_IMPORTED_MODULE_4_moment__(this.searchParams.startReportTime).valueOf() >
                __WEBPACK_IMPORTED_MODULE_4_moment__(this.searchParams.endReportTime).valueOf()) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选填报时间范围不正确',
                buttons: ['确定'],
            });
            alert_1.present();
            return;
        }
        if (this.searchParams.startEndTime &&
            this.searchParams.endEndTime &&
            __WEBPACK_IMPORTED_MODULE_4_moment__(this.searchParams.startEndTime).valueOf() >
                __WEBPACK_IMPORTED_MODULE_4_moment__(this.searchParams.endEndTime).valueOf()) {
            var alert_2 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选完成时间范围不正确',
                buttons: ['确定'],
            });
            alert_2.present();
            return;
        }
        this.menuCtrl.close('search');
        this.getRepairTicketsList(true);
    };
    RepairTicketPage.prototype.reset = function () {
        this.equipment = null;
        this.station = null;
        this.searchParams = {
            queryFlag: '',
            ticketCode: '',
            stationId: null,
            startReportTime: __WEBPACK_IMPORTED_MODULE_4_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endReportTime: __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD'),
            startEndTime: null,
            endEndTime: null,
            repairStatus: [],
            responsiblePerson: null,
            deviceId: null,
        };
    };
    RepairTicketPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-repair-ticket',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/repair-ticket/repair-ticket.html"*/'<!--\n  Generated template for the RepairTicketPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n\n<ion-header>\n  <ion-navbar>\n    <ion-title>抢修单</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon name="search" style="font-size: 1.4em"></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="addRepairTicker()">\n        <ion-icon name="add-square" style="font-size: 1.4em"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding class="card-list" #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div class="card-item" *ngFor="let repairTicket of repairTicketList">\n      <div class="left-line">\n        <div class="line-icon"></div>\n      </div>\n      <div class="right-content">\n        <div class="title">{{repairTicket.time}}</div>\n        <ion-card (click)="editRepairTicket(repairTicket.id)">\n          <ion-card-header>\n            {{repairTicket.title}}<span\n              class="remind-icon"\n              *ngIf="repairTicket.button===\'remind\'"\n              (click)="remind($event,repairTicket.id)"\n              >催单</span\n            >\n          </ion-card-header>\n          <ul class="ion-card-content">\n            <li class="ell">{{repairTicket.item1}}</li>\n            <li class="ell">{{repairTicket.item2}}</li>\n            <li class="ell">{{repairTicket.item3}}</li>\n          </ul>\n          <div\n            *ngIf="repairTicket.status"\n            class="card-tip"\n            [style.background-color]="repairTicket.statusStyle"\n          >\n            {{repairTicket.status}}\n          </div>\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n\n<ng-container *ngIf="showMenu">\n  <ion-menu\n    [content]="search"\n    side="right"\n    id="search"\n    type="overlay"\n    [swipeEnabled]="true"\n    class="search-menu"\n  >\n    <ion-content class="outer-content" no-bounce>\n      <div class="common-search-container">\n        <div class="common-search">\n          <div class="select-picker border-bottom">\n            <div class="query-label">快速查询</div>\n            <ion-grid>\n              <ion-row>\n                <ion-col col-4 *ngFor="let item of aQueryFlag">\n                  <div\n                    class="select-option"\n                    [ngClass]="{\'active-option\': searchParams.queryFlag===item.first}"\n                    (click)="selectQuickSearch(item.first)"\n                  >\n                    {{item.second}}\n                  </div></ion-col\n                >\n              </ion-row>\n            </ion-grid>\n          </div>\n          <div class="input-picker border-bottom">\n            <div class="query-label">抢修单号</div>\n            <ion-input\n              type="text"\n              [(ngModel)]="searchParams.ticketCode"\n            ></ion-input>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">电站</div>\n            <button\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectStation()"\n            >\n              {{(station?.title)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="station"\n                                (click)="clearStation($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="station"\n                (click)="clearStation($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="time-picker border-bottom">\n            <div class="query-label">填报时间</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [(ngModel)]="searchParams.startReportTime"\n              [pickerOptions]="customStartReportPickerOptions"\n            ></ion-datetime>\n            <div class="line">-</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [pickerOptions]="customEndReportPickerOptions"\n              [(ngModel)]="searchParams.endReportTime"\n            ></ion-datetime>\n          </div>\n          <div class="time-picker border-bottom">\n            <div class="query-label">完成时间</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [(ngModel)]="searchParams.startEndTime"\n              [pickerOptions]="customStartEndReportPickerOptions"\n            ></ion-datetime>\n            <div class="line">-</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [pickerOptions]="customEndEndReportPickerOptions"\n              [(ngModel)]="searchParams.endEndTime"\n            ></ion-datetime>\n          </div>\n          <div class="select-picker border-bottom">\n            <div class="query-label">抢修状态</div>\n            <ion-grid>\n              <ion-row>\n                <ion-col col-4 *ngFor="let item of aRepairStatus">\n                  <div\n                    class="select-option"\n                    [ngClass]="{\'active-option\': searchParams.repairStatus.indexOf(item.first)!==-1}"\n                    (click)="selectRepairStatusOption(item.first)"\n                  >\n                    {{item.second}}\n                  </div></ion-col\n                >\n              </ion-row>\n            </ion-grid>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">负责人</div>\n            <button ion-button round small color="light" (click)="selectUser()">\n              {{(responsiblePerson?.realName)||\'未选择\'}}\n              <!-- <img\n                *ngIf="responsiblePerson"\n                (click)="clearUser($event)"\n                class="clear-icon"\n                src="assets/imgs/buttons/delete.png"\n                alt=""\n              /> -->\n              <ion-icon\n                *ngIf="responsiblePerson"\n                (click)="clearUser($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="button-picker">\n            <div class="query-label">抢修设备</div>\n            <button\n              class="ell"\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectEquipment()"\n            >\n              {{(equipment?.deviceName)||\'未选择\'}}\n              <!-- <img\n                *ngIf="equipment"\n                (click)="clearEquipment($event)"\n                class="clear-icon"\n                src="assets/imgs/buttons/delete.png"\n                alt=""\n              /> -->\n              <ion-icon\n                *ngIf="equipment"\n                (click)="clearEquipment($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n        </div>\n        <ion-list>\n          <ion-row class="fix-bottom">\n            <ion-col col-6 text-center>\n              <button\n                ion-button\n                round\n                small\n                class="reset-btn"\n                color="light"\n                (click)="reset()"\n              >\n                重置\n              </button>\n            </ion-col>\n            <ion-col col-6 text-center>\n              <button ion-button round small class="query-btn" (click)="ok()">\n                查询\n              </button>\n            </ion-col>\n          </ion-row>\n        </ion-list>\n      </div>\n    </ion-content>\n  </ion-menu>\n</ng-container>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/repair-ticket/repair-ticket.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1__providers_repair_tickets_service__["a" /* RepairTicketsProvider */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_backend_service__["a" /* BackendService */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["b" /* AlertController */]])
    ], RepairTicketPage);
    return RepairTicketPage;
}());

//# sourceMappingURL=repair-ticket.js.map

/***/ }),

/***/ 131:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InventorisPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_photo_viewer__ = __webpack_require__(98);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__inventoris_record_inventoris_record__ = __webpack_require__(341);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__inventoris_menus_inventoris_menus__ = __webpack_require__(342);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__inventoris_out_in_inventoris_out_in__ = __webpack_require__(173);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__barcode_scanner_barcode_scanner__ = __webpack_require__(170);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__util_common_warehouse_common_warehouse__ = __webpack_require__(230);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__util_common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__util_common_materials_common_materials__ = __webpack_require__(229);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
















/**
 * Generated class for the InventorisPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InventorisPage = /** @class */ (function () {
    function InventorisPage(appConfig, navCtrl, navParams, popoverCtrl, modalCtrl, materialservice, loadingCtrl, toastCtrl, menuCtrl, photoViewer, mutilservice, actionSheetCtrl) {
        this.appConfig = appConfig;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.popoverCtrl = popoverCtrl;
        this.modalCtrl = modalCtrl;
        this.materialservice = materialservice;
        this.loadingCtrl = loadingCtrl;
        this.toastCtrl = toastCtrl;
        this.menuCtrl = menuCtrl;
        this.photoViewer = photoViewer;
        this.mutilservice = mutilservice;
        this.actionSheetCtrl = actionSheetCtrl;
        this.page = 0;
        this.canInfinite = true;
        this.fileBasePath = '';
        this.warehouses = null;
        this.materials = null;
        this.materialNo = null;
        this.showMenu = false;
        this.materialTypeText = '物资';
        this.materia = [];
        this.fileBasePath = appConfig.fileEndpoint;
    }
    InventorisPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad InventorisPage');
        if (this.navParams.get('stationId')) {
            this.station = {
                id: this.navParams.get('stationId'),
            };
        }
        this.equipment = this.navParams.get('equipment');
        this.materialType = this.navParams.get('materialType') || '01';
        this.getMaterialTypes();
        this.getInventorisList(true);
    };
    InventorisPage.prototype.getMaterialTypes = function () {
        var _this = this;
        this.materialservice.getMaterialTypes().subscribe(function (res) {
            _this.materialTypesButtons = res.map(function (item) { return ({
                text: item.second,
                handler: function () {
                    _this.materialType = item.first;
                    _this.materialTypeText = item.second;
                    _this.materia = [];
                    _this.materialIds = [];
                    _this.getInventorisList(true);
                },
            }); });
        });
    };
    InventorisPage.prototype.select = function () {
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: this.materialTypesButtons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    InventorisPage.prototype.ionViewWillEnter = function () {
        var _this = this;
        this.materialNo = this.navParams.get('qrResult');
        if (this.materialNo) {
            this.navParams.data.qrResult = null;
            this.materialservice
                .getMaterialByMaterialNo(this.materialNo)
                .subscribe(function (res) {
                if (res) {
                    _this.materials = res;
                    _this.serchMenu();
                }
                else {
                    var toast = _this.toastCtrl.create({
                        message: '该物料不存在',
                        duration: 1000,
                        position: 'middle',
                    });
                    toast.present();
                }
            });
        }
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.getInventorisList(true);
        }
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.navParams.data.equipmentList = [];
            if (equipmentList.length > 0) {
                this.equipment = equipmentList[0];
            }
            else {
                this.equipment = null;
            }
        }
    };
    //inventorisMenus
    InventorisPage.prototype.inventorisMenus = function (myEvent) {
        var _this = this;
        this.popover = this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_4__inventoris_menus_inventoris_menus__["a" /* InventorisMenusPage */], {
            materialType: this.materialType,
        }, {
            cssClass: 'inventorisMenus',
            showBackdrop: true,
        });
        this.popover.onDidDismiss(function (res) {
            if (res) {
                if (res.type === 'qrcode') {
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__barcode_scanner_barcode_scanner__["a" /* BarcodeScannerPage */]);
                }
                else if (res.type === 'out') {
                    var user = JSON.parse(localStorage.getItem('USER_INFO'));
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
                        materialType: res.materialType,
                        type: 'out',
                        value: {
                            warehouseId: _this.warehouses ? _this.warehouses.warehouseId : null,
                            warehouseName: _this.warehouses
                                ? _this.warehouses.warehouseName
                                : null,
                            ioOperator: user.userId,
                            ioOperatorName: user.realName,
                            ioTime: __WEBPACK_IMPORTED_MODULE_14_moment___default()().format(),
                            materialIostorgeDetails: _this.materials
                                ? [
                                    {
                                        materialId: _this.materials
                                            ? _this.materials.materialId
                                            : null,
                                        materialNo: _this.materials
                                            ? _this.materials.materialNo
                                            : null,
                                    },
                                ]
                                : [],
                        },
                    });
                }
                else if (res.type === 'in') {
                    var user = JSON.parse(localStorage.getItem('USER_INFO'));
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
                        materialType: res.materialType,
                        type: 'in',
                        value: {
                            warehouseId: _this.warehouses ? _this.warehouses.warehouseId : null,
                            warehouseName: _this.warehouses
                                ? _this.warehouses.warehouseName
                                : null,
                            ioOperator: user.userId,
                            ioOperatorName: user.realName,
                            ioTime: __WEBPACK_IMPORTED_MODULE_14_moment___default()().format(),
                            materialIostorgeDetails: _this.materials
                                ? [
                                    {
                                        materialId: _this.materials
                                            ? _this.materials.materialId
                                            : null,
                                        materialNo: _this.materials
                                            ? _this.materials.materialNo
                                            : null,
                                    },
                                ]
                                : [],
                        },
                    });
                }
            }
        });
        this.popover.present({
            ev: myEvent,
        });
    };
    InventorisPage.prototype.getInventorisList = function (first, refresher) {
        var _this = this;
        var loading = null;
        if (!refresher) {
            loading = this.loadingCtrl.create({
                spinner: 'crescent',
            });
            loading.present();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            materialType: this.materialType,
            warehouseId: (this.warehouses && this.warehouses.warehouseId) || null,
            materialIds: this.materialIds || null,
            deviceId: (this.equipment && this.equipment.deviceId) || null,
            page: this.page,
            size: 10,
        };
        this.materialservice.getInventorisList(__assign({}, params)).subscribe(function (res) {
            if (res) {
                _this.inventorisList = res.content;
            }
            if (refresher)
                refresher.complete();
            if (loading)
                loading.dismiss();
        });
    };
    InventorisPage.prototype.doRefresh = function (refresher) {
        this.getInventorisList(true, refresher);
    };
    InventorisPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            materialType: this.materialType,
            warehouseId: (this.warehouses && this.warehouses.warehouseId) || null,
            materialIds: this.materialIds || null,
            deviceId: (this.equipment && this.equipment.deviceId) || null,
            page: this.page,
            size: 10,
        };
        this.materialservice.getInventorisList(__assign({}, params)).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.inventorisList = _this.inventorisList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.inventorisList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    InventorisPage.prototype.inventorisRecord = function (inventoris) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__inventoris_record_inventoris_record__["a" /* InventorisRecordPage */], {
            myOperate: null,
            materialType: this.materialType,
            warehouseId: inventoris.warehouseId,
            warehouseName: inventoris.warehouseName,
            materialId: inventoris.materialId,
            materialNo: inventoris.materialNo,
        });
    };
    InventorisPage.prototype.openInputModal = function (params, type) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_13__util_modal_common_input_common_input__["a" /* CommonInputPage */], {
            title: type === 'in' ? '入库数量' : '出库数量',
            type: 'number',
        }, {
            cssClass: 'commonModal commonInputModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data && data.value) {
                params.ioNum = data.value;
                _this.inventorisOutIn(params, type);
            }
        });
        modal.present();
    };
    InventorisPage.prototype.inventorisOutIn = function (params, type) {
        var user = JSON.parse(localStorage.getItem('USER_INFO'));
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
            type: type,
            value: {
                warehouseId: params.warehouseId,
                warehouseName: params.warehouseName,
                ioOperator: user.userId,
                ioTime: __WEBPACK_IMPORTED_MODULE_14_moment___default()().format(),
                ioOperatorName: user.realName,
                materialIostorgeDetails: [
                    {
                        inventoryId: params.inventoryId,
                        materialId: params.materialId,
                        materialNo: params.materialNo,
                        materialSpec: params.materialSpec,
                        materialName: params.materialName,
                        ioNum: params.ioNum,
                        unit: params.unit,
                    },
                ],
            },
        });
    };
    /**控制侧边栏 */
    InventorisPage.prototype.serchMenu = function () {
        var _this = this;
        this.showMenu = true;
        setTimeout(function () {
            _this.menuCtrl.enable(true, 'search');
            _this.menuCtrl.open('search');
        }, 0);
    };
    InventorisPage.prototype.selectWarehouses = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_10__util_common_warehouse_common_warehouse__["a" /* CommonWarehousePage */], {
            selectedItem: [this.materials],
        });
        modal.onDidDismiss(function (e) {
            if (e) {
                if (e.type === 'ok') {
                    _this.warehouses = e.value;
                }
                else {
                    _this.warehouses = null;
                }
            }
        });
        modal.present({ keyboardClose: true });
    };
    InventorisPage.prototype.clearWarehouses = function (event) {
        event.stopPropagation();
        this.warehouses = null;
    };
    InventorisPage.prototype.selectEquipment = function () {
        var _this = this;
        if (!this.equipment) {
            var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_11__util_common_station_common_station__["a" /* CommonStationPage */], {});
            modal.onDidDismiss(function (e) {
                if (e) {
                    _this.station = e;
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
                        stationId: e.id,
                        isSingle: true,
                        selectedItem: [],
                    });
                }
            });
            modal.present({ keyboardClose: true });
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
                stationId: this.station.id,
                isSingle: true,
                selectedItem: [this.equipment],
            });
        }
    };
    InventorisPage.prototype.clearEquipment = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.equipment = null;
    };
    InventorisPage.prototype.ok = function () {
        this.menuCtrl.close('search');
        this.getInventorisList(true);
    };
    InventorisPage.prototype.reset = function () {
        this.warehouses = null;
        this.materials = null;
        this.equipment = null;
    };
    InventorisPage.prototype.viewImage = function (url) {
        this.photoViewer.show(url);
    };
    //物料选择
    InventorisPage.prototype.selectMaterials = function () {
        var _this = this;
        if (!this.warehouses) {
            return this.mutilservice.popToastView('请先选择仓库');
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_15__util_common_materials_common_materials__["a" /* CommonMaterialsPage */], {
            ioType: null,
            selectType: 'multi',
            materialType: this.materialType,
            warehouseId: this.warehouses.warehouseId || null,
            selectedItem: this.materia || [],
        });
        modal.onDidDismiss(function (e) {
            if (e) {
                if (e.type == 'ok') {
                    _this.materialIds = e.value.map(function (item) { return item.materialId; });
                }
                else {
                    _this.materia = [];
                    _this.materialIds = [];
                }
            }
        });
        modal.present({ keyboardClose: true });
    };
    InventorisPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_5__angular_core__["Component"])({
            selector: 'page-inventoris',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inventoris/inventoris.html"*/'<!--\n  Generated template for the InventorisPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>物资库存</ion-title>\n    <ion-buttons end>\n      <button class="navbar-button" ion-button icon-only (click)="serchMenu()">\n        <ion-icon name="search"></ion-icon>\n      </button>\n      <button\n        class="navbar-button"\n        ion-button\n        icon-only\n        (click)="inventorisMenus($event)"\n      >\n        <ion-icon name="add-square"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n  <ion-toolbar>\n    <div class="search">\n      <span class="select-item" (click)="select()">{{materialTypeText}}</span>\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <!-- <div class="search">\n    <span (click)="select()">{{materialTypeText+\'▼\' || \'\'}}</span>\n  </div> -->\n  <ion-list>\n    <ion-card *ngFor="let inventoris of inventorisList">\n      <ion-card-header> {{inventoris.title}} </ion-card-header>\n      <ng-container *ngIf="inventoris.pic">\n        <div\n          class="inventoris-img"\n          [style.background-image]="\'url(\' + fileBasePath+inventoris.pic+ \')\'"\n          (tap)="viewImage(fileBasePath+inventoris.pic)"\n        ></div>\n      </ng-container>\n      <ion-card-content>\n        <p>{{inventoris.item1}}</p>\n        <p>{{inventoris.item2}}</p>\n        <p>{{inventoris.item3}}</p>\n        <p>{{inventoris.item4}}</p>\n      </ion-card-content>\n      <ion-row>\n        <ion-col col-6>\n          <button\n            ion-button\n            icon-start\n            clear\n            small\n            (tap)="inventorisRecord(inventoris)"\n          >\n            <ion-icon name="inventoris-record"></ion-icon>\n            <div>出入库记录</div>\n          </button>\n        </ion-col>\n        <ion-col col-3 *ngIf="inventoris.hasInOutBtns===1">\n          <button\n            ion-button\n            icon-start\n            clear\n            small\n            (tap)="openInputModal(inventoris,\'out\')"\n          >\n            <ion-icon name="inventoris-out"></ion-icon>\n            <div>出库</div>\n          </button>\n        </ion-col>\n        <ion-col col-3 *ngIf="inventoris.hasInOutBtns===1">\n          <button\n            ion-button\n            icon-start\n            clear\n            small\n            (tap)="openInputModal(inventoris,\'in\')"\n          >\n            <ion-icon name="inventoris-in"></ion-icon>\n            <div>入库</div>\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-card>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n\n<ng-container *ngIf="showMenu">\n  <ion-menu\n    [content]="search"\n    side="right"\n    id="search"\n    type="overlay"\n    swipeEnabled="true"\n    class="search-menu"\n  >\n    <ion-content class="outer-content" no-bounce>\n      <div class="common-search-container">\n        <div class="common-search">\n          <div class="button-picker border-bottom">\n            <div class="query-label">仓库</div>\n            <button\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectWarehouses()"\n            >\n              {{(warehouses?.warehouseName)||\'未选择\'}}\n              <ion-icon\n                *ngIf="warehouses"\n                (click)="clearWarehouses($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">物料</div>\n            <button\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectMaterials()"\n            >\n              {{materia.length?\'已选\'+(materia.length)+\'项\':\'未选择\'}}\n            </button>\n          </div>\n          <div class="button-picker">\n            <div class="query-label">关联设备</div>\n            <button\n              class="ell"\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectEquipment()"\n            >\n              {{(equipment?.deviceName)||\'未选择\'}}\n              <ion-icon\n                *ngIf="equipment"\n                (click)="clearEquipment($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n        </div>\n        <ion-list>\n          <ion-row class="fix-bottom">\n            <ion-col col-6 text-center>\n              <button\n                ion-button\n                round\n                small\n                class="reset-btn"\n                color="light"\n                (click)="reset()"\n              >\n                重置\n              </button>\n            </ion-col>\n            <ion-col col-6 text-center>\n              <button ion-button round small class="query-btn" (click)="ok()">\n                查询\n              </button>\n            </ion-col>\n          </ion-row>\n        </ion-list>\n      </div>\n    </ion-content>\n  </ion-menu>\n</ng-container>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inventoris/inventoris.html"*/,
        }),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_5__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_7__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [Object, __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["t" /* PopoverController */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_material_service__["a" /* MaterialService */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["l" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["v" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_1__ionic_native_photo_viewer__["a" /* PhotoViewer */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["a" /* ActionSheetController */]])
    ], InventorisPage);
    return InventorisPage;
}());

//# sourceMappingURL=inventoris.js.map

/***/ }),

/***/ 132:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DefectManagementPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__defect_management_details_defect_management_details__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_defes_servicer__ = __webpack_require__(172);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_backend_service__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__util_common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_debounce_service__ = __webpack_require__(344);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













/**
 * Generated class for the DefectManagementPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 * 缺陷工单
 */
var DefectManagementPage = /** @class */ (function () {
    function DefectManagementPage(navCtrl, navParams, materialservice, modalCtrl, mutilservice, defesservice, menuController, backendservice, alertCtrl, debounceservice) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.materialservice = materialservice;
        this.modalCtrl = modalCtrl;
        this.mutilservice = mutilservice;
        this.defesservice = defesservice;
        this.menuController = menuController;
        this.backendservice = backendservice;
        this.alertCtrl = alertCtrl;
        this.debounceservice = debounceservice;
        this.page = 0;
        this.searchPageParams = {
            startReportTime: __WEBPACK_IMPORTED_MODULE_6_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endReportTime: __WEBPACK_IMPORTED_MODULE_6_moment__().format('YYYY-MM-DD'),
            defectStatus: [],
        };
        // 快速查询选项
        this.aQueryFlag = [
            { first: '01', second: '我的待办' },
            { first: '02', second: '我负责的' },
            { first: '05', second: '我发现的' },
            { first: '03', second: '我参与的' },
            { first: '04', second: '抄送我的' },
        ];
        this.customStartPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchPageParams.startReportTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.customEndPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchPageParams.endReportTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.showMenu = false;
    }
    DefectManagementPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad DefectManagementPage');
        this.searchPageParams.stationId = this.navParams.get('stationId');
        this.searchPageParams.stationName = this.navParams.get('stationName');
        if (this.searchPageParams.stationId && this.searchPageParams.stationName) {
            this.station = {
                id: this.searchPageParams.stationId,
                title: this.searchPageParams.stationName,
            };
        }
        this.searchPageParams.equipment = this.navParams.get('equipment');
        this.equipment = this.navParams.get('equipment');
        // 获取缺陷状态
        this.backendservice.getProps({ typeId: 'defectStatus' }).subscribe(function (res) {
            _this.aDefectStatus = res;
        });
        var d = this.navParams.get('startDate');
        if (d) {
            this.searchPageParams.startReportTime = __WEBPACK_IMPORTED_MODULE_6_moment__(d).startOf('month').format('YYYY-MM-DD');
            this.searchPageParams.endReportTime = __WEBPACK_IMPORTED_MODULE_6_moment__(d).endOf('month').format('YYYY-MM-DD');
        }
        this.searchPageParams.queryFlag = this.navParams.get('queryFlag');
        this.getDefectsList(true);
    };
    DefectManagementPage.prototype.ionViewWillEnter = function () {
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.freshPage = false;
            this.getDefectsList(true);
        }
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.navParams.data.equipmentList = [];
            if (equipmentList.length > 0) {
                this.equipment = equipmentList[0];
                this.searchPageParams.equipment = this.equipment;
            }
            else {
                this.equipment = null;
                this.searchPageParams.equipment = null;
            }
        }
    };
    DefectManagementPage.prototype.getDefectsList = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            queryFlag: this.searchPageParams.queryFlag,
            defectCode: (this.searchPageParams && this.searchPageParams.defectCode) || null,
            stationId: (this.searchPageParams && this.searchPageParams.stationId) || null,
            startReportTime: (this.searchPageParams && this.searchPageParams.startReportTime) ||
                __WEBPACK_IMPORTED_MODULE_6_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endReportTime: (this.searchPageParams && this.searchPageParams.endReportTime) ||
                __WEBPACK_IMPORTED_MODULE_6_moment__().format('YYYY-MM-DD'),
            defectStatus: (this.searchPageParams && this.searchPageParams.defectStatus) || null,
            responsiblePerson: (this.searchPageParams &&
                this.searchPageParams.responsiblePerson &&
                this.searchPageParams.responsiblePerson.userId) ||
                null,
            deviceId: (this.searchPageParams &&
                this.searchPageParams.equipment &&
                this.searchPageParams.equipment.deviceId) ||
                '',
            page: this.page,
            size: 10,
        };
        this.defesservice.getDefectsList(__assign({}, params)).subscribe(function (res) {
            if (res) {
                _this.defectsList = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    DefectManagementPage.prototype.doRefresh = function (refresher) {
        // let fTimer: any | null = null;
        // let _that = this;
        // if (fTimer) {
        //   return false;
        // }
        // fTimer = setTimeout(() => {
        //   fTimer = null;
        //   _that.getDefectsList(true, refresher);
        // }, 2000);
        this.debounceservice.throttle(this.getDefectsList(true, refresher), 2000);
    };
    /**
     * 节流方法
     * @param infiniteScroll 节流的事件
     * @param delay 节流的毫秒数
     */
    DefectManagementPage.prototype.deBounceFnc = function (infiniteScroll, delay) {
        var _this = this;
        var timer = null;
        if (timer) {
            return false;
        }
        timer = setTimeout(function () {
            timer = null;
            _this.doInfinite(infiniteScroll);
            // fn.apply(ctx, args);
        }, delay);
    };
    DefectManagementPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            queryFlag: this.searchPageParams.queryFlag,
            defectCode: (this.searchPageParams && this.searchPageParams.defectCode) || null,
            stationId: (this.searchPageParams && this.searchPageParams.stationId) || null,
            startReportTime: (this.searchPageParams && this.searchPageParams.startReportTime) ||
                __WEBPACK_IMPORTED_MODULE_6_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endReportTime: (this.searchPageParams && this.searchPageParams.endReportTime) ||
                __WEBPACK_IMPORTED_MODULE_6_moment__().format('YYYY-MM-DD'),
            defectStatus: (this.searchPageParams && this.searchPageParams.defectStatus) || [],
            responsiblePerson: (this.searchPageParams &&
                this.searchPageParams.responsiblePerson &&
                this.searchPageParams.responsiblePerson.userId) ||
                null,
            deviceId: (this.searchPageParams &&
                this.searchPageParams.equipment &&
                this.searchPageParams.equipment.deviceId) ||
                '',
            page: this.page,
            size: 10,
        };
        this.defesservice.getDefectsList(__assign({}, params)).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.defectsList = _this.defectsList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.defectsList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    DefectManagementPage.prototype.remind = function (event, defectId) {
        var _this = this;
        event.stopPropagation && event.stopPropagation();
        this.defesservice.remind(defectId).subscribe(function (res) {
            _this.mutilservice.popToastView(res);
        });
    };
    DefectManagementPage.prototype.addDefect = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */]);
    };
    DefectManagementPage.prototype.editDefect = function (defectId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */], {
            defectId: defectId,
        });
    };
    /**控制侧边栏 */
    DefectManagementPage.prototype.serchMenu = function () {
        var _this = this;
        this.showMenu = true;
        setTimeout(function () {
            _this.menuController.enable(true, 'search');
            _this.menuController.open('search');
        }, 0);
    };
    // 快速查询
    DefectManagementPage.prototype.selectQuickSearch = function (type) {
        if (this.searchPageParams.queryFlag === type) {
            this.searchPageParams.queryFlag = null;
        }
        else {
            this.searchPageParams.queryFlag = type;
        }
        this.menuController.close('search');
        this.getDefectsList(true);
    };
    // 电站选择
    DefectManagementPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.station = e;
                _this.searchPageParams.stationId = e.id;
            }
        });
        modal.present({ keyboardClose: true });
    };
    // 清除电站
    DefectManagementPage.prototype.clearStation = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchPageParams.stationId = null;
        this.station = null;
    };
    // 负责人
    DefectManagementPage.prototype.selectUser = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.responsiblePerson = data.value[0];
                    _this.searchPageParams.responsiblePerson = _this.responsiblePerson;
                }
            }
        });
        modal.present();
    };
    DefectManagementPage.prototype.clearUser = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchPageParams.responsiblePerson = null;
        this.responsiblePerson = null;
    };
    //缺陷状态
    DefectManagementPage.prototype.selectStatusOption = function (status) {
        var removeItem = __WEBPACK_IMPORTED_MODULE_9_lodash__["remove"](this.searchPageParams.defectStatus, function (n) { return status === n; });
        if (removeItem.length == 0) {
            this.searchPageParams.defectStatus.push(status);
        }
    };
    DefectManagementPage.prototype.selectEquipment = function () {
        var equipment = this.equipment ? [this.equipment] : [];
        if (!this.station) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            stationId: this.station.id,
            isSingle: true,
            selectedItem: equipment,
        });
    };
    DefectManagementPage.prototype.clearEquipment = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.equipment = null;
        this.searchPageParams.equipment = null;
    };
    DefectManagementPage.prototype.ok = function () {
        if (this.searchPageParams.startReportTime &&
            this.searchPageParams.endReportTime &&
            __WEBPACK_IMPORTED_MODULE_6_moment__(this.searchPageParams.startReportTime).valueOf() >
                __WEBPACK_IMPORTED_MODULE_6_moment__(this.searchPageParams.endReportTime).valueOf()) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选时间范围不正确',
                buttons: ['确定'],
            });
            alert_1.present();
            return;
        }
        this.menuController.close('search');
        this.getDefectsList(true);
    };
    DefectManagementPage.prototype.reset = function () {
        this.equipment = null;
        this.station = null;
        this.searchPageParams = {
            queryFlag: '',
            defectCode: '',
            stationId: null,
            startReportTime: __WEBPACK_IMPORTED_MODULE_6_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endReportTime: __WEBPACK_IMPORTED_MODULE_6_moment__().format('YYYY-MM-DD'),
            defectStatus: [],
            responsiblePerson: null,
            deviceId: null,
        };
    };
    DefectManagementPage.prototype.getStatus = function (status, text) {
        return status === text;
    };
    DefectManagementPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'page-defect-management',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/defect-management/defect-management.html"*/'<!--\n  Generated template for the DefectManagementPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>缺陷</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon name="search" style="font-size: 1.4em"></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="addDefect()">\n        <ion-icon name="add-square" style="font-size: 1.4em"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding class="card-list" #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div class="card-item" *ngFor="let defect of defectsList">\n      <div class="left-line">\n        <div class="line-icon"></div>\n      </div>\n      <div class="right-content">\n        <div class="title">{{defect.time}}</div>\n        <ion-card (click)="editDefect(defect.id)">\n          <ion-card-header>\n            {{defect.title}}\n            <span\n              class="defect-info"\n              [ngClass]="{\'defect-01\': getStatus(defect.status,\'处理中\'),\'defect-02\': getStatus(defect.status,\'完全消缺\'),\'defect-03\': getStatus(defect.status,\'不完全消缺\'),\'defect-04\': getStatus(defect.status,\'不需要处理\'),\'defect-05\': getStatus(defect.status,\'无法处理\')}"\n              >{{defect.status}}</span\n            >\n            <span\n              class="remind-icon"\n              *ngIf="defect.button===\'remind\'"\n              (click)="remind($event,defect.id)"\n              >催单</span\n            >\n          </ion-card-header>\n          <ul class="ion-card-content">\n            <li class="ell">{{defect.item1}}</li>\n            <li class="ell">{{defect.item2}}</li>\n            <li class="ell">{{defect.item3}}</li>\n            <li class="ell">{{defect.item4}}</li>\n          </ul>\n          <!-- <div\n            *ngIf="defect.status"\n            class="card-tip"\n            [style.background-color]="defect.statusStyle"\n          >\n            {{defect.status}}\n          </div> -->\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="deBounceFnc($event, 2000)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n\n<ng-container *ngIf="showMenu">\n  <ion-menu\n    [content]="search"\n    side="right"\n    id="search"\n    type="overlay"\n    [persistent]="true"\n    swipeEnabled="true"\n    class="search-menu"\n  >\n    <ion-content class="outer-content" no-bounce>\n      <div class="common-search-container">\n        <div class="common-search">\n          <div class="select-picker border-bottom">\n            <div class="query-label">快速查询</div>\n            <ion-grid>\n              <ion-row>\n                <ion-col col-4 *ngFor="let item of aQueryFlag">\n                  <div\n                    class="select-option"\n                    [ngClass]="{\'active-option\': searchPageParams.queryFlag===item.first}"\n                    (click)="selectQuickSearch(item.first)"\n                  >\n                    {{item.second}}\n                  </div></ion-col\n                >\n              </ion-row>\n            </ion-grid>\n          </div>\n          <div class="input-picker border-bottom">\n            <div class="query-label">缺陷单号</div>\n            <ion-input\n              type="text"\n              [(ngModel)]="searchPageParams.defectCode"\n            ></ion-input>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">电站</div>\n            <button\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectStation()"\n            >\n              {{(station?.title)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="station"\n                                (click)="clearStation($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="station"\n                (click)="clearStation($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="time-picker border-bottom">\n            <div class="query-label">发现时间</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [(ngModel)]="searchPageParams.startReportTime"\n              [pickerOptions]="customStartPickerOptions"\n            ></ion-datetime>\n            <div class="line">-</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [pickerOptions]="customEndPickerOptions"\n              [(ngModel)]="searchPageParams.endReportTime"\n            ></ion-datetime>\n          </div>\n          <div class="select-picker border-bottom">\n            <div class="query-label">缺陷状态</div>\n            <ion-grid>\n              <ion-row>\n                <ion-col col-4 *ngFor="let item of aDefectStatus">\n                  <div\n                    class="select-option"\n                    [ngClass]="{\'active-option\': searchPageParams.defectStatus.indexOf(item.first)!==-1}"\n                    (click)="selectStatusOption(item.first)"\n                  >\n                    {{item.second}}\n                  </div></ion-col\n                >\n              </ion-row>\n            </ion-grid>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">负责人</div>\n            <button ion-button round small color="light" (click)="selectUser()">\n              {{(responsiblePerson?.realName)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="responsiblePerson"\n                                (click)="clearUser($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="responsiblePerson"\n                (click)="clearUser($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="button-picker">\n            <div class="query-label">缺陷设备</div>\n            <button\n              class="ell"\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectEquipment()"\n            >\n              {{(equipment?.deviceName)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="equipment"\n                                (click)="clearEquipment($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="equipment"\n                (click)="clearEquipment($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n        </div>\n        <ion-list>\n          <ion-row class="fix-bottom">\n            <ion-col col-6 text-center>\n              <button\n                ion-button\n                round\n                small\n                class="reset-btn"\n                color="light"\n                (click)="reset()"\n              >\n                重置\n              </button>\n            </ion-col>\n            <ion-col col-6 text-center>\n              <button ion-button round small class="query-btn" (click)="ok()">\n                查询\n              </button>\n            </ion-col>\n          </ion-row>\n        </ion-list>\n      </div>\n    </ion-content>\n  </ion-menu>\n</ng-container>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/defect-management/defect-management.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_5__providers_material_service__["a" /* MaterialService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1__providers_defes_servicer__["a" /* DefesService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_10__providers_backend_service__["a" /* BackendService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_12__providers_debounce_service__["a" /* DebounceService */]])
    ], DefectManagementPage);
    return DefectManagementPage;
}());

//# sourceMappingURL=defect-management.js.map

/***/ }),

/***/ 133:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RunLogService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_http__ = __webpack_require__(228);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




/**
 * 运行日志
 */
var RunLogService = /** @class */ (function () {
    function RunLogService(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        this.listLogsUrl = this.appConfig.apiEndpoint + '/api/jobRecord/jobRecords';
        this.delLogUrl = this.appConfig.apiEndpoint + '/api/jobRecord/deleteJobRecord';
        this.addLogUrl = this.appConfig.apiEndpoint + '/api/jobRecord/addJobRecord';
        this.updateLogUrl = this.appConfig.apiEndpoint + '/api/jobRecord/updateJobRecord';
        this.logDetailUrl = this.appConfig.apiEndpoint + '/api/jobRecord/jobRecord';
        this.prevLogDetailUrl = this.appConfig.apiEndpoint + '/api/jobRecord/getAddjobRecord';
        // 查询日志列表
        this.recordsListUrl = this.appConfig.apiEndpoint + '/api/m/v2/jobRecord/records';
        // 查询日志列表
        this.getRecordUrl = this.appConfig.apiEndpoint + '/api/m/v2/jobRecord';
        this.saveRecordUrl = this.appConfig.apiEndpoint + '/api/m/v2/jobRecord';
        this.deleteRecordUrl = this.appConfig.apiEndpoint + '/api/m/v2/jobRecord';
    }
    /**
     * 日志列表
     * @param stationId
     * @param startTime
     * @param endTime
     * @param page
     * @param size
     */
    RunLogService.prototype.listLog = function (stationId, startTime, endTime, page, size) {
        var url = this.listLogsUrl +
            '?stationId=' +
            stationId +
            '&recordTypes=01&startTime=' +
            startTime +
            '&endTime=' +
            endTime +
            '&page=' +
            page +
            '&size=' +
            size;
        return this.http.get(url);
    };
    /**
     * 单个日志详细信息
     * @param recordId
     */
    RunLogService.prototype.logDetail = function (recordId) {
        var url = this.logDetailUrl + '?recordId=' + recordId;
        return this.http.get(url);
    };
    /**
     * 上一条日志详细信息
     * @param recordId
     * @param reportDate
     */
    RunLogService.prototype.prevLogDetail = function (stationId, endDate) {
        var url = this.prevLogDetailUrl + '?stationId=' + stationId + '&endDate=' + endDate;
        return this.http.get(url);
    };
    /**
     * 新增日志
     * @param runlog
     */
    RunLogService.prototype.addLog = function (runlog) {
        return this.http.post(this.addLogUrl, runlog);
    };
    /**
     * 更新日志
     * @param runlog
     */
    RunLogService.prototype.updateLog = function (runlog) {
        return this.http.put(this.updateLogUrl, runlog);
    };
    /**
     * 删除日志
     * @param recordId
     */
    RunLogService.prototype.delLog = function (recordId) {
        var url = this.delLogUrl + '?recordId=' + recordId;
        return this.http.delete(url);
    };
    RunLogService.prototype.getRecordsList = function (params) {
        var url = this.recordsListUrl +
            '?' +
            (params.stationId ? 'stationId=' + params.stationId + '&' : '') +
            'startTime=' +
            params.startTime +
            '&endTime=' +
            params.endTime +
            '&status=' +
            params.status +
            '&page=' +
            params.page +
            '&size=' +
            params.size;
        return this.http.get(url);
    };
    RunLogService.prototype.getRecord = function (recordId, stationId) {
        var url = this.getRecordUrl + '/' + recordId + (recordId === 0 ? '?stationId=' + stationId : '');
        return this.http.get(url);
    };
    RunLogService.prototype.saveRecord = function (params) {
        var url = this.saveRecordUrl;
        return this.http.post(url, params, { responseType: __WEBPACK_IMPORTED_MODULE_0__angular_http__["a" /* ResponseContentType */].Text });
    };
    RunLogService.prototype.updateRecord = function (params) {
        var url = this.saveRecordUrl;
        return this.http.put(url, params, { responseType: __WEBPACK_IMPORTED_MODULE_0__angular_http__["a" /* ResponseContentType */].Text });
    };
    RunLogService.prototype.deleteRecord = function (recordId) {
        var url = this.deleteRecordUrl + '?recordId=' + recordId;
        return this.http.delete(url, { responseType: 0 });
    };
    RunLogService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__auth_http_service__["a" /* AuthHttpService */], Object])
    ], RunLogService);
    return RunLogService;
}());

//# sourceMappingURL=runlog.service.js.map

/***/ }),

/***/ 134:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaintainsProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util_Mutil_service__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




/*
  Generated class for the MaintainsProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var MaintainsProvider = /** @class */ (function () {
    function MaintainsProvider(http, appConfig, mutilservice) {
        this.http = http;
        this.appConfig = appConfig;
        this.mutilservice = mutilservice;
        console.log('Hello MaintainsProvider Provider');
        this.maintainsUrl = this.appConfig.apiEndpoint + '/api/m/v2/maintains';
        this.maintainsTypesUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/maintains/types';
        this.maintainsObjUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/maintains/obj';
        this.maintainsRemindUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/maintains/remind';
        this.maintainsCheckUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/maintains/check';
        this.maintainsObjUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/maintains/obj';
        this.maintainsObjItemisUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/maintains/obj/itemhis';
    }
    MaintainsProvider.prototype.getMaintainsList = function (params) {
        return this.http.get(this.maintainsUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    MaintainsProvider.prototype.getMaintainsTypes = function () {
        return this.http.get(this.maintainsTypesUrl);
    };
    MaintainsProvider.prototype.getMaintainsDetails = function (inspectionId, params) {
        return this.http.get(this.maintainsUrl + '/' + inspectionId, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    MaintainsProvider.prototype.maintainsAction = function (params) {
        return this.http.post(this.maintainsUrl, params);
    };
    MaintainsProvider.prototype.maintainsUpdateAction = function (params) {
        return this.http.put(this.maintainsUrl, params);
    };
    MaintainsProvider.prototype.deleteMaintains = function (inspectionId) {
        return this.http.delete(this.maintainsUrl, { params: { inspectionId: inspectionId } });
    };
    MaintainsProvider.prototype.deleteObj = function (objId) {
        return this.http.delete(this.maintainsObjUrl + '?objId=' + objId);
    };
    MaintainsProvider.prototype.getObj = function (params) {
        return this.http.get(this.maintainsObjUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    MaintainsProvider.prototype.getObjItemHis = function (params) {
        return this.http.get(this.maintainsObjItemisUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    MaintainsProvider.prototype.saveObj = function (params) {
        return this.http.post(this.maintainsObjUrl, params);
    };
    MaintainsProvider.prototype.check = function (params) {
        return this.http.put(this.maintainsCheckUrl, params, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    MaintainsProvider.prototype.remind = function (inspectionId) {
        return this.http.put(this.maintainsRemindUrl, { inspectionId: inspectionId }, {
            params: { inspectionId: inspectionId },
            responseType: 0,
        });
    };
    MaintainsProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__auth_http_service__["a" /* AuthHttpService */], Object, __WEBPACK_IMPORTED_MODULE_3__util_Mutil_service__["a" /* MutilService */]])
    ], MaintainsProvider);
    return MaintainsProvider;
}());

//# sourceMappingURL=maintains.service.js.map

/***/ }),

/***/ 135:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HomeService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




var HomeService = /** @class */ (function () {
    function HomeService(http, mutilservice, appConfig) {
        this.http = http;
        this.mutilservice = mutilservice;
        this.appConfig = appConfig;
        this.homeinfoUrl = this.appConfig.apiEndpoint + '/api/m/v2/home/homeinfo';
        this.searchUrl = this.appConfig.apiEndpoint + '/api/m/v2/search';
        this.searchHistoryUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/search/searchHistory';
        this.modulesUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/framework/modules';
        this.alarmNoticeUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/alarmlogs/alarmNotice';
        this.qrsearchUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/framework/qrsearch';
        this.deviceInfoUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/device/deviceInfo';
        this.reportProductionMonthlyLyUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/report/production/monthly/ly';
    }
    /**
     * 首页数据接口
     */
    HomeService.prototype.gethomeinfo = function (params) {
        var url = this.homeinfoUrl + (params ? '?regionDatas=true' : '');
        return this.http.get(url);
    };
    /**
     * 全局搜索接口
     */
    HomeService.prototype.searchInfo = function (searchType, text, page) {
        var url = this.searchUrl +
            '?searchType=' +
            searchType +
            '&text=' +
            text +
            '&size=10' +
            '&page=' +
            page;
        return this.http.get(url);
    };
    /**
     * 全局搜索历史接口
     */
    HomeService.prototype.searchHistoryInfo = function () {
        var url = this.searchHistoryUrl;
        return this.http.get(url);
    };
    /**
     * 首页可配置功能图标
     */
    HomeService.prototype.modules = function () {
        var url = this.modulesUrl;
        return this.http.get(url);
    };
    HomeService.prototype.alarmNoticeInfo = function () {
        var url = this.alarmNoticeUrl;
        return this.http.get(url);
    };
    /**
     * name
     */
    HomeService.prototype.getReportProductionMonthlyLy = function (params) {
        var url = this.reportProductionMonthlyLyUrl;
        return this.http.get(url, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    HomeService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __param(2, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__auth_http_service__["a" /* AuthHttpService */],
            __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__["a" /* MutilService */], Object])
    ], HomeService);
    return HomeService;
}());

//# sourceMappingURL=home.service.js.map

/***/ }),

/***/ 1526:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return JwtInterceptor; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var JwtInterceptor = /** @class */ (function () {
    function JwtInterceptor() {
    }
    JwtInterceptor.prototype.intercept = function (request, next) {
        var _a;
        var authToken = localStorage.getItem('_TOKEN_');
        if (authToken) {
            request = request.clone({
                setHeaders: (_a = {},
                    _a['Authorization'] = "Bearer " + authToken,
                    _a),
            });
        }
        return next.handle(request);
    };
    JwtInterceptor = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])()
    ], JwtInterceptor);
    return JwtInterceptor;
}());

//# sourceMappingURL=jwt-interceptor.js.map

/***/ }),

/***/ 1527:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResponseHandlerInterceptor; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(139);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_observable_throw__ = __webpack_require__(245);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_observable_throw___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_observable_throw__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_operators__ = __webpack_require__(112);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_operators___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_rxjs_operators__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__util_Mutil_service__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var ResponseHandlerInterceptor = /** @class */ (function () {
    function ResponseHandlerInterceptor(events, mutil) {
        this.events = events;
        this.mutil = mutil;
    }
    ResponseHandlerInterceptor.prototype.intercept = function (req, next) {
        var _this = this;
        return next.handle(req).pipe(Object(__WEBPACK_IMPORTED_MODULE_4_rxjs_operators__["filter"])(function (event) { return event instanceof __WEBPACK_IMPORTED_MODULE_0__angular_common_http__["e" /* HttpResponse */] && event.status === 200; }), Object(__WEBPACK_IMPORTED_MODULE_4_rxjs_operators__["map"])(function (event) {
            _this.mutil.hideLoading();
            if (event.body.status === -1) {
                throw new __WEBPACK_IMPORTED_MODULE_0__angular_common_http__["d" /* HttpErrorResponse */]({
                    headers: event.headers,
                    url: event.url,
                    error: event.body.data,
                    status: 500,
                    statusText: 'error',
                });
            }
            return event.clone({ body: event.body.data });
        }), Object(__WEBPACK_IMPORTED_MODULE_4_rxjs_operators__["catchError"])(function (res) {
            switch (res.error.code) {
                case 300:
                    _this.events.publish('login:out');
                    break;
                default:
                    if (res.error.error === 'com.cie.nems.common.exception.NemsException') {
                        _this.mutil.popToastView(res.error.message);
                        _this.mutil.hideLoading();
                    }
                    else {
                        _this.mutil.popToastView('系统错误，请联系管理员！');
                    }
            }
            return Object(__WEBPACK_IMPORTED_MODULE_3_rxjs_observable_throw__["_throw"])(res);
        }));
    };
    ResponseHandlerInterceptor = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Events */], __WEBPACK_IMPORTED_MODULE_5__util_Mutil_service__["a" /* MutilService */]])
    ], ResponseHandlerInterceptor);
    return ResponseHandlerInterceptor;
}());

//# sourceMappingURL=response-handler-interceptor.js.map

/***/ }),

/***/ 1528:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyApp; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__ = __webpack_require__(247);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__ = __webpack_require__(380);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_tabs_tabs__ = __webpack_require__(355);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_login_login__ = __webpack_require__(354);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_home_service__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_android_permissions__ = __webpack_require__(370);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_settings_settings__ = __webpack_require__(854);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var MyApp = /** @class */ (function () {
    function MyApp(platform, statusBar, splashScreen, mUtils, modalCtrl, homeService, events, androidPermissions, appCtrl, alertCtrl, ionicApp, keyboard, settings) {
        var _this = this;
        this.platform = platform;
        this.mUtils = mUtils;
        this.modalCtrl = modalCtrl;
        this.homeService = homeService;
        this.events = events;
        this.androidPermissions = androidPermissions;
        this.appCtrl = appCtrl;
        this.alertCtrl = alertCtrl;
        this.ionicApp = ionicApp;
        this.keyboard = keyboard;
        this.settings = settings;
        this.rootPage = __WEBPACK_IMPORTED_MODULE_5__pages_login_login__["a" /* LoginPage */];
        splashScreen.show();
        this.settings
            .getActiveTheme()
            .subscribe(function (val) { return (_this.selectedTheme = val); });
        platform.ready().then(function () {
            // Okay, so the platform is ready and our plugins are available.
            // Here you can do any higher level native things you might need.
            statusBar.styleDefault();
            statusBar.overlaysWebView(false);
            splashScreen.hide();
            screen.orientation.lock('portrait');
            if (_this.platform.is('android')) {
                _this.requestPermission();
            }
            else {
            }
            setTimeout(function () {
                // this.mUtils.updateApp();
            }, 3000);
        });
        this.events.subscribe('login:in', function () {
            _this.alarmNoticInterval = setInterval(function () {
                _this.homeService.alarmNoticeInfo().subscribe(function (e) {
                    if (e.msg) {
                        _this.showContent(e.msg);
                    }
                });
            }, 60 * 1000);
        });
        this.events.subscribe('login:out', function () {
            clearInterval(_this.alarmNoticInterval);
        });
        this.registerBackButtonAction(this.rootPage); //注册返回按键事件
    }
    MyApp.prototype.showContent = function (message) {
        this.mUtils.customPrompt({ msg: message }, function (rs) {
            // let modal = this.modalCtrl.create(WarnMessage, {
            //     objType: '05',
            //     objIds: ''
            // });
            // modal.onDidDismiss((e) => {});
            // modal.present();
            // this.navCtrl.push(WarnMessage);
        });
    };
    MyApp.prototype.requestPermission = function () {
        var _this = this;
        this.androidPermissions
            .checkPermission(this.androidPermissions.PERMISSION.CAMERA)
            .then(function (result) {
            console.log('相机权限?', result.hasPermission);
            if (!result.hasPermission) {
                _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.CAMERA);
            }
        }, function (err) {
            return _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.CAMERA);
        });
        this.androidPermissions
            .checkPermission(this.androidPermissions.PERMISSION.RECORD_AUDIO)
            .then(function (result) {
            console.log('录音权限?', result.hasPermission);
            if (!result.hasPermission) {
                _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.RECORD_AUDIO);
            }
        }, function (err) {
            return _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.RECORD_AUDIO);
        });
        this.androidPermissions
            .checkPermission(this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION)
            .then(function (result) {
            console.log('定位权限?', result.hasPermission);
            if (!result.hasPermission) {
                _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION);
            }
        }, function (err) {
            return _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION);
        });
        this.androidPermissions
            .checkPermission(this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE)
            .then(function (result) {
            console.log('文件读取权限?', result.hasPermission);
            if (!result.hasPermission) {
                _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE);
            }
        }, function (err) {
            return _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE);
        });
        this.androidPermissions
            .checkPermission(this.androidPermissions.PERMISSION.REQUEST_INSTALL_PACKAGES)
            .then(function (result) {
            console.log('自动更新权限?', result.hasPermission);
            if (!result.hasPermission) {
                _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.REQUEST_INSTALL_PACKAGES);
            }
        }, function (err) {
            return _this.androidPermissions.requestPermission(_this.androidPermissions.PERMISSION.REQUEST_INSTALL_PACKAGES);
        });
    };
    MyApp.prototype.registerBackButtonAction = function (tabRef) {
        var _this = this;
        this.platform.registerBackButtonAction(function () {
            //按下返回键时，先关闭键盘
            if (_this.keyboard.isOpen()) {
                //按下返回键时，先关闭键盘
                _this.keyboard.close();
                return;
            }
            var activePortal = _this.ionicApp._modalPortal.getActive() ||
                _this.ionicApp._overlayPortal.getActive();
            var loadingPortal = _this.ionicApp._loadingPortal.getActive();
            if (activePortal) {
                //其他的关闭
                activePortal.dismiss().catch(function () { });
                activePortal.onDidDismiss(function () { });
                return;
            }
            if (loadingPortal) {
                //loading的话，返回键无效
                return;
            }
            // 获取已激活页面
            var activeVC = _this.nav.getActive();
            var page = activeVC.instance;
            if (!(page instanceof __WEBPACK_IMPORTED_MODULE_4__pages_tabs_tabs__["a" /* TabsPage */])) {
                if (!_this.nav.canGoBack()) {
                    // 当前页面为tabs，退出APP
                    return _this.showExit();
                }
                // 当前页面为tabs的子页面，正常返回
                return _this.nav.pop();
            }
            var tabs = page.tabs;
            var activeNav = tabs.getSelected();
            if (!activeNav.canGoBack()) {
                // 当前页面为tab栏，退出APP
                return _this.showExit();
            }
            // 当前页面为tab栏的子页面，正常返回
            return activeNav.pop();
        }, 101);
    };
    //退出应用方法
    MyApp.prototype.showExit = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: "\u786E\u5B9A\u8981\u9000\u51FA\u7A0B\u5E8F\u4E48\uFF1F",
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.platform.exitApp();
                    },
                },
            ],
        });
        confirm.present();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Nav */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Nav */])
    ], MyApp.prototype, "nav", void 0);
    MyApp = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/app/app.html"*/'<ion-nav [root]="rootPage" [class]="selectedTheme"></ion-nav>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/app/app.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__["a" /* StatusBar */],
            __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__["a" /* SplashScreen */],
            __WEBPACK_IMPORTED_MODULE_6__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_home_service__["a" /* HomeService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_android_permissions__["a" /* AndroidPermissions */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* App */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* IonicApp */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* Keyboard */],
            __WEBPACK_IMPORTED_MODULE_9__providers_settings_settings__["a" /* SettingsProvider */]])
    ], MyApp);
    return MyApp;
}());

//# sourceMappingURL=app.component.js.map

/***/ }),

/***/ 1529:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModalFromRightEnter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ModalFromRightLeave; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return ModalScaleEnter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return ModalScaleLeave; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var ModalFromRightEnter = /** @class */ (function (_super) {
    __extends(ModalFromRightEnter, _super);
    function ModalFromRightEnter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ModalFromRightEnter.prototype.init = function () {
        _super.prototype.init.call(this);
        var ele = this.enteringView.pageRef().nativeElement;
        var backdrop = new __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["c" /* Animation */](this.plt, ele.querySelector('ion-backdrop'));
        backdrop.beforeStyles({
            'z-index': 0,
            opacity: 0.3,
            visibility: 'visible'
        });
        var wrapper = new __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["c" /* Animation */](this.plt, ele.querySelector('.modal-wrapper'));
        wrapper.beforeStyles({ opacity: 1 });
        wrapper.fromTo('transform', 'translateX(100%)', 'translateX(20%)');
        var contentWrapper = new __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["c" /* Animation */](this.plt, ele.querySelector('ion-content.content'));
        contentWrapper.beforeStyles({ width: '80%' });
        this.element(this.enteringView.pageRef())
            .duration(300)
            .easing('cubic-bezier(.25, .1, .25, 1)')
            .add(backdrop)
            .add(wrapper)
            .add(contentWrapper);
    };
    return ModalFromRightEnter;
}(__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["r" /* PageTransition */]));

var ModalFromRightLeave = /** @class */ (function (_super) {
    __extends(ModalFromRightLeave, _super);
    function ModalFromRightLeave() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ModalFromRightLeave.prototype.init = function () {
        _super.prototype.init.call(this);
        var ele = this.leavingView.pageRef().nativeElement;
        var backdrop = new __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["c" /* Animation */](this.plt, ele.querySelector('ion-backdrop'));
        backdrop.beforeStyles({ visibility: 'hidden' });
        var wrapper = new __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["c" /* Animation */](this.plt, ele.querySelector('.modal-wrapper'));
        wrapper.fromTo('transform', 'translateX(20%)', 'translateX(100%)');
        this.element(this.leavingView.pageRef())
            .duration(300)
            .easing('cubic-bezier(.25, .1, .25, 1)')
            .add(backdrop)
            .add(wrapper);
    };
    return ModalFromRightLeave;
}(__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["r" /* PageTransition */]));

var ModalScaleEnter = /** @class */ (function (_super) {
    __extends(ModalScaleEnter, _super);
    function ModalScaleEnter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ModalScaleEnter.prototype.init = function () {
        _super.prototype.init.call(this);
        var ele = this.enteringView.pageRef().nativeElement;
        var wrapper = new __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["c" /* Animation */](this.plt, ele.querySelector('.modal-wrapper'));
        wrapper.beforeStyles({ opacity: 1 });
        wrapper.fromTo('transform', 'scale(0)', 'scale(1)');
        this.element(this.enteringView.pageRef())
            .duration(400)
            .easing('cubic-bezier(.1, .7, .1, 1)')
            .add(wrapper);
    };
    return ModalScaleEnter;
}(__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["r" /* PageTransition */]));

var ModalScaleLeave = /** @class */ (function (_super) {
    __extends(ModalScaleLeave, _super);
    function ModalScaleLeave() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ModalScaleLeave.prototype.init = function () {
        _super.prototype.init.call(this);
        var ele = this.leavingView.pageRef().nativeElement;
        var wrapper = new __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["c" /* Animation */](this.plt, ele.querySelector('.modal-wrapper'));
        wrapper.fromTo('transform', 'scale(1)', 'scale(0)');
        this.element(this.leavingView.pageRef())
            .duration(400)
            .easing('cubic-bezier(.1, .7, .1, 1)')
            .add(wrapper);
    };
    return ModalScaleLeave;
}(__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["r" /* PageTransition */]));

//# sourceMappingURL=modal-transitions.js.map

/***/ }),

/***/ 170:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BarcodeScannerPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_qr_scanner__ = __webpack_require__(378);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_common_http__ = __webpack_require__(139);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs_operators__ = __webpack_require__(112);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs_operators___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_rxjs_operators__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs_Observable__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs_Observable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_rxjs_Observable__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the BarcodeScannerPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var BarcodeScannerPage = /** @class */ (function () {
    function BarcodeScannerPage(navCtrl, navParams, qrScanner, viewCtrl, mUtil, http) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.qrScanner = qrScanner;
        this.viewCtrl = viewCtrl;
        this.mUtil = mUtil;
        this.http = http;
        this.light = false; //判断闪光灯
        this.isShow = false;
        //默认为false
        this.light = false;
        this.frontCamera = false;
    }
    BarcodeScannerPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        this.qrScanner
            .prepare()
            .then(function (status) {
            if (status.authorized) {
                // camera permission was granted
                // start scanning
                var scanSub_1 = _this.qrScanner.scan().subscribe(function (text) {
                    if (text) {
                        _this.qrScanner.hide(); // hide camera preview
                        scanSub_1.unsubscribe(); // stop scanning
                        _this.navCtrl.getPrevious().data.qrResult = text;
                        _this.mUtil.customAlert({ msg: text });
                        var loginData = JSON.parse(text);
                        _this.auth(loginData.username, loginData.cipherpwd);
                        _this.mUtil.customAlert({ msg: '登录成功' });
                        // const loginString = JSON.stringify(loginData);
                        // this.mUtil.customAlert({ msg: loginString });
                        // this.mUtil.customAlert({ msg: loginData.username });
                        // this.mUtil.customAlert({ msg: loginData.cipherpwd });
                        _this.hideCamera();
                        _this.navCtrl.pop();
                    }
                    else {
                        _this.navCtrl.pop();
                    }
                });
                _this.qrScanner.show();
            }
            else if (status.denied) {
                // camera permission was permanently denied
                // you must use QRScanner.openSettings() method to guide the user to the settings page
                // then they can grant the permission from there
            }
            else {
                // permission was denied, but not permanently. You can ask for permission again at a later time.
            }
        })
            .catch(function (e) { return console.log('Error is', e); });
    };
    BarcodeScannerPage.prototype.ionViewDidEnter = function () {
        //页面可见时才执行
        this.showCamera();
        this.isShow = true;
    };
    /**
     * 闪光灯控制，默认关闭
     */
    BarcodeScannerPage.prototype.toggleLight = function () {
        if (this.light) {
            this.qrScanner.disableLight();
        }
        else {
            this.qrScanner.enableLight();
        }
        this.light = !this.light;
    };
    /**
     * 前后摄像头互换
     */
    BarcodeScannerPage.prototype.toggleCamera = function () {
        if (this.frontCamera) {
            this.qrScanner.useBackCamera();
        }
        else {
            this.qrScanner.useFrontCamera();
        }
        this.frontCamera = !this.frontCamera;
    };
    BarcodeScannerPage.prototype.showCamera = function () {
        window.document.querySelector('ion-app').classList.add('cameraView');
    };
    BarcodeScannerPage.prototype.hideCamera = function () {
        this.qrScanner.hide(); //需要关闭扫描，否则相机一直开着
        window.document.querySelector('ion-app').classList.remove('cameraView');
        this.qrScanner.destroy();
    };
    BarcodeScannerPage.prototype.ionViewWillLeave = function () {
        this.hideCamera();
    };
    BarcodeScannerPage.prototype.closeScanner = function () {
        this.navCtrl.pop();
    };
    /**
   * 鉴权接口
   * @param username
   * @param password
   */
    BarcodeScannerPage.prototype.auth = function (username, password) {
        var _this = this;
        return this.http.post("http://www.jszyet.com.cn:8442/api/frame/auth", { username: username, password: null, cipherpwd: password })
            .pipe(Object(__WEBPACK_IMPORTED_MODULE_5_rxjs_operators__["map"])(function (response) {
            var responseString = JSON.stringify(response);
            _this.mUtil.customAlert({ msg: responseString });
            _this.mUtil.customAlert({ msg: '登录成功！' });
            // let resObj = response;
            // this.token = resObj.token;
            // localStorage.setItem('_TOKEN_', this.token);
            // return resObj;
        }), Object(__WEBPACK_IMPORTED_MODULE_5_rxjs_operators__["catchError"])(function (error) {
            return __WEBPACK_IMPORTED_MODULE_6_rxjs_Observable__["Observable"].throw(error);
        })).toPromise();
    };
    BarcodeScannerPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-barcode-scanner',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/barcode-scanner/barcode-scanner.html"*/'<ion-content no-scroll [ngClass]="{\'qrscanner\':isShow}">\n    <!-- <div [ngClass]="{\'qrscanner-area\':isShow}"></div>\n    <div [ngClass]="{\'through-line\':isShow}"></div>\n    <div class="button-bottom">\n        <button\n            (click)="toggleLight()"\n            ion-fab\n            class="icon-camera"\n            margin-right\n        >\n            <ion-icon name="flash"></ion-icon>\n        </button>\n        <button (click)="toggleCamera()" ion-fab class="icon-camera">\n            <ion-icon name="reverse-camera"></ion-icon>\n        </button>\n    </div> -->\n    <div class="scanner-container">\n        <div class="close-scanner" (tap)="closeScanner()">关闭</div>\n        <div class="scanner-box">\n            <span (click)="toggleLight()" class="toggle-light">\n                <ion-icon\n                    name="{{light?\'flashlight-open\':\'flashlight-close\'}}"\n                ></ion-icon>\n                <span>{{light?\'轻点关闭\':\'轻点照亮\'}} </span>\n            </span>\n            <p class="loading-text">正在扫码，请耐心等待</p>\n        </div>\n    </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/barcode-scanner/barcode-scanner.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_qr_scanner__["a" /* QRScanner */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_4__angular_common_http__["b" /* HttpClient */]])
    ], BarcodeScannerPage);
    return BarcodeScannerPage;
}());

//# sourceMappingURL=barcode-scanner.js.map

/***/ }),

/***/ 171:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UserService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_http__ = __webpack_require__(228);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




var UserService = /** @class */ (function () {
    function UserService(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        this.usersListUrl = this.appConfig.apiEndpoint + '/api/m/v2/users';
    }
    /**
     * 用户列表
     * @param params
     */
    UserService.prototype.getUserList = function (params) {
        var url = this.usersListUrl + '?';
        for (var item in params) {
            if (params[item] !== null) {
                url = url + item + '=' + params[item] + '&';
            }
        }
        url = url.substr(0, url.length - 1);
        return this.http.get(url);
    };
    /**
     * getUserInfo
     */
    UserService.prototype.getUserInfo = function () {
        var url = this.appConfig.apiEndpoint + "/api/frame/user";
        return this.http.get(url);
    };
    /**
     * getUserInfo
     */
    UserService.prototype.changePassword = function (params) {
        var url = this.appConfig.apiEndpoint + "/api/frame/password";
        return this.http.put(url, '', {
            params: params,
            responseType: __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* ResponseContentType */].Text
        });
    };
    UserService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object])
    ], UserService);
    return UserService;
}());

//# sourceMappingURL=user.servicer.js.map

/***/ }),

/***/ 172:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DefesService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_http__ = __webpack_require__(228);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs_operators__ = __webpack_require__(112);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs_operators___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_rxjs_operators__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







var DefesService = /** @class */ (function () {
    function DefesService(http, appConfig, mutilservice) {
        this.http = http;
        this.appConfig = appConfig;
        this.mutilservice = mutilservice;
        this.defects = this.appConfig.apiEndpoint + '/api/defects';
        this.noticeUserUrl =
            this.appConfig.apiEndpoint + '/api/AlarmNoticeRule/getNoticeUser';
        this.userInfoUrl = this.appConfig.apiEndpoint + '/api/user-info';
        this.newDefects = this.appConfig.apiEndpoint + '/api/m/v2/defect/defects';
        this.remindUrl = this.appConfig.apiEndpoint + '/api/m/v2/defect/remind';
        this.checkUrl = this.appConfig.apiEndpoint + '/api/m/v2/defect/check';
        this.defectDetailUrl = this.appConfig.apiEndpoint + '/api/m/v2/defect';
        this.defectNullableUrl =
            this.appConfig.apiEndpoint + '/api/workflows/nullable';
        this.defectsActionUrl = this.appConfig.apiEndpoint + '/api/m/v2/defect';
    }
    /**
     * 筛选查询 缺陷列表
     * @param defectCondition
     */
    DefesService.prototype.getDefects = function (defectCondition) {
        var url = this.defects + '?';
        for (var defct in defectCondition) {
            if (defectCondition[defct]) {
                url = url + defct + '=' + defectCondition[defct] + '&';
            }
        }
        url = url.substr(0, url.length - 1);
        return this.http.get(url);
    };
    /**
     * 查询单个 缺陷
     * @param defectCondition
     */
    DefesService.prototype.getDefectsById = function (defectId) {
        var url = this.defects + '/' + defectId;
        return this.http.get(url);
    };
    /**
     * 添加新 缺陷
     * @param defectCondition
     */
    DefesService.prototype.addDefects = function (defectAdd) {
        return this.http.post(this.defects, defectAdd);
    };
    /**
     * 修改缺陷
     */
    DefesService.prototype.updateDefects = function (defect) {
        return this.http.put(this.defects, defect);
    };
    DefesService.prototype.getUserInfo = function () {
        var _this = this;
        if (this.user) {
            return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["Observable"].create(function (observer) {
                observer.next(_this.user);
                observer.complete();
            });
        }
        else {
            return this.http.get(this.userInfoUrl).pipe(Object(__WEBPACK_IMPORTED_MODULE_6_rxjs_operators__["map"])(function (e) {
                if (e) {
                    _this.user = e;
                    return e;
                }
            }));
        }
    };
    /**
     * "deptId": "string",
     * "enabled": "string",
     * "realName": "string"
     * @param user
     */
    DefesService.prototype.getNoticeUser = function (user) {
        return this.http.post(this.noticeUserUrl, user);
    };
    DefesService.prototype.getDefectsList = function (params) {
        var url = this.newDefects + '?';
        for (var defct in params) {
            if (params[defct]) {
                url = url + defct + '=' + params[defct] + '&';
            }
        }
        url = url.substr(0, url.length - 1);
        return this.http.get(url);
    };
    DefesService.prototype.remind = function (defectId) {
        return this.http.put(this.remindUrl + '?defectId=' + defectId, {
            defectId: defectId,
        }, { responseType: __WEBPACK_IMPORTED_MODULE_2__angular_http__["a" /* ResponseContentType */].Text });
    };
    DefesService.prototype.check = function (params) {
        var url = this.checkUrl + '?';
        for (var defct in params) {
            if (params[defct]) {
                url = url + defct + '=' + params[defct] + '&';
            }
        }
        url = url.substr(0, url.length - 1);
        return this.http.put(url, { params: params });
    };
    DefesService.prototype.getDefectDetail = function (defectId, params) {
        return this.http.get(this.defectDetailUrl + '/' + defectId, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    DefesService.prototype.checkNullable = function (targetNodeId) {
        return this.http.get(this.defectNullableUrl + '?targetNodeId=' + targetNodeId);
    };
    DefesService.prototype.defectAction = function (params) {
        return this.http.put(this.defectDetailUrl, params);
    };
    DefesService.prototype.defectActionDelete = function (defectId) {
        return this.http.delete(this.defectDetailUrl + '?defectId=' + defectId);
    };
    DefesService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_4__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__auth_http_service__["a" /* AuthHttpService */], Object, __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__["a" /* MutilService */]])
    ], DefesService);
    return DefesService;
}());

//# sourceMappingURL=defes.servicer.js.map

/***/ }),

/***/ 173:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InventorisOutInPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_backend_service__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_common_materials_common_materials__ = __webpack_require__(229);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__util_common_warehouse_common_warehouse__ = __webpack_require__(230);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__util_modal_common_defect_code_common_defect_code__ = __webpack_require__(782);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













/**
 * Generated class for the InventorisOutPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InventorisOutInPage = /** @class */ (function () {
    function InventorisOutInPage(navCtrl, navParams, fb, backendservice, actionSheetCtrl, modalCtrl, mutilservice, alertCtrl, materialservice) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.backendservice = backendservice;
        this.actionSheetCtrl = actionSheetCtrl;
        this.modalCtrl = modalCtrl;
        this.mutilservice = mutilservice;
        this.alertCtrl = alertCtrl;
        this.materialservice = materialservice;
        this.ioSubTypeOptions = [];
        this.customIoTimePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return _this.form.patchValue({ ioTime: null }); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.view = false;
        this.approve = false;
        this.relaBusinessTypeText = '单号';
        this.toggleBaseInfo = true;
        this.materialDetailsToggle = true;
        this.showRelaWarehouse = false;
        this.form = this.fb.group({
            ioSubType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["h" /* Validators */].required),
            ioSubTypeText: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            warehouseId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["h" /* Validators */].required),
            warehouseName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            ioOperator: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["h" /* Validators */].required),
            ioOperatorName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            ioTime: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["h" /* Validators */].required),
            planTime: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            relaWarehouseId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            relaWarehouseName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            relaBusinessType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('01'),
            relaBusinessId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            relaBusinessCode: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            approverName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            approveTime: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            checkerName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            ioDesc: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            checkTime: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            materialIostorgeDetails: this.fb.array([]),
        });
    }
    InventorisOutInPage.prototype.getMaterialIostorgeDetails = function (form) {
        return form.controls.materialIostorgeDetails.controls;
    };
    // 初始物资明细
    InventorisOutInPage.prototype.initMaterialIostorgeDetails = function () {
        return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            inventoryId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            materialId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["h" /* Validators */].required),
            materialNo: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            materialName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            materialSpec: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            unit: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            unitText: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            inventoryNum: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            ioNum: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["h" /* Validators */].required),
        });
    };
    InventorisOutInPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad InventorisOutPage');
        this.view = this.navParams.get('view');
        this.approve = this.navParams.get('approve');
        if (this.approve) {
            this.view = true;
        }
        this.iostorageId = this.navParams.get('iostorageId');
        this.type = this.navParams.get('type');
        this.materialType = this.navParams.get('materialType') || '01';
        this.materialservice
            .getmaterialsIoSubTypes(this.type === 'out' ? '01' : '02', this.materialType)
            .subscribe(function (res) {
            _this.ioSubTypeOptions = res;
        });
        if (this.iostorageId) {
            this.materialservice
                .getMaterialsIostorage(this.iostorageId)
                .subscribe(function (res) {
                _this.type = res.ioType == '01' ? 'out' : 'in';
                _this.relaBusinessTypeText = res.relaBusinessTypeText;
                _this.showRelaWarehouse = res.relaWarehouseId ? true : false;
                _this.fillForm(res);
            });
            this.view = true;
            return;
        }
        this.relaBusinessTypeText =
            this.navParams.get('relaBusinessTypeText') || '单号';
        var value = this.navParams.get('value');
        console.log(value);
        this.fillForm(value);
    };
    InventorisOutInPage.prototype.fillForm = function (data) {
        var _this = this;
        data.ioTime = __WEBPACK_IMPORTED_MODULE_4_moment__(data.ioTime).format();
        data.approveTime = __WEBPACK_IMPORTED_MODULE_3_lodash__["isNumber"](data.approveTime)
            ? __WEBPACK_IMPORTED_MODULE_4_moment__(data.approveTime).format()
            : null;
        data.checkTime = __WEBPACK_IMPORTED_MODULE_3_lodash__["isNumber"](data.checkTime)
            ? __WEBPACK_IMPORTED_MODULE_4_moment__(data.checkTime).format()
            : null;
        if (data.materialIostorgeDetails !== null) {
            var control_1 = this.form.get('materialIostorgeDetails');
            while (control_1.length) {
                control_1.removeAt(control_1.length - 1);
            }
            data.materialIostorgeDetails.map(function (item) {
                control_1.push(_this.initMaterialIostorgeDetails());
            });
        }
        else {
            data.repairTickets = [];
        }
        this.form.patchValue(__assign({}, data));
    };
    /**
     * name
     */
    InventorisOutInPage.prototype.buildIoSubTypeOption = function (options) {
        var _this = this;
        var buttons = this.ioSubTypeOptions.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    _this.showRelaWarehouse = item.param3 ? true : false;
                    _this.form.patchValue({
                        ioSubType: item.first,
                        ioSubTypeText: item.second,
                    });
                },
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    // 仓库选择
    InventorisOutInPage.prototype.selectWarehouses = function (_a, allWarehouses) {
        var _this = this;
        var id = _a.id, name = _a.name;
        if (allWarehouses === void 0) { allWarehouses = true; }
        var value = this.form.value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_10__util_common_warehouse_common_warehouse__["a" /* CommonWarehousePage */], {
            allWarehouses: allWarehouses,
            selectedItem: [
                {
                    warehouseId: value[id],
                    warehouseName: value[name],
                },
            ],
        });
        modal.onDidDismiss(function (e) {
            var _a, _b;
            if (e) {
                if (e.type === 'ok') {
                    _this.form.patchValue((_a = {},
                        _a[id] = e.value.warehouseId,
                        _a[name] = e.value.warehouseName,
                        _a));
                }
                else {
                    _this.form.patchValue((_b = {},
                        _b[id] = null,
                        _b[name] = null,
                        _b));
                }
            }
        });
        modal.present({ keyboardClose: true });
    };
    //物料选择
    InventorisOutInPage.prototype.selectMaterials = function (type, materia, index) {
        var _this = this;
        if (this.view) {
            return;
        }
        var value = this.form.value;
        var ioType = this.type === 'out' ? '01' : '02';
        if (ioType === '01' && !value.warehouseId) {
            return this.mutilservice.popToastView('请先选择仓库');
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_common_materials_common_materials__["a" /* CommonMaterialsPage */], {
            ioType: ioType,
            materialType: this.materialType,
            warehouseId: value.warehouseId || null,
            selectedItem: type === 'add'
                ? []
                : [
                    __assign({}, materia.value),
                ],
        });
        modal.onDidDismiss(function (e) {
            if (e) {
                if (e.type == 'ok') {
                    if (type === 'add') {
                        var materialIostorgeDetails = _this.form.value.materialIostorgeDetails;
                        var control_2 = _this.form.get('materialIostorgeDetails');
                        while (control_2.length) {
                            control_2.removeAt(control_2.length - 1);
                        }
                        materialIostorgeDetails.push(__assign({}, e.value));
                        materialIostorgeDetails.map(function (item) {
                            control_2.push(_this.initMaterialIostorgeDetails());
                        });
                        _this.form
                            .get('materialIostorgeDetails')
                            .patchValue(materialIostorgeDetails);
                    }
                    else {
                        var control = _this.form.get('materialIostorgeDetails');
                        control.controls[index].setValue(__assign({}, e.value));
                    }
                }
            }
        });
        modal.present({ keyboardClose: true });
    };
    InventorisOutInPage.prototype.deleteMaterialIostorgeDetails = function (index) {
        var control = this.form.get('materialIostorgeDetails');
        control.removeAt(index);
    };
    InventorisOutInPage.prototype.selectUser = function () {
        var _this = this;
        var value = this.form.value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
            selectedItem: [
                { userId: value.ioOperator, userName: value.ioOperatorName },
            ],
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue({
                        ioOperator: data.value[0] ? data.value[0].userId : null,
                        ioOperatorName: data.value[0] ? data.value[0].realName : null,
                    });
                }
                else {
                    _this.form.patchValue({
                        ioOperator: null,
                        ioOperatorName: null,
                    });
                }
            }
        });
        modal.present();
    };
    InventorisOutInPage.prototype.selectBusiness = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_11__util_modal_common_defect_code_common_defect_code__["a" /* CommonDefectCodePage */], {
            value: {
                relaBusinessCode: this.form.value.relaBusinessCode,
                relaBusinessId: this.form.value.relaBusinessId,
            },
            title: this.relaBusinessTypeText,
            type: 'text',
        }, {
            cssClass: 'commonModal commonDefectCodeModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    _this.form.patchValue({
                        relaBusinessCode: data.value.relaBusinessCode,
                        relaBusinessId: data.value.relaBusinessId,
                    });
                }
                else {
                    _this.form.patchValue({
                        relaBusinessCode: null,
                        relaBusinessId: null,
                    });
                }
            }
        });
        modal.present();
    };
    InventorisOutInPage.prototype.addMemo = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_12__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: this.type === 'in' ? '入库说明' : '出库说明',
            value: this.form.value.ioDesc,
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue({ ioDesc: data.value });
                }
                else if (data.type == 'clear') {
                    _this.form.patchValue({ ioDesc: null });
                }
            }
        });
        modal.present();
    };
    InventorisOutInPage.prototype.cancel = function () {
        console.log(this.navCtrl.getPrevious());
        this.navCtrl.pop();
    };
    InventorisOutInPage.prototype.save = function () {
        var _this = this;
        if (this.showRelaWarehouse && !this.form.value.relaWarehouseId) {
            return this.mutilservice.popToastView('对方仓库不能为空');
        }
        if (!this.mutilservice.isValid(this.form)) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '请检查必填项',
                buttons: ['关闭'],
            });
            alert_1.present();
        }
        else {
            var value = this.form.value;
            if (value.ioTime.indexOf('Z') != -1) {
                value.ioTime = __WEBPACK_IMPORTED_MODULE_4_moment__(value.ioTime.substr(0, value.ioTime.length - 1)).format();
            }
            value.planTime = value.ioTime;
            var params = __assign({}, value);
            if (this.type === 'out') {
                this.materialservice.saveMaterialsOut(params).subscribe(function (res) {
                    _this.mutilservice.popToastView('出库成功');
                    _this.navCtrl.getPrevious().data.freshPage = true;
                    _this.navCtrl.pop();
                });
            }
            else {
                this.materialservice.saveMaterialsIn(params).subscribe(function (res) {
                    _this.mutilservice.popToastView('入库成功');
                    _this.navCtrl.getPrevious().data.freshPage = true;
                    _this.navCtrl.pop();
                });
            }
        }
    };
    InventorisOutInPage.prototype.materialsApprove = function (type) {
        var _this = this;
        var params = {
            iostorageId: this.iostorageId,
            ioStatus: type,
        };
        this.materialservice.materialsApprove(params).subscribe(function (res) {
            _this.mutilservice.popToastView('提交成功');
            _this.navCtrl.getPrevious().data.freshPage = true;
            _this.navCtrl.pop();
        });
    };
    InventorisOutInPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-inventoris-out-in',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inventoris/inventoris-out-in/inventoris-out-in.html"*/'<!--\n  Generated template for the InventorisOutPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{type===\'in\'?\'入库\':\'出库\'}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <form [formGroup]="form">\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleBaseInfo = !toggleBaseInfo">\n        基础信息\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleBaseInfo?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 基础信息 -->\n      <ng-container *ngIf="toggleBaseInfo">\n        <ion-item detail-push no-lines>\n          <ion-label>\n            <b>*</b>\n            操作类型：\n          </ion-label>\n          <ion-input\n            *ngIf="!view"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="ioSubTypeText"\n            (tap)="buildIoSubTypeOption($event)"\n          ></ion-input>\n          <ion-input\n            *ngIf="view"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="ioSubTypeText"\n          ></ion-input>\n        </ion-item>\n        <ion-item detail-push no-lines>\n          <ion-label>\n            <b>*</b>\n            仓库名称：\n          </ion-label>\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="warehouseName"\n            (tap)="selectWarehouses({id:\'warehouseId\',name:\'warehouseName\'},false)"\n            *ngIf="!view"\n          ></ion-input>\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="warehouseName"\n            *ngIf="view"\n          ></ion-input>\n        </ion-item>\n        <ion-item detail-push no-lines *ngIf="showRelaWarehouse">\n          <ion-label>\n            <b>*</b>\n            对方仓库：\n          </ion-label>\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="relaWarehouseName"\n            (tap)="selectWarehouses({id:\'relaWarehouseId\',name:\'relaWarehouseName\'})"\n            *ngIf="!view"\n          ></ion-input>\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="relaWarehouseName"\n            *ngIf="view"\n          ></ion-input>\n        </ion-item>\n        <ion-item detail-push no-lines>\n          <ion-label>\n            <b>*</b>\n            {{type===\'in\'?\'入库人\':\'出库人\'}}：\n          </ion-label>\n          <ion-input\n            *ngIf="!view"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="ioOperatorName"\n            (tap)="selectUser($event)"\n          ></ion-input>\n          <ion-input\n            *ngIf="view"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="ioOperatorName"\n          ></ion-input>\n        </ion-item>\n        <ion-item detail-push no-lines>\n          <ion-label>\n            <b>*</b>\n            {{type===\'in\'?\'入库时间\':\'出库时间\'}}：\n          </ion-label>\n          <ion-datetime\n            *ngIf="!view"\n            displayFormat="YYYY-MM-DD HH:mm"\n            cancelText="清除"\n            doneText="确定"\n            [pickerOptions]="customIoTimePickerOptions"\n            formControlName="ioTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="view"\n            displayFormat="YYYY-MM-DD HH:mm"\n            cancelText="清除"\n            doneText="确定"\n            [pickerOptions]="customIoTimePickerOptions"\n            formControlName="ioTime"\n            [disabled]="true"\n          ></ion-datetime>\n        </ion-item>\n        <ion-item detail-push no-lines>\n          <ion-label> {{relaBusinessTypeText||\'单号\'}}： </ion-label>\n          <ion-input\n            *ngIf="!view"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="relaBusinessCode"\n            (tap)="selectBusiness($event)"\n          ></ion-input>\n          <ion-input\n            *ngIf="view"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="relaBusinessCode"\n          ></ion-input>\n        </ion-item>\n        <ion-item no-lines>\n          <ion-label> 审批人： </ion-label>\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="approverName"\n          ></ion-input>\n        </ion-item>\n        <ion-item no-lines>\n          <ion-label> 审批时间： </ion-label>\n          <ion-datetime\n            displayFormat="YYYY-MM-DD HH:mm"\n            cancelText="清除"\n            doneText="确定"\n            formControlName="approveTime"\n            [disabled]="true"\n          ></ion-datetime>\n        </ion-item>\n        <ion-item no-lines>\n          <ion-label> 确认人 </ion-label>\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkerName"\n          ></ion-input>\n        </ion-item>\n        <ion-item no-lines>\n          <ion-label> 确认时间： </ion-label>\n          <ion-datetime\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="checkTime"\n            [disabled]="true"\n          ></ion-datetime>\n        </ion-item>\n        <ion-item detail-push no-lines>\n          <ion-label> {{type===\'in\'?\'入库说明\':\'出库说明\'}}： </ion-label>\n          <ion-input\n            *ngIf="!view"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="ioDesc"\n            (tap)="addMemo($event)"\n          ></ion-input>\n          <ion-input\n            *ngIf="view"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="ioDesc"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="materialDetailsToggle = !materialDetailsToggle"\n      >\n        物资明细\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{materialDetailsToggle?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="materialDetailsToggle">\n        <ion-grid\n          class="material-iostorge"\n          formArrayName="materialIostorgeDetails"\n        >\n          <ion-row\n            *ngFor="let materia of getMaterialIostorgeDetails(form); let i = index"\n            [formGroupName]="i"\n          >\n            <ion-col col-8 (tap)="selectMaterials(\'edit\',materia, i)">\n              <div class="ell">{{ materia.value.materialNo }}</div>\n              <div class="ell">{{ materia.value.materialName }}</div>\n              <div class="ell">{{ materia.value.materialSpec }}</div>\n            </ion-col>\n            <ion-col col-3 (tap)="selectMaterials(\'edit\',materia, i)">\n              <div text-center>\n                <span class="ell"\n                  >{{ materia.value.ioNum }}{{\n                  materia.value.unitText||materia.value.unit }}</span\n                >\n              </div>\n            </ion-col>\n            <ion-col col-1>\n              <ion-icon\n                *ngIf="!view"\n                (tap)="deleteMaterialIostorgeDetails(i)"\n                class="delete-grey"\n                name="delete-grey"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n          <ion-row class="add-row" *ngIf="!view">\n            <ion-col col-12>\n              <ion-icon\n                name="md-add-circle"\n                (tap)="selectMaterials(\'add\')"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ng-container>\n    </ion-list>\n  </form>\n</ion-content>\n<ion-footer *ngIf="view!==true">\n  <ion-toolbar class="footer-bar">\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <div class="btn">\n            <!-- <img (tap)="cancel()" src="assets/imgs/buttons/delete-grey.png" alt="" /> -->\n            <ion-icon (tap)="cancel()" name="delete-grey"></ion-icon>\n            <p>取消</p>\n          </div>\n        </ion-col>\n        <ion-col col-6>\n          <div class="btn">\n            <!-- <img (tap)="save()" src="assets/imgs/buttons/ok.png" alt="" /> -->\n            <ion-icon (tap)="save()" name="ok"></ion-icon>\n            <p>确定</p>\n          </div>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n<ion-footer *ngIf="approve===true">\n  <ion-toolbar class="footer-bar">\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <div class="btn">\n            <!-- <img (tap)="cancel()" src="assets/imgs/buttons/delete-grey.png" alt="" /> -->\n            <ion-icon\n              (tap)="materialsApprove(\'03\')"\n              name="delete-grey"\n            ></ion-icon>\n            <p>拒绝</p>\n          </div>\n        </ion-col>\n        <ion-col col-6>\n          <div class="btn">\n            <!-- <img (tap)="save()" src="assets/imgs/buttons/ok.png" alt="" /> -->\n            <ion-icon (tap)="materialsApprove(\'02\')" name="ok"></ion-icon>\n            <p>同意</p>\n          </div>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inventoris/inventoris-out-in/inventoris-out-in.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_5__providers_backend_service__["a" /* BackendService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_6__providers_material_service__["a" /* MaterialService */]])
    ], InventorisOutInPage);
    return InventorisOutInPage;
}());

//# sourceMappingURL=inventoris-out-in.js.map

/***/ }),

/***/ 174:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeviceArchivePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_qr_search_service__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the DeviceArchivePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DeviceArchivePage = /** @class */ (function () {
    function DeviceArchivePage(navCtrl, navParams, qrsearchservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.qrsearchservice = qrsearchservice;
        this.toggleBaseInfo = true;
        this.groups = {};
    }
    DeviceArchivePage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad DeviceArchivePage');
        this.deviceId = this.navParams.get('deviceId');
        this.qrsearchservice.getDeviceInfo(this.deviceId).subscribe(function (res) {
            _this.title = res.title;
            _this.pic = res.pic.substring(1);
            _this.showInfos = res.infos;
        });
    };
    DeviceArchivePage.prototype.show = function (item, i) {
        console.log(item);
    };
    DeviceArchivePage.prototype.getKeys = function (item, groupName) {
        if (!this.groups[groupName]) {
            var arr = [];
            for (var key in item) {
                if (item.hasOwnProperty(key)) {
                    var element = item[key];
                    arr.push(element);
                }
            }
            this.groups[groupName] = __WEBPACK_IMPORTED_MODULE_3_lodash__["orderBy"](arr, ['orderNo'], ['asc']);
        }
        return this.groups[groupName];
    };
    DeviceArchivePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-device-archive',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/device-archive/device-archive.html"*/'<!--\n  Generated template for the DeviceArchivePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n    <ion-navbar>\n        <ion-title>{{title}}</ion-title>\n    </ion-navbar>\n</ion-header>\n\n<ion-content>\n    <div class="device-type" *ngIf="pic">\n        <img src="{{pic}}" style="height:120px" alt="" />\n    </div>\n    <ion-list class="new-list" *ngFor="let info of showInfos">\n        <ion-list-header no-lines (click)="info.toggleBaseInfo = !info.toggleBaseInfo">\n            {{info.groupName}}\n            <button ion-button icon-only item-end clear>\n                <ion-icon name="{{!info.toggleBaseInfo?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n            </button>\n        </ion-list-header>\n        <ng-container *ngIf="!info.toggleBaseInfo">\n            <ng-container *ngFor="let item of getKeys(info.datas,info.groupName)">\n                <ion-item no-lines *ngIf="item.show">\n                    <ion-label>{{item.name}}：</ion-label>\n                    <ion-input type="text" [readonly]="true" [(ngModel)]="item.value"></ion-input>\n                </ion-item>\n            </ng-container>\n        </ng-container>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/device-archive/device-archive.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0__providers_qr_search_service__["a" /* QrSearchService */]])
    ], DeviceArchivePage);
    return DeviceArchivePage;
}());

//# sourceMappingURL=device-archive.js.map

/***/ }),

/***/ 175:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return QrSearchService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var QrSearchService = /** @class */ (function () {
    function QrSearchService(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        this.qrsearchUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/framework/qrsearch';
        this.deviceInfoUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/device/deviceInfo';
        this.deviceTopoUrl = this.appConfig.apiEndpoint + '/api/device/topo';
        this.deviceDocsUrl = this.appConfig.apiEndpoint + '/api/device/docs';
    }
    QrSearchService.prototype.qrsearch = function (device) {
        var url = this.qrsearchUrl + '?code=' + device;
        return this.http.get(url);
    };
    QrSearchService.prototype.getDeviceInfo = function (deviceId) {
        var url = this.deviceInfoUrl + '?deviceId=' + deviceId;
        return this.http.get(url);
    };
    QrSearchService.prototype.getDeviceTopo = function (deviceId) {
        var url = this.deviceTopoUrl + '?deviceId=' + deviceId;
        return this.http.get(url);
    };
    QrSearchService.prototype.getDeviceDocs = function (deviceId) {
        var url = this.deviceDocsUrl + '?deviceId=' + deviceId;
        return this.http.get(url);
    };
    QrSearchService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object])
    ], QrSearchService);
    return QrSearchService;
}());

//# sourceMappingURL=qr-search.service.js.map

/***/ }),

/***/ 176:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WarnMessage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_alarmlogs_service__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util_modal_warn_search_warn_search__ = __webpack_require__(788);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__warn_details_warn_details__ = __webpack_require__(789);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_util_Mutil_service__ = __webpack_require__(9);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var WarnMessage = /** @class */ (function () {
    function WarnMessage(alarmlogsService, mutilservice, modalCtrl, navCtrl, navparams) {
        this.alarmlogsService = alarmlogsService;
        this.mutilservice = mutilservice;
        this.modalCtrl = modalCtrl;
        this.navCtrl = navCtrl;
        this.navparams = navparams;
        this.title = '';
        this.startDate = null;
        this.endDate = null;
        this.aAlarmTypes = [];
        this.aAlarmLevels = [];
        this.aAlarmStatus = [];
        this.alarmList = [];
        this.page = 0;
    }
    WarnMessage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad DefectManagementPage');
        this.station = this.navparams.get('station');
        this.equipment = this.navparams.get('equipment');
        this.queryYears = this.navparams.get('queryYears');
        this.alarmlogsInit(this.queryYears);
    };
    WarnMessage.prototype.alarmlogsInit = function (queryYears) {
        var _this = this;
        this.alarmlogsService.getalarmlogsInit().subscribe(function (res) {
            _this.title = res.title;
            _this.initData = {
                startDate: queryYears
                    ? __WEBPACK_IMPORTED_MODULE_2_moment___default()().subtract(1, 'years').valueOf()
                    : res.startDate,
                endDate: queryYears ? __WEBPACK_IMPORTED_MODULE_2_moment___default()().valueOf() : res.endDate,
                aAlarmTypes: res.alarmTypes,
                aAlarmStatus: res.alarmStatus,
                aAlarmLevels: res.alarmLevels,
            };
            _this.queryParams = {
                startDate: __WEBPACK_IMPORTED_MODULE_2_moment___default()(_this.initData.startDate).format('YYYY-MM-DD'),
                endDate: __WEBPACK_IMPORTED_MODULE_2_moment___default()(_this.initData.endDate).format('YYYY-MM-DD'),
                alarmStatus: '1',
            };
            _this.queryAlarmlog(true);
        });
    };
    WarnMessage.prototype.queryAlarmlog = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = __assign({ page: this.page, size: 10, stationId: this.station && this.station.id, deviceId: this.equipment && this.equipment.deviceId }, this.queryParams);
        this.alarmlogsService.getalarmlogs(params).subscribe(function (res) {
            if (res) {
                _this.alarmList = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    WarnMessage.prototype.openSearchBar = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__util_modal_warn_search_warn_search__["a" /* WarnSearchPage */], {
            initData: this.initData,
            station: this.station,
            equipment: this.equipment,
        }, {
            enterAnimation: 'modal-from-right-enter',
            leaveAnimation: 'modal-from-right-leave',
            cssClass: 'commonSearchSideBar',
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                _this.queryParams = data.queryParams;
                _this.station = data.station;
                _this.equipment = data.equipment;
                _this.queryAlarmlog(false);
            }
        });
        modal.present();
    };
    WarnMessage.prototype.doRefresh = function (refresher) {
        this.queryAlarmlog(true, refresher);
    };
    WarnMessage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = __assign({ page: this.page, size: 10, stationId: this.station && this.station.id, deviceId: this.equipment && this.equipment.deviceId }, this.queryParams);
        this.alarmlogsService.getalarmlogs(params).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.alarmList = _this.alarmList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.alarmList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    WarnMessage.prototype.editAlarm = function (logId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__warn_details_warn_details__["a" /* WarnDetails */], {
            logId: logId,
        });
    };
    WarnMessage.prototype.getIcon = function (icon, type) {
        return icon.substr(6).split('.')[0] === type;
    };
    WarnMessage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'warn-message',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/warn-message/warn.message.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>{{title}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="openSearchBar()">\n        <ion-icon name="search" style="font-size: 1.4em"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n<ion-content padding class="card-list">\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div class="card-item" *ngFor="let alarm of alarmList">\n      <div class="left-line">\n        <div class="line-icon"></div>\n      </div>\n      <div class="right-content">\n        <div class="title">{{alarm.time}}</div>\n        <ion-card (click)="editAlarm(alarm.id)">\n          <ion-card-header>\n            {{alarm.title}}\n            <span\n              class="status-info"\n              [ngClass]="{\'status-01\': getIcon(alarm.icon,\'01\'),\'status-02\': getIcon(alarm.icon,\'02\'),\'status-03\': getIcon(alarm.icon,\'03\'),\'status-04\': getIcon(alarm.icon,\'04\')}"\n              >{{alarm.status}}</span\n            ></ion-card-header\n          >\n          <ul class="ion-card-content">\n            <li class="ell">{{alarm.item1}}</li>\n            <li class="ell">{{alarm.item2}}</li>\n            <li class="ell">{{alarm.item3}}</li>\n            <li class="ell">{{alarm.item4}}</li>\n            <li class="ell" *ngIf="alarm.item5">{{alarm.item5}}</li>\n          </ul>\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/warn-message/warn.message.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__providers_alarmlogs_service__["a" /* alarmlogsService */],
            __WEBPACK_IMPORTED_MODULE_6__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */]])
    ], WarnMessage);
    return WarnMessage;
}());

//# sourceMappingURL=warn.message.js.map

/***/ }),

/***/ 177:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return alarmlogsService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var alarmlogsService = /** @class */ (function () {
    function alarmlogsService(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        this.alarmlogsUrl = this.appConfig.apiEndpoint + '/api/m/v2/alarmlogs';
        this.alarmlogsDetailUrl = this.appConfig.apiEndpoint + '/api/m/v2/alarmlogs/detail';
        this.alarmlogsInitUrl = this.appConfig.apiEndpoint + '/api/m/v2/alarmlogs/init';
        this.alarmcheckUrl = this.appConfig.apiEndpoint + '/api/m/v2/alarmlogs/alarmCheck';
        this.alarmCountUrl = this.appConfig.apiEndpoint + '/api/m/v2/station/alarmCount';
        this.checkmemosUrl = this.appConfig.apiEndpoint + '/api/m/v2/alarmlogs/checkmemos';
    }
    /**
     * 告警数量
     */
    alarmlogsService.prototype.getAlarmCount = function (stationId) {
        var url = this.alarmCountUrl + '?stationId=' + stationId;
        return this.http.get(url);
    };
    /**
     * 告警列表
     */
    alarmlogsService.prototype.getalarmlogs = function (params) {
        var url = this.alarmlogsUrl + '?';
        for (var param in params) {
            if (params[param]) {
                url = url + param + '=' + params[param] + '&';
            }
        }
        url = url.substr(0, url.length - 1);
        return this.http.get(url);
    };
    /**
     * 告警详情
     */
    alarmlogsService.prototype.getalarmlogsDetail = function (logId) {
        var url = this.alarmlogsDetailUrl + '/' + logId;
        return this.http.get(url);
    };
    /**
     * 告警详情
     */
    alarmlogsService.prototype.getCheckmemos = function (ruleId) {
        var url = this.checkmemosUrl + '?ruleId=' + ruleId;
        return this.http.get(url);
    };
    /**
     * 告警初始化查询信息
     */
    alarmlogsService.prototype.getalarmlogsInit = function () {
        var url = this.alarmlogsInitUrl;
        return this.http.get(url);
    };
    /**
     * 告警处理
     */
    alarmlogsService.prototype.handelalarmcheck = function (logId, memo) {
        var url = this.alarmcheckUrl + '?logId=' + logId + '&memo=' + memo;
        return this.http.post(url, {});
    };
    alarmlogsService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object])
    ], alarmlogsService);
    return alarmlogsService;
}());

//# sourceMappingURL=alarmlogs.service.js.map

/***/ }),

/***/ 178:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaintainsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_maintains_service__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__maintains_menus_maintains_menus__ = __webpack_require__(808);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__maintains_details_maintains_details__ = __webpack_require__(809);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__util_common_equipment_equipmentList__ = __webpack_require__(50);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the MaintainsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MaintainsPage = /** @class */ (function () {
    function MaintainsPage(navCtrl, navParams, menuCtrl, modalCtrl, mutilservice, alertCtrl, popoverCtrl, maintainsprovider) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.menuCtrl = menuCtrl;
        this.modalCtrl = modalCtrl;
        this.mutilservice = mutilservice;
        this.alertCtrl = alertCtrl;
        this.popoverCtrl = popoverCtrl;
        this.maintainsprovider = maintainsprovider;
        this.maintainsList = [];
        this.showMenu = false;
        // 查询条件
        this.aQueryFlag = [
            { first: '01', second: '我的待办' },
            { first: '02', second: '我参与的' },
            { first: '03', second: '抄送我的' },
        ];
        this.station = null;
        this.customStartTimePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.startTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.customEndTimePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.endTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.responsiblePerson = null;
        this.equipment = null;
        this.searchParams = {
            queryFlag: null,
            startTime: __WEBPACK_IMPORTED_MODULE_2_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: __WEBPACK_IMPORTED_MODULE_2_moment__().format('YYYY-MM-DD'),
        };
        this.page = 0;
        this.size = 10;
        var d = this.navParams.get('startDate');
        if (d) {
            this.searchParams.startTime = __WEBPACK_IMPORTED_MODULE_2_moment__(d)
                .startOf('month')
                .format('YYYY-MM-DD');
            this.searchParams.endTime = __WEBPACK_IMPORTED_MODULE_2_moment__(d).endOf('month').format('YYYY-MM-DD');
        }
        this.searchParams.queryFlag =
            this.navParams.get('queryFlag') === '03'
                ? '02'
                : this.navParams.get('queryFlag'); // 其他页面我参与的为03  这边控制下
    }
    MaintainsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad MaintainsPage');
        var params = this.navParams.get('params') || null;
        if (params) {
            this.station = {
                title: params.stationName,
                id: params.stationId,
            };
            this.equipment = {
                deviceId: params.deviceId,
                deviceName: params.deviceName,
            };
            this.searchParams = {
                stationId: params.stationId,
                equipment: this.equipment,
                startTime: params.startTime,
                endTime: params.endTime,
            };
            this.getMaintainsList(false);
        }
        else {
            this.getMaintainsList(true);
        }
    };
    MaintainsPage.prototype.ionViewWillEnter = function () {
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.freshPage = false;
            this.getMaintainsList(true);
        }
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.navParams.data.equipmentList = [];
            if (equipmentList.length > 0) {
                this.equipment = equipmentList[0];
                this.searchParams.equipment = this.equipment;
            }
            else {
                this.equipment = null;
                this.searchParams.equipment = null;
            }
        }
    };
    // 获取巡检列表
    MaintainsPage.prototype.getMaintainsList = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            queryFlag: this.searchParams.queryFlag || null,
            ispectionCode: this.searchParams.ispectionCode || null,
            stationId: this.searchParams.stationId || null,
            startTime: this.searchParams.startTime ||
                __WEBPACK_IMPORTED_MODULE_2_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: this.searchParams.endTime || __WEBPACK_IMPORTED_MODULE_2_moment__().format('YYYY-MM-DD'),
            responsiblePerson: (this.searchParams.responsiblePerson &&
                this.searchParams.responsiblePerson.userId) ||
                null,
            deviceId: (this.searchParams.equipment && this.searchParams.equipment.deviceId) ||
                null,
            page: this.page,
            size: this.size,
        };
        this.maintainsprovider.getMaintainsList(params).subscribe(function (res) {
            if (res) {
                _this.maintainsList = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    // 搜素
    MaintainsPage.prototype.searchMenu = function () {
        var _this = this;
        this.showMenu = true;
        setTimeout(function () {
            _this.menuCtrl.enable(true, 'search');
            _this.menuCtrl.open('search');
        }, 0);
    };
    //新增巡检单
    MaintainsPage.prototype.addMaintains = function (myEvent) {
        var _this = this;
        this.popover = this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_5__maintains_menus_maintains_menus__["a" /* MaintainsMenusPage */], {}, {
            cssClass: 'maintainsMenus',
            showBackdrop: true,
        });
        this.popover.onDidDismiss(function (res) {
            if (res) {
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__maintains_details_maintains_details__["a" /* MaintainsDetailsPage */], {
                    type: 'add',
                    inspectionType: res.type,
                });
            }
        });
        this.popover.present({
            ev: myEvent,
        });
    };
    // 下拉刷新
    MaintainsPage.prototype.doRefresh = function (refresher) {
        this.getMaintainsList(true, refresher);
    };
    // 加载更多
    MaintainsPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            queryFlag: this.searchParams.queryFlag,
            ispectionCode: this.searchParams.ispectionCode,
            stationId: this.searchParams.stationId,
            startTime: this.searchParams.startTime ||
                __WEBPACK_IMPORTED_MODULE_2_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: this.searchParams.endTime || __WEBPACK_IMPORTED_MODULE_2_moment__().format('YYYY-MM-DD'),
            responsiblePerson: this.searchParams.responsiblePerson &&
                this.searchParams.responsiblePerson.userId,
            deviceId: (this.searchParams.equipment && this.searchParams.equipment.deviceId) ||
                null,
            page: this.page,
            size: this.size,
        };
        this.maintainsprovider.getMaintainsList(__assign({}, params)).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.maintainsList = _this.maintainsList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.maintainsList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    // 查看/编辑 巡检单
    MaintainsPage.prototype.editMaintains = function (id, type) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__maintains_details_maintains_details__["a" /* MaintainsDetailsPage */], {
            inspectionId: id,
            inspectionType: type,
        });
    };
    // 快速查询
    MaintainsPage.prototype.selectQuickSearch = function (type) {
        if (this.searchParams.queryFlag === type) {
            this.searchParams.queryFlag = null;
        }
        else {
            this.searchParams.queryFlag = type;
        }
        this.menuCtrl.close('search');
        this.getMaintainsList(true);
    };
    // 电站选择
    MaintainsPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.station = e;
                _this.searchParams.stationId = e.id;
            }
        });
        modal.present({ keyboardClose: true });
    };
    // 清除电站
    MaintainsPage.prototype.clearStation = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchParams.stationId = null;
        this.station = null;
    };
    // 负责人
    MaintainsPage.prototype.selectUser = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.responsiblePerson = data.value[0];
                    _this.searchParams.responsiblePerson = _this.responsiblePerson;
                }
            }
        });
        modal.present();
    };
    MaintainsPage.prototype.clearUser = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchParams.responsiblePerson = null;
        this.responsiblePerson = null;
    };
    MaintainsPage.prototype.selectEquipment = function () {
        var equipment = this.equipment ? [this.equipment] : [];
        if (!this.station) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            stationId: this.station.id,
            isSingle: true,
            selectedItem: equipment,
        });
    };
    MaintainsPage.prototype.clearEquipment = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.equipment = null;
        this.searchParams.equipment = null;
    };
    // 查询按钮
    MaintainsPage.prototype.ok = function () {
        if (this.searchParams.startTime &&
            this.searchParams.endTime &&
            __WEBPACK_IMPORTED_MODULE_2_moment__(this.searchParams.startTime).valueOf() >
                __WEBPACK_IMPORTED_MODULE_2_moment__(this.searchParams.endTime).valueOf()) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选巡检时间范围不正确',
                buttons: ['确定'],
            });
            alert_1.present();
            return;
        }
        this.menuCtrl.close('search');
        this.getMaintainsList(true);
    };
    MaintainsPage.prototype.reset = function () {
        this.equipment = null;
        this.station = null;
        this.searchParams = {
            queryFlag: null,
            ispectionCode: null,
            stationId: null,
            startTime: __WEBPACK_IMPORTED_MODULE_2_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: __WEBPACK_IMPORTED_MODULE_2_moment__().format('YYYY-MM-DD'),
            responsiblePerson: null,
            deviceId: null,
        };
    };
    MaintainsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-maintains',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains/maintains.html"*/'<!--\n  Generated template for the MaintainsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>检修/预试</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="searchMenu()">\n        <ion-icon name="search" style="font-size: 1.4em"></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="addMaintains($event)">\n        <ion-icon name="add-square" style="font-size: 1.4em"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding class="card-list" #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div class="card-item" *ngFor="let maintainsItem of maintainsList">\n      <div class="left-line">\n        <div class="line-icon"></div>\n      </div>\n      <div class="right-content">\n        <div class="title">{{maintainsItem.time}}</div>\n        <ion-card (click)="editMaintains(maintainsItem.id,maintainsItem.type)">\n          <ion-card-header> {{maintainsItem.title}} </ion-card-header>\n          <ul class="ion-card-content">\n            <li class="ell">{{maintainsItem.item1}}</li>\n            <li class="ell">{{maintainsItem.item2}}</li>\n            <li class="ell">{{maintainsItem.item3}}</li>\n            <li class="ell">{{maintainsItem.item4}}</li>\n          </ul>\n          <div\n            *ngIf="maintainsItem.status"\n            class="card-tip"\n            [style.background-color]="maintainsItem.statusStyle"\n          >\n            {{maintainsItem.status}}\n          </div>\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n\n<ng-container *ngIf="showMenu">\n  <ion-menu\n    [content]="search"\n    side="right"\n    id="search"\n    type="overlay"\n    [swipeEnabled]="true"\n    class="search-menu"\n  >\n    <ion-content class="outer-content" no-bounce>\n      <div class="common-search-container">\n        <div class="common-search">\n          <div class="select-picker border-bottom">\n            <div class="query-label">快速查询</div>\n            <ion-grid>\n              <ion-row>\n                <ion-col col-4 *ngFor="let item of aQueryFlag">\n                  <div\n                    class="select-option"\n                    [ngClass]="{\'active-option\': searchParams.queryFlag===item.first}"\n                    (click)="selectQuickSearch(item.first)"\n                  >\n                    {{item.second}}\n                  </div></ion-col\n                >\n              </ion-row>\n            </ion-grid>\n          </div>\n          <div class="input-picker border-bottom">\n            <div class="query-label">单号</div>\n            <ion-input\n              type="text"\n              [(ngModel)]="searchParams.ispectionCode"\n            ></ion-input>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">电站</div>\n            <button\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectStation()"\n            >\n              {{(station?.title)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="station"\n                                (click)="clearStation($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="station"\n                (click)="clearStation($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="time-picker border-bottom">\n            <div class="query-label">时间</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [(ngModel)]="searchParams.startTime"\n              [pickerOptions]="customStartTimePickerOptions"\n            ></ion-datetime>\n            <div class="line">-</div>\n            <ion-datetime\n              displayFormat="YYYY-MM-DD"\n              pickerFormat="YYYY/MM/DD"\n              doneText="确定"\n              [pickerOptions]="customEndTimePickerOptions"\n              [(ngModel)]="searchParams.endTime"\n            ></ion-datetime>\n          </div>\n          <div class="button-picker border-bottom">\n            <div class="query-label">负责人</div>\n            <button ion-button round small color="light" (click)="selectUser()">\n              {{(responsiblePerson?.realName)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="responsiblePerson"\n                                (click)="clearUser($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="responsiblePerson"\n                (click)="clearUser($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="button-picker">\n            <div class="query-label">设备</div>\n            <button\n              class="ell"\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectEquipment()"\n            >\n              {{(equipment?.deviceName)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="equipment"\n                                (click)="clearEquipment($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="equipment"\n                (click)="clearEquipment($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n        </div>\n        <ion-list>\n          <ion-row class="fix-bottom">\n            <ion-col col-6 text-center>\n              <button\n                ion-button\n                round\n                small\n                class="reset-btn"\n                color="light"\n                (click)="reset()"\n              >\n                重置\n              </button>\n            </ion-col>\n            <ion-col col-6 text-center>\n              <button ion-button round small class="query-btn" (click)="ok()">\n                查询\n              </button>\n            </ion-col>\n          </ion-row>\n        </ion-list>\n      </div>\n    </ion-content>\n  </ion-menu>\n</ng-container>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains/maintains.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["t" /* PopoverController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_maintains_service__["a" /* MaintainsProvider */]])
    ], MaintainsPage);
    return MaintainsPage;
}());

//# sourceMappingURL=maintains.js.map

/***/ }),

/***/ 179:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ComponentsUtil; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ComponentsUtil = /** @class */ (function () {
    function ComponentsUtil(alertCtrl, actionSheetCtrl, toastCtrl, loadingCtrl) {
        this.alertCtrl = alertCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.toastCtrl = toastCtrl;
        this.loadingCtrl = loadingCtrl;
    }
    /**
     * 显示确认提示框
     * @param {string} message 需要显示的消息
     */
    ComponentsUtil.prototype.showAlert = function (message, cssClass) {
        if (this.alert) {
            this.alert.dismiss().catch(function () { });
            this.alert = null;
        }
        this.alert = this.alertCtrl.create({
            title: '提示',
            subTitle: message,
            buttons: ['确认'],
            cssClass: cssClass || undefined
        });
        this.alert.present();
    };
    /**
     * 显示 loading
     * @param content 要显示的文字，默认加载中
     * @param {number} duration 时长，持续显示则为0
     * @param spinner 图标类型
     * @param cssClass 样式
     */
    ComponentsUtil.prototype.showLoading = function (content, duration, spinner, cssClass) {
        if (this.spinner) {
            return;
        }
        this.spinner = this.loadingCtrl.create({
            spinner: spinner || '',
            duration: duration,
            content: content || '加载中...',
            cssClass: cssClass || undefined
        });
        this.spinner.present();
    };
    /**
     * 隐藏 loading
     */
    ComponentsUtil.prototype.hideLoading = function () {
        if (this.spinner) {
            this.spinner.dismiss().catch(function () {
            });
            this.spinner = null;
        }
    };
    /**
     * 显示输入提示框
     * @param {PromptOptions} options 提示框的参数
     * @returns {Promise<string>}
     */
    ComponentsUtil.prototype.showPrompt = function (options) {
        var _this = this;
        return new Promise(function (resolve) {
            var alertOptions = options;
            var cancelBtn = {
                text: '取消'
            };
            var confirmBtn = {
                text: '确认',
                handler: function (data) {
                    if (!data || !data[0]
                        || (options.confirmTrigger && !options.confirmTrigger(data[0]))) {
                        return false;
                    }
                    resolve(data[0]);
                }
            };
            alertOptions.title = options.title || '提示';
            alertOptions.buttons = [cancelBtn, confirmBtn];
            alertOptions.inputs = options.inputs
                || [{ type: options.inputType, value: options.defaultValue }];
            var prompt = _this.alertCtrl.create(alertOptions);
            prompt.present();
        });
    };
    /**
     * 弹出确认提示框
     * @param {AlertOptions} options
     * @returns {Promise<void>}
     */
    ComponentsUtil.prototype.showConfirm = function (options) {
        var alert = this.alertCtrl.create({
            title: options.title || '请确认',
            message: options.message || '提示内容',
            buttons: [
                {
                    text: '取消',
                    role: 'cancel',
                    handler: function () {
                        console.log('选择取消按钮');
                    }
                },
                {
                    text: options.buttons[0].text || '确认',
                    handler: options.buttons[0].handler || function () {
                        console.log('选择确认按钮');
                    }
                }
            ]
        });
        if (options.buttons.length > 1) {
            Array.prototype.push.apply(options.buttons.slice(1));
        }
        alert.present();
    };
    /**
     * 显示选择列表
     * @param {ActionSheetOptions} options 选择列表参数
     */
    ComponentsUtil.prototype.showPopupList = function (options) {
        var cancelBtn = {
            text: '取消',
            role: 'cancel'
        };
        options.buttons = options.buttons || [];
        options.buttons.push(cancelBtn);
        var popupList = this.actionSheetCtrl.create(options);
        popupList.present();
    };
    /**
     * 显示 toast
     * @param {ToastOptions} options toast 参数
     */
    ComponentsUtil.prototype.showToast = function (options) {
        options.duration = options.duration || 1000;
        var toast = this.toastCtrl.create(options);
        toast.present();
    };
    ComponentsUtil = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
            providers: [
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* ToastController */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* LoadingController */]
            ]
        }),
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])()
        // 控件工具类
        ,
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* LoadingController */]])
    ], ComponentsUtil);
    return ComponentsUtil;
}());

//# sourceMappingURL=components.util.js.map

/***/ }),

/***/ 227:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CacheService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var CacheService = /** @class */ (function () {
    function CacheService() {
        //电站筛选条件缓存
        this.stationSelect = {
            provinceId: '',
            stationTypeId: '',
            myInput: ''
        };
        //设备筛选条件缓存
        this.equipmentSelect = {
            areaIds: '',
            classIds: '',
            deviceNoOrName: ''
        };
        //设备筛选条件缓存
        this.devicesSelect = {
            areaIds: '',
            classIds: '',
            deviceNoOrName: ''
        };
    }
    CacheService.prototype.getStationSelect = function () {
        return this.stationSelect;
    };
    CacheService.prototype.setStationSelect = function (stationSelect) {
        this.stationSelect = stationSelect;
    };
    CacheService.prototype.getEquipmentSelect = function () {
        return this.equipmentSelect;
    };
    CacheService.prototype.getDevicesSelect = function () {
        return this.devicesSelect;
    };
    CacheService.prototype.setEquipmentSelect = function (equipmentSelect) {
        this.equipmentSelect = equipmentSelect;
    };
    CacheService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [])
    ], CacheService);
    return CacheService;
}());

//# sourceMappingURL=cache.service.js.map

/***/ }),

/***/ 229:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonMaterialsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





/**
 * Generated class for the CommonMaterialsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonMaterialsPage = /** @class */ (function () {
    function CommonMaterialsPage(navCtrl, navParams, viewCtrl, materialservice, mutilservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.materialservice = materialservice;
        this.mutilservice = mutilservice;
        this.materialList = [];
        this.selectedItem = [];
        this.hiddenSelectedModal = true;
        this.selectType = 'single';
    }
    CommonMaterialsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonMaterialsPage');
        this.ioType = this.navParams.get('ioType');
        this.materialType = this.navParams.get('materialType');
        this.warehouseId = this.navParams.get('warehouseId') || null;
        this.selectedItem = this.navParams.get('selectedItem') || [];
        this.selectType = this.navParams.get('selectType') || 'single';
        if (this.selectType === 'single') {
            if (!__WEBPACK_IMPORTED_MODULE_4_lodash__["isEmpty"](this.selectedItem)) {
                this.ioNum = this.selectedItem[0].ioNum;
            }
        }
        this.query();
    };
    CommonMaterialsPage.prototype.close = function () {
        this.viewCtrl.dismiss(null);
    };
    CommonMaterialsPage.prototype.query = function (name) {
        var _this = this;
        if (name === void 0) { name = null; }
        this.materialservice
            .getMaterialList({
            name: name,
            ioType: this.ioType,
            materialType: this.materialType,
            warehouseId: this.warehouseId,
        })
            .subscribe(function (res) {
            if (res) {
                _this.materialList = res;
            }
        });
    };
    CommonMaterialsPage.prototype.searchMaterials = function (event) {
        this.query(event.target.value);
    };
    CommonMaterialsPage.prototype.commitMaterials = function () {
        if (__WEBPACK_IMPORTED_MODULE_4_lodash__["isEmpty"](this.selectedItem)) {
            return this.mutilservice.popToastView("\u8BF7\u5148\u9009\u62E9\u5E93\u5B58\u7269\u6599");
        }
        if (isNaN(Number(this.ioNum))) {
            return this.mutilservice.popToastView("\u8BF7\u8F93\u5165\u6B63\u786E\u7684" + (this.ioType === '01' ? '出库数量' : '入库数量'));
        }
        if (!/^\+?[1-9]\d*$/.test(this.ioNum)) {
            return this.mutilservice.popToastView((this.ioType === '01' ? '出库数量' : '入库数量') + "\u5FC5\u987B\u5927\u4E8E0\u7684\u6B63\u6574\u6570");
        }
        this.viewCtrl.dismiss({
            value: __assign(__assign({}, this.selectedItem[0]), { ioNum: +this.ioNum }),
            type: 'ok',
        });
    };
    /**
     * 点击物料
     */
    CommonMaterialsPage.prototype.selectMaterial = function (material) {
        if (this.selectType === 'single') {
            this.selectedItem = [material];
        }
        else {
            var index = __WEBPACK_IMPORTED_MODULE_4_lodash__["findIndex"](this.selectedItem, function (o) { return o.materialId == material.materialId; });
            if (index == -1) {
                this.selectedItem.push(material);
            }
            else {
                this.selectedItem.splice(index, 1);
            }
        }
    };
    CommonMaterialsPage.prototype.clearAll = function () {
        this.selectedItem = [];
        this.viewCtrl.dismiss({ value: null, type: 'clear' });
    };
    CommonMaterialsPage.prototype.ok = function () {
        console.log(this.selectedItem);
        this.viewCtrl.dismiss({
            value: __spreadArrays(this.selectedItem),
            type: 'ok',
        });
    };
    CommonMaterialsPage.prototype.showIcon = function (materialId) {
        var index = __WEBPACK_IMPORTED_MODULE_4_lodash__["findIndex"](this.selectedItem, function (o) { return o.materialId == materialId; });
        return index != -1;
    };
    CommonMaterialsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-common-materials',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-materials/common-materials.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button icon-only (click)="close()">\n        <ion-icon name="arrow-back" style="color: #fff"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title> 库存物料 </ion-title>\n  </ion-navbar>\n  <ion-toolbar no-border-top class="page-search">\n    <ion-searchbar\n      (ionInput)="searchMaterials($event)"\n      placeholder="料号/名称/规格型号"\n    ></ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-list>\n    <ion-item\n      *ngFor="let material of materialList"\n      no-lines\n      (click)="selectMaterial(material)"\n    >\n      <ion-avatar item-start>\n        <!-- <img src="assets/imgs/list/material.png" /> -->\n        <ion-icon name="material"></ion-icon>\n      </ion-avatar>\n      <ion-label>\n        <h2 class="list-content-name">{{material.materialName}}</h2>\n        <p>物资料号：{{material.materialNo}}</p>\n        <p>规格型号：{{material.materialSpec}}</p>\n        <p *ngIf="material.inventoryNum">\n          库存数量：{{material.inventoryNum}}{{material.unit}}\n        </p>\n        <p *ngIf="material.freezeNum">\n          冻结库存：{{material.freezeNum}}{{material.unit}}\n        </p>\n      </ion-label>\n      <div\n        item-content\n        class="checked-icon"\n        *ngIf="showIcon(material.materialId)"\n      >\n        <ion-icon name="ok"></ion-icon>\n      </div>\n    </ion-item>\n  </ion-list>\n</ion-content>\n\n<ng-container *ngIf="selectType===\'single\'">\n  <ion-footer>\n    <ion-toolbar no-border-top class="page-bottom">\n      <ion-input\n        type="text"\n        [(ngModel)]="ioNum"\n        [placeholder]="ioType==\'01\'?\'请输入出库数量\':\'请输入入库数量\'"\n      ></ion-input>\n      <ion-grid>\n        <ion-row>\n          <ion-col col-6>\n            <button\n              ion-button\n              block\n              class="clear"\n              color="light"\n              (click)="close()"\n            >\n              取消\n            </button>\n          </ion-col>\n          <ion-col col-6>\n            <button ion-button block class="ok-btn" (click)="commitMaterials()">\n              确定\n            </button>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-toolbar>\n  </ion-footer>\n</ng-container>\n\n<ion-footer *ngIf="selectType===\'multi\'">\n  <ion-toolbar no-border-top class="page-bottom">\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <button\n            ion-button\n            block\n            class="clear"\n            color="light"\n            (click)="clearAll()"\n          >\n            清除\n          </button>\n        </ion-col>\n        <ion-col col-6>\n          <button ion-button block class="ok-btn" (click)="ok()">确定</button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-materials/common-materials.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_1__providers_material_service__["a" /* MaterialService */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */]])
    ], CommonMaterialsPage);
    return CommonMaterialsPage;
}());

//# sourceMappingURL=common-materials.js.map

/***/ }),

/***/ 230:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonWarehousePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the CommonWarehousePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonWarehousePage = /** @class */ (function () {
    function CommonWarehousePage(navCtrl, navParams, viewCtrl, materialservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.materialservice = materialservice;
    }
    CommonWarehousePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonWarehousePage');
        this.allWarehouses = this.navParams.get('allWarehouses');
        this.query();
    };
    CommonWarehousePage.prototype.close = function () {
        this.viewCtrl.dismiss(null);
    };
    // 搜索仓库
    CommonWarehousePage.prototype.searchWarehouse = function (event) {
        this.query(event.target.value);
    };
    CommonWarehousePage.prototype.query = function (warehouseName) {
        var _this = this;
        if (warehouseName === void 0) { warehouseName = null; }
        if (this.allWarehouses === false) {
            this.materialservice
                .getWarehouseList({ warehouseName: warehouseName, allWarehouses: false })
                .subscribe(function (res) {
                _this.warehouseList = res;
            });
        }
        else {
            this.materialservice
                .getWarehouseList({ warehouseName: warehouseName })
                .subscribe(function (res) {
                _this.warehouseList = res;
            });
        }
    };
    CommonWarehousePage.prototype.selectWarehouse = function (warehouse) {
        this.viewCtrl.dismiss({ value: warehouse, type: 'ok' });
    };
    CommonWarehousePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-common-warehouse',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-warehouse/common-warehouse.html"*/'<!--\n  Generated template for the CommonWarehousePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n    <ion-navbar>\n        <ion-buttons start>\n            <button ion-button icon-only (click)="close()">\n                <ion-icon name="arrow-back" style="color:#fff"></ion-icon>\n            </button>\n        </ion-buttons>\n        <ion-title>仓库</ion-title>\n    </ion-navbar>\n    <ion-toolbar no-border-top class="page-search">\n        <ion-searchbar\n            (ionInput)="searchWarehouse($event)"\n            placeholder="仓库名称"\n        ></ion-searchbar>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n    <ion-list no-lines>\n        <ion-item\n            *ngFor="let item of warehouseList"\n            (click)="selectWarehouse(item)"\n        >\n            {{ item.warehouseName }}\n        </ion-item>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-warehouse/common-warehouse.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_material_service__["a" /* MaterialService */]])
    ], CommonWarehousePage);
    return CommonWarehousePage;
}());

//# sourceMappingURL=common-warehouse.js.map

/***/ }),

/***/ 231:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RepairTicketsProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_http__ = __webpack_require__(228);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





/*
  Generated class for the RepairTicketsProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var RepairTicketsProvider = /** @class */ (function () {
    function RepairTicketsProvider(http, appConfig, mutilservice) {
        this.http = http;
        this.appConfig = appConfig;
        this.mutilservice = mutilservice;
        this.repairTicketsListUrl = this.appConfig.apiEndpoint + '/api/m/v2/repairTickets/tickets';
        this.repairTicketsDetailsUrl = this.appConfig.apiEndpoint + '/api/m/v2/repairTickets';
        this.remindUrl = this.appConfig.apiEndpoint + '/api/m/v2/repairTickets/remind';
        this.checkUrl = this.appConfig.apiEndpoint + '/api/m/v2/repairTickets/check';
        this.teamListUrl = this.appConfig.apiEndpoint + '/api/teams';
    }
    // 查询缺陷单列表
    RepairTicketsProvider.prototype.getRepairTicketsList = function (params) {
        return this.http.get(this.repairTicketsListUrl, {
            params: this.mutilservice.filterEffectParam(params)
        });
    };
    // 查询缺陷单详情
    RepairTicketsProvider.prototype.getRepairTicketsDetails = function (ticketId, params) {
        return this.http.get(this.repairTicketsDetailsUrl + '/' + ticketId, {
            params: this.mutilservice.filterEffectParam(params)
        });
    };
    RepairTicketsProvider.prototype.remind = function (ticketId) {
        return this.http.put(this.remindUrl + '?ticketId=' + ticketId, {
            ticketId: ticketId
        }, { responseType: __WEBPACK_IMPORTED_MODULE_4__angular_http__["a" /* ResponseContentType */].Text });
    };
    RepairTicketsProvider.prototype.check = function (params) {
        return this.http.put(this.checkUrl, {}, {
            params: this.mutilservice.filterEffectParam(params)
        });
    };
    RepairTicketsProvider.prototype.create = function (params) {
        return this.http.put(this.repairTicketsDetailsUrl, params);
    };
    RepairTicketsProvider.prototype.detelterepairTickets = function (ticketId) {
        return this.http.delete(this.repairTicketsDetailsUrl + '?ticketId=' + ticketId);
    };
    RepairTicketsProvider.prototype.getTeamList = function (params) {
        return this.http.get(this.teamListUrl, {
            params: this.mutilservice.filterEffectParam(params)
        });
    };
    RepairTicketsProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_3__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object, __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__["a" /* MutilService */]])
    ], RepairTicketsProvider);
    return RepairTicketsProvider;
}());

//# sourceMappingURL=repair-tickets.service.js.map

/***/ }),

/***/ 232:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonDispatchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_user_common_user__ = __webpack_require__(45);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the CommonDispatchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonDispatchPage = /** @class */ (function () {
    function CommonDispatchPage(navCtrl, navParams, alertCtrl, viewCtrl, modalCtrl, mutilservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.alertCtrl = alertCtrl;
        this.viewCtrl = viewCtrl;
        this.modalCtrl = modalCtrl;
        this.mutilservice = mutilservice;
        this.memo = '';
        this.options = [];
        this.selectedOption = {
            checkStatus: null,
            checkStatusText: null
        };
        this.userId = '';
    }
    CommonDispatchPage.prototype.ionViewDidLoad = function () { };
    CommonDispatchPage.prototype.selectUser = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_3__common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    console.log(data);
                    _this.userId = data.value[0] ? data.value[0].userId : null;
                    _this.userName = data.value[0] ? data.value[0].realName : null;
                    console.log(_this.userId);
                }
                else {
                    _this.userId = null;
                    _this.userName = null;
                }
            }
        });
        modal.present();
    };
    CommonDispatchPage.prototype.ok = function () {
        console.log(this.userId);
        if (!this.userId) {
            this.mutilservice.popToastView('用户必填');
            return;
        }
        if (this.memo.length > 500) {
            this.mutilservice.popToastView('备注，不超过500字符');
            return;
        }
        this.viewCtrl.dismiss({
            value: { nextUserIds: [this.userId], memo: this.memo },
            type: 'ok'
        });
    };
    CommonDispatchPage.prototype.clear = function () {
        this.viewCtrl.dismiss();
    };
    CommonDispatchPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonDispatchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-common-dispatch',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-dispatch/common-dispatch.html"*/'<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <h6>用户<b>*</b></h6>\n  <div class="user-name">\n    <ion-input\n      type="text"\n      [readonly]="true"\n      [(ngModel)]="userName"\n      (tap)="selectUser()"\n    ></ion-input>\n    <ion-icon name="ios-arrow-down"></ion-icon>\n  </div>\n  <h6>备注</h6>\n  <ion-textarea [(ngModel)]="memo"></ion-textarea>\n  <ion-grid>\n    <ion-row>\n      <ion-col col-6>\n        <button\n          ion-button\n          small\n          color="light"\n          class="clear-btn"\n          (tap)="clear()"\n        >\n          取消\n        </button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button small class="ok-btn" (tap)="ok()">确定</button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-dispatch/common-dispatch.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */]])
    ], CommonDispatchPage);
    return CommonDispatchPage;
}());

//# sourceMappingURL=common-dispatch.js.map

/***/ }),

/***/ 233:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OperateTicketsProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util_Mutil_service__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




/*
  Generated class for the OperateTicketsProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var OperateTicketsProvider = /** @class */ (function () {
    function OperateTicketsProvider(http, appConfig, mutilservice) {
        this.http = http;
        this.appConfig = appConfig;
        this.mutilservice = mutilservice;
        // 查询操作票列表url
        this.operateTicketsListUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/tickets/operate/tickets';
        this.operateTicketsDetailsUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/tickets/operate';
        this.checkUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/tickets/operate/check';
        this.operateTemplatesUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/tickets/operate/templates';
        this.operateTemplateUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/tickets/operate/template';
        this.operateTmpSaveUrl =
            this.appConfig.apiEndpoint + '/api/tickets/operate';
    }
    // 操作票列表
    OperateTicketsProvider.prototype.getOperateTicketsList = function (params) {
        return this.http.get(this.operateTicketsListUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    // 查询操作票详情
    OperateTicketsProvider.prototype.getOperateTicketsDetails = function (ticketId) {
        return this.http.get(this.operateTicketsDetailsUrl + '/' + ticketId);
    };
    OperateTicketsProvider.prototype.check = function (params) {
        return this.http.put(this.checkUrl, {}, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    // 完成
    OperateTicketsProvider.prototype.operate = function (params) {
        return this.http.put(this.operateTicketsDetailsUrl, params);
    };
    OperateTicketsProvider.prototype.deleteOperateTickets = function (ticketId) {
        return this.http.delete(this.operateTicketsDetailsUrl + '?ticketId=' + ticketId);
    };
    OperateTicketsProvider.prototype.create = function (params) {
        return this.http.put(this.operateTicketsDetailsUrl, params);
    };
    OperateTicketsProvider.prototype.tmpSavePost = function (params) {
        return this.http.post(this.operateTmpSaveUrl, params);
    };
    OperateTicketsProvider.prototype.tmpSavePut = function (params) {
        return this.http.put(this.operateTmpSaveUrl, params);
    };
    /**
     * /api/m/v2/tickets/operate/templates
     */
    OperateTicketsProvider.prototype.getOperateTemplates = function (params) {
        return this.http.get(this.operateTemplatesUrl, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    /**
     * /api/m/v2/tickets/operate/template
     */
    OperateTicketsProvider.prototype.getOperateTemplate = function (ticketId) {
        return this.http.get(this.operateTemplateUrl + '/' + ticketId);
    };
    OperateTicketsProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__auth_http_service__["a" /* AuthHttpService */], Object, __WEBPACK_IMPORTED_MODULE_3__util_Mutil_service__["a" /* MutilService */]])
    ], OperateTicketsProvider);
    return OperateTicketsProvider;
}());

//# sourceMappingURL=operate-tickets.service.js.map

/***/ }),

/***/ 234:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OperateTicketsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_operate_tickets_service__ = __webpack_require__(233);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__util_modal_operate_tickets_search_operate_tickets_search__ = __webpack_require__(794);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__operate_tickets_details_operate_tickets_details__ = __webpack_require__(340);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the OperateTicketsPage page.
 * 操作票
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var OperateTicketsPage = /** @class */ (function () {
    function OperateTicketsPage(navCtrl, navParams, modalCtrl, operateticketsservice, mutilservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modalCtrl = modalCtrl;
        this.operateticketsservice = operateticketsservice;
        this.mutilservice = mutilservice;
        this.searchParams = {
            queryFlag: '',
            startOperateTime: __WEBPACK_IMPORTED_MODULE_3_moment___default()().subtract(30, 'days').format('YYYY-MM-DD'),
            endOperateTime: __WEBPACK_IMPORTED_MODULE_3_moment___default()().format('YYYY-MM-DD'),
        };
        this.size = 10;
        this.operateTicketList = [];
        var d = this.navParams.get('startDate');
        if (d) {
            this.searchParams.startOperateTime = __WEBPACK_IMPORTED_MODULE_3_moment___default()(d)
                .startOf('month')
                .format('YYYY-MM-DD');
            this.searchParams.endOperateTime = __WEBPACK_IMPORTED_MODULE_3_moment___default()(d)
                .endOf('month')
                .format('YYYY-MM-DD');
        }
        this.searchParams.queryFlag = this.navParams.get('queryFlag');
    }
    OperateTicketsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad OperateTicketsPage');
        this.getOperateTicketsList(true);
    };
    OperateTicketsPage.prototype.ionViewWillEnter = function () {
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.freshPage = false;
            this.getOperateTicketsList(true);
        }
    };
    OperateTicketsPage.prototype.openSearchBar = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_5__util_modal_operate_tickets_search_operate_tickets_search__["a" /* OperateTicketsSearchPage */], {
            searchParams: this.searchParams,
        }, {
            enterAnimation: 'modal-from-right-enter',
            leaveAnimation: 'modal-from-right-leave',
            cssClass: 'commonSearchSideBar',
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.searchParams = data.value;
                    _this.getOperateTicketsList(false);
                }
            }
        });
        modal.present();
    };
    OperateTicketsPage.prototype.getOperateTicketsList = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            queryFlag: this.searchParams.queryFlag,
            ticketCode: this.searchParams.ticketCode || null,
            stationId: this.searchParams.stationId || null,
            startOperateTime: this.searchParams.startOperateTime ||
                __WEBPACK_IMPORTED_MODULE_3_moment___default()().subtract(30, 'days').format('YYYY-MM-DD'),
            endOperateTime: this.searchParams.endOperateTime || __WEBPACK_IMPORTED_MODULE_3_moment___default()().format('YYYY-MM-DD'),
            executor: (this.searchParams.executor && this.searchParams.executor.userId) ||
                null,
            supervisior: (this.searchParams.supervisior &&
                this.searchParams.supervisior.userId) ||
                null,
            page: this.page,
            size: this.size,
        };
        this.operateticketsservice
            .getOperateTicketsList(params)
            .subscribe(function (res) {
            if (res) {
                _this.operateTicketList = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    OperateTicketsPage.prototype.doRefresh = function (refresher) {
        this.getOperateTicketsList(true, refresher);
    };
    OperateTicketsPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            queryFlag: this.searchParams.queryFlag,
            ticketCode: this.searchParams.ticketCode,
            stationId: this.searchParams.stationId,
            startOperateTime: this.searchParams.startOperateTime,
            endOperateTime: this.searchParams.endOperateTime,
            executor: this.searchParams.executor && this.searchParams.executor.userId,
            supervisior: this.searchParams.supervisior && this.searchParams.supervisior.userId,
            page: this.page,
            size: this.size,
        };
        this.operateticketsservice
            .getOperateTicketsList(params)
            .subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.operateTicketList = _this.operateTicketList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.operateTicketList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    OperateTicketsPage.prototype.addOperateTicker = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__operate_tickets_details_operate_tickets_details__["a" /* OperateTicketsDetailsPage */]);
    };
    OperateTicketsPage.prototype.editOperateTicket = function (ticketId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__operate_tickets_details_operate_tickets_details__["a" /* OperateTicketsDetailsPage */], {
            ticketId: ticketId,
        });
    };
    OperateTicketsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-operate-tickets',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/operate-tickets/operate-tickets.html"*/'<!--\n  Generated template for the OperateTicketsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>操作票</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="openSearchBar()">\n        <ion-icon name="search" style="font-size: 1.4em"></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="addOperateTicker()">\n        <ion-icon name="add-square" style="font-size: 1.4em"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding class="card-list">\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div class="card-item" *ngFor="let operateTicket of operateTicketList">\n      <div class="left-line">\n        <div class="line-icon"></div>\n      </div>\n      <div class="right-content">\n        <div class="title">{{operateTicket.time}}</div>\n        <ion-card (click)="editOperateTicket(operateTicket.id)">\n          <ion-card-header>\n            {{operateTicket.title}}\n            <span\n              class="operateTicket-info"\n              [ngClass]="{\'operateTicket-01\': operateTicket.status===\'已执行\',\'operateTicket-02\': operateTicket.status===\'暂存\'}"\n              >{{operateTicket.status}}</span\n            >\n          </ion-card-header>\n          <ul class="ion-card-content">\n            <li class="ell">{{operateTicket.item1}}</li>\n            <li class="ell">{{operateTicket.item2}}</li>\n            <li class="ell">{{operateTicket.item3}}</li>\n            <li class="ell">{{operateTicket.item4}}</li>\n          </ul>\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/operate-tickets/operate-tickets.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_operate_tickets_service__["a" /* OperateTicketsProvider */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__["a" /* MutilService */]])
    ], OperateTicketsPage);
    return OperateTicketsPage;
}());

//# sourceMappingURL=operate-tickets.js.map

/***/ }),

/***/ 235:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MonitorPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_alarmlogs_service__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_echarts_service__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_monitor_service__ = __webpack_require__(113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__home_warn_message_warn_message__ = __webpack_require__(176);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__camera_list_camera_list__ = __webpack_require__(796);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__equipment_equipmentList__ = __webpack_require__(798);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__power_station_records_pow_sta_records__ = __webpack_require__(799);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__child_setting__ = __webpack_require__(800);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












var MonitorPage = /** @class */ (function () {
    function MonitorPage(navCtrl, echartsService, monitorService, modalCtrl, popoverCtrl, alarmlogsService, navParams, event, appConfig) {
        this.navCtrl = navCtrl;
        this.echartsService = echartsService;
        this.monitorService = monitorService;
        this.modalCtrl = modalCtrl;
        this.popoverCtrl = popoverCtrl;
        this.alarmlogsService = alarmlogsService;
        this.navParams = navParams;
        this.event = event;
        this.appConfig = appConfig;
        // axisData3 = {
        //     xAxisData:[],
        //     yAxisData: []
        // }
        this.rankechart = 'fadian';
        this.energiesActive = 'hour'; //timeType：hour、day、month、year，默认hour
        this.inverterrankParam = {
            cateId: 'AI-NB-ZXYGDXS-M',
            sort: 'desc',
        };
        this.stationId = null;
        this.hadBackButton = this.navParams.get('hadBackButton');
    }
    /**获取页面上半部分信息 */
    MonitorPage.prototype.getsummary = function (stationId) {
        var _this = this;
        this.monitorService.getsummary(stationId).subscribe(function (e) {
            if (e) {
                _this.summary = e;
                var ratio = _this.summary.summaries[0] && _this.summary.summaries[0].ratio;
                _this.trendChartOption = {
                    graphic: {
                        elements: [
                            {
                                type: 'image',
                                style: {
                                    image: "assets/imgs/monitor/chart-bg.png",
                                    width: 119,
                                    height: 119,
                                },
                                left: 'center',
                                top: 'middle',
                                z: 0
                            }
                        ]
                    },
                    tooltip: {
                        trigger: 'item',
                    },
                    legend: {
                        bottom: 30,
                        left: '6%',
                        itemWidth: 10,
                        itemHeight: 10,
                        borderRadius: 0,
                        itemGap: 10,
                        textStyle: {
                            color: '#fff',
                        },
                    },
                    series: [
                        {
                            type: 'pie',
                            center: ['50%', '50%'],
                            clockWise: false,
                            hoverAnimation: false,
                            radius: ['76%', '92%'],
                            label: {
                                normal: {
                                    show: true,
                                    position: 'center',
                                    color: '#4c4a4a',
                                    formatter: "{title|" + (_this.summary.summaries[0] && _this.summary.summaries[0].title || '') + "}\n{value|" + (_this.summary.summaries[0] && _this.summary.summaries[0].value || '') + "}\n{unit|" + (_this.summary.summaries[0] && _this.summary.summaries[0].unit || '') + "}",
                                    rich: {
                                        title: {
                                            fontSize: 12,
                                            fontFamily: 'YouSheBiaoTiHei',
                                            color: '#c3e7ff',
                                        },
                                        value: {
                                            fontFamily: 'MiSans-Medium',
                                            fontSize: 22,
                                            color: '#3fff59',
                                            fontWeight: 500,
                                            lineHeight: 40
                                        },
                                        unit: {
                                            fontFamily: 'MiSans-Medium',
                                            fontSize: 12,
                                            color: '#c2d2dd'
                                        }
                                    },
                                },
                            },
                            color: ['#3BE23A', 'rgba(170,234,255,0.40)'],
                            data: [{
                                    value: ratio,
                                    label: {
                                        normal: {
                                            show: false,
                                        },
                                    },
                                }, {
                                    value: 100 - ratio,
                                }],
                        },
                    ],
                };
                _this.getalarmCount(_this.summary.stationId);
                _this.getinverterrankUrl(_this.summary.stationId, _this.inverterrankParam.cateId, _this.inverterrankParam.sort);
            }
        });
    };
    /**获取发电曲线数据 */
    MonitorPage.prototype.getenergies = function (stationId) {
        var _this = this;
        this.monitorService
            .getenergies(this.energiesActive, stationId)
            .subscribe(function (e) {
            if (e) {
                _this.energies = e;
                _this.trendChartOption1 = _this.echartsService.initEc3(e, _this.appConfig.theme);
            }
        });
    };
    /**获取电站告警数量 */
    MonitorPage.prototype.getalarmCount = function (stationId) {
        var _this = this;
        this.alarmlogsService.getAlarmCount(stationId).subscribe(function (e) {
            _this.alarmCount = e;
        });
    };
    /**获取逆变器发电排行 */
    MonitorPage.prototype.getinverterrankUrl = function (stationId, cateId, sort) {
        var _this = this;
        this.monitorService
            .getinverterrankUrl(stationId, cateId, sort)
            .subscribe(function (e) {
            if (e) {
                _this.inverterrank = e;
                _this.trendChartOption2 = _this.echartsService.initEc4(_this.buildTrendChartOption(e['content']), _this.appConfig.theme, sort);
                console.log(_this.trendChartOption2);
            }
        });
    };
    MonitorPage.prototype.ionViewDidLoad = function () {
        this.stationId = localStorage.getItem('stationId');
        this.getsummary(this.stationId);
        this.getenergies(this.stationId);
    };
    // enter page to update stationId request
    MonitorPage.prototype.ionViewWillEnter = function () {
        var GlobalSearch = localStorage.getItem('isFromGlobalSearch');
        if (GlobalSearch) {
            this.stationId = localStorage.getItem('stationId');
            this.getsummary(this.stationId);
            this.getenergies(this.stationId);
        }
    };
    MonitorPage.prototype.ionViewWillLeave = function () {
        localStorage.removeItem('stationId');
        localStorage.removeItem('isFromGlobalSearch');
    };
    MonitorPage.prototype.buildTrendChartOption = function (content) {
        var axisData = {
            xAxisData: [],
            yAxisData: [],
        };
        for (var _i = 0, content_1 = content; _i < content_1.length; _i++) {
            var obj = content_1[_i];
            if (!obj.value) {
                obj.value = "0h";
            }
            if (!obj.unit) {
                obj.unit = "h";
            }
            // 逆变器名称
            var description = obj.deviceName + obj.deviceNo;
            axisData.xAxisData.push(description + ' ' + obj.value + obj.unit);
            axisData.yAxisData.push(obj.ratio);
        }
        return axisData;
    };
    /**发电曲线时间选择 */
    MonitorPage.prototype.selectenergiesActive = function (type) {
        this.energiesActive = type;
        this.getenergies(this.summary.stationId);
    };
    /**打开排行设置 */
    MonitorPage.prototype.openSetting = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_11__child_setting__["a" /* SettingPage */], { inverterrankParam: this.inverterrankParam }, {
            cssClass: 'commonModal commonInputModal settingModel',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.inverterrankParam = e;
                _this.getinverterrankUrl(_this.summary.stationId, _this.inverterrankParam.cateId, _this.inverterrankParam.sort);
            }
        });
        modal.present();
    };
    //电站列表
    MonitorPage.prototype.toPowerStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.getsummary(e.id);
                _this.getenergies(e.id);
            }
        });
        modal.present({ keyboardClose: true });
    };
    //设备列表
    MonitorPage.prototype.toEquipmentList = function () {
        // let modal = this.modalCtrl.create(EquipmentListPage, {
        //     stationId: this.summary.stationId
        // });
        // modal.onDidDismiss((e) => {});
        // modal.present({ keyboardClose: true });
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__equipment_equipmentList__["a" /* EquipmentListPage */], { stationId: this.summary.stationId });
    };
    /**告警页面 */
    MonitorPage.prototype.towarnMessage = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__home_warn_message_warn_message__["a" /* WarnMessage */], {
            station: { id: this.summary.stationId, title: this.summary.stationName },
            queryYears: true,
        });
    };
    MonitorPage.prototype.powStaRecords = function () {
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_10__power_station_records_pow_sta_records__["a" /* PowStaRecords */], {});
        modal.onDidDismiss(function (e) { });
        modal.present({ keyboardClose: true });
        // this.navCtrl.push(PowStaRecords)
    };
    MonitorPage.prototype.camera = function () {
        // let modal = this.modalCtrl.create(CameraListPage, {
        //     stationId: this.summary.stationId
        // });
        // modal.onDidDismiss((e) => {});
        // modal.present({ keyboardClose: true });
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__camera_list_camera_list__["a" /* CameraListPage */], { stationId: this.summary.stationId });
    };
    /**返回首页 */
    MonitorPage.prototype.goBack = function () {
        if (this.hadBackButton) {
            this.navCtrl.pop();
        }
        else {
            this.event.publish('changerTab', { index: 0 });
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('echart'),
        __metadata("design:type", Object)
    ], MonitorPage.prototype, "echart", void 0);
    MonitorPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-monitor',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/monitor.html"*/'<ion-header class="page-header">\n  <ion-navbar hideBackButton="true">\n    <ion-buttons start>\n      <button (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back white-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title (click)="toPowerStation()">\n      {{summary&&summary.stationName}}\n      <ion-icon name="ios-arrow-down-outline"></ion-icon>\n    </ion-title>\n    <ion-buttons end>\n      <button (click)="toEquipmentList()" class="title-left">\n        <ion-icon name="md-more" class="device-list"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <div class="monitor-container">\n    <div class="monitor-bg">\n      <div class="gonglv" *ngIf="summary">\n        <div\n          echarts\n          #echart\n          [options]="trendChartOption"\n          class="trend-chart"\n        ></div>\n        <div class="subTitle">\n          <span>{{summary.summaries[0]?.subTitle||\'\'}}：</span\n          >{{summary.summaries[0]?.subValue||\'\'}}{{summary.summaries[0]?.subUnit||\'\'}}\n        </div>\n      </div>\n\n      <div class="all-fadian" *ngIf="summary">\n        <div class="fadian name">\n          <div>{{summary.summaries[1]?.title||\'\'}}</div>\n          <div>{{summary.summaries[2]?.title||\'\'}}</div>\n          <div>{{summary.summaries[3]?.title||\'\'}}</div>\n        </div>\n        <div class="line"></div>\n        <div class="fadian data">\n          <div>\n            {{summary.summaries[1]?.value||\'\'}}<span\n              >{{summary.summaries[1]?.unit||\'\'}}</span\n            >\n          </div>\n          <div>\n            {{summary.summaries[2]?.value||\'\'}}<span\n              >{{summary.summaries[2]?.unit||\'\'}}</span\n            >\n          </div>\n          <div>\n            {{summary.summaries[3]?.value||\'\'}}<span\n              >{{summary.summaries[3]?.unit||\'\'}}</span\n            >\n          </div>\n        </div>\n        <div class="line right"></div>\n        <div class="fadian sub">\n          <div>\n            {{summary.summaries[1]?.subTitle||\'\'}}：{{summary.summaries[1]?.subValue||\'\'}}{{summary.summaries[1]?.subUnit||\'\'}}\n          </div>\n          <div>\n            {{summary.summaries[2]?.subTitle||\'\'}}：{{summary.summaries[2]?.subValue||\'\'}}{{summary.summaries[2]?.subUnit||\'\'}}\n          </div>\n          <div>\n            {{summary.summaries[3]?.subTitle||\'\'}}：{{summary.summaries[3]?.subValue||\'\'}}{{summary.summaries[3]?.subUnit||\'\'}}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!--******** 图表切换 ********-->\n  <div class="echart-tab">\n    <ion-segment [(ngModel)]="rankechart">\n      <ion-segment-button value="fadian">发电趋势</ion-segment-button>\n      <ion-segment-button value="dianzhan">逆变器排名</ion-segment-button>\n    </ion-segment>\n  </div>\n  <div [ngSwitch]="rankechart" class="rankechart">\n    <div *ngSwitchCase=" \'fadian\' ">\n      <!-- <div class="e-title">\n                <i class="option"></i>\n                <span class="fdl">发电量</span>\n                <i class="option pink"></i>\n                <span>计划发电量</span>\n                <span class="danwei">（单位:万kwh）</span>\n                <div class="time-dl">日期：<span class="time">05/15</span> 电量：<span>1600</span></div>\n            </div> -->\n      <div\n        echarts\n        #echart\n        [options]="trendChartOption1"\n        class="trend-chart1"\n      ></div>\n      <div class="date-classify">\n        <span\n          [class.active]=\'energiesActive == "hour"\'\n          (click)="selectenergiesActive(\'hour\')"\n          >时</span\n        >\n        <span\n          [class.active]=\'energiesActive == "day"\'\n          (click)="selectenergiesActive(\'day\')"\n          >日</span\n        >\n        <span\n          [class.active]=\'energiesActive == "month"\'\n          (click)="selectenergiesActive(\'month\')"\n          >月</span\n        >\n        <span\n          [class.active]=\'energiesActive == "year"\'\n          (click)="selectenergiesActive(\'year\')"\n          >年</span\n        >\n      </div>\n    </div>\n    <div *ngSwitchCase=" \'dianzhan\' ">\n      <div class="filter" (click)="openSetting()">\n        <!-- <img src="assets/imgs/jiance/set.png"/> -->\n        <ion-icon name="ios-settings-outline"></ion-icon>\n      </div>\n      <div\n        echarts\n        #echart\n        [options]="trendChartOption2"\n        class="trend-chart2"\n      ></div>\n    </div>\n  </div>\n  <ion-list no-lines>\n    <button ion-item detail-none (click)="towarnMessage()">\n      <ion-avatar item-start>\n        <img src="assets/imgs/jiance/dzgj.png" class="smile-img" />\n      </ion-avatar>\n      电站告警\n      <span item-end class="alarmCount">{{alarmCount}}</span>\n    </button>\n    <button ion-item (click)="camera()">\n      <ion-avatar item-start>\n        <img src="assets/imgs/jiance/jiankong.png" class="smile-img" />\n      </ion-avatar>\n      视频监视\n    </button>\n    <!-- <button ion-item (click)="powStaRecords()">\n      <ion-avatar item-start>\n        <img src="assets/imgs/jiance/dzda.png" class="smile-img" />\n      </ion-avatar>\n      电站档案\n    </button> -->\n  </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/monitor.html"*/,
        }),
        __param(8, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_echarts_service__["a" /* EchartsService */],
            __WEBPACK_IMPORTED_MODULE_5__providers_monitor_service__["a" /* MonitorService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["t" /* PopoverController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_alarmlogs_service__["a" /* alarmlogsService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */], Object])
    ], MonitorPage);
    return MonitorPage;
}());

//# sourceMappingURL=monitor.js.map

/***/ }),

/***/ 27:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AuthHttpService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(139);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_operators__ = __webpack_require__(112);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_operators___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_operators__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_jsrsasign__ = __webpack_require__(1240);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_jsrsasign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_jsrsasign__);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};







var AuthHttpService = /** @class */ (function () {
    function AuthHttpService(http, events, appConfig) {
        this.http = http;
        this.events = events;
        this.appConfig = appConfig;
        this.authUrl = 'http://114.55.132.103:8000/api/auth';
        this.token = localStorage.getItem('_TOKEN_');
        this.authUrl = this.appConfig.apiEndpoint + '/api/m/v2/framework/auth';
        this.customersUrl =
            this.appConfig.apiEndpoint + '/api/customerInfo/customers';
        this.registerUrl = this.appConfig.apiEndpoint + '/api/register';
    }
    /**
     * 通用get方法
     * @param url
     */
    AuthHttpService.prototype.get = function (url, options) {
        return this.http.get(url, __assign({}, options));
    };
    AuthHttpService.prototype.post = function (url, obj, options) {
        if (options === void 0) { options = {}; }
        return this.http.post(url, obj, __assign({}, options));
    };
    AuthHttpService.prototype.put = function (url, obj, options) {
        if (options === void 0) { options = {}; }
        return this.http.put(url, obj, __assign({}, options));
    };
    AuthHttpService.prototype.delete = function (url, options) {
        if (options === void 0) { options = {}; }
        return this.http.delete(url, __assign({}, options));
    };
    /**
     * 鉴权接口
     * @param username
     * @param password
     */
    AuthHttpService.prototype.auth = function (username, password) {
        return __awaiter(this, void 0, void 0, function () {
            var cipherpwd;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getLoginPassword(password)];
                    case 1:
                        cipherpwd = _a.sent();
                        return [2 /*return*/, this.http
                                .post(this.authUrl, { username: username, password: null, cipherpwd: cipherpwd })
                                .pipe(Object(__WEBPACK_IMPORTED_MODULE_2_rxjs_operators__["map"])(function (response) {
                                var resObj = response;
                                _this.token = resObj.token;
                                localStorage.setItem('_TOKEN_', _this.token);
                                return resObj;
                            }), Object(__WEBPACK_IMPORTED_MODULE_2_rxjs_operators__["catchError"])(function (error) {
                                return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["Observable"].throw(error);
                            }))
                                .toPromise()];
                }
            });
        });
    };
    AuthHttpService.prototype.getLoginPassword = function (password) {
        return __awaiter(this, void 0, void 0, function () {
            var rsa, secretkey, publicKey, enc, base64Sign;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        rsa = new __WEBPACK_IMPORTED_MODULE_6_jsrsasign___default.a.RSAKey();
                        return [4 /*yield*/, this.getPublicKey()];
                    case 1:
                        secretkey = _a.sent();
                        publicKey = '-----BEGIN PUBLIC KEY-----\n' + secretkey + '\n-----END PUBLIC KEY-----';
                        console.log(publicKey);
                        rsa = __WEBPACK_IMPORTED_MODULE_6_jsrsasign___default.a.KEYUTIL.getKey(publicKey);
                        console.log(rsa);
                        enc = __WEBPACK_IMPORTED_MODULE_6_jsrsasign___default.a.KJUR.crypto.Cipher.encrypt(password, rsa);
                        base64Sign = __WEBPACK_IMPORTED_MODULE_6_jsrsasign___default.a.hextob64(enc);
                        return [2 /*return*/, base64Sign];
                }
            });
        });
    };
    AuthHttpService.prototype.getPublicKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, this.get(this.appConfig.apiEndpoint + "/api/auth/publicKey").toPromise()];
            });
        });
    };
    AuthHttpService.prototype.queryCustomers = function (name) {
        return this.get(this.customersUrl, { params: { name: name } });
    };
    AuthHttpService.prototype.register = function (params, options) {
        return this.post(this.registerUrl, params, __assign({}, options));
    };
    /**
     * 验证token是否有效
     */
    AuthHttpService.prototype.tokenValidate = function () {
        var _this = this;
        return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["Observable"].create(function (observer) {
            observer.next(_this.token != null);
            observer.complete();
        });
    };
    AuthHttpService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __param(2, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_5__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_common_http__["b" /* HttpClient */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["f" /* Events */], Object])
    ], AuthHttpService);
    return AuthHttpService;
}());

//# sourceMappingURL=auth-http.service.js.map

/***/ }),

/***/ 339:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NativeService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var NativeService = /** @class */ (function () {
    function NativeService() {
    }
    /**
     * 获得用户当前坐标/坐标系为火星坐标系（GCJ-02）坐标系
     * @return {Promise<any>}
     */
    NativeService.prototype.getUserLocation = function () {
        return new Promise(function (resolve) {
            LocationPlugin.getLocation(function (data) {
                resolve({ lng: data.longitude, lat: data.latitude });
            }, function (msg) {
                alert(msg.indexOf('缺少定位权限') == -1
                    ? '错误消息：' + msg
                    : '缺少定位权限，请在手机设置中开启');
            });
        });
    };
    NativeService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [])
    ], NativeService);
    return NativeService;
}());

//# sourceMappingURL=location-plugin.js.map

/***/ }),

/***/ 340:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OperateTicketsDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__repair_ticket_details_repair_ticket_details__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__defect_management_details_defect_management_details__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_operate_tickets_service__ = __webpack_require__(233);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__util_modal_common_operate_step_common_operate_step__ = __webpack_require__(784);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__util_common_typical_operate_tickets_common_typical_operate_tickets__ = __webpack_require__(785);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__util_modal_common_check_common_check__ = __webpack_require__(128);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















/**
 * Generated class for the OperateTicketsDetailsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var OperateTicketsDetailsPage = /** @class */ (function () {
    function OperateTicketsDetailsPage(navCtrl, navParams, fb, modalCtrl, actionSheetCtrl, operateticketsservice, alertCtrl, mutilservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.modalCtrl = modalCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.operateticketsservice = operateticketsservice;
        this.alertCtrl = alertCtrl;
        this.mutilservice = mutilservice;
        this.buttons = [];
        this.toggleBaseInfo = true;
        this.toggleOperateSteps = false;
        this.toggleOperateInspection = false;
        this.toggleComment = false;
        this.buttonToggle = false;
        this.ccUsers = [];
        this.commentsList = [];
        this.tasks = [];
        this.initForm();
    }
    OperateTicketsDetailsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad OperateTicketsDetailsPage');
        this.ticketId = this.navParams.get('ticketId')
            ? this.navParams.get('ticketId')
            : 0;
        this.view = this.navParams.get('view');
        this.getOperateTicketsDetails();
    };
    OperateTicketsDetailsPage.prototype.initForm = function () {
        this.form = this.fb.group({
            ticketId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            ticketCode: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            parentOrderId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            parentOrderCode: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            parentOrderType: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            parentOrderTypeText: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            customerId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            stationId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            operateType: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            operateTypeText: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            sender: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            senderName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            receiver: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            receiverName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            orderTime: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            operateDesc: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            auditor: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            auditorName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            ticketLeader: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            ticketLeaderName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            executer: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            executerName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            supervisior: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            supervisiorName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            // 操作步骤
            tasks: this.fb.array([]),
            startTime: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            endTime: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            creater: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            createrName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            createTime: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            // 照片
            pics: this.fb.array([]),
            // 文件
            docs: this.fb.array([]),
            // 抢修单检查
            checkStatus: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            checkStatusText: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            checker: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            checkerName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            checkTime: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            checkMemo: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            //抄送
            ccUsers: this.fb.array([]),
        });
    };
    OperateTicketsDetailsPage.prototype.getTask = function (form) {
        return form.controls.tasks.controls;
    };
    OperateTicketsDetailsPage.prototype.initTasks = function () {
        return new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["c" /* FormGroup */]({
            taskId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            ticketId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            orderNo: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            taskDesc: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            taskStatus: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            executeTime: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
        });
    };
    OperateTicketsDetailsPage.prototype.getOperateTicketsDetails = function () {
        var _this = this;
        this.operateticketsservice
            .getOperateTicketsDetails(this.ticketId)
            .subscribe(function (res) {
            _this.fillValue(res);
        });
    };
    OperateTicketsDetailsPage.prototype.fillValue = function (res) {
        var _this = this;
        this.title = res.title;
        this.buttons = res.buttons;
        this.fields = res.fields;
        // 典型操作票（模板）
        this.loadTemplate = res.loadTemplate;
        var values = res.ticket;
        // 图片权限
        this.picPermission = res.picPermission;
        // 文档权限
        this.docPermission = res.docPermission;
        // 抄送权限
        this.ccPermission = res.ccPermission;
        // 评论权限
        this.commentPermission = res.commentPermission;
        this.orderId = values.orderId;
        // 受令时间
        values.orderTime = __WEBPACK_IMPORTED_MODULE_13_lodash__["isNumber"](values.orderTime)
            ? __WEBPACK_IMPORTED_MODULE_11_moment___default()(values.orderTime).format()
            : values.orderTime;
        // 操作时间
        values.startTime = __WEBPACK_IMPORTED_MODULE_13_lodash__["isNumber"](values.startTime)
            ? __WEBPACK_IMPORTED_MODULE_11_moment___default()(values.startTime).format()
            : values.startTime;
        // 操作完成时间
        values.endTime = __WEBPACK_IMPORTED_MODULE_13_lodash__["isNumber"](values.endTime)
            ? __WEBPACK_IMPORTED_MODULE_11_moment___default()(values.endTime).format()
            : values.endTime;
        // 填票时间
        values.createTime = __WEBPACK_IMPORTED_MODULE_13_lodash__["isNumber"](values.createTime)
            ? __WEBPACK_IMPORTED_MODULE_11_moment___default()(values.createTime).format()
            : values.createTime;
        // 检查时间
        values.checkTime = __WEBPACK_IMPORTED_MODULE_13_lodash__["isNumber"](values.checkTime)
            ? __WEBPACK_IMPORTED_MODULE_11_moment___default()(values.checkTime).format()
            : values.checkTime;
        if (values.tasks) {
            var control_1 = this.form.get('tasks');
            while (control_1.length) {
                control_1.removeAt(control_1.length - 1);
            }
            values.tasks.map(function (item) {
                control_1.push(_this.initTasks());
            });
            this.tasks = values.tasks;
        }
        else {
            this.tasks = [];
            values.tasks = [];
        }
        // 照片
        if (values.pics !== null) {
            var control_2 = this.form.get('pics');
            while (control_2.length) {
                control_2.removeAt(control_2.length - 1);
            }
            values.pics.map(function (item) {
                control_2.push(_this.initDoc());
            });
        }
        else {
            values.pics = [];
        }
        // 文件
        if (values.docs !== null) {
            var control_3 = this.form.get('docs');
            while (control_3.length) {
                control_3.removeAt(control_3.length - 1);
            }
            values.docs.map(function (item) {
                control_3.push(_this.initDoc());
            });
        }
        else {
            values.docs = [];
        }
        // 抄送
        if (values.ccUsers !== null) {
            this.ccUsers = values.ccUsers;
            var control_4 = this.form.get('ccUsers');
            while (control_4.length) {
                control_4.removeAt(control_4.length - 1);
            }
            values.ccUsers.map(function (item) {
                control_4.push(_this.initCcUser());
            });
        }
        else {
            this.ccUsers = [];
            values.ccUsers = [];
        }
        if (values.comments !== null) {
            this.commentsList = values.comments;
        }
        else {
            this.commentsList = [];
            values.comments = [];
        }
        if (this.view) {
            // 图片权限
            this.picPermission = 0;
            // 文档权限
            this.docPermission = 0;
            // 抄送权限
            this.ccPermission = 0;
            // 评论权限
            this.commentPermission = 0;
            for (var key in this.fields) {
                if (this.fields.hasOwnProperty(key)) {
                    var element = this.fields[key];
                    element.editable = false;
                }
            }
            this.buttons = [];
        }
        this.form.patchValue(values);
    };
    // 电站选择
    OperateTicketsDetailsPage.prototype.selectStation = function (event) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.form.patchValue({
                    stationId: e.id,
                    stationName: e.title,
                });
            }
        });
        modal.present({ keyboardClose: true });
    };
    OperateTicketsDetailsPage.prototype.openSheetModal = function (type, typeText) {
        var _this = this;
        var options = this.fields[type]['props'];
        var buttons = options.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    var _a;
                    _this.form.patchValue((_a = {},
                        _a[type] = item.first,
                        _a[typeText] = item.second,
                        _a));
                },
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    // 人员选择器
    OperateTicketsDetailsPage.prototype.selectUser = function (id, name) {
        var _this = this;
        var value = this.form.value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
            selectedItem: [{ userId: value[id], userName: value[name] }],
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {},
                        _a[id] = data.value[0] ? data.value[0].userId : null,
                        _a[name] = data.value[0] ? data.value[0].realName : null,
                        _a));
                }
                else {
                    _this.form.patchValue((_b = {},
                        _b[id] = null,
                        _b[name] = null,
                        _b));
                }
            }
        });
        modal.present();
    };
    // 多行文本内容
    OperateTicketsDetailsPage.prototype.addTextarea = function (title, key, editable) {
        var _this = this;
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: title,
            value: this.form.value[key],
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {}, _a[key] = data.value, _a));
                }
                else if (data.type == 'clear') {
                    _this.form.patchValue((_b = {}, _b[key] = null, _b));
                }
            }
        });
        modal.present();
    };
    OperateTicketsDetailsPage.prototype.setPics = function (data) {
        var _this = this;
        var value = this.form.value.pics || [];
        var control = this.form.get('pics');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initDoc());
            value.push(item);
        });
        this.form.get('pics').patchValue(value);
    };
    OperateTicketsDetailsPage.prototype.initDoc = function () {
        return new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["c" /* FormGroup */]({
            docId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            docName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            docType: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            folderId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            size: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            sizeDesc: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            orderNo: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            customerId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            uri: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            updateTime: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            updater: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            stationId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            realName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            recordType: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            recordId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            updaterName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
        });
    };
    OperateTicketsDetailsPage.prototype.setDocs = function (data) {
        var _this = this;
        var value = this.form.value.docs || [];
        var control = this.form.get('docs');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initDoc());
            value.push(item);
        });
        this.form.get('docs').patchValue(value);
    };
    OperateTicketsDetailsPage.prototype.initNodes = function () {
        return new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["c" /* FormGroup */]({
            statusText: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            name: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            nodeType: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            user: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            status: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
        });
    };
    OperateTicketsDetailsPage.prototype.initLinks = function () {
        return new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["c" /* FormGroup */]({
            sourceId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            targetId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            source: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            target: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
        });
    };
    OperateTicketsDetailsPage.prototype.ccUserEvent = function (data) {
        var _this = this;
        var control = this.form.get('ccUsers');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initCcUser());
        });
        this.form.patchValue({
            ccUsers: data,
        });
    };
    OperateTicketsDetailsPage.prototype.initCcUser = function () {
        return new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
        });
    };
    OperateTicketsDetailsPage.prototype.operateStep = function (type, index, editable) {
        var _this = this;
        if (editable === false) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_10__util_modal_common_operate_step_common_operate_step__["a" /* CommonOperateStepPage */], {
            type: type,
            value: type === 'add'
                ? {
                    orderNo: this.tasks.length + 1,
                    ticketId: this.form.value.ticketId,
                }
                : this.form.value.tasks[index],
        }, {
            cssClass: 'commonModal commonOperateStepModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    var control = _this.form.get('tasks');
                    control.push(_this.initTasks());
                    if (!data.value.taskId) {
                        _this.tasks.push({
                            taskId: data.value.taskId,
                            ticketId: data.value.ticketId,
                            orderNo: data.value.orderNo,
                            taskDesc: data.value.taskDesc,
                            taskStatus: data.value.taskStatus,
                            executeTime: data.value.executeTime
                                ? _this.parseTime(data.value.executeTime)
                                : null,
                        });
                        _this.form.get('tasks').patchValue(_this.tasks);
                    }
                }
                else if (data.type === 'editOk') {
                    _this.tasks[index] = data.value;
                    _this.form.get('tasks').patchValue(_this.tasks);
                }
                else if (data.type === 'delete') {
                    var control = _this.form.get('tasks');
                    control.removeAt(index);
                    _this.tasks.splice(index, 1);
                    _this.tasks = _this.tasks.map(function (item, i) {
                        return __assign(__assign({}, item), { orderNo: +i + 1 });
                    });
                    _this.form.get('tasks').patchValue(_this.tasks);
                }
                _this.setOperateTime();
            }
        });
        modal.present();
    };
    OperateTicketsDetailsPage.prototype.parseTime = function (time) {
        if (time.indexOf('Z') !== -1) {
            return __WEBPACK_IMPORTED_MODULE_11_moment___default()(time.substr(0, time.length - 1)).format();
        }
        else {
            return time;
        }
    };
    OperateTicketsDetailsPage.prototype.taskFinish = function (index, editable) {
        if (!editable) {
            return;
        }
        var value = this.tasks[index];
        value.executeTime = __WEBPACK_IMPORTED_MODULE_11_moment___default()().format();
        this.tasks[index] = value;
        this.form.get('tasks').patchValue(this.tasks);
        this.setOperateTime();
    };
    OperateTicketsDetailsPage.prototype.resetTaskStatus = function (index, editable) {
        var _this = this;
        if (!editable) {
            return;
        }
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确认此步骤尚未完成？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        var value = _this.tasks[index];
                        value.executeTime = null;
                        _this.tasks[index] = value;
                        _this.form.get('tasks').patchValue(_this.tasks);
                        _this.setOperateTime();
                    },
                },
            ],
        });
        confirm.present();
    };
    OperateTicketsDetailsPage.prototype.setOperateTime = function () {
        var minItem = __WEBPACK_IMPORTED_MODULE_13_lodash__["minBy"](this.tasks, function (o) {
            return __WEBPACK_IMPORTED_MODULE_11_moment___default()(o.executeTime).valueOf();
        });
        if (minItem) {
            this.form.patchValue({
                startTime: __WEBPACK_IMPORTED_MODULE_11_moment___default()(minItem.executeTime).format(),
            });
        }
        var taskFinish = 0;
        var maxItem = __WEBPACK_IMPORTED_MODULE_13_lodash__["maxBy"](this.tasks, function (o) {
            if (o.executeTime) {
                taskFinish++;
            }
            return __WEBPACK_IMPORTED_MODULE_11_moment___default()(o.executeTime).valueOf();
        });
        if (taskFinish === this.tasks.length && maxItem) {
            this.form.patchValue({
                endTime: __WEBPACK_IMPORTED_MODULE_11_moment___default()(maxItem.executeTime).format(),
            });
        }
    };
    OperateTicketsDetailsPage.prototype.importTypicalOperateTicket = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_12__util_common_typical_operate_tickets_common_typical_operate_tickets__["a" /* CommonTypicalOperateTicketsPage */], {
            stationId: this.form.value.stationId,
        });
        modal.onDidDismiss(function (e) {
            if (e) {
                if (e.type === 'ok') {
                    _this.operateticketsservice
                        .getOperateTemplate(e.value)
                        .subscribe(function (res) {
                        if (res) {
                            var operateTypeText_1 = '';
                            _this.fields.operateType.props.map(function (item) {
                                if (item.first === res.operateType) {
                                    operateTypeText_1 = item.second;
                                }
                            });
                            _this.form.patchValue({
                                operateDesc: res.operateDesc,
                                operateType: res.operateType,
                                operateTypeText: operateTypeText_1,
                            });
                            if (res.tasks && res.tasks.length > 0) {
                                var control_5 = _this.form.get('tasks');
                                while (control_5.length) {
                                    control_5.removeAt(control_5.length - 1);
                                }
                                res.tasks.map(function (item) {
                                    control_5.push(_this.initTasks());
                                });
                                _this.tasks = res.tasks;
                                _this.form.patchValue({
                                    tasks: _this.tasks,
                                });
                                _this.setOperateTime();
                            }
                        }
                    });
                }
            }
        });
        modal.present({ keyboardClose: true });
    };
    OperateTicketsDetailsPage.prototype.buttonFlex = function (length) {
        switch (length) {
            case 1:
                return 'col-12';
            case 2:
                return 'col-6';
            case 3:
                return 'col-4';
            case 4:
                return 'col-3';
            default:
                break;
        }
    };
    OperateTicketsDetailsPage.prototype.buttonFunction = function (button) {
        for (var key in this.fields) {
            if (this.fields.hasOwnProperty(key)) {
                var element = this.fields[key];
                if (this.form.value[key] === null && !element.nullable) {
                    var alert_1 = this.alertCtrl.create({
                        title: '警告',
                        subTitle: element.name + '必填!',
                        buttons: ['关闭'],
                    });
                    alert_1.present();
                    return;
                }
            }
        }
        this.switchFunction(button);
    };
    OperateTicketsDetailsPage.prototype.switchFunction = function (button) {
        switch (button.buttonAction) {
            case '$check$':
                this.checkFunction();
                break;
            case 'finish':
                this.actionFunction(button);
                break;
            case 'delete':
                this.deleteFunction();
                break;
            case 'create':
                this.actionFunction(button);
                break;
            case 'permit':
                this.actionFunction(button);
                break;
            case 'reject':
                this.rejectFunction(button);
                break;
            case 'tmpSave':
                this.tmpSaveFunction(button);
                break;
            default:
                // this.deleteFunction();
                break;
        }
    };
    // 检查操作
    OperateTicketsDetailsPage.prototype.checkFunction = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_14__util_modal_common_check_common_check__["a" /* CommonCheckPage */], {
            options: this.fields['checkStatus'].props,
        }, {
            cssClass: 'commonModal commonCheckModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    var params = {
                        ticketId: _this.ticketId,
                        checkStatus: data.value.checkStatus,
                        checkMemo: data.value.checkMemo,
                    };
                    _this.operateticketsservice.check(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.form.patchValue({
                            checkStatus: res.checkStatus,
                            checkStatusText: res.checkStatusText,
                            checker: res.checker,
                            checkerName: res.checkerName,
                            checkMemo: res.checkMemo,
                            checkTime: __WEBPACK_IMPORTED_MODULE_13_lodash__["isNumber"](res.checkTime)
                                ? __WEBPACK_IMPORTED_MODULE_11_moment___default()(res.checkTime).format()
                                : res.checkTime,
                        });
                    });
                }
            }
        });
        modal.present();
    };
    // 驳回
    OperateTicketsDetailsPage.prototype.rejectFunction = function (button) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: '说明',
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    _this.formatISOTime();
                    var params = {
                        title: _this.title,
                        ticket: _this.form.value,
                        action: button,
                        nextUserIds: null,
                        memo: data.value,
                    };
                    _this.operateticketsservice.create(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.navCtrl.getPrevious().data.freshPage = true;
                        _this.navCtrl.pop();
                    });
                }
            }
        });
        modal.present();
    };
    OperateTicketsDetailsPage.prototype.actionFunction = function (button) {
        var _this = this;
        this.mutilservice.customPrompt({ msg: '你确定提交吗?' }, function () {
            _this.formatISOTime();
            var params = {
                title: _this.title,
                ticket: _this.form.value,
                action: button,
                nextUserIds: null,
                memo: null,
            };
            _this.operateticketsservice.create(params).subscribe(function (res) {
                _this.mutilservice.popToastView('提交成功');
                _this.navCtrl.getPrevious().data.freshPage = true;
                _this.navCtrl.pop();
            });
        });
    };
    // 删除
    OperateTicketsDetailsPage.prototype.deleteFunction = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除该操作票么？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.operateticketsservice
                            .deleteOperateTickets(_this.ticketId)
                            .subscribe(function (res) {
                            _this.mutilservice.popToastView('删除成功');
                            _this.navCtrl.getPrevious().data.freshPage = true;
                            _this.navCtrl.pop();
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    OperateTicketsDetailsPage.prototype.tmpSaveFunction = function (button) {
        var _this = this;
        this.formatISOTime();
        var params = {
            title: this.title,
            ticket: this.form.value,
            action: button,
            nextUserIds: null,
            memo: null,
        };
        if (this.ticketId === 0) {
            this.operateticketsservice.tmpSavePost(params).subscribe(function (res) {
                _this.mutilservice.popToastView('暂存成功');
                _this.form.patchValue({
                    ticketId: res,
                    orderId: res,
                });
                _this.ticketId = res;
                _this.orderId = res;
            });
        }
        else {
            this.operateticketsservice.tmpSavePut(params).subscribe(function (res) {
                _this.mutilservice.popToastView('暂存成功');
            });
        }
    };
    OperateTicketsDetailsPage.prototype.showMoreButtons = function () {
        this.buttonToggle = !this.buttonToggle;
    };
    OperateTicketsDetailsPage.prototype.viewDetails = function (parentOrderType) {
        switch (parentOrderType) {
            //缺陷单
            case '01':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_1__defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */], {
                    view: true,
                    ticketId: this.form.value.parentOrderId,
                });
                break;
            //工作票
            case '06':
                // this.navCtrl.push(DefectManagementDetailsPage,{
                //     view:true,
                //     ticketId:this.form.value.parentOrderId
                // })
                break;
            //抢修单
            case '08':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */], {
                    view: true,
                    ticketId: this.form.value.parentOrderId,
                });
                break;
            default:
                break;
        }
    };
    OperateTicketsDetailsPage.prototype.formatISOTime = function () {
        // 受令时间
        if (this.form.value.orderTime) {
            if (this.form.value.orderTime.indexOf('Z') !== -1) {
                this.form.patchValue({
                    orderTime: __WEBPACK_IMPORTED_MODULE_11_moment___default()(this.form.value.orderTime.substr(0, this.form.value.orderTime.length - 1)).format(),
                });
            }
        }
        // 操作时间
        if (this.form.value.startTime) {
            if (this.form.value.startTime.indexOf('Z') !== -1) {
                this.form.patchValue({
                    startTime: __WEBPACK_IMPORTED_MODULE_11_moment___default()(this.form.value.startTime.substr(0, this.form.value.startTime.length - 1)).format(),
                });
            }
        }
        // 操作完成时间
        if (this.form.value.endTime) {
            if (this.form.value.endTime.indexOf('Z') !== -1) {
                this.form.patchValue({
                    endTime: __WEBPACK_IMPORTED_MODULE_11_moment___default()(this.form.value.endTime.substr(0, this.form.value.endTime.length - 1)).format(),
                });
            }
        }
        // 填票时间
        if (this.form.value.createTime) {
            if (this.form.value.createTime.indexOf('Z') !== -1) {
                this.form.patchValue({
                    createTime: __WEBPACK_IMPORTED_MODULE_11_moment___default()(this.form.value.createTime.substr(0, this.form.value.createTime.length - 1)).format(),
                });
            }
        }
        // 检查时间
        if (this.form.value.checkTime) {
            if (this.form.value.checkTime.indexOf('Z') !== -1) {
                this.form.patchValue({
                    checkTime: __WEBPACK_IMPORTED_MODULE_11_moment___default()(this.form.value.checkTime.substr(0, this.form.value.checkTime.length - 1)).format(),
                });
            }
        }
    };
    OperateTicketsDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_5__angular_core__["Component"])({
            selector: 'page-operate-tickets-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/operate-tickets-details/operate-tickets-details.html"*/'<!--\n  Generated template for the OperateTicketsDetailsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{title}}</ion-title>\n    <ion-buttons end *ngIf="loadTemplate===1">\n      <button ion-button icon-only (click)="importTypicalOperateTicket()">\n        <ion-icon\n          name="typical-operation-ticket"\n          class="title-bar-icon"\n        ></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content\n  [ngClass]="{\'h0\': buttons.length==0,\'h44\': buttons.length>4&&buttonToggle==false,\'h88\': buttons.length<=4&&buttons.length>0,\'h180\':buttons.length>4&&buttons.length<=8&&buttonToggle==true,\'h240\':buttons.length>8&&buttons.length<=12&&buttonToggle==true,\'h300\':buttons.length>12&&buttons.length<=16&&buttonToggle==true}"\n>\n  <form [formGroup]="form">\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleBaseInfo = !toggleBaseInfo">\n        基础信息\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleBaseInfo?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 基础信息 -->\n      <ng-container *ngIf="toggleBaseInfo">\n        <!--电站名称  -->\n        <ion-item\n          *ngIf="fields?.stationId.show"\n          [attr.detail-push]="fields?.stationId.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.stationId.nullable">*</b\n            >{{fields?.stationId.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectStation($event)"\n            formControlName="stationName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="stationName"\n          ></ion-input>\n        </ion-item>\n\n        <!--操作票  -->\n        <ion-item\n          *ngIf="fields?.parentOrderId.show"\n          [attr.detail-push]="fields?.parentOrderId.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.parentOrderId.nullable">*</b\n            >{{form.value.parentOrderTypeText}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.parentOrderId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="parentOrderCode"\n            (tap)="viewDetails(form.value.parentOrderType)"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 操作类型 -->\n        <ion-item\n          *ngIf="fields?.operateType.show"\n          [attr.detail-push]="fields?.operateType.editable"\n          no-lines\n          style="margin-bottom: 5px"\n        >\n          <ion-label>\n            <b *ngIf="!fields?.operateType.nullable">*</b\n            >{{fields?.operateType.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.operateType.editable"\n            (tap)="openSheetModal(\'operateType\',\'operateTypeText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="operateTypeText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.operateType.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="operateTypeText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 发令人 -->\n        <ion-item\n          *ngIf="fields?.sender.show"\n          [attr.detail-push]="fields?.sender.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.sender.nullable">*</b\n            >{{fields?.sender.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.sender.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'sender\',\'senderName\')"\n            formControlName="senderName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.sender.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="senderName"\n          ></ion-input>\n        </ion-item>\n        <!-- 受令人 -->\n        <ion-item\n          *ngIf="fields?.receiver.show"\n          [attr.detail-push]="fields?.receiver.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.receiver.nullable">*</b\n            >{{fields?.receiver.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.receiver.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'receiver\',\'receiverName\')"\n            formControlName="receiverName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.receiver.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="receiverName"\n          ></ion-input>\n        </ion-item>\n        <!-- 受令时间 -->\n        <ion-item\n          *ngIf="fields?.orderTime.show"\n          [attr.detail-push]="fields?.orderTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.orderTime.nullable">*</b\n            >{{fields?.orderTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.orderTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="orderTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.orderTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="orderTime"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 操作任务 -->\n        <ion-item\n          *ngIf="fields?.operateDesc.show"\n          [attr.detail-push]="fields?.operateDesc.editable"\n          no-lines\n          style="margin-bottom: 5px"\n        >\n          <ion-label>\n            <b *ngIf="!fields?.operateDesc.nullable">*</b\n            >{{fields?.operateDesc.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.operateDesc.name,\'operateDesc\',fields?.operateDesc.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            class="ell"\n            formControlName="operateDesc"\n          ></ion-input>\n        </ion-item>\n        <!-- 审票人 -->\n        <ion-item\n          *ngIf="fields?.auditor.show"\n          [attr.detail-push]="fields?.auditor.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.auditor.nullable">*</b\n            >{{fields?.auditor.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.auditor.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'auditor\',\'auditorName\')"\n            formControlName="auditorName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.auditor.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="auditorName"\n          ></ion-input>\n        </ion-item>\n        <!-- 值班负责人呢-->\n        <ion-item\n          *ngIf="fields?.ticketLeader.show"\n          [attr.detail-push]="fields?.ticketLeader.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.ticketLeader.nullable">*</b\n            >{{fields?.ticketLeader.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.ticketLeader.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'ticketLeader\',\'ticketLeaderName\')"\n            formControlName="ticketLeaderName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.ticketLeader.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="ticketLeaderName"\n          ></ion-input>\n        </ion-item>\n        <!-- 操作人 -->\n        <ion-item\n          *ngIf="fields?.executer.show"\n          [attr.detail-push]="fields?.executer.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.executer.nullable">*</b\n            >{{fields?.executer.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.executer.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'executer\',\'executerName\')"\n            formControlName="executerName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.executer.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="executerName"\n          ></ion-input>\n        </ion-item>\n        <!-- 监护人 -->\n        <ion-item\n          *ngIf="fields?.supervisior.show"\n          [attr.detail-push]="fields?.supervisior.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.supervisior.nullable">*</b\n            >{{fields?.supervisior.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.supervisior.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'supervisior\',\'supervisiorName\')"\n            formControlName="supervisiorName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.supervisior.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="supervisiorName"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 操作步骤 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleOperateSteps = !toggleOperateSteps"\n      >\n        操作步骤\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleOperateSteps?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleOperateSteps">\n        <ion-grid class="operate-steps" formArrayName="tasks">\n          <ion-row\n            *ngFor="let item of getTask(form); let i = index"\n            [formGroupName]="i"\n          >\n            <ion-col col-2 class="task-index"> {{i+1}} </ion-col>\n            <ion-col col-8 (tap)="operateStep(\'edit\',i,fields?.tasks.editable)">\n              <div\n                [ngClass]="{\'unfinish-step\': item.value.executeTime===null,\'finish-step\':item.value.executeTime!==null}"\n              >\n                <span>{{item.value.taskDesc}}</span>\n              </div>\n              <p class="execute-time" *ngIf="item.value.executeTime">\n                {{item.value.executeTime | date:\'yyyy-MM-dd HH:mm:ss\'}}\n              </p>\n            </ion-col>\n            <ion-col\n              col-2\n              class="check-icon"\n              *ngIf="item.value.executeTime===null"\n            >\n              <!-- <img\n                src="assets/imgs/buttons/ok-grey.png"\n                (tap)="taskFinish(i,fields?.tasks.editable)"\n              /> -->\n              <ion-icon\n                (tap)="taskFinish(i,fields?.tasks.editable)"\n                name="ok-grey"\n              ></ion-icon>\n            </ion-col>\n            <ion-col\n              col-2\n              class="check-icon"\n              *ngIf="item.value.executeTime!==null"\n            >\n              <!-- <img\n                src="assets/imgs/buttons/ok-green.png"\n                (tap)="resetTaskStatus(i,fields?.tasks.editable)"\n              /> -->\n              <ion-icon\n                (tap)="resetTaskStatus(i,fields?.tasks.editable)"\n                name="ok-green"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n          <ion-row class="add-row" *ngIf="fields?.tasks.editable">\n            <ion-col col-12>\n              <ion-icon\n                name="md-add-circle"\n                (tap)="operateStep(\'add\')"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n\n        <!-- 操作开始时间 -->\n        <ion-item\n          *ngIf="fields?.startTime.show"\n          [attr.detail-push]="fields?.startTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.startTime.nullable">*</b\n            >{{fields?.startTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.startTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.startTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n          ></ion-datetime>\n        </ion-item>\n\n        <!-- 操作结束时间 -->\n        <ion-item\n          *ngIf="fields?.endTime.show"\n          [attr.detail-push]="fields?.endTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.endTime.nullable">*</b\n            >{{fields?.endTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.endTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.endTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n          ></ion-datetime>\n        </ion-item>\n\n        <!-- 备注 -->\n        <ion-item\n          *ngIf="fields?.memo.show"\n          [attr.detail-push]="fields?.memo.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.memo.nullable">*</b\n            >{{fields?.memo.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.memo.editable"\n            (tap)="addTextarea(fields?.memo.name,\'memo\',fields?.memo.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            class="ell"\n            formControlName="memo"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 填表人 -->\n        <ion-item\n          *ngIf="fields?.creater.show"\n          [attr.detail-push]="fields?.creater.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.creater.nullable">*</b\n            >{{fields?.creater.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.creater.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'creater\',\'createrName\')"\n            formControlName="createrName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.creater.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="createrName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 填表日期 -->\n        <ion-item\n          *ngIf="fields?.createTime.show"\n          [attr.detail-push]="fields?.createTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.createTime.nullable">*</b\n            >{{fields?.createTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.createTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="createTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.createTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="createTime"\n          ></ion-datetime>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 照片 -->\n    <ion-list class="new-list">\n      <upload-pics\n        [orderId]="orderId"\n        [picPermission]="picPermission"\n        [pics]="form.value.pics"\n        (picsEvent)="setPics($event)"\n      ></upload-pics>\n    </ion-list>\n\n    <!-- 附件 -->\n    <ion-list class="new-list">\n      <upload-files\n        [orderId]="orderId"\n        [docPermission]="docPermission"\n        [docs]="form.value.docs"\n        (docsEvent)="setDocs($event)"\n      ></upload-files>\n    </ion-list>\n\n    <!-- 抢修单检查 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleOperateInspection = !toggleOperateInspection"\n      >\n        操作票检查\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleOperateInspection?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleOperateInspection">\n        <!-- 检查结果 -->\n        <ion-item\n          *ngIf="fields?.checkStatus.show"\n          [attr.detail-push]="fields?.checkStatus.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkStatus.nullable">*</b\n            >{{fields?.checkStatus.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.checkStatus.editable"\n            (tap)="openSheetModal(\'checkStatus\',\'checkStatusText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.checkStatus.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查人 -->\n        <ion-item\n          *ngIf="fields?.checker.show"\n          [attr.detail-push]="fields?.checker.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checker.nullable">*</b\n            >{{fields?.checker.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkerName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查时间 -->\n        <ion-item\n          *ngIf="fields?.checkTime.show"\n          [attr.detail-push]="fields?.checkTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkTime.nullable">*</b\n            >{{fields?.checkTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="!fields?.checkTime.editable"\n            type="text"\n            [disabled]="true"\n            text-right\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="checkTime"\n          ></ion-datetime>\n        </ion-item>\n\n        <!-- 检查备注 -->\n        <ion-item\n          *ngIf="fields?.checkMemo.show"\n          [attr.detail-push]="fields?.checkMemo.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkMemo.nullable">*</b\n            >{{fields?.checkMemo.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.checkMemo.name,\'checkMemo\',fields?.checkMemo.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkMemo"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n    <!-- 抄送 -->\n    <ion-list class="new-list">\n      <cc\n        [ccPermission]="ccPermission"\n        [users]="ccUsers"\n        (userEvent)="ccUserEvent($event)"\n      ></cc>\n    </ion-list>\n\n    <!-- 评论  -->\n    <ion-list class="new-list" *ngIf="ticketId!==0">\n      <ion-list-header no-lines (tap)="toggleComment = !toggleComment">\n        评论\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleComment?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleComment">\n        <comment [orderId]="orderId" [commentsList]="commentsList"></comment>\n      </ng-container>\n    </ion-list>\n  </form>\n</ion-content>\n<ion-footer *ngIf="buttons.length>0">\n  <ion-toolbar class="footer-bar">\n    <ng-container *ngIf="buttons.length<=4">\n      <ion-grid>\n        <ion-row>\n          <ion-col\n            *ngFor="let button of buttons"\n            class="{{buttonFlex(buttons.length)}}"\n          >\n            <div class="btn">\n              <!-- <img\n                (tap)="buttonFunction(button)"\n                src="assets/imgs/buttons/{{button.buttonIcon}}"\n                alt=""\n              /> -->\n              <ion-icon\n                (tap)="buttonFunction(button)"\n                [name]="button.buttonIcon.split(\'.\')[0]"\n              ></ion-icon>\n              <p>{{button.buttonText}}</p>\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ng-container>\n    <ng-container *ngIf="buttons.length>4">\n      <button\n        ion-button\n        block\n        (tap)="showMoreButtons()"\n        *ngIf="buttonToggle==false"\n        style="background-color: #54a4e4"\n      >\n        <span style="margin-right: 5px">处理</span\n        ><ion-icon name="arrow-up"></ion-icon>\n      </button>\n      <ng-container *ngIf="buttonToggle==true">\n        <ion-grid>\n          <ion-row>\n            <ion-col *ngFor="let button of buttons" class="col-3">\n              <div class="btn">\n                <!-- <img\n                  (tap)="buttonFunction(button)"\n                  src="assets/imgs/buttons/{{button.buttonIcon}}"\n                  alt=""\n                /> -->\n                <ion-icon\n                  (tap)="buttonFunction(button)"\n                  [name]="button.buttonIcon.split(\'.\')[0]"\n                ></ion-icon>\n                <p>{{button.buttonText}}</p>\n              </div>\n            </ion-col>\n          </ion-row>\n          <ion-row>\n            <ion-col col-12 style="padding-top: 10px">\n              <ion-icon\n                name="arrow-down"\n                (tap)="showMoreButtons()"\n                style="font-size: 1.6em"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ng-container>\n    </ng-container>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/operate-tickets-details/operate-tickets-details.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_operate_tickets_service__["a" /* OperateTicketsProvider */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__["a" /* MutilService */]])
    ], OperateTicketsDetailsPage);
    return OperateTicketsDetailsPage;
}());

//# sourceMappingURL=operate-tickets-details.js.map

/***/ }),

/***/ 341:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InventorisRecordPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util_modal_inventoris_record_search_inventoris_record_search__ = __webpack_require__(791);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__inventoris_menus_inventoris_menus__ = __webpack_require__(342);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__inventoris_out_in_inventoris_out_in__ = __webpack_require__(173);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_backend_service__ = __webpack_require__(75);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/**
 * Generated class for the InventorisRecordPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InventorisRecordPage = /** @class */ (function () {
    function InventorisRecordPage(navCtrl, navParams, materialservice, loadingCtrl, menuCtrl, modalCtrl, backendservice, popoverCtrl, actionSheetCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.materialservice = materialservice;
        this.loadingCtrl = loadingCtrl;
        this.menuCtrl = menuCtrl;
        this.modalCtrl = modalCtrl;
        this.backendservice = backendservice;
        this.popoverCtrl = popoverCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.page = 0;
        this.showMenu = false;
        this.searchParams = {
            myOperate: '3',
            ioSubTypes: [],
            materia: [],
            materialIds: [],
            warehouseId: null,
            startTime: __WEBPACK_IMPORTED_MODULE_2_moment___default()().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: __WEBPACK_IMPORTED_MODULE_2_moment___default()().format('YYYY-MM-DD'),
            ioStatus: [],
            materialName: null,
            operator: null,
            approver: null,
        };
        this.materials = null;
        this.materialTypeText = '物资';
        this.materia = [];
        this.materialIds = [];
    }
    InventorisRecordPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad InventorisRecordPage');
        this.warehouseId = this.navParams.get('warehouseId');
        this.materialId = this.navParams.get('materialId');
        this.materialType = this.navParams.get('materialType');
        this.searchParams.myOperate =
            this.navParams.get('myOperate') === null ? null : '3';
        this.searchParams.warehouseId = this.navParams.get('warehouseId');
        this.searchParams.warehouseName = this.navParams.get('warehouseName');
        this.searchParams.materia = this.navParams.get('materia');
        this.getMaterialTypes();
        this.getInventorisRecordList(true);
    };
    InventorisRecordPage.prototype.ionViewWillEnter = function () {
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.getInventorisRecordList(true);
        }
    };
    InventorisRecordPage.prototype.getMaterialTypes = function () {
        var _this = this;
        this.materialservice.getMaterialTypes().subscribe(function (res) {
            _this.materialTypesButtons = res.map(function (item) { return ({
                text: item.second,
                handler: function () {
                    _this.materialType = item.first;
                    _this.materialTypeText = item.second;
                    _this.materia = [];
                    _this.searchParams.materia = [];
                    _this.materialIds = [];
                    _this.getInventorisRecordList(true);
                },
            }); });
        });
    };
    InventorisRecordPage.prototype.select = function () {
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: this.materialTypesButtons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    InventorisRecordPage.prototype.getInventorisRecordList = function (first, refresher) {
        var _this = this;
        var loading = null;
        if (!refresher) {
            loading = this.loadingCtrl.create({
                spinner: 'crescent',
            });
            loading.present();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            myOperate: this.searchParams.myOperate,
            materialType: this.materialType,
            ioSubTypes: this.searchParams.ioSubTypes || [],
            warehouseId: this.searchParams.warehouseId || null,
            materialIds: (this.searchParams.materia &&
                this.searchParams.materia.map(function (item) { return item.materialId; })) ||
                null,
            startTime: this.searchParams.startTime ||
                __WEBPACK_IMPORTED_MODULE_2_moment___default()().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: this.searchParams.endTime || __WEBPACK_IMPORTED_MODULE_2_moment___default()().format('YYYY-MM-DD'),
            ioStatus: this.searchParams.ioStatus,
            operator: (this.searchParams.operator && this.searchParams.operator.userId) ||
                null,
            approver: (this.searchParams.approver && this.searchParams.approver.userId) ||
                null,
            page: this.page,
            size: 10,
        };
        this.materialservice
            .getInventorisRecordList(__assign({}, params))
            .subscribe(function (res) {
            if (res) {
                _this.inventorisRecordList = res.content;
            }
            if (refresher)
                refresher.complete();
            if (loading)
                loading.dismiss();
        });
    };
    InventorisRecordPage.prototype.doRefresh = function (refresher) {
        this.getInventorisRecordList(true, refresher);
    };
    InventorisRecordPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            materialType: this.materialType,
            myOperate: this.searchParams.myOperate,
            ioSubTypes: this.searchParams.ioSubTypes || [],
            warehouseId: this.searchParams.warehouseId || null,
            materialIds: (this.searchParams.materia &&
                this.searchParams.materia.map(function (item) { return item.materialId; })) ||
                null,
            startTime: this.searchParams.startTime ||
                __WEBPACK_IMPORTED_MODULE_2_moment___default()().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: this.searchParams.endTime || __WEBPACK_IMPORTED_MODULE_2_moment___default()().format('YYYY-MM-DD'),
            ioStatus: this.searchParams.ioStatus,
            operator: (this.searchParams.operator && this.searchParams.operator.userId) ||
                null,
            approver: (this.searchParams.approver && this.searchParams.approver.userId) ||
                null,
            page: this.page,
            size: 10,
        };
        this.materialservice
            .getInventorisRecordList(__assign({}, params))
            .subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.inventorisRecordList = _this.inventorisRecordList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.inventorisRecordList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    // 打开右侧条件筛选
    InventorisRecordPage.prototype.openSearchBar = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__util_modal_inventoris_record_search_inventoris_record_search__["a" /* InventorisRecordSearchPage */], {
            searchParams: this.searchParams,
            materialType: this.materialType,
        }, {
            enterAnimation: 'modal-from-right-enter',
            leaveAnimation: 'modal-from-right-leave',
            cssClass: 'commonSearchSideBar',
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.searchParams = __assign({}, data.value);
                    _this.getInventorisRecordList(true);
                }
            }
        });
        modal.present();
    };
    //inventorisMenus
    InventorisRecordPage.prototype.inventorisMenus = function (myEvent) {
        var _this = this;
        this.popover = this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_5__inventoris_menus_inventoris_menus__["a" /* InventorisMenusPage */], {
            showQrcode: false,
        }, {
            cssClass: 'inventorisMenus',
            showBackdrop: true,
        });
        this.popover.onDidDismiss(function (res) {
            if (res) {
                if (res.type === 'out') {
                    var user = JSON.parse(localStorage.getItem('USER_INFO'));
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
                        type: 'out',
                        materialType: _this.materialType,
                        value: {
                            warehouseId: _this.warehouses ? _this.warehouses.warehouseId : null,
                            warehouseName: _this.warehouses
                                ? _this.warehouses.warehouseName
                                : null,
                            ioOperator: user.userId,
                            ioOperatorName: user.realName,
                            ioTime: __WEBPACK_IMPORTED_MODULE_2_moment___default()().format(),
                            materialIostorgeDetails: _this.materials
                                ? [
                                    {
                                        materialId: _this.materials
                                            ? _this.materials.materialId
                                            : null,
                                        materialNo: _this.materials
                                            ? _this.materials.materialNo
                                            : null,
                                    },
                                ]
                                : [],
                        },
                    });
                }
                else if (res.type === 'in') {
                    var user = JSON.parse(localStorage.getItem('USER_INFO'));
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
                        type: 'in',
                        materialType: _this.materialType,
                        value: {
                            warehouseId: _this.warehouses ? _this.warehouses.warehouseId : null,
                            warehouseName: _this.warehouses
                                ? _this.warehouses.warehouseName
                                : null,
                            ioOperator: user.userId,
                            ioOperatorName: user.realName,
                            ioTime: __WEBPACK_IMPORTED_MODULE_2_moment___default()().format(),
                            materialIostorgeDetails: _this.materials
                                ? [
                                    {
                                        materialId: _this.materials
                                            ? _this.materials.materialId
                                            : null,
                                        materialNo: _this.materials
                                            ? _this.materials.materialNo
                                            : null,
                                    },
                                ]
                                : [],
                        },
                    });
                }
            }
        });
        this.popover.present({
            ev: myEvent,
        });
    };
    InventorisRecordPage.prototype.materialsIostorage = function (iostorageId, approve) {
        if (approve === void 0) { approve = false; }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
            iostorageId: iostorageId,
            approve: approve,
            materialType: this.materialType,
        });
    };
    InventorisRecordPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-inventoris-record',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inventoris/inventoris-record/inventoris-record.html"*/'<!--\n  Generated template for the InventorisRecordPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>出入库记录</ion-title>\n    <ion-buttons end>\n      <button\n        class="navbar-button"\n        ion-button\n        icon-only\n        (click)="openSearchBar($event)"\n      >\n        <ion-icon name="search" style="font-size: 1.4em"></ion-icon>\n      </button>\n      <button\n        class="navbar-button"\n        ion-button\n        icon-only\n        (click)="inventorisMenus($event)"\n      >\n        <ion-icon name="add-square" style="font-size: 1.4em"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n  <ion-toolbar>\n    <div class="search">\n      <span class="select-item" (click)="select()">{{materialTypeText}}</span>\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content padding class="card-list" #search_record>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div\n      class="card-item"\n      *ngFor="let inventorisRecord of inventorisRecordList"\n    >\n      <div class="left-line">\n        <div class="line-icon"></div>\n      </div>\n      <div class="right-content">\n        <div class="title">{{inventorisRecord.time}}</div>\n        <ion-card>\n          <ion-card-header (tap)="materialsIostorage(inventorisRecord.id)">\n            {{inventorisRecord.title}}\n            <span\n              class="inventorisRecord-info"\n              [ngClass]="{\'inventorisRecord-01\': inventorisRecord.status===\'已完成\',\'inventorisRecord-02\': inventorisRecord.status===\'待审批\',\'inventorisRecord-03\': inventorisRecord.status===\'拒绝\'}"\n              >{{inventorisRecord.status}}</span\n            >\n          </ion-card-header>\n          <ul class="ion-card-content">\n            <li *ngIf="inventorisRecord.item1">{{inventorisRecord.item1}}</li>\n            <li *ngIf="inventorisRecord.item2">{{inventorisRecord.item2}}</li>\n            <li *ngIf="inventorisRecord.item3">{{inventorisRecord.item3}}</li>\n            <li *ngIf="inventorisRecord.item4">{{inventorisRecord.item4}}</li>\n            <li *ngIf="inventorisRecord.item5">{{inventorisRecord.item5}}</li>\n            <!-- <li *ngIf="inventorisRecord.button" class="button-icon"> <ion-icon name="md-checkbox"></ion-icon>{{inventorisRecord.button}}</li> -->\n            <li *ngIf="inventorisRecord.button" class="button-icon">\n              <span (tap)="materialsIostorage(inventorisRecord.id,true)">\n                <ion-icon name="md-checkbox"></ion-icon\n                >{{inventorisRecord.button}}\n              </span>\n            </li>\n          </ul>\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inventoris/inventoris-record/inventoris-record.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_material_service__["a" /* MaterialService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_backend_service__["a" /* BackendService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["t" /* PopoverController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */]])
    ], InventorisRecordPage);
    return InventorisRecordPage;
}());

//# sourceMappingURL=inventoris-record.js.map

/***/ }),

/***/ 342:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InventorisMenusPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the InventorisMenusPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InventorisMenusPage = /** @class */ (function () {
    function InventorisMenusPage(navCtrl, navParams, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.showQrcode = true;
        this.showQrcode = this.navParams.get('showQrcode') === false ? false : true;
    }
    InventorisMenusPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad InventorisMenusPage');
        this.materialType = this.navParams.get('materialType') || '01';
    };
    InventorisMenusPage.prototype.ionViewWillEnter = function () { };
    InventorisMenusPage.prototype.inventorisOutIn = function (event, type) {
        this.viewCtrl.dismiss({ type: type, materialType: this.materialType });
    };
    InventorisMenusPage.prototype.scanQrcode = function () {
        this.viewCtrl.dismiss({ type: 'qrcode' });
    };
    InventorisMenusPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-inventoris-menus',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inventoris/inventoris-menus/inventoris-menus.html"*/'<!--\n  Generated template for the InventorisMenusPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n\n<ion-content no-scroll>\n  <ion-list>\n    <ion-item no-lines (tap)="inventorisOutIn($event,\'out\')">\n      <ion-icon name="inventoris-out" item-start></ion-icon>\n      出库\n    </ion-item>\n    <ion-item no-lines (tap)="inventorisOutIn($event,\'in\')">\n      <ion-icon name="inventoris-in" item-start></ion-icon>\n      入库\n    </ion-item>\n    <ion-item no-lines (tap)="scanQrcode()" *ngIf="showQrcode">\n      <ion-icon name="scan" item-start></ion-icon>\n      扫一扫\n    </ion-item>\n  </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inventoris/inventoris-menus/inventoris-menus.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], InventorisMenusPage);
    return InventorisMenusPage;
}());

//# sourceMappingURL=inventoris-menus.js.map

/***/ }),

/***/ 343:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonRadioTextareaPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the CommonRadioTextareaPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonRadioTextareaPage = /** @class */ (function () {
    function CommonRadioTextareaPage(navCtrl, navParams, mutilservice, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.mutilservice = mutilservice;
        this.viewCtrl = viewCtrl;
    }
    CommonRadioTextareaPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonRadioTextareaPage');
        this.item = this.navParams.get('item');
        this.itemProps = this.item.props;
        this.prevItemValue = this.item.itemValue;
        this.itemValue = this.item.itemValue;
        this.itemMemo = this.item.itemMemo;
    };
    CommonRadioTextareaPage.prototype.ok = function () {
        if (this.item.prevItemValue !== this.itemValue &&
            this.itemValue !== this.item.defaultValue &&
            !this.itemMemo) {
            return this.mutilservice.popToastView('备注内容必填');
        }
        this.viewCtrl.dismiss({ value: this.itemValue, memo: this.itemMemo, type: 'ok' });
    };
    CommonRadioTextareaPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonRadioTextareaPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-common-radio-textarea',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-radio-textarea/common-radio-textarea.html"*/'<!--\n  Generated template for the CommonRadioTextareaPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <ion-grid>\n    <ion-row>\n      <ng-container *ngFor="let prop of itemProps">\n        <ion-col col-6>\n          <label\n            ><input\n              type="radio"\n              name="props"\n              [value]="prop.first"\n              [(ngModel)]="itemValue"\n            />{{prop.second}}</label\n          >\n        </ion-col>\n      </ng-container>\n    </ion-row>\n  </ion-grid>\n  <h6>备注</h6>\n  <ion-textarea [(ngModel)]="itemMemo"></ion-textarea>\n  <ion-grid>\n    <ion-row>\n      <ion-col col-12>\n        <button ion-button small class="ok-btn" (tap)="ok()">确定</button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-radio-textarea/common-radio-textarea.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */]])
    ], CommonRadioTextareaPage);
    return CommonRadioTextareaPage;
}());

//# sourceMappingURL=common-radio-textarea.js.map

/***/ }),

/***/ 344:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DebounceService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var DebounceService = /** @class */ (function () {
    function DebounceService() {
        this.temp = "test";
    }
    /**
     * 延迟节流（首次及后续都需要间隔一段时间触发才生效）
     * @param fn 节流事件函数
     * @param delay 节流的毫秒数
     * @returns
     */
    DebounceService.prototype.throttleDelayExecution = function (fn, delay, model) {
        var last = Date.now(); // 使用时间戳实现
        return function () {
            var now = Date.now();
            if (now - last >= delay) {
                fn.apply(model, arguments);
                last = now;
            }
        };
    };
    /**
     * 一般节流函数（前缘节流，首次触发立即生效，后续需要间隔一段时间触发才生效）
     * @param fn 节流事件函数
     * @param delay 节流的毫秒数
     * @returns
     */
    DebounceService.prototype.throttleImmediateExecution = function (fn, delay, model) {
        var timer = null; // 使用定时器实现
        return function () {
            if (!timer) {
                fn.apply(model, arguments);
                timer = setTimeout(function () {
                    timer = null;
                }, delay);
            }
        };
    };
    /**
     * 节流优化完整版
     * @param delay 节流的毫秒数
     * @param fn 节流事件函数
     * @param isImmediate 是否立即执行
     * @returns
     */
    DebounceService.prototype.throttle = function (fn, delay, isImmediate) {
        if (isImmediate === void 0) { isImmediate = true; }
        var last = Date.now();
        return function () {
            var now = Date.now();
            if (isImmediate) {
                fn.apply(this, arguments);
                isImmediate = false;
                last = now;
            }
            if (now - last >= delay) {
                fn.apply(this, arguments);
                last = now;
            }
        };
    };
    /**
     * 滚动节流函数
     * @param infiniteScroll 滚动节流事件
     * @param delay 节流的毫秒数
     * @param fn 节流事件函数
     */
    DebounceService.prototype.infiniteDebounce = function (delay, fn, infiniteScroll) {
        var timer = null;
        return function () {
            if (timer) {
                return false;
            }
            timer = setTimeout(function () {
                timer = null;
                fn.apply(infiniteScroll);
            }, delay);
        };
    };
    DebounceService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [])
    ], DebounceService);
    return DebounceService;
}());

//# sourceMappingURL=debounce.service.js.map

/***/ }),

/***/ 345:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export VideoUser */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VideoService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var VideoUser = /** @class */ (function () {
    function VideoUser() {
    }
    return VideoUser;
}());

var VideoService = /** @class */ (function () {
    function VideoService(http, appConfig) {
        // this.videoListUrl =
        //     this.appConfig.apiEndpoint + '/api/cameraController/AvailableCameraDtos';
        // this.videoUserUrl = this.appConfig.apiEndpoint + '/api/cameraController/userInfo';
        // this.hikHlsUrl = this.appConfig.apiEndpoint + '/api/cameraController/hik/hls/real';
        this.http = http;
        this.appConfig = appConfig;
        this.videoListUrl = this.appConfig.apiEndpoint + '/api/cameras';
        this.camerasLiveAddress = this.appConfig.apiEndpoint + '/api/cameras/live/address';
    }
    // /**
    //  * 视频列表
    //  */
    // public videoList(stationId: string): Observable<object> {
    //     let url = this.videoListUrl + '?stationId=' + stationId;
    //     return this.http.get(url);
    // }
    // public videoUser(): Observable<VideoUser> {
    //     return this.http.get(this.videoUserUrl);
    // }
    // public getHikHls(cameraId) {
    //     return this.http.get(this.hikHlsUrl + '?cameraId=' + cameraId, {
    //         responseType: ResponseContentType.Text
    //     });
    // }
    VideoService.prototype.getCameras = function (params) {
        return this.http.get(this.videoListUrl, {
            params: params
        });
    };
    VideoService.prototype.getCamerasLiveAddress = function (params) {
        return this.http.get(this.camerasLiveAddress, { params: params });
    };
    VideoService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object])
    ], VideoService);
    return VideoService;
}());

//# sourceMappingURL=video.service.js.map

/***/ }),

/***/ 346:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return JobRecordPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_runlog_service__ = __webpack_require__(133);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__job_record_details_job_record_details__ = __webpack_require__(802);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__util_modal_job_record_search_job_record_search__ = __webpack_require__(804);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the JobRecordPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var JobRecordPage = /** @class */ (function () {
    function JobRecordPage(navCtrl, navParams, modalCtrl, menuCtrl, runlogservice, loadingCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modalCtrl = modalCtrl;
        this.menuCtrl = menuCtrl;
        this.runlogservice = runlogservice;
        this.loadingCtrl = loadingCtrl;
        this.startTime = __WEBPACK_IMPORTED_MODULE_4_moment__().subtract(30, 'days').format('YYYY-MM-DD');
        this.endTime = __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD');
        this.status = 1;
        this.canInfinite = true;
        this.loadedStatus = 'status1';
    }
    JobRecordPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad JobRecordPage222');
        this.query(true);
    };
    /** every come into page query  **/
    JobRecordPage.prototype.ionViewWillEnter = function () {
        console.log('ionViewDidLoad JobRecordPage333');
        this.query(true);
    };
    // 打开右侧条件筛选
    JobRecordPage.prototype.openSearchBar = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__util_modal_job_record_search_job_record_search__["a" /* JobRecordSearchPage */], {
            stationId: this.stationId,
            stationName: this.stationName,
            status: this.status,
        }, {
            enterAnimation: 'modal-from-right-enter',
            leaveAnimation: 'modal-from-right-leave',
            cssClass: 'commonSearchSideBar',
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.stationId = data.value.stationId;
                    _this.stationName = data.value.stationName;
                    _this.startTime = data.value.startTime;
                    _this.endTime = data.value.endTime;
                    _this.status = data.value.status;
                    _this.query(true);
                }
            }
        });
        modal.present();
    };
    // 电站选择
    JobRecordPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_3__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.station = e;
                if (e.id) {
                    _this.addJobRecord(e.id);
                }
            }
        });
        modal.present({ keyboardClose: true });
    };
    JobRecordPage.prototype.query = function (first, refresher) {
        var _this = this;
        var loading = null;
        if (!refresher) {
            loading = this.loadingCtrl.create({
                spinner: 'crescent',
            });
            loading.present();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            stationId: this.stationId ? this.stationId : null,
            startTime: this.startTime
                ? this.startTime
                : __WEBPACK_IMPORTED_MODULE_4_moment__().subtract(29, 'day').format('YYYY-MM-DD'),
            endTime: this.endTime ? this.endTime : __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD'),
            status: this.status,
            page: this.page,
            size: 10,
        };
        this.runlogservice.getRecordsList(params).subscribe(function (res) {
            _this.jobRecordList = res.content;
            _this.loadedStatus = _this.status === 1 ? 'status1' : 'status0';
            if (refresher)
                refresher.complete();
            if (loading) {
                loading.dismiss();
            }
        });
    };
    JobRecordPage.prototype.doRefresh = function (refresher) {
        this.query(true, refresher);
    };
    JobRecordPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            stationId: this.stationId ? this.stationId : null,
            startTime: this.startTime
                ? this.startTime
                : __WEBPACK_IMPORTED_MODULE_4_moment__().subtract(29, 'day').format('YYYY-MM-DD'),
            endTime: this.endTime ? this.endTime : __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD'),
            status: this.status,
            page: this.page,
            size: 10,
        };
        this.runlogservice.getRecordsList(params).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.jobRecordList = _this.jobRecordList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.jobRecordList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    JobRecordPage.prototype.editJobRecord = function (recordId, loadedStatus) {
        if (loadedStatus === 'status0') {
            return;
        }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__job_record_details_job_record_details__["a" /* JobRecordDetailsPage */], {
            stationId: null,
            recordId: recordId,
        });
    };
    JobRecordPage.prototype.addJobRecord = function (stationId) {
        if (!this.stationId) {
            if (stationId) {
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__job_record_details_job_record_details__["a" /* JobRecordDetailsPage */], {
                    stationId: stationId,
                });
            }
            else {
                this.selectStation();
            }
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__job_record_details_job_record_details__["a" /* JobRecordDetailsPage */], {
                stationId: this.stationId,
            });
        }
    };
    JobRecordPage.prototype.closeSearchBar = function () {
        this.menuCtrl.close();
    };
    JobRecordPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-job-record',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/job-record/job-record.html"*/'<!--\n  Generated template for the JobRecordPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>运行日报</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="openSearchBar()">\n        <ion-icon name="search" style="font-size: 1.4em"></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="addJobRecord()">\n        <ion-icon name="add-square" style="font-size: 1.4em"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding class="card-list">\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div class="card-item" *ngFor="let jobRecord of jobRecordList">\n      <div class="left-line">\n        <div class="line-icon"></div>\n      </div>\n      <div class="right-content">\n        <div class="title">{{jobRecord.time}}</div>\n        <ion-card (click)="editJobRecord(jobRecord.id,loadedStatus)">\n          <ion-card-header *ngIf="loadedStatus===\'status1\'" tappable>\n            {{jobRecord.title}}\n          </ion-card-header>\n          <ion-card-header *ngIf="loadedStatus===\'status0\'" tappable>\n            {{jobRecord.title}}\n          </ion-card-header>\n          <ul class="ion-card-content">\n            <li *ngIf="jobRecord.item1">{{jobRecord.item1}}</li>\n            <li *ngIf="jobRecord.item2">{{jobRecord.item2}}</li>\n            <li *ngIf="jobRecord.item3">{{jobRecord.item3}}</li>\n          </ul>\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/job-record/job-record.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_runlog_service__["a" /* RunLogService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["l" /* LoadingController */]])
    ], JobRecordPage);
    return JobRecordPage;
}());

//# sourceMappingURL=job-record.js.map

/***/ }),

/***/ 347:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DailyReport; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_dailyreport_service__ = __webpack_require__(348);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__report_detail_report_detail__ = __webpack_require__(805);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var DailyReport = /** @class */ (function () {
    function DailyReport(navCtrl, navParams, mutil, dailyReportService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.mutil = mutil;
        this.dailyReportService = dailyReportService;
        this.page = 0;
        this.size = 10;
    }
    DailyReport.prototype.ionViewWillEnter = function () {
        this.getGroupreport();
    };
    DailyReport.prototype.getGroupreport = function () {
        var _this = this;
        this.dailyReportService.getReportList(this.page).subscribe(function (e) {
            if (e && e['content'] && e['content'].length >= 0) {
                _this.reports = e['content'];
                console.log(_this.reports);
            }
        });
    };
    DailyReport.prototype.reportDetail = function (report) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__report_detail_report_detail__["a" /* ReportDetail */], { date: report });
    };
    DailyReport.prototype.doInfinite = function (infiniteScroll) {
        setTimeout(function () {
            infiniteScroll.complete();
            infiniteScroll.enable(false);
        }, 500);
    };
    DailyReport = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'daily-report',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/daily-report/daily-report.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>电量日报</ion-title>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n  <ion-list>\n    <ul>\n      <li\n        *ngFor="let report of reports;let i = index"\n        (click)="reportDetail(report)"\n      >\n        <div class="date">\n          <!-- <img\n            src="assets/imgs/daily-report/icon_clock.png"\n            style="height: 15px"\n          /> -->\n          <ion-icon name="time" style="font-size: 12px"></ion-icon>\n          <span>{{report.date}}</span>\n          <img\n            src="assets/imgs/daily-report/icon_go.png"\n            style="width: 10px; height: 14px"\n          />\n        </div>\n        <div class="detail clearfix">\n          <div>\n            <span class="num">{{report.stationNum.value}}</span><br />\n            <span class="dis">电站数量(个)</span>\n          </div>\n          <div>\n            <span class="num">{{report.capacity.value}}</span><br />\n            <span class="dis">并网容量(MW)</span>\n          </div>\n          <div>\n            <span class="num">{{report.dayEnergy.value}}</span><br />\n            <span class="dis">当日电量(万kWh)</span>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      style="min-height: 32px"\n      loadingSpinner="bubbles"\n      loadingText="加载完成..."\n    >\n    </ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/daily-report/daily-report.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_3__providers_dailyreport_service__["a" /* DailyReportService */]])
    ], DailyReport);
    return DailyReport;
}());

//# sourceMappingURL=daily-report.js.map

/***/ }),

/***/ 348:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DailyReportService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var DailyReportService = /** @class */ (function () {
    function DailyReportService(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        this.repotListUrl = this.appConfig.apiEndpoint + "/api/v1/groupreports/list";
        this.repotDetailUrl = this.appConfig.apiEndpoint + "/api/v1/groupreports/basic";
        this.groupProUrl = this.appConfig.apiEndpoint + "/api/v1/groupreports/groupData";
        this.partProUrl = this.appConfig.apiEndpoint + "/api/v1/groupreports/regionData";
    }
    /**
     * 日报列表
     */
    DailyReportService.prototype.getReportList = function (page, size) {
        var url = this.repotListUrl + "?page=" + page;
        return this.http.get(url);
    };
    /**
     * 日报详情
     */
    DailyReportService.prototype.getReportDetail = function (date) {
        var url = this.repotDetailUrl + "?date=" + date;
        return this.http.get(url);
    };
    /**
     * 集团生产进度
     */
    DailyReportService.prototype.getGroupProgress = function (date) {
        var url = this.groupProUrl + "?date=" + date;
        return this.http.get(url);
    };
    /**
     * 分区月度生产进度
     */
    DailyReportService.prototype.getPartProgress = function (date) {
        var url = this.partProUrl + "?date=" + date;
        return this.http.get(url);
    };
    DailyReportService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object])
    ], DailyReportService);
    return DailyReportService;
}());

//# sourceMappingURL=dailyreport.service.js.map

/***/ }),

/***/ 349:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModulesDetails4Page; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_modules_service__ = __webpack_require__(92);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_echarts_service__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







// declare var echarts;
var ModulesDetails4Page = /** @class */ (function () {
    function ModulesDetails4Page(navCtrl, modalCtrl, event, navParams, viewCtrl, modulesService, menuController, mUtil, actionSheetCtrl, echartsService) {
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.event = event;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.modulesService = modulesService;
        this.menuController = menuController;
        this.mUtil = mUtil;
        this.actionSheetCtrl = actionSheetCtrl;
        this.echartsService = echartsService;
        this.toDate = __WEBPACK_IMPORTED_MODULE_6_moment__(new Date().getTime()).format('YYYY-MM-DD');
        this.echartsDatas = [];
        this.modulesList = [];
        this.page = 0;
        this.canInfinite = false;
        this.modules = this.navParams.get('param');
        this.modulesDetails = {};
        this.modulesDetails['title'] = this.navParams.get('title');
        if (this.modules) {
            this.modulesDetails = this.modules;
        }
    }
    ModulesDetails4Page.prototype.ionViewDidLoad = function () {
        this.initDetails();
    };
    /**
     * 初始化详情页面
     */
    ModulesDetails4Page.prototype.initDetails = function () {
        var d = new Date();
        if (this.modulesDetails.startDate && this.modulesDetails.endDate) {
            this.startDate = __WEBPACK_IMPORTED_MODULE_6_moment__(this.modulesDetails.startDate).format('YYYY-MM-DD');
            this.endDate = __WEBPACK_IMPORTED_MODULE_6_moment__(this.modulesDetails.endDate).format('YYYY-MM-DD');
        }
        else {
            this.startDate = __WEBPACK_IMPORTED_MODULE_6_moment__().startOf('month').format('YYYY-MM-DD');
            this.endDate = __WEBPACK_IMPORTED_MODULE_6_moment__().endOf('month').format('YYYY-MM-DD');
            this.modulesDetails.startDate = this.startDate;
            this.modulesDetails.endDate = this.endDate;
        }
        this.getModulesList();
    };
    /**
     * 获取列表信息
     * @param param
     */
    ModulesDetails4Page.prototype.getModulesList = function (refresher) {
        var _this = this;
        this.modulesService.lossDetail(this.buildData()).subscribe(function (e) {
            if (e && e['content'] && e['content'].length > 0) {
                _this.modulesList = _this.modulesList.concat(e['content']);
                // this.modulesList = e.content;
            }
            if (e.totalElements == 0) {
                _this.mUtil.popToastView('无数据');
            }
            if (_this.modulesList.length >= e.totalElements) {
                _this.canInfinite = false;
            }
            else {
                _this.canInfinite = true;
            }
            if (refresher) {
                refresher.complete();
                console.log('加载完成后，关闭刷新');
            }
        });
    };
    /**列表请求参数 */
    ModulesDetails4Page.prototype.buildData = function (type) {
        var data = { stationIds: '' };
        data['startDate'] = __WEBPACK_IMPORTED_MODULE_6_moment__(this.modulesDetails.startDate).format('YYYY-MM-DD');
        data['endDate'] = __WEBPACK_IMPORTED_MODULE_6_moment__(this.modulesDetails.endDate).format('YYYY-MM-DD');
        if (this.modulesDetails.stationList) {
            for (var _i = 0, _a = this.modulesDetails.stationList; _i < _a.length; _i++) {
                var station = _a[_i];
                data['stationIds'] = data['stationIds'] + station.id + ',';
            }
        }
        // data['stationIds'] = this.modulesDetails.stationIds;
        if (type != 'Echart') {
            data['page'] = this.page || 0;
            data['size'] = 10;
        }
        return data;
    };
    ModulesDetails4Page.prototype.goBack = function () {
        this.viewCtrl.dismiss();
    };
    /**搜索菜单打开时 */
    ModulesDetails4Page.prototype.menuInit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.modulesDetails));
    };
    /**搜索菜单关闭时 */
    ModulesDetails4Page.prototype.ionClose = function () {
        this.reset();
    };
    /**控制侧边栏 */
    ModulesDetails4Page.prototype.serchMenu = function () {
        this.menuController.enable(true, 'search4');
        this.menuController.open('search4');
    };
    /**拼接图片路径 */
    ModulesDetails4Page.prototype.getImg = function (imgName) {
        return 'assets/imgs/list/' + imgName;
    };
    /**电站选择 */
    ModulesDetails4Page.prototype.selectStation = function () {
        var that = this;
        console.log('当前所选电站列表：', that.modulesDetails.stationList);
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_5__util_common_station_common_station__["a" /* CommonStationPage */], {
            isMultiSelect: true,
            stationList: that.modulesDetails.stationList,
        });
        modal.onDidDismiss(function (e) {
            if (e) {
                that.modulesDetails.stationList = e;
                console.log('选择的电站列表：', e);
            }
        });
        modal.present({ keyboardClose: true });
    };
    ModulesDetails4Page.prototype.getStationNum = function () {
        var num = this.modulesDetails.stationList && this.modulesDetails.stationList.length;
        if (num) {
            return '已选择 ' + num + ' 个电站';
        }
        else {
            return '请选择';
        }
    };
    /**时间选择 */
    ModulesDetails4Page.prototype.changeDate = function (type) {
        this.modulesDetails[type] = this[type];
    };
    /**重置 */
    ModulesDetails4Page.prototype.reset = function () {
        this.modulesDetails = JSON.parse(JSON.stringify(this.backupsModulesDetails));
        this.startDate = __WEBPACK_IMPORTED_MODULE_6_moment__(this.modulesDetails.startDate).format('YYYY-MM-DD');
        this.endDate = __WEBPACK_IMPORTED_MODULE_6_moment__(this.modulesDetails.endDate).format('YYYY-MM-DD');
    };
    /**查询 */
    ModulesDetails4Page.prototype.submit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.modulesDetails));
        this.menuController.close('search4');
        this.page = 0;
        this.modulesList = [];
        this.getModulesList();
    };
    /**
     * 下拉刷新
     *
     */
    ModulesDetails4Page.prototype.doRefresh = function (refresher) {
        console.log('下拉刷新');
        this.page = 0;
        this.modulesList = [];
        this.getModulesList(refresher);
    };
    /**
     * 上拉加载
     * @param infiniteScroll
     */
    ModulesDetails4Page.prototype.doInfinite = function (infiniteScroll) {
        console.log('Begin async operation');
        this.page++;
        this.getModulesList(infiniteScroll);
    };
    /**导出文件 */
    ModulesDetails4Page.prototype.downLoadFile = function () {
        var _this = this;
        this.mUtil.customPrompt({ msg: '确定下载该文件吗?' }, function () {
            _this.modulesService.exportStationLossTypesDetails(_this.buildData('Echart'), "\u635F\u5931\u7535\u91CF\u660E\u7EC6.xlsx");
        });
    };
    ModulesDetails4Page = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-modules-details4',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details4/modules-details4.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>{{modulesDetails && modulesDetails.title || \'\'}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon\n          name="search"\n          class="down-me"\n          style="font-size: 1.4em"\n        ></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="downLoadFile()">\n        <ion-icon\n          name="md-download"\n          class="down-me"\n          style="font-size: 1.4em"\n        ></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content #search4>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="刷新..."\n    >\n    </ion-refresher-content>\n  </ion-refresher>\n\n  <div class="card-list">\n    <div class="card" *ngFor="let modules of modulesList">\n      <!-- <img [src]="getImg(modules.icon)" alt=""> -->\n      <div class="card-content">\n        <h1>{{modules.title}}</h1>\n        <div class="card-content-test-list">\n          <span>电站</span>\n          <span>{{modules.item1}}</span>\n        </div>\n        <div class="card-content-test-list">\n          <span>设备</span>\n          <span>{{modules.item2}}</span>\n        </div>\n        <div class="card-content-test-list">\n          <span>描述</span>\n          <span>{{modules.item3}}</span>\n        </div>\n        <div class="card-content-test-list">\n          <span>时间</span>\n          <span>{{modules.item4}}</span>\n        </div>\n        <div class="card-content-test-list">\n          <span>损失</span>\n          <span>{{modules.item5}}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ion-infinite-scroll\n    (ionInfinite)="doInfinite($event)"\n    threshold="5%"\n    *ngIf="canInfinite"\n  >\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n<ion-menu\n  [content]="search4"\n  side="right"\n  (ionOpen)="menuInit()"\n  (ionClose)="ionClose()"\n  id="search4"\n  type="overlay"\n  swipeEnabled="true"\n  class="search-menu"\n>\n  <ion-content class="outer-content" no-bounce class="my-custom-menu">\n    <div>\n      <div class="condition" *ngIf="modulesDetails">\n        <p>日期</p>\n        <span [class.had-endtime]="modulesDetails ">\n          <!-- {{(modulesDetails && modulesDetails.startDate || \'\') | date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="startDate"\n            [max]="toDate"\n            (ionChange)="changeDate(\'startDate\')"\n          ></ion-datetime>\n        </span>\n        <span [class.had-endtime]="modulesDetails" *ngIf="modulesDetails ">\n          <!-- {{(modulesDetails && modulesDetails.endDate || \'\')| date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="endDate"\n            [max]="toDate"\n            (ionChange)="changeDate(\'endDate\')"\n          ></ion-datetime>\n        </span>\n      </div>\n      <div class="condition">\n        <p>电站</p>\n        <span (click)="selectStation()">{{getStationNum()}}</span>\n        <!-- <input\n                    type="text"\n                    placeholder="请输入"\n                    [(ngModel)]="modulesDetails[\'stationName\']"\n                    *ngIf="modulesDetails"\n                /> -->\n      </div>\n    </div>\n    <div class="my-button">\n      <button (click)="reset()">重置</button>\n      <button (click)="submit()">查询</button>\n    </div>\n  </ion-content>\n</ion-menu>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details4/modules-details4.html"*/,
        })
        /**
         * 损失电量统计详情
         */
        ,
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_modules_service__["a" /* ModulesService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_echarts_service__["a" /* EchartsService */]])
    ], ModulesDetails4Page);
    return ModulesDetails4Page;
}());

//# sourceMappingURL=modules-details4.js.map

/***/ }),

/***/ 35:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonStationPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_monitor_service__ = __webpack_require__(113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_cache_service__ = __webpack_require__(227);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the CommonStationPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonStationPage = /** @class */ (function () {
    function CommonStationPage(navParams, viewCtrl, monitorService, cacheService, navCtrl) {
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.monitorService = monitorService;
        this.cacheService = cacheService;
        this.navCtrl = navCtrl;
        this.stationTypes = [];
        this.provinces = [];
        this.stationList = [];
        this.param = {
            provinceId: '',
            stationTypeId: '',
            myInput: ''
        };
        this.pageIndex = 0;
        this.isMultiSelect = false; //是否多选 false
        this.selectedStationList = [];
        /********************************筛选条件*************************************************************************/
        /**显示/隐藏赛选页 */
        this.switch = true;
        /********************************筛选条件*************************************************************************/
        this.noDoInfinite = false;
        /********************************多选*************************************************************************/
        this.isshowelectedList = false;
        this.isMultiSelect = this.navParams.get('isMultiSelect') || false;
        if (this.isMultiSelect) {
            this.selectedStationList = JSON.parse(JSON.stringify(this.navParams.get('stationList') || [])); //json转换避免直接返回是数据出现变化
        }
    }
    /**电站区域查询条件 */
    CommonStationPage.prototype.getprovinces = function () {
        var _this = this;
        this.monitorService.getprovinces().subscribe(function (e) {
            if (e) {
                _this.provinces = e;
                console.log(e);
            }
        });
    };
    /**电站类型查询条件 */
    CommonStationPage.prototype.getstationTypes = function () {
        var _this = this;
        this.monitorService.getstationTypes().subscribe(function (e) {
            if (e) {
                _this.stationTypes = e;
                console.log(e);
            }
        });
    };
    /**电站列表查询 */
    CommonStationPage.prototype.getstationlist = function (refresher) {
        var _this = this;
        if (this.timeout) {
            clearTimeout(this.timeout);
        }
        this.timeout = setTimeout(function () {
            _this.monitorService
                .getstationlist(_this.param.myInput, _this.param.provinceId, _this.param.stationTypeId, _this.pageIndex)
                .subscribe(function (e) {
                if (e) {
                    _this.stationList = _this.stationList.concat(e['content']);
                    // e['content'].forEach(station => {
                    //     this.stationIds.
                    // });
                    if (!e['content'].length || e['content'].length < 0) {
                        _this.noDoInfinite = true;
                    }
                    else {
                        _this.noDoInfinite = false;
                    }
                }
                if (refresher)
                    refresher.complete();
            });
        }, 1000 * 1.5);
    };
    CommonStationPage.prototype.ionViewWillEnter = function () {
        this.pageIndex = 0;
        this.param = this.cacheService.getStationSelect();
        this.getstationlist();
        this.getprovinces();
        this.getstationTypes();
    };
    CommonStationPage.prototype.ionViewWillLeave = function () {
        this.cacheService.setStationSelect(this.param);
    };
    CommonStationPage.prototype.getValue = function (value, number) {
        var arr = value.split(':');
        if (number == 0)
            return arr[number];
        if (number == 1 && arr.length == 2)
            return arr[number];
        else
            return '无';
    };
    CommonStationPage.prototype.select = function (type, id) {
        if (id === this.param[type]) {
            this.param[type] = '';
        }
        else {
            this.param[type] = id;
        }
        this.stationList = [];
        this.pageIndex = 0;
        this.getstationlist();
    };
    CommonStationPage.prototype.onCancel = function () {
        this.stationList = [];
        this.pageIndex = 0;
        this.getstationlist();
    };
    CommonStationPage.prototype.doInfinite = function (refresher) {
        this.pageIndex++;
        this.getstationlist(refresher);
    };
    CommonStationPage.prototype.close = function (station) {
        if (station) {
            if (this.isMultiSelect) {
                var index = this.selectedStationList.findIndex(function (e) {
                    return e.id === station.id;
                });
                if (index >= 0) {
                    this.selectedStationList.splice(index, 1);
                }
                else {
                    this.selectedStationList.push(station);
                }
                // station['selected'] = !station['selected']     
            }
            else {
                this.viewCtrl.dismiss(station);
            }
        }
        else {
            this.viewCtrl.dismiss();
        }
    };
    CommonStationPage.prototype.showElectedList = function () {
        this.isshowelectedList = !this.isshowelectedList;
    };
    CommonStationPage.prototype.getSelectStationNum = function () {
        return this.selectedStationList.length;
    };
    CommonStationPage.prototype.isSelect = function (station) {
        var index = this.selectedStationList.findIndex(function (e) {
            return e.id === station.id;
        });
        return index >= 0;
    };
    CommonStationPage.prototype.delate = function (i) {
        this.selectedStationList.splice(i, 1);
    };
    CommonStationPage.prototype.submit = function () {
        this.viewCtrl.dismiss(this.selectedStationList);
    };
    CommonStationPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-common-station',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-station/common-station.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button icon-only (click)="close()">\n        <ion-icon name="arrow-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title> 电站 </ion-title>\n  </ion-navbar>\n  <ion-toolbar>\n    <ion-searchbar\n      [(ngModel)]="param.myInput"\n      placeholder="电站名称模糊搜索"\n      (ionInput)="onCancel($event)"\n    >\n    </ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n<ion-content *ngIf="!isshowelectedList">\n  <ng-container *ngIf="switch">\n    <div class="select-div">\n      <div class="other-title">\n        <span class="title">区域</span>\n      </div>\n      <div class="craft-div-box">\n        <div\n          class="craft-div"\n          *ngFor="let province of provinces"\n          [class.active]="province.id == param.provinceId"\n          (click)=\'select("provinceId",province.id)\'\n        >\n          {{province.name}}\n        </div>\n      </div>\n      <div class="other-title">\n        <span class="title">类型</span>\n      </div>\n      <div class="craft-div-box">\n        <div\n          class="device-div"\n          *ngFor="let stationType of stationTypes"\n          [class.active]="stationType.id == param.stationTypeId"\n          (click)=\'select("stationTypeId",stationType.id)\'\n        >\n          {{stationType.name}}\n        </div>\n      </div>\n    </div>\n  </ng-container>\n  <div class="open" (click)="switch=!switch">\n    <div></div>\n  </div>\n\n  <div class="notice-list-box">\n    <div\n      class="new-notice-list"\n      *ngFor="let station of stationList"\n      (click)="close(station)"\n    >\n      <div class="notice">\n        <div class="notice-title">{{station.title}}</div>\n        <div class="notice-subtitle">\n          <div class="notice-subtitle-content">\n            <span>{{getValue(station.text1,0)}}:</span>\n            <span>{{getValue(station.text1,1)}}</span>\n          </div>\n        </div>\n        <div class="notice-subtitle">\n          <div class="notice-subtitle-content">\n            <span>{{getValue(station.text3,0)}}:</span>\n            <span>{{getValue(station.text3,1)}}</span>\n          </div>\n        </div>\n      </div>\n      <div class="left-img">\n        <img src="assets/imgs/list/station.png" class="alarm-img" />\n        <div class="line"></div>\n      </div>\n      <ion-icon\n        name="ios-checkmark-circle"\n        class="multi-select-icon"\n        *ngIf="isMultiSelect && isSelect(station)"\n      ></ion-icon>\n    </div>\n    <ion-infinite-scroll\n      (ionInfinite)="doInfinite($event)"\n      *ngIf="!noDoInfinite"\n    >\n      <ion-infinite-scroll-content\n        loadingSpinner="bubbles"\n        loadingText="加载更多数据..."\n      >\n      </ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n  </div>\n</ion-content>\n<ion-content *ngIf="isshowelectedList">\n  <ion-list>\n    <ion-item>\n      <!-- {{ selectedStation.title }} -->\n    </ion-item>\n    <ion-item\n      *ngFor="let selectedStation of selectedStationList;let i = index"\n      class="select-list"\n    >\n      <img src="assets/imgs/list/station.png" />\n\n      <h2>{{ selectedStation.title }}</h2>\n\n      <ion-icon\n        name="md-close-circle"\n        item-end\n        class="delete-icon"\n        (click)="delate(i)"\n      ></ion-icon>\n    </ion-item>\n  </ion-list>\n</ion-content>\n<ion-footer *ngIf="isMultiSelect">\n  <ion-toolbar>\n    <div class="footer-multi-select-button" (click)="showElectedList()">\n      已选({{getSelectStationNum()}})\n\n      <ion-icon\n        name="ios-arrow-down-outline"\n        item-end\n        class="footer-multi-select-button-icon"\n        *ngIf="isshowelectedList"\n      ></ion-icon>\n      <ion-icon\n        name="ios-arrow-up-outline"\n        item-end\n        class="footer-multi-select-button-icon"\n        *ngIf="!isshowelectedList"\n      ></ion-icon>\n    </div>\n    <div class="footer-multi-select-button button-right" (click)="submit()">\n      确定\n    </div>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-station/common-station.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_monitor_service__["a" /* MonitorService */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_cache_service__["a" /* CacheService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */]])
    ], CommonStationPage);
    return CommonStationPage;
}());

//# sourceMappingURL=common-station.js.map

/***/ }),

/***/ 350:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeviceModel; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular_navigation_nav_params__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_equipment_service__ = __webpack_require__(817);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var DeviceModel = /** @class */ (function () {
    function DeviceModel(navCtrl, equipmentService, navParams, events) {
        this.navCtrl = navCtrl;
        this.equipmentService = equipmentService;
        this.navParams = navParams;
        this.events = events;
        this.equipList = [];
        this.canInfinite = true;
        this.stationId = this.navParams.get("stationId");
        this.defectDeviceIdsText = this.navParams.get("deviceName");
        this.index = this.navParams.get("index");
        this.page = 0;
    }
    DeviceModel.prototype.ionViewWillEnter = function () {
        this.getequipmentList();
    };
    DeviceModel.prototype.ionViewWillLeave = function () { };
    DeviceModel.prototype.getequipmentList = function () {
        var _this = this;
        // let stationIds = '00001';
        this.equipmentService
            .getequipmentListUrl(this.stationId, this.page)
            .subscribe(function (e) {
            _this.equipList = [];
            if (e && e["content"] && e["content"].length > 0) {
                _this.equipList = e["content"];
                if (_this.defectDeviceIdsText) {
                    for (var index = 0; index < _this.equipList.length; index++) {
                        var element = _this.equipList[index];
                        element["select"] =
                            _this.defectDeviceIdsText.indexOf(element["deviceName"]) > -1;
                    }
                }
            }
        });
    };
    DeviceModel.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        this.equipmentService
            .getequipmentListUrl(this.stationId, this.page)
            .subscribe(function (e) {
            if (e && e["content"] && e["content"].length > 0) {
                if (_this.defectDeviceIdsText) {
                    for (var index = 0; index < e["content"].length; index++) {
                        var element = e["content"][index];
                        element["select"] =
                            _this.defectDeviceIdsText.indexOf(element["deviceName"]) > -1;
                    }
                }
                _this.equipList = _this.equipList.concat(e["content"]);
            }
            if (_this.equipList.length >= e.totalElements) {
                _this.canInfinite = false;
            }
            else {
                _this.canInfinite = true;
            }
            infiniteScroll.complete();
        });
    };
    DeviceModel.prototype.query = function (e) {
        var _this = this;
        if (this.searcht) {
            window.clearInterval(this.searcht);
        }
        if (this.search == "" || !this.search) {
            this.page = 0;
            this.getequipmentList();
            return;
        }
        this.searcht = setTimeout(function () {
            _this.equipmentService
                .getequipmentListUrl(_this.stationId, 0, _this.search)
                .subscribe(function (e) {
                _this.equipList = [];
                if (e && e["content"]) {
                    _this.equipList = e["content"];
                }
            });
        }, 1000 * 1.5);
    };
    DeviceModel.prototype.select = function (equ) {
        this.prev();
        equ.select = !equ.select;
    };
    DeviceModel.prototype.next = function () {
        var selectDeviceName = "";
        var selectDeviceId = "";
        for (var _i = 0, _a = this.equipList; _i < _a.length; _i++) {
            var equip = _a[_i];
            if (equip["select"]) {
                selectDeviceName = equip["deviceName"];
                selectDeviceId = equip["deviceId"];
            }
        }
        var params = {
            index: this.index,
            deviceName: selectDeviceName,
            deviceId: selectDeviceId
        };
        this.events.publish("deviceModelSelect", params);
        this.navCtrl.pop();
    };
    DeviceModel.prototype.prev = function () {
        for (var _i = 0, _a = this.equipList; _i < _a.length; _i++) {
            var equip = _a[_i];
            equip["select"] = false;
        }
    };
    DeviceModel = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: "device-model",template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/common/deviceModel/device-model.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      设备列表\n    </ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <ion-searchbar\n    placeholder="输入设备编号/名称"\n    [(ngModel)]="search"\n    (input)="query($event)"\n  ></ion-searchbar>\n  <ion-list>\n    <ul>\n      <li *ngFor="let equ of equipList; let i = index" (click)="select(equ)">\n        {{ equ.deviceName }}\n        <div class="active" *ngIf="equ.select"></div>\n      </li>\n      <ion-infinite-scroll\n        (ionInfinite)="doInfinite($event)"\n        *ngIf="canInfinite"\n      >\n        <ion-infinite-scroll-content\n          loadingSpinner="bubbles"\n          loadingText="加载更多..."\n        >\n        </ion-infinite-scroll-content>\n      </ion-infinite-scroll>\n    </ul>\n  </ion-list>\n</ion-content>\n\n<ion-footer>\n  <!-- <button ion-button color="light">Lsight</button> -->\n  <!-- <button ion-button color="secondary">Default</button> -->\n  <div class="bnt">\n    <span (click)="prev()">重置</span><span (click)="next()">确定</span>\n  </div>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/common/deviceModel/device-model.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_equipment_service__["a" /* EquipmentService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular_navigation_nav_params__["a" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["f" /* Events */]])
    ], DeviceModel);
    return DeviceModel;
}());

//# sourceMappingURL=device-model.js.map

/***/ }),

/***/ 351:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CheckWarehouse; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var CheckWarehouse = /** @class */ (function () {
    function CheckWarehouse(navCtrl) {
        this.navCtrl = navCtrl;
        this.checkone = false;
        this.checktwo = false;
        this.checkthree = false;
    }
    CheckWarehouse.prototype.onInput = function (event) {
        console.log(event);
    };
    CheckWarehouse.prototype.onCancel = function (event) {
        console.log(event);
    };
    CheckWarehouse.prototype.firstChecked = function () {
    };
    CheckWarehouse.prototype.secondChecked = function () {
    };
    CheckWarehouse.prototype.thirdChecked = function () {
    };
    CheckWarehouse.prototype.next = function () {
        this.navCtrl.pop();
    };
    CheckWarehouse = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'check-warehouse',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/modal/check-warehouse/check-warehouse.html"*/'<ion-header>\n    <ion-searchbar class="mysearchbar"\n        [(ngModel)]="myInput"\n        placeholder="仓库名称模糊查询"\n        [showCancelButton]=true\n        cancelButtonText = "取消"\n        (ionInput)="onInput($event)"\n        (ionCancel)="onCancel($event)">\n    </ion-searchbar>\n</ion-header>\n<ion-content>\n    <ion-list class="checkList" no-lines>\n        <ion-item class="oneCheck"  (click)=firstChecked()>\n            一级仓库\n            <ion-icon name="arrow-up" item-end></ion-icon>\n            <ion-icon [hidden]=\'true\' name="arrow-down" item-end></ion-icon>\n        </ion-item>\n        <ion-item class="twoCheck" (click)=secondChecked()>\n            二级仓库\n            <ion-icon name="arrow-up" item-end></ion-icon>\n            <ion-icon [hidden]=\'true\' name="arrow-down" item-end></ion-icon>\n        </ion-item>\n        <ion-item class="threeCheck" (click)=thirdChecked()>\n            三级仓库\n            <ion-icon name="arrow-up" item-end></ion-icon>\n            <ion-icon [hidden]=\'true\' name="arrow-down" item-end></ion-icon>\n        </ion-item>\n    </ion-list>\n    <ion-list class="checkList" no-lines>\n        <ion-item class="oneCheck">\n            一级仓库\n            <ion-icon name="arrow-up" item-end></ion-icon>\n            <ion-icon [hidden]=\'true\' name="arrow-down" item-end></ion-icon>\n        </ion-item>\n        <ion-item class="twoCheck">\n            二级仓库\n            <ion-icon name="arrow-up" item-end></ion-icon>\n            <ion-icon [hidden]=\'true\' name="arrow-down" item-end></ion-icon>\n        </ion-item>\n        <ion-item class="threeCheck">\n            三级仓库\n            <ion-icon name="arrow-up" item-end></ion-icon>\n            <ion-icon [hidden]=\'true\' name="arrow-down" item-end></ion-icon>\n        </ion-item>\n    </ion-list>\n    <button class="buttonfull" ion-button full (click)="next()">确定</button>\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/modal/check-warehouse/check-warehouse.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */]])
    ], CheckWarehouse);
    return CheckWarehouse;
}());

//# sourceMappingURL=check-warehouse.js.map

/***/ }),

/***/ 352:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SearchWarehouse; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var SearchWarehouse = /** @class */ (function () {
    function SearchWarehouse(navCtrl, viewCtrl) {
        this.navCtrl = navCtrl;
        this.viewCtrl = viewCtrl;
    }
    SearchWarehouse.prototype.onInput = function (event) {
        console.log(event);
    };
    SearchWarehouse.prototype.onCancel = function (event) {
        console.log(event);
    };
    SearchWarehouse.prototype.cancel = function () {
        console.log('cancel');
        this.viewCtrl.dismiss();
    };
    SearchWarehouse = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'search-warehouse',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/modal/search-warehouse/search-warehouse.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-searchbar class="mysearchbar"\n            [(ngModel)]="myInput"\n            placeholder="输入关键字"\n            (ionInput)="onInput($event)"\n            (ionCancel)="onCancel($event)">\n        </ion-searchbar>\n        <ion-buttons end style="color: #fff">\n            <button (click) = "cancel()">\n                取消\n            </button>\n        </ion-buttons>\n    </ion-navbar>\n    \n</ion-header>\n<ion-content>\n    <p class="history">\n        搜索历史\n    </p>\n    <ion-list class="cango-list">\n        <ion-item class="cango-item">\n            <div class="wuliao-div">\n                <span class="wl-name">物料名称</span>\n                <span class="line1"></span>\n                <span class="wl-num">料号KJ-0001</span>\n            </div>\n            <div class="wl-detail_box">\n                <div class="wl-detail">所属仓库：仓库名称</div>\n                <div class="wl-detail">规格型号：规格型号1</div>\n                <div class="wl-detail">库存类别：<span class="color1">异常库存</span></div>\n                <div class="wl-detail">物料数量：2000件</div>\n            </div>\n        </ion-item>\n    </ion-list>\n    <ion-list class="cango-list">\n        <ion-item class="cango-item">\n            <div class="wuliao-div">\n                <span class="wl-name">物料名称</span>\n                <span class="line1"></span>\n                <span class="wl-num">料号KJ-0001</span>\n            </div>\n            <div class="wl-detail_box">\n                <div class="wl-detail">所属仓库：仓库名称</div>\n                <div class="wl-detail">规格型号：规格型号1</div>\n                <div class="wl-detail">库存类别：<span class="color2">异常库存</span></div>\n                <div class="wl-detail">物料数量：2000件</div>\n            </div>\n        </ion-item>\n    </ion-list>\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/modal/search-warehouse/search-warehouse.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], SearchWarehouse);
    return SearchWarehouse;
}());

//# sourceMappingURL=search-warehouse.js.map

/***/ }),

/***/ 353:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ConstantsService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_operators__ = __webpack_require__(112);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_operators___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_operators__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__plugin_service__ = __webpack_require__(67);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







var ConstantsService = /** @class */ (function () {
    function ConstantsService(http, appConfig, pluginService, actionSheetCtrl) {
        this.http = http;
        this.appConfig = appConfig;
        this.pluginService = pluginService;
        this.actionSheetCtrl = actionSheetCtrl;
        this.uploadUrl = '';
        this.codeMap = {};
        this.weatherInfoList = [];
        this.codeSearchUrl =
            this.appConfig.apiEndpoint + '/api/propList/propLists/search';
        this.uploadUrl = this.appConfig.apiEndpoint + '/api/doc/upload';
        this.weatherInfoUrl =
            this.appConfig.apiEndpoint +
                '/api/propList/propLists/search?codeId=weatherInfo';
        this.lossTypeUrl =
            this.appConfig.apiEndpoint +
                '/api/propList/propLists/search?codeId=lossType';
    }
    ConstantsService.prototype.getWeatherInfoName = function (weatherValue) {
        var _this = this;
        if (!this.weatherInfoList || this.weatherInfoList.length == 0) {
            this.http.get(this.weatherInfoUrl).subscribe(function (e) {
                if (e) {
                    if (e && e.length > 0) {
                        _this.weatherInfoList = e;
                        _this.getWeatherInfoName(weatherValue);
                    }
                }
            });
        }
        else {
            for (var _i = 0, _a = this.weatherInfoList; _i < _a.length; _i++) {
                var info = _a[_i];
                if (info['propValue'] == weatherValue) {
                    return info['propName'];
                }
            }
            return '未找到相应天气!';
        }
    };
    ConstantsService.prototype.weatherInfo = function (retrueWeather) {
        var _this = this;
        this.http.get(this.weatherInfoUrl).subscribe(function (e) {
            if (e) {
                _this.weatherInfoList = e;
                _this.buildWeatherSelectList(e, retrueWeather);
            }
        });
    };
    ConstantsService.prototype.buildWeatherSelectList = function (weatherInfoList, retrueWeather) {
        var list = [];
        var _loop_1 = function (info) {
            var selectObj = {
                text: info.propName,
                handler: function () {
                    retrueWeather(info);
                },
            };
            list.push(selectObj);
        };
        for (var _i = 0, weatherInfoList_1 = weatherInfoList; _i < weatherInfoList_1.length; _i++) {
            var info = weatherInfoList_1[_i];
            _loop_1(info);
        }
        list.push({
            text: '取消',
            role: 'cancel',
            handler: function () {
                console.log('取消 clicked');
            },
        });
        var actionSheet = this.actionSheetCtrl.create({
            cssClass: 'weatherpop',
            buttons: list,
        });
        actionSheet.present();
    };
    //损失类别
    ConstantsService.prototype.lossType = function (returnLossType) {
        var _this = this;
        this.http.get(this.lossTypeUrl).subscribe(function (e) {
            if (e) {
                _this.lossTypeList = e;
                _this.buildLossTypesSelectList(e, returnLossType);
            }
        });
    };
    //损失类别列表
    ConstantsService.prototype.buildLossTypesSelectList = function (weatherInfoList, returnLossType) {
        var list = [];
        var _loop_2 = function (info) {
            var selectObj = {
                text: info.propName,
                handler: function () {
                    returnLossType(info);
                },
            };
            list.push(selectObj);
        };
        for (var _i = 0, weatherInfoList_2 = weatherInfoList; _i < weatherInfoList_2.length; _i++) {
            var info = weatherInfoList_2[_i];
            _loop_2(info);
        }
        list.push({
            text: '取消',
            role: 'cancel',
            handler: function () {
                console.log('取消 clicked');
            },
        });
        var actionSheet = this.actionSheetCtrl.create({
            cssClass: 'weatherpop',
            buttons: list,
        });
        actionSheet.present();
    };
    /**
     * 获取码表数据
     * @param codeId
     */
    ConstantsService.prototype.getCodeSearch = function (codeId) {
        var _this = this;
        if (this.codeMap[codeId]) {
            return __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["Observable"].create(function (observer) {
                observer.next(_this.codeMap[codeId]);
                observer.complete();
            });
        }
        else {
            return this.http.get(this.codeSearchUrl + '?codeId=' + codeId).pipe(Object(__WEBPACK_IMPORTED_MODULE_3_rxjs_operators__["map"])(function (e) {
                if (e) {
                    _this.codeMap[codeId] = e;
                    return e;
                }
            }));
        }
    };
    ConstantsService.prototype.getCoedeText = function (codeId, codeValue) {
        var _this = this;
        var name = '';
        if (this.codeMap[codeId]) {
            for (var index = 0; index < this.codeMap[codeId].length; index++) {
                var code = this.codeMap[codeId][index];
                if (code.propValue == codeValue) {
                    name = code.propName;
                    break;
                }
            }
            return __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["Observable"].create(function (observer) {
                observer.next(name);
                observer.complete();
            });
        }
        else {
            return this.getCodeSearch(codeId).pipe(Object(__WEBPACK_IMPORTED_MODULE_3_rxjs_operators__["map"])(function (e) {
                for (var index = 0; index < _this.codeMap[codeId].length; index++) {
                    var code = _this.codeMap[codeId][index];
                    if (code.propValue == codeValue) {
                        name = code.propName;
                        break;
                    }
                }
                return name;
            }));
        }
    };
    ConstantsService.prototype.uploadFile = function (fileUrl, fileKey) {
        return this.pluginService.uploadPic(fileUrl, this.uploadUrl, fileKey);
    };
    ConstantsService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__auth_http_service__["a" /* AuthHttpService */], Object, __WEBPACK_IMPORTED_MODULE_6__plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["a" /* ActionSheetController */]])
    ], ConstantsService);
    return ConstantsService;
}());

//# sourceMappingURL=constants.service.js.map

/***/ }),

/***/ 354:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoginPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__register_register__ = __webpack_require__(837);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_user_servicer__ = __webpack_require__(171);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tabs_tabs__ = __webpack_require__(355);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_app_version__ = __webpack_require__(185);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};









var LoginPage = /** @class */ (function () {
    // 23.06.28 密码输入框类型 --END
    function LoginPage(navCtrl, platform, events, auth, mUtil, appVersion, appConfig, userservice) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.platform = platform;
        this.events = events;
        this.auth = auth;
        this.mUtil = mUtil;
        this.appVersion = appVersion;
        this.appConfig = appConfig;
        this.userservice = userservice;
        this.submitted = false;
        // 23.06.28 密码输入框类型 --START
        this.inputPwdType = "password";
        var loginobj = JSON.parse(localStorage.getItem('LOGIN_USER_INFO'));
        this.login = loginobj || { username: undefined, password: undefined };
        this.logo = appConfig.logo;
        try {
            this.appVersion
                .getVersionNumber()
                .then(function (e) {
                _this.version = e;
            })
                .catch(function (err) {
                console.log(err);
            });
        }
        catch (error) {
            console.log(error);
        }
    }
    LoginPage.prototype.ionViewDidLoad = function () {
        //   this.auth.tokenValidate().subscribe(v=>{
        //     if(v){
        //       this.navCtrl.setRoot(TabsPage);
        //     }
        //   });
    };
    LoginPage.prototype.ionViewDidEnter = function () {
        // this.platform.ready().then(() => {
        //   this.mUtil.updateApp();
        // });
    };
    LoginPage.prototype.onLogin = function (login) {
        var _this = this;
        this.auth.auth(this.login.username, this.login.password).then(function (next) {
            localStorage.setItem('LOGIN_USER_INFO', JSON.stringify({
                username: _this.login.username,
                password: _this.login.password,
            }));
            _this.userservice.getUserInfo().subscribe(function (res) {
                if (res) {
                    localStorage.setItem('USER_INFO', JSON.stringify(res));
                }
            });
            _this.events.publish('login:in');
            _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_5__tabs_tabs__["a" /* TabsPage */], { homepage: next.homepage });
        }, function (error) {
            // this.mUtil.popToastView('登录失败');
            // alert("登录失败");
        });
    };
    LoginPage.prototype.register = function (event) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__register_register__["a" /* RegisterPage */]);
    };
    /**
     * @Description 更改密码框类型，显示/隐藏密码切换
     * @Author      zh
     * @Date        23.06.28
     */
    LoginPage.prototype.changeInputType = function () {
        this.inputPwdType = this.inputPwdType == "password" ? "text" : "password";
    };
    LoginPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'page-login',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/login/login.html"*/'<ion-content>\n  <div class="logo">\n    <img [src]="\'assets/imgs/login/logo@2x.png\'" style="height: 33px" />\n  </div>\n\n  <form #loginForm="ngForm" novalidate (submit)="onLogin(login)">\n    <ion-list no-lines>\n      <ion-item>\n        <input\n          [(ngModel)]="login.username"\n          name="username"\n          type="text"\n          #username="ngModel"\n          spellcheck="false"\n          autocapitalize="off"\n          required\n          placeholder="用户名"\n        />\n      </ion-item>\n\n      <ion-item class="hasImg">\n        <input\n          [(ngModel)]="login.password"\n          name="password"\n          [type]="inputPwdType"\n          #password="ngModel"\n          required\n          placeholder="密码"\n        />\n        <img src="assets/imgs/login/login_yw@2x.png"\n        (click)="changeInputType()"\n        />\n      </ion-item>\n    </ion-list>\n\n    <button type="submit" block>登录</button>\n  </form>\n  <p class="register">\n    <span>&nbsp;&nbsp;</span>\n    <!-- <span (click)="register($event)">注册新用户</span> -->\n  </p>\n  <p class="version">{{version?\'V\'+version:\'\'}}</p>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/login/login.html"*/,
        }),
        __param(6, Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_7__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2__providers_auth_http_service__["a" /* AuthHttpService */],
            __WEBPACK_IMPORTED_MODULE_6__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_app_version__["a" /* AppVersion */], Object, __WEBPACK_IMPORTED_MODULE_1__providers_user_servicer__["a" /* UserService */]])
    ], LoginPage);
    return LoginPage;
}());

//# sourceMappingURL=login.js.map

/***/ }),

/***/ 355:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TabsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__home_home__ = __webpack_require__(820);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__operations_operations__ = __webpack_require__(838);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__my_my__ = __webpack_require__(840);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__monitor_monitor__ = __webpack_require__(235);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__login_login__ = __webpack_require__(354);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var TabsPage = /** @class */ (function () {
    function TabsPage(events, navCtrl, navParams) {
        var _this = this;
        this.events = events;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.tab1Root = __WEBPACK_IMPORTED_MODULE_1__home_home__["a" /* HomePage */];
        this.tab2Root = __WEBPACK_IMPORTED_MODULE_4__monitor_monitor__["a" /* MonitorPage */];
        this.tab3Root = __WEBPACK_IMPORTED_MODULE_2__operations_operations__["a" /* Operations */];
        this.tab4Root = __WEBPACK_IMPORTED_MODULE_3__my_my__["a" /* MyPage */];
        this.tabsParams = { homepage: this.navParams.get('homepage') };
        this.events.subscribe('changerTab', function (e) {
            _this.tabs.select(e.index, {}, true);
            if (e.index === 1 && e.stationId) {
                _this.tabsParams.stationId = e.stationId;
            }
        });
        /*** 退出登录*/
        this.events.subscribe('login:out', function (e) {
            localStorage.setItem('LOGIN_USER_INFO', JSON.stringify({}));
            _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_6__login_login__["a" /* LoginPage */]);
        });
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('supervisorblock'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["u" /* Tabs */])
    ], TabsPage.prototype, "tabs", void 0);
    TabsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/tabs/tabs.html"*/'<ion-tabs #supervisorblock>\n  <ion-tab\n    [root]="tab1Root"\n    tabTitle="首页"\n    tabIcon="home-p"\n    [rootParams]="tabsParams"\n  ></ion-tab>\n  <ion-tab [root]="tab2Root" tabTitle="监视" tabIcon="jianshi-p"></ion-tab>\n  <ion-tab [root]="tab3Root" tabTitle="运维" tabIcon="yunwei-p"></ion-tab>\n  <ion-tab [root]="tab4Root" tabTitle="我的" tabIcon="my-p"></ion-tab>\n</ion-tabs>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/tabs/tabs.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["q" /* NavParams */]])
    ], TabsPage);
    return TabsPage;
}());

//# sourceMappingURL=tabs.js.map

/***/ }),

/***/ 356:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OperationsService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var OperationsService = /** @class */ (function () {
    function OperationsService(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        RTCDTMFToneChangeEvent;
        this.ordersTypeUrl = this.appConfig.apiEndpoint + '/api/m/v2/workbench/orders/type'; // 工单类型统计接口
        this.ordersDayUrl = this.appConfig.apiEndpoint + '/api/m/v2/workbench/orders/day'; // 每日工单统计接口
        this.workbenchOrdersUrl = this.appConfig.apiEndpoint + '/api/m/v2/workbench/orders'; // 工单列表
        this.workbenchRemindUrl = this.appConfig.apiEndpoint + '/api/m/v2/workbench/remind'; // 催单
    }
    /**
     * 工单类型统计接口
     * @param dataType
     * @param startDate
     * @param endDate
     */
    OperationsService.prototype.ordersType = function (dataType, startDate, endDate) {
        var url = this.ordersTypeUrl + "?dataType=" + dataType + "&startDate=" + startDate + "&endDate=" + endDate;
        return this.http.get(url);
    };
    /**
    * 每日工单统计接口
    * @param dataType
    * @param startDate
    * @param endDate
    */
    OperationsService.prototype.orderDay = function (dataType, startDate, endDate) {
        var url = this.ordersDayUrl + "?dataType=" + dataType + "&startDate=" + startDate + "&endDate=" + endDate;
        return this.http.get(url);
    };
    /**
     * 工单列表
     * @param dataType
     * @param status
     * @param startDate
     * @param endDate
     */
    OperationsService.prototype.workbenchOrders = function (dataType, status, startDate, endDate, page) {
        var url = this.workbenchOrdersUrl + "?dataType=" + dataType + "&status=" + status + "&startDate=" + startDate + "&endDate=" + endDate + "&page=" + page + "&size=10";
        return this.http.get(url);
    };
    /**
   * 催单
   * @param orderId
   */
    OperationsService.prototype.workbenchRemind = function (orderId) {
        var url = "" + this.workbenchRemindUrl;
        return this.http.put(url, { orderId: orderId });
    };
    OperationsService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object])
    ], OperationsService);
    return OperationsService;
}());

//# sourceMappingURL=operations.service.js.map

/***/ }),

/***/ 367:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 367;

/***/ }),

/***/ 422:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 422;

/***/ }),

/***/ 45:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonUserPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_user_servicer__ = __webpack_require__(171);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__selected_user_list_selected_user_list__ = __webpack_require__(776);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





/**
 * Generated class for the CommonUserPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonUserPage = /** @class */ (function () {
    /* 230704 关闭滚动刷新 -- END */
    function CommonUserPage(navCtrl, navParams, userservice, viewCtrl, modalCtrl, events) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.userservice = userservice;
        this.viewCtrl = viewCtrl;
        this.modalCtrl = modalCtrl;
        this.events = events;
        this.page = 0;
        this.inputValue = null;
        this.canInfinite = true;
        this.hiddenSelectedModal = true;
        this.selectedItem = [];
        /* 230704 关闭滚动刷新 -- START */
        this.closeInfinite = true;
        this.events.subscribe('user:item', function (res) {
            _this.selectedItem = res;
            document.getElementById('count').innerText = res.length;
        });
    }
    ;
    CommonUserPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonUserPage');
        this.isSingle = this.navParams.get('isSingle');
        this.selectedItem = this.navParams.get('selectedItem') || [];
        this.editable = this.navParams.get('editable') === false ? false : true;
        this.getUserList(true);
    };
    CommonUserPage.prototype.searchUser = function (event) {
        this.userList = [];
        this.page = 0;
        this.inputValue = event.target.value;
        this.getUserList(true);
    };
    CommonUserPage.prototype.getUserList = function (first, refresher) {
        var _this = this;
        if (first) {
            this.page = 0;
        }
        var params = {
            name: this.inputValue,
            page: this.page,
            size: 10
        };
        this.userservice.getUserList(__assign({}, params)).subscribe(function (res) {
            if (res) {
                _this.userList = res.content;
            }
            if (refresher)
                refresher.complete();
        });
    };
    CommonUserPage.prototype.doRefresh = function (refresher) {
        this.getUserList(true, refresher);
    };
    CommonUserPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        if (!this.closeInfinite) {
            return;
        }
        this.page++;
        var params = {
            name: this.inputValue,
            page: this.page,
            size: 10
        };
        this.userservice.getUserList(__assign({}, params)).subscribe(function (res) {
            /* 表明当前数据重复，滚动刷新关闭 */
            if (_this.userList.length == res.content.length) {
                _this.closeInfinite = false;
                return;
            }
            if (res && res.content.length > 0) {
                _this.userList = _this.userList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.userList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    CommonUserPage.prototype.close = function () {
        this.viewCtrl.dismiss(null);
    };
    CommonUserPage.prototype.toggleSelectedItemModal = function () {
        var _this = this;
        if (this.hiddenSelectedModal == true) {
            this.modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__selected_user_list_selected_user_list__["a" /* SelectedUserListPage */], {
                selectedItem: __spreadArrays(this.selectedItem),
                editable: this.editable
            }, {
                cssClass: 'selectedUserList'
            });
            this.modal.onDidDismiss(function (data) {
                if (data === null) {
                    _this.hiddenSelectedModal = true;
                }
            });
            this.modal.present();
            this.hiddenSelectedModal = false;
        }
        else {
            this.modal.dismiss();
            this.hiddenSelectedModal = true;
        }
    };
    CommonUserPage.prototype.commitUser = function () {
        if (!this.hiddenSelectedModal) {
            this.modal.dismiss();
            this.hiddenSelectedModal = true;
        }
        if (!this.editable) {
            this.viewCtrl.dismiss({ type: 'close' });
            return;
        }
        this.viewCtrl.dismiss({ value: this.selectedItem, type: 'ok' });
    };
    CommonUserPage.prototype.clear = function () {
        this.viewCtrl.dismiss({ value: null, type: 'clear' });
    };
    CommonUserPage.prototype.showIcon = function (userId) {
        var index = __WEBPACK_IMPORTED_MODULE_3_lodash__["findIndex"](this.selectedItem, function (o) { return o.userId == userId; });
        return index != -1;
    };
    CommonUserPage.prototype.selectUser = function (user) {
        if (!this.editable) {
            return;
        }
        if (!this.isSingle) {
            var index = __WEBPACK_IMPORTED_MODULE_3_lodash__["findIndex"](this.selectedItem, function (o) { return o.userId == user.userId; });
            if (index == -1) {
                this.selectedItem.push(user);
            }
            else {
                this.selectedItem.splice(index, 1);
            }
        }
        else {
            this.selectedItem = [user];
            this.viewCtrl.dismiss({ value: this.selectedItem, type: 'ok' });
        }
    };
    CommonUserPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-common-user',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-user/common-user.html"*/'<!--\n  Generated template for the CommonUserPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button icon-only (click)="close()">\n        <ion-icon name="arrow-back" style="color: #fff"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>人员</ion-title>\n  </ion-navbar>\n  <ion-toolbar no-border-top class="page-search">\n    <ion-searchbar\n      (ionInput)="searchUser($event)"\n      placeholder="登陆用户名或真实姓名"\n    ></ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list insert>\n    <ion-item *ngFor="let user of userList" no-lines (click)="selectUser(user)">\n      <ion-avatar item-start>\n        <img src="assets/imgs/avatar/{{user.icon||\'00.png\'}}" />\n      </ion-avatar>\n      <ion-label>\n        <h2>{{user.realName}}</h2>\n        <p><span>{{user.userName}}</span>|<span>{{user.deptName}}</span></p>\n      </ion-label>\n      <div item-content class="checked-icon" *ngIf="showIcon(user.userId)">\n        <!-- <img src="assets/imgs/buttons/ok.png" /> -->\n        <ion-icon name="ok"></ion-icon>\n      </div>\n    </ion-item>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      *ngIf="closeInfinite"\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar no-border-top *ngIf="isSingle">\n    <button ion-button block class="clear" color="light" (click)="clear()">\n      清除\n    </button>\n  </ion-toolbar>\n  <ion-toolbar class="footer-bar" *ngIf="!isSingle">\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <button\n            ion-button\n            icon-end\n            small\n            outline\n            class="clear-btn"\n            color="light"\n            (click)="toggleSelectedItemModal()"\n          >\n            已选（<span *ngIf="hiddenSelectedModal"\n              >{{selectedItem.length}}</span\n            >\n            <span *ngIf="!hiddenSelectedModal" id="count"\n              >{{selectedItem.length}}</span\n            >\n            ）\n            <ion-icon\n              name="{{hiddenSelectedModal?\'arrow-up\':\'arrow-down\'}}"\n            ></ion-icon>\n          </button>\n        </ion-col>\n        <ion-col col-6>\n          <button ion-button small class="ok-btn" (click)="commitUser()">\n            确定\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-user/common-user.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0__providers_user_servicer__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["f" /* Events */]])
    ], CommonUserPage);
    return CommonUserPage;
}());

//# sourceMappingURL=common-user.js.map

/***/ }),

/***/ 50:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EquipmentListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_monitor_service__ = __webpack_require__(113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_cache_service__ = __webpack_require__(227);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__selected_equipment_list_selected_equipment_list__ = __webpack_require__(775);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__barcode_scanner_barcode_scanner__ = __webpack_require__(170);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};








var EquipmentListPage = /** @class */ (function () {
    function EquipmentListPage(navCtrl, monitorService, cacheService, navParams, viewCtrl, modalCtrl, events) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.monitorService = monitorService;
        this.cacheService = cacheService;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.modalCtrl = modalCtrl;
        this.events = events;
        this.equipmentTypes = [];
        this.equipmentAreas = [];
        this.equipmentList = [];
        this.param = {
            areaIds: '',
            classIds: '',
            deviceNoOrName: '',
        };
        this.pageIndex = 0;
        this.selectedItem = [];
        this.hiddenSelectedModal = true;
        this.moreEquipmentAreas = false;
        this.moreEquipmentType = false;
        // 判断是否通过按钮关闭
        this.btnCloseFlag = false;
        this.switch = true;
        /********************************筛选条件*************************************************************************/
        /**显示/隐藏赛选页 */
        this.location_switch = true;
        this.type_switch = true;
        /********************************筛选条件*************************************************************************/
        this.noDoInfinite = false;
        this.stationId = this.navParams.get('stationId');
        this.editable = this.navParams.get('editable') === false ? false : true;
        if (this.navParams.get('deviceId') && this.navParams.get('deviceName')) {
            this.selectedItem = [
                {
                    deviceId: this.navParams.get('deviceId'),
                    deviceName: this.navParams.get('deviceName'),
                },
            ];
        }
        else if (this.navParams.get('selectedItem')) {
            this.selectedItem = this.navParams.get('selectedItem');
        }
        this.deviceType = this.navParams.get('deviceType') || null;
        this.events.subscribe('item', function (res) {
            _this.selectedItem = res;
            document.getElementById('count').innerText = res.length;
        });
    }
    /**设备区域查询条件 */
    EquipmentListPage.prototype.getEquipmentAreas = function () {
        var _this = this;
        this.monitorService.getEquipmentArea(this.stationId).subscribe(function (e) {
            if (e) {
                _this.equipmentAreas = e;
            }
        });
    };
    /**电站类型查询条件 */
    EquipmentListPage.prototype.getEquipmentTypes = function () {
        var _this = this;
        this.monitorService
            .getDeviceClasses({ stationId: this.stationId, deviceType: this.deviceType })
            .subscribe(function (e) {
            if (e) {
                _this.equipmentTypes = e;
            }
        });
    };
    /**电站列表查询 */
    EquipmentListPage.prototype.getEquipmentList = function (refresher) {
        var _this = this;
        if (this.timeout) {
            clearTimeout(this.timeout);
        }
        this.timeout = setTimeout(function () {
            _this.monitorService
                .getDevicesListUrl({
                stationId: _this.stationId,
                deviceNoOrName: _this.param.deviceNoOrName,
                classIds: _this.param.classIds,
                areaIds: _this.param.areaIds,
                page: _this.pageIndex,
                deviceTypes: _this.deviceType,
                size: 10,
            })
                .subscribe(function (e) {
                if (e) {
                    _this.equipmentList = _this.equipmentList.concat(e['content']);
                    if (!e['content'].length || e['content'].length < 0) {
                        _this.noDoInfinite = true;
                    }
                    else {
                        _this.noDoInfinite = false;
                    }
                }
                if (refresher)
                    refresher.complete();
            });
        }, 1000 * 1.5);
    };
    EquipmentListPage.prototype.ionViewDidLoad = function () {
        this.pageIndex = 0;
        this.param = this.cacheService.getDevicesSelect();
        this.getEquipmentList();
        this.getEquipmentAreas();
        this.getEquipmentTypes();
        this.isSingle = this.navParams.get('isSingle');
        this.isTracking = this.navParams.get('isTracking');
    };
    EquipmentListPage.prototype.ionViewWillEnter = function () {
        this.deviceNoOrName = this.navParams.get('qrResult');
        if (this.deviceNoOrName) {
            this.navParams.data.qrResult = null;
            this.param = {
                areaIds: '',
                classIds: '',
                deviceNoOrName: this.deviceNoOrName,
            };
            this.equipmentList = [];
            this.getEquipmentList();
        }
    };
    EquipmentListPage.prototype.ionViewWillLeave = function () {
        this.param.deviceNoOrName = '';
        this.cacheService.setEquipmentSelect(this.param);
        if (!this.btnCloseFlag) {
            this.navCtrl.getPrevious().data.equipmentList = null;
        }
        if (this.isTracking) {
            this.navCtrl.getPrevious().data.isTracking = true;
        }
    };
    EquipmentListPage.prototype.getValue = function (value, number) {
        var arr = value.split(':');
        if (number == 0)
            return arr[number];
        if (number == 1 && arr.length == 2)
            return arr[number];
        else
            return '无';
    };
    EquipmentListPage.prototype.select = function (type, id) {
        if (id === this.param[type]) {
            this.param[type] = '';
        }
        else {
            this.param[type] = id;
        }
        this.equipmentList = [];
        this.pageIndex = 0;
        this.getEquipmentList();
    };
    EquipmentListPage.prototype.onCancel = function () {
        this.equipmentList = [];
        this.pageIndex = 0;
        this.getEquipmentList();
    };
    EquipmentListPage.prototype.doInfinite = function (refresher) {
        this.pageIndex++;
        this.getEquipmentList(refresher);
    };
    EquipmentListPage.prototype.checkClick = function (equipment) {
        if (!this.editable) {
            return;
        }
        if (!this.isSingle) {
            var index = __WEBPACK_IMPORTED_MODULE_4_lodash__["findIndex"](this.selectedItem, function (o) { return o.deviceId == equipment.deviceId; });
            if (index == -1) {
                this.selectedItem.push(equipment);
            }
            else {
                this.selectedItem.splice(index, 1);
            }
        }
        else {
            this.selectedItem = [equipment];
            this.commitEquipment();
        }
    };
    EquipmentListPage.prototype.clearSelected = function () {
        this.selectedItem = [];
        this.commitEquipment();
    };
    EquipmentListPage.prototype.showIcon = function (id) {
        var index = __WEBPACK_IMPORTED_MODULE_4_lodash__["findIndex"](this.selectedItem, function (o) { return o.deviceId == id; });
        return index != -1;
    };
    EquipmentListPage.prototype.toggleSelectedItemModal = function () {
        var _this = this;
        if (this.hiddenSelectedModal == true) {
            this.modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_5__selected_equipment_list_selected_equipment_list__["a" /* SelectedEquipmentListPage */], {
                editable: this.editable,
                selectedItem: __spreadArrays(this.selectedItem),
            }, {
                cssClass: 'selectedEquipmentList',
            });
            this.modal.onDidDismiss(function (data) {
                if (data === null) {
                    _this.hiddenSelectedModal = true;
                }
            });
            this.modal.present();
            this.hiddenSelectedModal = false;
        }
        else {
            this.modal.dismiss();
            this.hiddenSelectedModal = true;
        }
    };
    EquipmentListPage.prototype.commitEquipment = function () {
        if (!this.hiddenSelectedModal) {
            this.modal.dismiss();
            this.hiddenSelectedModal = true;
        }
        this.btnCloseFlag = true;
        this.navCtrl.getPrevious().data.equipmentList = this.selectedItem;
        this.navCtrl.pop();
    };
    EquipmentListPage.prototype.scan = function ($event) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__barcode_scanner_barcode_scanner__["a" /* BarcodeScannerPage */], {}, {
            ev: $event,
            isNavRoot: true,
        });
    };
    EquipmentListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'equipment-list',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-equipment/equipmentList.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title> 设备 </ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="scan($event)">\n        <!-- <img src="assets/imgs/home/sweep.png" class="scan" /> -->\n        <ion-icon name="scan" class="title-bar-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n  <ion-toolbar>\n    <ion-searchbar\n      [(ngModel)]="param.deviceNoOrName"\n      placeholder="设备名称或编号"\n      (ionInput)="onCancel($event)"\n    >\n    </ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n<ion-content>\n  <ng-container *ngIf="switch">\n    <div class="select-div">\n      <div class="other-title">\n        <span class="title">位置</span>\n      </div>\n      <div class="craft-div-box">\n        <ng-container *ngFor="let province of equipmentAreas;let i=index">\n          <div\n            *ngIf="i<5||moreEquipmentAreas"\n            class="craft-div"\n            [class.active]="province.id == param.areaIds"\n            (click)=\'select("areaIds",province.id)\'\n          >\n            {{province.name}}\n          </div>\n          <div\n            *ngIf="i==5&&!moreEquipmentAreas"\n            class="craft-div craft-more"\n            (click)="moreEquipmentAreas=true"\n          >\n            更多\n          </div>\n        </ng-container>\n      </div>\n      <div class="other-title">\n        <span class="title">类型</span>\n      </div>\n      <div class="craft-div-box">\n        <ng-container *ngFor="let equipmentType of equipmentTypes;let i=index">\n          <div\n            *ngIf="i<5||moreEquipmentType"\n            class="device-div"\n            [class.active]="equipmentType.id == param.classIds"\n            (click)=\'select("classIds",equipmentType.id)\'\n          >\n            {{equipmentType.name}}\n          </div>\n          <div\n            *ngIf="i==5&&!moreEquipmentType"\n            class="craft-div craft-more"\n            (click)="moreEquipmentType=true"\n          >\n            更多\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </ng-container>\n  <div class="open" (click)="switch=!switch">\n    <div></div>\n  </div>\n\n  <div class="notice-list-box">\n    <div\n      class="new-notice-list"\n      *ngFor="let equipment of equipmentList"\n      (click)="checkClick(equipment)"\n    >\n      <div class="notice">\n        <div class="notice-title">{{equipment.displayName}}</div>\n        <div class="notice-subtitle">\n          <div class="notice-subtitle-content">\n            <span>{{equipment.areaName}}</span>\n          </div>\n        </div>\n        <div class="notice-subtitle">\n          <div class="notice-subtitle-content">\n            <span>{{equipment.className}}</span>|\n            <span>{{equipment.modelNo}}</span>\n          </div>\n        </div>\n      </div>\n      <div class="left-img">\n        <img src="assets/imgs/list/device.png" class="alarm-img" />\n        <!-- <ion-icon name="device" class="alarm-img"></ion-icon> -->\n        <div class="line"></div>\n      </div>\n      <div class="checked-icon" *ngIf="showIcon(equipment.deviceId)">\n        <!-- <img src="assets/imgs/buttons/ok.png" /> -->\n        <ion-icon name="ok"></ion-icon>\n      </div>\n    </div>\n    <ion-infinite-scroll\n      (ionInfinite)="doInfinite($event)"\n      *ngIf="!noDoInfinite"\n    >\n      <ion-infinite-scroll-content\n        loadingSpinner="bubbles"\n        loadingText="加载更多数据..."\n      >\n      </ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n  </div>\n</ion-content>\n<ion-footer>\n  <ion-toolbar no-border-top *ngIf="isSingle">\n    <button\n      ion-button\n      block\n      class="clear"\n      color="light"\n      (click)="clearSelected()"\n    >\n      清除\n    </button>\n  </ion-toolbar>\n  <ion-toolbar *ngIf="!isSingle" class="footer-bar">\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <button\n            ion-button\n            icon-end\n            small\n            outline\n            class="clear-btn"\n            color="light"\n            (click)="toggleSelectedItemModal()"\n          >\n            已选（<span *ngIf="hiddenSelectedModal"\n              >{{selectedItem.length}}</span\n            >\n            <span *ngIf="!hiddenSelectedModal" id="count"\n              >{{selectedItem.length}}</span\n            >\n            ）\n            <ion-icon\n              name="{{hiddenSelectedModal?\'arrow-up\':\'arrow-down\'}}"\n            ></ion-icon>\n          </button>\n        </ion-col>\n        <ion-col col-6>\n          <button ion-button small class="ok-btn" (click)="commitEquipment()">\n            确定\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-equipment/equipmentList.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_monitor_service__["a" /* MonitorService */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_cache_service__["a" /* CacheService */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["f" /* Events */]])
    ], EquipmentListPage);
    return EquipmentListPage;
}());

//# sourceMappingURL=equipmentList.js.map

/***/ }),

/***/ 557:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InspectionsMenusPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_inspections_service__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the InspectionsMenusPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InspectionsMenusPage = /** @class */ (function () {
    function InspectionsMenusPage(navCtrl, navParams, viewCtrl, inspectionsprovider) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.inspectionsprovider = inspectionsprovider;
        this.inspectionsprovider.getInspectionsTypes().subscribe(function (res) {
            _this.inspectionsTypes = res;
        });
    }
    InspectionsMenusPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad inspectionsMenusPage');
    };
    InspectionsMenusPage.prototype.ionViewWillEnter = function () { };
    InspectionsMenusPage.prototype.addInspection = function (event, type) {
        this.viewCtrl.dismiss({ type: type });
    };
    InspectionsMenusPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-inspections-menus',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections/inspections-menus/inspections-menus.html"*/'<!--\n  Generated template for the InventorisMenusPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n\n<ion-content no-scroll>\n    <ion-list>\n        <ng-container *ngFor="let inspectionsType of inspectionsTypes">\n            <ion-item no-lines (tap)="addInspection($event,inspectionsType.id)">\n                <ion-icon [name]="\'inspection\'+inspectionsType.id" item-start></ion-icon>\n                {{inspectionsType.name}}\n            </ion-item>\n        </ng-container>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections/inspections-menus/inspections-menus.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_inspections_service__["a" /* InspectionsProvider */]])
    ], InspectionsMenusPage);
    return InspectionsMenusPage;
}());

//# sourceMappingURL=inspections-menus.js.map

/***/ }),

/***/ 59:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaterialService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




var MaterialService = /** @class */ (function () {
    function MaterialService(http, appConfig, mutilservice) {
        this.http = http;
        this.appConfig = appConfig;
        this.mutilservice = mutilservice;
        this.materialInventorysUrl =
            this.appConfig.apiEndpoint + '/api/material/materialInventorys';
        this.warehousesByCustomerIdUrl =
            this.appConfig.apiEndpoint + '/api/warehouse/warehousesByCustomerId';
        this.classficationsUrl =
            this.appConfig.apiEndpoint + '/api/materialInfo/classfications';
    }
    /**
     * 筛选查询  备件（工具）列表
     * @param defectCondition
     */
    MaterialService.prototype.getMeterial = function (meterialCondition) {
        var url = this.materialInventorysUrl + '?';
        for (var defmeterialct in meterialCondition) {
            if (meterialCondition[defmeterialct]) {
                url =
                    url + defmeterialct + '=' + meterialCondition[defmeterialct] + '&';
            }
        }
        url = url.substr(0, url.length - 1);
        return this.http.get(url);
    };
    /**
     * 筛选查询  仓库查询
     * @param defectCondition
     */
    MaterialService.prototype.getWarehouse = function () {
        var url = this.warehousesByCustomerIdUrl;
        return this.http.get(url);
    };
    /**
     * 筛选查询  备件(工具)类别筛选内容查询
     * @param defectCondition
     */
    MaterialService.prototype.getclassfications = function (classType) {
        var url = this.classficationsUrl + '?classType=' + classType;
        return this.http.get(url);
    };
    //查询仓库列表
    MaterialService.prototype.getWarehouseList = function (params) {
        var url = this.appConfig.apiEndpoint + "/api/m/v2/materials/warehouses";
        return this.http.get(url, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    /**
     * 查询物料列表
     */
    MaterialService.prototype.getMaterialList = function (params) {
        var url = this.appConfig.apiEndpoint + "/api/m/v2/materials/materials";
        return this.http.get(url, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    /**
     * 查询物料列表
     */
    MaterialService.prototype.getMaterialByMaterialNo = function (materialNo) {
        var url = this.appConfig.apiEndpoint + "/api/m/v2/materials/material" + (materialNo ? '?materialNo=' + materialNo : '');
        return this.http.get(url);
    };
    /**
     * 查询物料列表
     */
    MaterialService.prototype.getMaterialTypes = function () {
        var url = this.appConfig.apiEndpoint + "/api/m/v2/materials/materialTypes";
        return this.http.get(url);
    };
    /**
     * 查询物料列表
     */
    MaterialService.prototype.getInventorisList = function (params) {
        var url = this.appConfig.apiEndpoint + "/api/m/v2/materials/inventoris";
        return this.http.get(url, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    MaterialService.prototype.getInventorisRecordList = function (params) {
        var url = this.appConfig.apiEndpoint + "/api/m/v2/materials/iostorages";
        return this.http.get(url, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    /**
     * /api/m/v2/materials/out
     */
    MaterialService.prototype.saveMaterialsOut = function (params) {
        return this.http.post(this.appConfig.apiEndpoint + "/api/m/v2/materials/out", params);
    };
    /**
     * /api/m/v2/materials/in
     */
    MaterialService.prototype.saveMaterialsIn = function (params) {
        return this.http.post(this.appConfig.apiEndpoint + "/api/m/v2/materials/in", params);
    };
    MaterialService.prototype.getOrderIdByOrderCode = function (orderCode) {
        return this.http.get(this.appConfig.apiEndpoint + "/api/workOrders/orderId?orderCode=" + orderCode);
    };
    MaterialService.prototype.getMaterialsIostorage = function (iostorageId) {
        return this.http.get(this.appConfig.apiEndpoint + "/api/m/v2/materials/iostorage?iostorageId=" + iostorageId);
    };
    MaterialService.prototype.getmaterialsIoTypes = function (params) {
        return this.http.get(this.appConfig.apiEndpoint + "/api/m/v2/materials/ioTypes", {
            params: params,
        });
    };
    MaterialService.prototype.getmaterialsIoSubTypes = function (ioType, materialType) {
        return this.http.get(this.appConfig.apiEndpoint + "/api/m/v2/materials/ioSubTypes", {
            params: {
                ioType: ioType,
                materialType: materialType,
            },
        });
    };
    MaterialService.prototype.materialsApprove = function (params) {
        return this.http.post(this.appConfig.apiEndpoint + "/api/m/v2/materials/approve", {}, {
            params: this.mutilservice.filterEffectParam(params),
        });
    };
    MaterialService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__auth_http_service__["a" /* AuthHttpService */], Object, __WEBPACK_IMPORTED_MODULE_0__util_Mutil_service__["a" /* MutilService */]])
    ], MaterialService);
    return MaterialService;
}());

//# sourceMappingURL=material.service.js.map

/***/ }),

/***/ 67:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PluginService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_camera__ = __webpack_require__(96);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_transfer__ = __webpack_require__(377);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file__ = __webpack_require__(374);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_path__ = __webpack_require__(376);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_app_version__ = __webpack_require__(185);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};










var PluginService = /** @class */ (function () {
    function PluginService(appConfig, camera, actionSheetCtrl, transfer, file, platform, toastCtrl, alertCtrl, filePath, http, appVersion, mutilservice) {
        this.appConfig = appConfig;
        this.camera = camera;
        this.actionSheetCtrl = actionSheetCtrl;
        this.transfer = transfer;
        this.file = file;
        this.platform = platform;
        this.toastCtrl = toastCtrl;
        this.alertCtrl = alertCtrl;
        this.filePath = filePath;
        this.http = http;
        this.appVersion = appVersion;
        this.mutilservice = mutilservice;
        this.downloadUrl = this.appConfig.apiEndpoint + '/api/doc/download';
        this.deleteDocUrl = this.appConfig.apiEndpoint + '/api/doc/delete';
    }
    /**
     *  拍照插件
     *  $ ionic cordova plugin add cordova-plugin-camera
     *  $ npm install --save @ionic-native/camera
     *  API地址 ： http://ionicframework.com/docs/native/camera/
     */
    PluginService.prototype.useCamera = function (callBack) {
        var _this = this;
        var that = this;
        var options = {
            quality: 80,
            sourceType: 1,
            destinationType: this.camera.DestinationType.FILE_URI,
            targetWidth: 1000,
            targetHeight: 1000,
            correctOrientation: true,
        };
        var actionSheet = this.actionSheetCtrl.create({
            cssClass: 'ssss',
            buttons: [
                {
                    text: '拍照',
                    handler: function () {
                        _this.camera.getPicture(options).then(function (imageDate) {
                            callBack(imageDate);
                        }, function (err) {
                            console.log(err);
                        });
                        console.log('拍照 clicked');
                    },
                },
                {
                    text: '从相册中选取',
                    handler: function () {
                        options.sourceType = 0;
                        var imagePickerOpt = {
                            sourceType: 0,
                            maximumImagesCount: 10,
                            quality: 80,
                            destinationType: _this.camera.DestinationType.FILE_URI,
                            targetWidth: 1000,
                            targetHeight: 1000,
                            correctOrientation: true,
                        };
                        _this.camera.getPicture(imagePickerOpt).then(function (imageDate) {
                            callBack(imageDate);
                        }, function (err) {
                            console.log(err);
                        });
                        console.log('从相册中选取 clicked');
                    },
                },
                {
                    text: '取消',
                    role: 'cancel',
                    handler: function () {
                        console.log('取消 clicked');
                    },
                },
            ],
        });
        actionSheet.present();
        console.log('Clicked to update picture');
    };
    PluginService.prototype.presentToast = function (data) {
        var msg = {
            message: data.message ? data.message : '提示信息有误!',
            duration: data.duration ? data.duration : 'short',
            position: data.position ? data.position : 'bottom',
            cssClass: 'myCenter',
        };
        var toast = this.toastCtrl.create(msg);
        toast.present();
    };
    /**
     * 上传文件到服务器
     * @param fileUrl 本地文件路径
     * @param uploadUrl 上传服务端地址
     * @returns 远程文件的路径
     */
    PluginService.prototype.uploadPic = function (fileUrl, uploadUrl, fileKey, params) {
        var _this = this;
        if (this.platform.is('ios')) {
            var token = localStorage.getItem('_TOKEN_');
            var options = {
                fileKey: fileKey || 'file',
                fileName: fileUrl.substr(fileUrl.lastIndexOf('/') + 1),
                mimeType: 'image/*',
                headers: { Authorization: 'Bearer ' + token },
                params: this.mutilservice.filterEffectParam(params),
            };
            var filePath = Object(__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["x" /* normalizeURL */])(fileUrl);
            var fileTransfer = this.transfer.create();
            return fileTransfer
                .upload(filePath, this.appConfig.apiEndpoint + uploadUrl, options)
                .then(function (e) { return JSON.parse(e.response); });
        }
        else {
            return this.filePath.resolveNativePath(fileUrl).then(function (filePath) {
                var token = localStorage.getItem('_TOKEN_');
                var options = {
                    fileKey: fileKey || 'file',
                    fileName: filePath.substr(filePath.lastIndexOf('/') + 1),
                    mimeType: 'image/*',
                    headers: { Authorization: 'Bearer ' + token },
                    params: _this.mutilservice.filterEffectParam(params),
                };
                var fileTransfer = _this.transfer.create();
                return fileTransfer
                    .upload(filePath, _this.appConfig.apiEndpoint + uploadUrl, options)
                    .then(function (e) { return JSON.parse(e.response); });
            });
        }
    };
    PluginService.prototype.deleteDoc = function (docId) {
        return this.http.delete(this.deleteDocUrl + '?docIds=' + docId);
    };
    /**
     * 上传文件到服务器
     * @param fileUrl 本地文件路径
     * @param uploadUrl 上传服务端地址
     * @returns 远程文件的路径
     */
    PluginService.prototype.uploadDoc = function (fileUrl, uploadUrl, fileKey) {
        var _this = this;
        if (this.platform.is('ios')) {
            var token = localStorage.getItem('_TOKEN_');
            var options = {
                fileKey: fileKey || 'file',
                fileName: fileUrl.substr(fileUrl.lastIndexOf('/') + 1),
                mimeType: 'image/*',
                headers: { Authorization: 'Bearer ' + token },
            };
            var filePath = Object(__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["x" /* normalizeURL */])(fileUrl);
            var fileTransfer = this.transfer.create();
            return fileTransfer
                .upload(filePath, this.appConfig.apiEndpoint + uploadUrl, options)
                .then(function (e) { return JSON.parse(e.response); });
        }
        else {
            return this.filePath.resolveNativePath(fileUrl).then(function (filePath) {
                var token = localStorage.getItem('_TOKEN_');
                var options = {
                    fileKey: fileKey || 'file',
                    fileName: filePath.substr(filePath.lastIndexOf('/') + 1),
                    headers: { Authorization: 'Bearer ' + token },
                };
                if (_this.platform.is('ios')) {
                    filePath = Object(__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["x" /* normalizeURL */])(filePath);
                }
                var fileTransfer = _this.transfer.create();
                return fileTransfer
                    .upload(decodeURI(filePath), _this.appConfig.apiEndpoint + uploadUrl, options)
                    .then(function (e) { return JSON.parse(e.response); });
            });
        }
    };
    PluginService.prototype.downloadFile = function (downloadUrl, docName, params) {
        var _this = this;
        var token = localStorage.getItem('_TOKEN_');
        var options = {
            headers: { Authorization: 'Bearer ' + token },
            params: this.mutilservice.filterEffectParam(params),
        };
        var fileTransfer = this.transfer.create();
        fileTransfer.onProgress(function (progressEvent) {
            if (progressEvent.lengthComputable) {
                // 下载过程会一直打印，完成的时候会显示 1
                console.log(progressEvent.loaded / progressEvent.total);
            }
        });
        var savePath = '';
        if (this.platform.is('ios')) {
            savePath = this.file.dataDirectory; // documentsDirectory
            fileTransfer
                .download(encodeURI(downloadUrl), savePath + docName, true, options)
                .then(function (entry) {
                console.log(entry.toURL());
                var alertSuccess = _this.alertCtrl.create({
                    title: "\u63D0\u793A",
                    subTitle: "\u6587\u4EF6\u4E0B\u8F7D\u5B8C\u6210",
                    buttons: ['确认'],
                });
                alertSuccess.present();
            }, function (err) {
                console.log(err);
            })
                .catch(function (err) {
                console.log(err);
            });
        }
        else {
            savePath = this.file.externalRootDirectory + 'com.cie.nems/files/';
            fileTransfer
                .download(encodeURI(downloadUrl), savePath + docName, true, options)
                .then(function (entry) {
                console.log(entry.toURL());
                var alertSuccess = _this.alertCtrl.create({
                    title: "\u63D0\u793A",
                    subTitle: "\u6587\u4EF6\u5DF2\u4FDD\u5B58\u5230/com.cie.nems/files",
                    buttons: ['确认'],
                });
                alertSuccess.present();
            }, function (err) {
                console.log(err);
            })
                .catch(function (err) {
                console.log(err);
            });
        }
        // fileTransfer
        //     .download(
        //         encodeURI(this.downloadUrl + '?docId=' + docId),
        //         this.file.externalApplicationStorageDirectory + 'files/' + docName,
        //         true,
        //         options
        //     )
    };
    PluginService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Injectable"])(),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_7__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [Object, __WEBPACK_IMPORTED_MODULE_1__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_transfer__["a" /* FileTransfer */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_file__["a" /* File */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["v" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_path__["a" /* FilePath */],
            __WEBPACK_IMPORTED_MODULE_8__auth_http_service__["a" /* AuthHttpService */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_app_version__["a" /* AppVersion */],
            __WEBPACK_IMPORTED_MODULE_0__Mutil_service__["a" /* MutilService */]])
    ], PluginService);
    return PluginService;
}());

//# sourceMappingURL=plugin.service.js.map

/***/ }),

/***/ 68:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonTextareaPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the CommonTextareaPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonTextareaPage = /** @class */ (function () {
    function CommonTextareaPage(navCtrl, navParams, alertCtrl, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.alertCtrl = alertCtrl;
        this.viewCtrl = viewCtrl;
    }
    CommonTextareaPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonTextareaPage');
        this.title = this.navParams.get('title');
        this.value = this.navParams.get('value');
    };
    CommonTextareaPage.prototype.ok = function () {
        if (!this.value) {
            var alert_1 = this.alertCtrl.create({
                title: '警告',
                subTitle: "\u8BF7\u8F93\u5165" + this.title,
                buttons: ['确认']
            });
            alert_1.present();
            return;
        }
        this.viewCtrl.dismiss({ value: this.value, type: 'ok' });
    };
    CommonTextareaPage.prototype.clear = function () {
        this.viewCtrl.dismiss({ value: '', type: 'clear' });
    };
    CommonTextareaPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonTextareaPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-common-textarea',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-textarea/common-textarea.html"*/'<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <h6>{{title}}</h6>\n  <ion-textarea [(ngModel)]="value"></ion-textarea>\n  <ion-grid>\n    <ion-row>\n      <ion-col col-6>\n        <button\n          ion-button\n          small\n          color="light"\n          class="clear-btn"\n          (tap)="clear()"\n        >\n          清除\n        </button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button small class="ok-btn" (tap)="ok()">确定</button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-textarea/common-textarea.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], CommonTextareaPage);
    return CommonTextareaPage;
}());

//# sourceMappingURL=common-textarea.js.map

/***/ }),

/***/ 74:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonInputPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the CommonInputPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonInputPage = /** @class */ (function () {
    function CommonInputPage(navCtrl, navParams, viewCtrl, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.alertCtrl = alertCtrl;
        this.type = 'text';
    }
    CommonInputPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonInputPage');
        this.title = this.navParams.get('title');
        this.value = this.navParams.get('value');
        this.type = this.navParams.get('type');
    };
    CommonInputPage.prototype.ok = function () {
        if (!this.value) {
            var alert_1 = this.alertCtrl.create({
                title: '警告',
                subTitle: this.type == 'number' ? this.title + "\u8BF7\u586B\u5199\u6570\u5B57" : "\u8BF7\u8F93\u5165" + this.title,
                buttons: ['确认'],
            });
            alert_1.present();
            return;
        }
        if (this.type == 'number') {
            this.viewCtrl.dismiss({ value: this.value, type: 'ok' });
        }
        else {
            this.viewCtrl.dismiss({ value: this.value, type: 'ok' });
        }
    };
    CommonInputPage.prototype.clear = function () {
        this.viewCtrl.dismiss({ value: null, type: 'clear' });
    };
    CommonInputPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonInputPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-common-input',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-input/common-input.html"*/'<!--\n  Generated template for the ParallelCapacityPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n\n<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <h6>{{title}}</h6>\n  <ion-input [type]="type" [(ngModel)]="value"></ion-input>\n  <ion-grid>\n    <ion-row>\n      <ion-col col-6>\n        <button\n          ion-button\n          small\n          color="light"\n          class="clear-btn"\n          (tap)="clear()"\n        >\n          清除\n        </button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button small class="ok-btn" (tap)="ok()">确定</button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-input/common-input.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["b" /* AlertController */]])
    ], CommonInputPage);
    return CommonInputPage;
}());

//# sourceMappingURL=common-input.js.map

/***/ }),

/***/ 75:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BackendService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var BackendService = /** @class */ (function () {
    function BackendService(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        this.stationPointsUrl =
            this.appConfig.apiEndpoint + '/api/points/stationPoints';
        this.stationRankingUrl =
            this.appConfig.apiEndpoint + '/api/station/ranking';
        this.sampleStationsUrl =
            this.appConfig.apiEndpoint + '/api/station/getSampleStations';
        this.singleStationRankingUrl =
            this.appConfig.apiEndpoint + '/api/device/ranking';
        this.groupInfoUrl =
            this.appConfig.apiEndpoint + '/api/v1/monitor/group';
        this.groupStationInfoUrl =
            this.appConfig.apiEndpoint + '/api/v1/monitor/station';
        /******************************************** 设备信息 **********************************************************************************************/
        this.deviceInfoUrl =
            this.appConfig.apiEndpoint + '/api/device/deviceInfo';
        this.devicePointsUrl = this.appConfig.apiEndpoint + '/api/points';
        this.propsUrl = this.appConfig.apiEndpoint + '/api/m/v2/props';
    }
    BackendService.prototype.getGroupInfo = function () {
        var _this = this;
        if (this.groupInfoResp) {
            return Promise.resolve(this.groupInfoResp);
        }
        return this.http
            .get(this.groupInfoUrl)
            .toPromise()
            .then(function (e) {
            if (e) {
                _this.groupInfoResp = e;
            }
            return e;
        });
    };
    /**
     * 集团电站监视数据
     * @param cateId 时间周期
     * 小时：A-ENERGY-HOUR日：A-ENERGY-DAY月：A-ENERGY-MON年：A-ENERGY-YEAR
     * @param beginTime 开始时间
     * @param endTime 结束时间
     */
    BackendService.prototype.stationPointsGroup = function (cateId, beginTime, endTime) {
        var url = this.stationPointsUrl +
            '?&cateIds=' +
            cateId +
            '&beginTime=' +
            beginTime.toUTCString() +
            '&endTime=' +
            endTime.toUTCString();
        return this.http.get(url);
    };
    /**
     * 发电站排行
     * @param cateId 时间周期
     * 小时：A-ENERGY-HOUR日：A-ENERGY-DAY月：A-ENERGY-MON年：A-ENERGY-YEAR
     */
    BackendService.prototype.stationRanking = function (cateId, sort, page) {
        if (!page) {
            page = 0;
        }
        // let url = this.stationRankingUrl+"?cateIds="+cateId+"&page=0&size="+((page+1) * 1000)+"&sort=" + sort;
        var url = this.stationRankingUrl +
            '?cateIds=' +
            cateId +
            '&page=' +
            page +
            '&size=1000&sort=' +
            sort;
        return this.http.get(url);
    };
    /********************************************* 电站信息 ****************************************************************************************/
    /**
     * 监视页面顶部的信息 单电站
     */
    BackendService.prototype.getGroupStationInfoUrl = function (stationId) {
        return this.http.get(this.groupStationInfoUrl + '?stationId=' + stationId);
    };
    /**
     * 单个电站监视数据
     * @param stationId 电站ID
     * @param cateId 时间周期
     * 小时：A-ENERGY-HOUR日：A-ENERGY-DAY月：A-ENERGY-MON年：A-ENERGY-YEAR
     * @param beginTime 开始时间
     * @param endTime 结束时间
     * @param 升序 倒序
     */
    BackendService.prototype.stationPointsSingle = function (stationId, cateId, beginTime, endTime) {
        var url = this.stationPointsUrl +
            '?&stationIds=' +
            stationId +
            '&cateIds=' +
            cateId +
            '&beginTime=' +
            beginTime.toUTCString() +
            '&endTime=' +
            endTime.toUTCString();
        return this.http.get(url);
    };
    /**
     * 单电站时排名
     * @param stationId
     * @param cateIds
     * @param sort
     */
    BackendService.prototype.getSingleStationRankingUrl = function (stationId, cateIds, sort, page) {
        if (!page) {
            page = 0;
        }
        // let url = this.singleStationRankingUrl+"?stationId="+stationId+"&cateIds="+cateIds+"&page=0&size="+((page+1) * 1000)+"&deviceType=NB&sort=" + sort;
        var url = this.singleStationRankingUrl +
            '?stationId=' +
            stationId +
            '&cateIds=' +
            cateIds +
            '&page=' +
            page +
            '&size=1000&deviceType=NB&sort=' +
            sort;
        return this.http.get(url);
    };
    /******************************************** 设备信息 **********************************************************************************************/
    /**
     * 设备头部信息
     */
    BackendService.prototype.getDeviceInfo = function (deviceId) {
        var url = this.deviceInfoUrl + '?&deviceId=' + deviceId;
        return this.http.get(url);
    };
    /**
     * 设备发电趋势
     * @param deviceId
     * @param cateIds
     * @param beginTime
     * @param endTime
     */
    BackendService.prototype.getDevicePointsUrl = function (deviceId, cateIds, beginTime, endTime) {
        var url = this.devicePointsUrl +
            '?&objType=02&getHisValues=true&objIds=' +
            deviceId +
            '&cateIds=' +
            cateIds +
            '&beginTime=' +
            beginTime.toUTCString() +
            '&endTime=' +
            endTime.toUTCString();
        return this.http.get(url);
    };
    /**
     * 测点列表
     */
    BackendService.prototype.getDevicePointsListUrl = function (deviceId) {
        var url = this.devicePointsUrl +
            '?&objType=02&getCurrValue=true&getHisValues=false&objIds=' +
            deviceId;
        return this.http.get(url);
    };
    /**
     * 电站列表
     */
    BackendService.prototype.getSampleStations = function () {
        return this.http.get(this.sampleStationsUrl);
    };
    /**
     * getProps
     */
    BackendService.prototype.getProps = function (params) {
        var url = this.propsUrl;
        var paramsArray = [];
        Object.keys(params).forEach(function (key) { return params[key] && paramsArray.push(key + "=" + params[key]); });
        if (url.search(/\?/) === -1) {
            url += "?" + paramsArray.join('&');
        }
        else {
            url += "&" + paramsArray.join('&');
        }
        return this.http.get(url);
    };
    BackendService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_0__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object])
    ], BackendService);
    return BackendService;
}());

//# sourceMappingURL=backend.service.js.map

/***/ }),

/***/ 775:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SelectedEquipmentListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





/**
 * Generated class for the SelectedEquipmentListPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var SelectedEquipmentListPage = /** @class */ (function () {
    function SelectedEquipmentListPage(navCtrl, navParams, viewCtrl, events) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.events = events;
    }
    SelectedEquipmentListPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad SelectedEquipmentListPage');
        this.selectedItem = this.navParams.get('selectedItem');
        this.editable = this.navParams.get('editable') === false ? false : true;
    };
    SelectedEquipmentListPage.prototype.deleteSelectedItem = function (id) {
        if (!this.editable) {
            return;
        }
        var index = __WEBPACK_IMPORTED_MODULE_2_lodash__["findIndex"](this.selectedItem, function (o) { return o.deviceId == id; });
        this.selectedItem.splice(index, 1);
        this.events.publish('item', __spreadArrays(this.selectedItem));
        if (this.selectedItem.length === 0) {
            this.viewCtrl.dismiss(null);
        }
    };
    SelectedEquipmentListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-selected-equipment-list',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-equipment/selected-equipment-list/selected-equipment-list.html"*/'<ion-content>\n  <div class="selected-equipment" *ngFor="let equipment of selectedItem">\n    <div class="left-img">\n      <!-- <img src="assets/imgs/list/device.png" class="alarm-img" /> -->\n      <ion-icon name="device" class="alarm-img"></ion-icon>\n    </div>\n    <div class="notice">\n      <div class="notice-title">{{equipment.displayName}}</div>\n    </div>\n    <div class="delete-icon" (click)="deleteSelectedItem(equipment.deviceId)">\n      <!-- <img src="assets/imgs/buttons/delete.png" /> -->\n      <ion-icon name="delete-grey"></ion-icon>\n    </div>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-equipment/selected-equipment-list/selected-equipment-list.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["f" /* Events */]])
    ], SelectedEquipmentListPage);
    return SelectedEquipmentListPage;
}());

//# sourceMappingURL=selected-equipment-list.js.map

/***/ }),

/***/ 776:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SelectedUserListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var SelectedUserListPage = /** @class */ (function () {
    function SelectedUserListPage(navCtrl, navParams, events, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.events = events;
        this.viewCtrl = viewCtrl;
    }
    SelectedUserListPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad SelectedUserListPage');
        this.selectedItem = this.navParams.get('selectedItem');
        this.editable = this.navParams.get('editable') === false ? false : true;
    };
    SelectedUserListPage.prototype.deleteSelectedItem = function (userId) {
        if (!this.editable) {
            return;
        }
        var index = __WEBPACK_IMPORTED_MODULE_2_lodash__["findIndex"](this.selectedItem, function (o) { return o.userId == userId; });
        this.selectedItem.splice(index, 1);
        this.events.publish('user:item', __spreadArrays(this.selectedItem));
        if (this.selectedItem.length === 0) {
            this.viewCtrl.dismiss(null);
        }
    };
    SelectedUserListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-selected-user-list',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-user/selected-user-list/selected-user-list.html"*/'<ion-content>\n  <ion-list>\n    <ion-item *ngFor="let user of selectedItem" no-lines>\n      <ion-avatar item-start>\n        <img src="assets/imgs/avatar/{{user.icon||\'00.png\'}}" />\n      </ion-avatar>\n      <ion-label>\n        <h2>{{user.realName}}</h2>\n        <p><span>{{user.userName}}</span>|<span>{{user.deptName}}</span></p>\n      </ion-label>\n      <div\n        item-content\n        class="delete-icon"\n        (click)="deleteSelectedItem(user.userId)"\n      >\n        <!-- <img src="assets/imgs/buttons/delete-grey.png" /> -->\n        <ion-icon name="delete-grey"></ion-icon>\n      </div>\n    </ion-item> </ion-list\n></ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-user/selected-user-list/selected-user-list.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], SelectedUserListPage);
    return SelectedUserListPage;
}());

//# sourceMappingURL=selected-user-list.js.map

/***/ }),

/***/ 777:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InspectionsDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_location_plugin__ = __webpack_require__(339);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_photo_viewer__ = __webpack_require__(98);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_image_picker__ = __webpack_require__(114);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_util_plugin_service__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_defes_servicer__ = __webpack_require__(172);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_inspections_service__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__inspection_device_inspection_device__ = __webpack_require__(778);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_geolocation__ = __webpack_require__(246);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19_gcoord__ = __webpack_require__(779);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__util_modal_common_dispatch_common_dispatch__ = __webpack_require__(232);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__ionic_native_camera__ = __webpack_require__(96);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__ionic_native_file_picker__ = __webpack_require__(97);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__work_flow_chart__ = __webpack_require__(1248);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__util_modal_common_check_common_check__ = __webpack_require__(128);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



























/**
 * Generated class for the InspectionsDetailsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InspectionsDetailsPage = /** @class */ (function () {
    function InspectionsDetailsPage(navCtrl, navParams, fb, modalCtrl, actionSheetCtrl, inspectionsprovider, defesservice, alertCtrl, geolocation, mutilservice, camera, pluginservice, platform, imagePicker, filePicker, photoViewer, nativeservice, appConfig) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.modalCtrl = modalCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.inspectionsprovider = inspectionsprovider;
        this.defesservice = defesservice;
        this.alertCtrl = alertCtrl;
        this.geolocation = geolocation;
        this.mutilservice = mutilservice;
        this.camera = camera;
        this.pluginservice = pluginservice;
        this.platform = platform;
        this.imagePicker = imagePicker;
        this.filePicker = filePicker;
        this.photoViewer = photoViewer;
        this.nativeservice = nativeservice;
        this.appConfig = appConfig;
        this.buttons = [];
        this.toggleBaseInfo = true;
        this.toggleInspectionTracks = false;
        this.toggleInspectionCheck = false;
        this.toggleWorkFlow = false;
        this.toggleWorkflowLogs = false;
        this.toggleBackEndData = false;
        this.toggleComment = false;
        this.buttonToggle = false;
        this.ccUsers = [];
        this.commentsList = [];
        this.firstLoadTracks = true;
        this.icons = {
            '01': new BMap.Icon('assets/imgs/map/map-mask-01.svg', new BMap.Size(32, 32), {
                anchor: new BMap.Size(32, 32),
            }),
            '02': new BMap.Icon('assets/imgs/map/map-mask-02.svg', new BMap.Size(32, 32), {
                anchor: new BMap.Size(16, 32),
            }),
            '03': new BMap.Icon('assets/imgs/map/map-mask-03.svg', new BMap.Size(32, 32), {
                anchor: new BMap.Size(16, 32),
            }),
            '04': new BMap.Icon('assets/imgs/map/map-mask-04.svg', new BMap.Size(32, 32), {
                anchor: new BMap.Size(16, 32),
            }),
        };
        this.objToggle = [];
        this.canLeave = false;
        this.objPermission = 2;
        this.centerPoint = [];
        this.initForm();
        this.fileBasePath = this.appConfig.fileEndpoint;
    }
    InspectionsDetailsPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad InspectionsDetailsPage');
        this.inspectionId = this.navParams.get('inspectionId') || 0;
        this.inspectionType = this.navParams.get('inspectionType');
        this.getInspectionsDetails();
        this.getPosition().then(function (res) {
            if (res && res.longitude && res.latitude) {
                _this.centerPoint = [+res.longitude, +res.latitude];
            }
        });
    };
    InspectionsDetailsPage.prototype.ionViewWillEnter = function () {
        var _this = this;
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            var equipment = equipmentList[0];
            this.navParams.data.equipmentList = null;
            var params = {
                deviceId: equipment.deviceId,
                inspectionType: this.inspectionType,
                objGroup: this.groupId,
                objId: 0,
            };
            this.inspectionsprovider.getObj(params).subscribe(function (res) {
                _this.canLeave = true;
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_17__inspection_device_inspection_device__["a" /* InspectionDevicePage */], {
                    objInfo: __assign(__assign({}, res), { inspectionId: _this.inspectionId }),
                    isTracking: true,
                    objPermission: _this.objPermission,
                });
            });
        }
        var isTracking = this.navParams.get('isTracking');
        if (isTracking === true) {
            this.navParams.data.isTracking = null;
            this.canLeave = false;
        }
        var objInfo = this.navParams.get('objInfo');
        if (objInfo) {
            this.navParams.data.objInfo = null;
            var data_1 = objInfo.params;
            var control_1 = this.form.get('objGroups');
            var objGroupValue_1 = control_1.value;
            if (objInfo.type === 'add') {
                objGroupValue_1.map(function (item, index) {
                    if (item.groupId === data_1.objGroup) {
                        var objControl = control_1.controls[index].get('objs');
                        objControl.push(_this.initObj());
                        objGroupValue_1[index].objs.push(data_1);
                        _this.form.get('objGroups').patchValue(objGroupValue_1);
                    }
                });
            }
            else if (objInfo.type === 'edit') {
                objGroupValue_1.map(function (item, index) {
                    if (item.groupId === data_1.objGroup) {
                        item.objs.map(function (objItem, i) {
                            if (objItem.objId === data_1.objId) {
                                objGroupValue_1[index].objs[i] = data_1;
                                _this.form.get('objGroups').patchValue(objGroupValue_1);
                            }
                        });
                    }
                });
            }
            else if (objInfo.type === 'delete') {
                objGroupValue_1.map(function (item, index) {
                    if (item.groupId === data_1.objGroup) {
                        __WEBPACK_IMPORTED_MODULE_15_lodash__["remove"](objGroupValue_1[index].objs, function (o) {
                            return o.objId === data_1.objId;
                        });
                        var objControl = control_1.controls[index].get('objs');
                        objControl.removeAt(__WEBPACK_IMPORTED_MODULE_15_lodash__["findIndex"](objGroupValue_1[index].objs, function (o) {
                            return o.objId === data_1.objId;
                        }));
                    }
                });
            }
            this.objGroups = [];
            this.form.value.objGroups.map(function (item) {
                item.objs.map(function (i) {
                    _this.objGroups.push({
                        objId: i.objId,
                        latitude: +i.latitude,
                        longitude: +i.longitude,
                        inspectionStatus: i.inspectionStatus,
                        deviceNo: i.deviceNo,
                        groupType: item.groupType,
                    });
                });
            });
            this.showTracks(true);
        }
    };
    InspectionsDetailsPage.prototype.ionViewWillLeave = function () {
        if (this.isTracking === true && !this.canLeave) {
            clearInterval(this.trackInterval);
            this.trackInterval = null;
        }
    };
    InspectionsDetailsPage.prototype.initForm = function () {
        this.form = this.fb.group({
            inspectionId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            inspectionCode: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            stationId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            inspectionType: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            inspectionTypeText: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            dispatcher: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            dispatcherName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            responsiblePerson: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            responsiblePersonName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            players: this.fb.array([]),
            playersText: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            planStartTime: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            planEndTime: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            startTime: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            endTime: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            workHours: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            objGroups: this.fb.array([]),
            power: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            dayEnergy: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            // 抢修单检查
            checkStatus: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            checkStatusText: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            checker: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            checkerName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            checkTime: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            checkMemo: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            // 工作流程
            workflow: this.fb.group({
                nodes: this.fb.array([]),
                links: this.fb.array([]),
            }),
            // 流程日志
            workflowLogs: this.fb.array([]),
            //抄送
            ccUsers: this.fb.array([]),
        });
    };
    InspectionsDetailsPage.prototype.getInspectionsDetails = function () {
        var _this = this;
        this.inspectionsprovider
            .getInspectionsDetails(this.inspectionId, {
            inspectionType: this.inspectionType,
        })
            .subscribe(function (res) {
            _this.fillValue(res);
        });
    };
    InspectionsDetailsPage.prototype.fillValue = function (res) {
        var _this = this;
        this.title = res.title;
        var values = res.inspection;
        if (res.fields) {
            this.fields = res.fields;
        }
        if (res.buttons) {
            this.buttons = res.buttons;
        }
        this.orderId = values.orderId;
        if (values.inspectionId) {
            this.inspectionId = values.inspectionId;
        }
        // 同组巡检人员
        if (values.players !== null) {
            var control_2 = this.form.get('players');
            while (control_2.length) {
                control_2.removeAt(control_2.length - 1);
            }
            var playersText = values.players.map(function (item) {
                control_2.push(_this.initPlayers());
                return item.userName;
            });
            values.playersText = playersText.join(',');
        }
        else {
            values.players = [];
        }
        // 计划开始时间
        values.planStartTime = __WEBPACK_IMPORTED_MODULE_15_lodash__["isNumber"](values.planStartTime)
            ? __WEBPACK_IMPORTED_MODULE_16_moment__(values.planStartTime).format()
            : values.planStartTime;
        // 计划结束时间
        values.planEndTime = __WEBPACK_IMPORTED_MODULE_15_lodash__["isNumber"](values.planEndTime)
            ? __WEBPACK_IMPORTED_MODULE_16_moment__(values.planEndTime).format()
            : values.planEndTime;
        // 实际开始时间
        values.startTime = __WEBPACK_IMPORTED_MODULE_15_lodash__["isNumber"](values.startTime)
            ? __WEBPACK_IMPORTED_MODULE_16_moment__(values.startTime).format()
            : values.startTime;
        // 实际结束时间
        values.endTime = __WEBPACK_IMPORTED_MODULE_15_lodash__["isNumber"](values.endTime)
            ? __WEBPACK_IMPORTED_MODULE_16_moment__(values.endTime).format()
            : values.endTime;
        // 检查时间
        values.checkTime = __WEBPACK_IMPORTED_MODULE_15_lodash__["isNumber"](values.checkTime)
            ? __WEBPACK_IMPORTED_MODULE_16_moment__(values.checkTime).format()
            : values.checkTime;
        if (values.objGroups !== null) {
            var control_3 = this.form.get('objGroups');
            while (control_3.length) {
                control_3.removeAt(control_3.length - 1);
            }
            this.objGroups = [];
            values.objGroups.map(function (item, index) {
                _this.objToggle.push({ show: false });
                control_3.push(_this.initObjGroups());
                var objControl = control_3.controls[index].get('objs');
                while (objControl.length) {
                    objControl.removeAt(objControl.length - 1);
                }
                item.objs.map(function (i) {
                    objControl.push(_this.initObj());
                    _this.objGroups.push({
                        objId: i.objId,
                        latitude: +i.latitude,
                        longitude: +i.longitude,
                        inspectionStatus: i.inspectionStatus,
                        deviceNo: i.deviceNo,
                        groupType: item.groupType,
                    });
                });
            });
        }
        else {
            values.objGroups = [];
            this.objGroups = [];
        }
        //工作流程
        if (values.workflow !== null) {
            var workflow = values.workflow;
            var _loop_1 = function (key) {
                if (workflow.hasOwnProperty(key)) {
                    var element = workflow[key];
                    if (key === 'nodes') {
                        this_1.nodes = element;
                        var control_4 = this_1.form.get('workflow').controls[key];
                        while (control_4.length) {
                            control_4.removeAt(control_4.length - 1);
                        }
                        element.map(function (item) {
                            control_4.push(_this.initNodes());
                        });
                    }
                    else if (key === 'links') {
                        this_1.links = element;
                        var control_5 = this_1.form.get('workflow').controls[key];
                        while (control_5.length) {
                            control_5.removeAt(control_5.length - 1);
                        }
                        element.map(function (item) {
                            control_5.push(_this.initLinks());
                        });
                    }
                }
            };
            var this_1 = this;
            for (var key in workflow) {
                _loop_1(key);
            }
            this.options = Object(__WEBPACK_IMPORTED_MODULE_24__work_flow_chart__["a" /* buildWorkFlow */])(this.links, this.nodes);
        }
        else {
            values.workflow = {};
        }
        // 流程日志
        if (values.workflowLogs) {
            var control_6 = this.form.get('workflowLogs');
            while (control_6.length) {
                control_6.removeAt(control_6.length - 1);
            }
            values.workflowLogs.map(function (item) {
                control_6.push(_this.initWorkflowLogs());
            });
        }
        else {
            values.workflowLogs = [];
        }
        // 抄送
        if (values.ccUsers !== null) {
            this.ccUsers = values.ccUsers;
            var control_7 = this.form.get('ccUsers');
            while (control_7.length) {
                control_7.removeAt(control_7.length - 1);
            }
            values.ccUsers.map(function (item) {
                control_7.push(_this.initCcUser());
            });
        }
        else {
            this.ccUsers = [];
            values.ccUsers = [];
        }
        if (values.comments !== null) {
            this.commentsList = values.comments;
        }
        else {
            this.commentsList = [];
            values.comments = [];
        }
        this.ccPermission = res.ccPermission;
        this.objPermission = res.objPermission;
        this.form.patchValue(values);
        if (values.inspectionStatus === '02') {
            this.saveTracks();
        }
        else {
            if (this.trackInterval) {
                clearInterval(this.trackInterval);
                this.trackInterval = null;
            }
        }
    };
    // 电站选择
    InspectionsDetailsPage.prototype.selectStation = function (event) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_11__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.form.patchValue({
                    stationId: e.id,
                    stationName: e.title,
                });
            }
        });
        modal.present({ keyboardClose: true });
    };
    InspectionsDetailsPage.prototype.openSheetModal = function (type, typeText) {
        var _this = this;
        var options = this.fields[type]['props'];
        var buttons = options.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    var _a;
                    _this.form.patchValue((_a = {},
                        _a[type] = item.first,
                        _a[typeText] = item.second,
                        _a));
                },
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    // 人员选择器
    InspectionsDetailsPage.prototype.selectUser = function (id, name) {
        var _this = this;
        var value = this.form.value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_12__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
            selectedItem: [{ userId: value[id], userName: value[name] }],
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {},
                        _a[id] = data.value[0] ? data.value[0].userId : null,
                        _a[name] = data.value[0] ? data.value[0].realName : null,
                        _a));
                }
                else {
                    _this.form.patchValue((_b = {},
                        _b[id] = null,
                        _b[name] = null,
                        _b));
                }
            }
        });
        modal.present();
    };
    // 同组巡检人员
    InspectionsDetailsPage.prototype.selectplayers = function (event, editable) {
        var _this = this;
        var value = this.form.value;
        var selectedItem = [];
        value.players.map(function (item) {
            selectedItem.push({
                userId: item.userId,
                realName: item.userName,
                userName: item.account,
                icon: item.userIcon,
                deptName: item.deptName,
            });
        });
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_12__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: false,
            selectedItem: selectedItem,
            editable: editable,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    var control_8 = _this.form.get('players');
                    while (control_8.length) {
                        control_8.removeAt(control_8.length - 1);
                    }
                    var players_1 = [];
                    var playersText = data.value.map(function (item) {
                        players_1.push({
                            userId: item.userId,
                            userName: item.realName,
                            account: item.userName,
                            userIcon: item.icon,
                            deptName: item.deptName,
                        });
                        control_8.push(_this.initPlayers());
                        return item.realName;
                    });
                    _this.form.get('players').patchValue(players_1);
                    _this.form.get('playersText').patchValue(playersText.join(','));
                }
            }
            else if (data && data.length === 0) {
                _this.form.patchValue({
                    playersText: '',
                    players: [],
                });
            }
        });
        modal.present();
    };
    InspectionsDetailsPage.prototype.initPlayers = function () {
        return new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            account: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            userIcon: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            deptName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
        });
    };
    InspectionsDetailsPage.prototype.openInputModal = function (type, editable, inputType) {
        var _this = this;
        if (inputType === void 0) { inputType = 'text'; }
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_13__util_modal_common_input_common_input__["a" /* CommonInputPage */], {
            value: this.form.value[type],
            title: this.fields[type]['name'],
            type: inputType,
        }, {
            cssClass: 'commonModal commonInputModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            var _a;
            if (data) {
                _this.form.patchValue((_a = {},
                    _a[type] = data.value,
                    _a));
            }
        });
        modal.present();
    };
    // 多行文本内容
    InspectionsDetailsPage.prototype.addTextarea = function (title, key, editable) {
        var _this = this;
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_14__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: title,
            value: this.form.value[key],
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {}, _a[key] = data.value, _a));
                }
                else if (data.type == 'clear') {
                    _this.form.patchValue((_b = {}, _b[key] = null, _b));
                }
            }
        });
        modal.present();
    };
    InspectionsDetailsPage.prototype.ccUserEvent = function (data) {
        var _this = this;
        var control = this.form.get('ccUsers');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initCcUser());
        });
        this.form.patchValue({
            ccUsers: data,
        });
    };
    InspectionsDetailsPage.prototype.initCcUser = function () {
        return new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
        });
    };
    InspectionsDetailsPage.prototype.buttonFunction = function (button) {
        var _this = this;
        // 表单检查
        if (button.formCheck === '1') {
            this.defesservice.checkNullable(button.targetNodeId).subscribe(function (res) {
                var _loop_2 = function (key) {
                    if (res.hasOwnProperty(key)) {
                        if (key.indexOf('.') === -1) {
                            var element = res[key];
                            if (_this.form.value[key] === null && !element) {
                                var alert_1 = _this.alertCtrl.create({
                                    title: '警告',
                                    subTitle: _this.fields[key].name + '字段不能为空',
                                    buttons: ['关闭'],
                                });
                                alert_1.present();
                                return { value: void 0 };
                            }
                        }
                        else {
                            var aNewKey_1 = key.split('.');
                            var element = res[key];
                            if (_this.form.value[aNewKey_1[0]].length > 0 && !element) {
                                var flag_1 = true;
                                _this.form.value[aNewKey_1[0]].every(function (item) {
                                    if (item[aNewKey_1[1]] === null) {
                                        var alert_2 = _this.alertCtrl.create({
                                            title: '警告',
                                            subTitle: _this.fields[aNewKey_1[0]].name + '字段不能为空',
                                            buttons: ['关闭'],
                                        });
                                        alert_2.present();
                                        flag_1 = false;
                                        return false;
                                    }
                                });
                                if (!flag_1) {
                                    return { value: void 0 };
                                }
                            }
                        }
                    }
                };
                for (var key in res) {
                    var state_1 = _loop_2(key);
                    if (typeof state_1 === "object")
                        return state_1.value;
                }
                _this.switchFunction(button);
            });
        }
        else {
            this.switchFunction(button);
        }
    };
    InspectionsDetailsPage.prototype.buttonFlex = function (length) {
        switch (length) {
            case 1:
                return 'col-12';
            case 2:
                return 'col-6';
            case 3:
                return 'col-4';
            case 4:
                return 'col-3';
            default:
                break;
        }
    };
    InspectionsDetailsPage.prototype.switchFunction = function (button) {
        switch (button.buttonAction) {
            // 派单
            case 'create':
                this.createFunction(button);
                break;
            // 开始
            case 'start':
                this.startFunction(button);
                break;
            // 驳回
            case 'reject':
                this.rejectFunction(button);
                break;
            // 完成
            case 'finish':
                this.finishFunction(button);
                break;
            // 检查
            case '$check$':
                this.checkFunction();
                break;
            case 'delete':
                this.deleteFunction();
                break;
            case '$remind$':
                this.remindFunction();
                break;
        }
    };
    InspectionsDetailsPage.prototype.createFunction = function (button) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_20__util_modal_common_dispatch_common_dispatch__["a" /* CommonDispatchPage */], {}, {
            cssClass: 'commonModal commonDispatchModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    if (!_this.formatISOTime()) {
                        return;
                    }
                    var params = {
                        title: _this.title,
                        inspection: __assign(__assign({}, _this.form.value), { inspectionId: null, inspectionCode: null, objGroups: null }),
                        action: button,
                        nextUserIds: data.value.nextUserIds,
                        memo: data.value.memo,
                    };
                    _this.inspectionsprovider
                        .inspectionsAction(params)
                        .subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.navCtrl.getPrevious().data.freshPage = true;
                        _this.navCtrl.pop();
                    });
                }
            }
        });
        modal.present();
    };
    InspectionsDetailsPage.prototype.startFunction = function (button) {
        var _this = this;
        if (this.inspectionId) {
            this.form.patchValue({
                startTime: __WEBPACK_IMPORTED_MODULE_16_moment__().format(),
            });
            if (!this.formatISOTime()) {
                return;
            }
            var params = {
                title: this.title,
                inspection: __assign(__assign({}, this.form.value), { objGroups: null }),
                action: button,
                nextUserIds: null,
                memo: null,
            };
            this.inspectionsprovider
                .inspectionsUpdateAction(params)
                .subscribe(function (res) {
                _this.fillValue(res);
                _this.mutilservice.popToastView('巡检开始');
            });
        }
        else {
            this.form.patchValue({
                startTime: __WEBPACK_IMPORTED_MODULE_16_moment__().format(),
            });
            if (!this.formatISOTime()) {
                return;
            }
            var params = {
                title: this.title,
                inspection: __assign(__assign({}, this.form.value), { objGroups: null }),
                action: button,
                nextUserIds: null,
                memo: null,
            };
            this.inspectionsprovider.inspectionsAction(params).subscribe(function (res) {
                _this.fillValue(res);
                _this.mutilservice.popToastView('巡检开始');
            });
        }
    };
    InspectionsDetailsPage.prototype.saveTracks = function () {
        var _this = this;
        this.isTracking = true;
        var tracks = [];
        this.getPosition().then(function (track) {
            tracks.push(track);
        });
        this.trackInterval = setInterval(function () {
            _this.getPosition().then(function (track) {
                tracks.push(track);
                if (tracks.length === 3) {
                    _this.inspectionsprovider
                        .saveTracks(_this.inspectionId, tracks)
                        .subscribe(function (res) {
                        _this.showTracks(true);
                    });
                    tracks = [];
                }
            });
        }, 1000 * 60);
    };
    // 拒绝
    InspectionsDetailsPage.prototype.rejectFunction = function (button) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_14__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: '说明',
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    if (!_this.formatISOTime()) {
                        return;
                    }
                    var params = {
                        title: _this.title,
                        inspection: __assign(__assign({}, _this.form.value), { objGroups: null }),
                        action: button,
                        nextUserIds: null,
                        memo: data.value,
                    };
                    _this.inspectionsprovider
                        .inspectionsUpdateAction(params)
                        .subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.navCtrl.getPrevious().data.freshPage = true;
                        _this.navCtrl.pop();
                    });
                }
            }
        });
        modal.present();
    };
    InspectionsDetailsPage.prototype.finishFunction = function (button) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定巡检已完成么？完成后将无法再增加或修改巡检内容',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        if (!_this.formatISOTime()) {
                            return;
                        }
                        var params = {
                            title: _this.title,
                            inspection: __assign(__assign({}, _this.form.value), { objGroups: null }),
                            action: button,
                            nextUserIds: null,
                            memo: null,
                        };
                        _this.inspectionsprovider
                            .inspectionsAction(params)
                            .subscribe(function (res) {
                            _this.mutilservice.popToastView('提交成功');
                            _this.navCtrl.getPrevious().data.freshPage = true;
                            _this.navCtrl.pop();
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    // 检查操作
    InspectionsDetailsPage.prototype.checkFunction = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_25__util_modal_common_check_common_check__["a" /* CommonCheckPage */], {
            options: this.fields['checkStatus'].props,
        }, {
            cssClass: 'commonModal commonCheckModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    var params = {
                        inspectionId: _this.inspectionId,
                        checkStatus: data.value.checkStatus,
                        checkMemo: data.value.checkMemo,
                    };
                    _this.inspectionsprovider.check(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        res.checkTime = __WEBPACK_IMPORTED_MODULE_15_lodash__["isNumber"](res.checkTime)
                            ? __WEBPACK_IMPORTED_MODULE_16_moment__(res.checkTime).format('YYYY-MM-DD HH:mm')
                            : res.checkTime;
                        _this.form.patchValue(res);
                    });
                }
            }
        });
        modal.present();
    };
    // 删除
    InspectionsDetailsPage.prototype.deleteFunction = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除该巡检单吗?',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        var inspectionId = _this.inspectionId;
                        _this.inspectionsprovider.check(inspectionId).subscribe(function (res) {
                            _this.mutilservice.popToastView('删除成功');
                            _this.navCtrl.getPrevious().data.freshPage = true;
                            _this.navCtrl.pop();
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    // 催单
    InspectionsDetailsPage.prototype.remindFunction = function () {
        var _this = this;
        this.inspectionsprovider.remind(this.inspectionId).subscribe(function (res) {
            _this.mutilservice.popToastView('已发送催单消息');
        });
    };
    InspectionsDetailsPage.prototype.getPosition = function () {
        if (this.platform.is('android') || this.platform.is('ios')) {
            return this.nativeservice
                .getUserLocation()
                .then(function (data) {
                var point = Object(__WEBPACK_IMPORTED_MODULE_19_gcoord__["d" /* transform */])([+data.lng, +data.lat], // 经纬度坐标
                __WEBPACK_IMPORTED_MODULE_19_gcoord__["b" /* GCJ02 */], // 当前坐标系
                __WEBPACK_IMPORTED_MODULE_19_gcoord__["a" /* BD09 */] // 目标坐标系
                );
                return {
                    latitude: point[1],
                    longitude: point[0],
                    trackTime: __WEBPACK_IMPORTED_MODULE_16_moment__().valueOf(),
                };
            })
                .catch(function (error) {
                console.log('Error getting location', error);
            });
        }
        else {
            return this.geolocation
                .getCurrentPosition({
                enableHighAccuracy: true,
            })
                .then(function (data) {
                var point = Object(__WEBPACK_IMPORTED_MODULE_19_gcoord__["d" /* transform */])([+data.coords.longitude, +data.coords.latitude], // 经纬度坐标
                __WEBPACK_IMPORTED_MODULE_19_gcoord__["c" /* WGS84 */], // 当前坐标系
                __WEBPACK_IMPORTED_MODULE_19_gcoord__["a" /* BD09 */] // 目标坐标系
                );
                return {
                    latitude: point[1],
                    longitude: point[0],
                    trackTime: data.timestamp,
                };
            })
                .catch(function (error) {
                console.log('Error getting location', error);
            });
        }
    };
    InspectionsDetailsPage.prototype.showMoreButtons = function () {
        this.buttonToggle = !this.buttonToggle;
    };
    InspectionsDetailsPage.prototype.showTracks = function (reload) {
        var _this = this;
        if (!reload) {
            this.toggleInspectionTracks = !this.toggleInspectionTracks;
        }
        if (!this.inspectionId) {
            return;
        }
        if (this.toggleInspectionTracks || reload) {
            this.firstLoadTracks = false;
            this.inspectionsprovider.getTracks(this.inspectionId).subscribe(function (res) {
                var tracks = res;
                // 创建地图实例
                _this.map = new BMap.Map(_this.mapElement.nativeElement);
                var top_right_navigation = new BMap.NavigationControl({
                    anchor: 1,
                    type: 3,
                });
                _this.map.addControl(top_right_navigation);
                _this.map.enableDragging();
                _this.map.enableScrollWheelZoom(true);
                var points = [];
                for (var i in tracks) {
                    points.push(new BMap.Point(+tracks[i].longitude, +tracks[i].latitude));
                }
                // 创建点坐标, 设置中心点坐标和地图级别
                if (__WEBPACK_IMPORTED_MODULE_15_lodash__["isEmpty"](points)) {
                    var centerPoint = void 0;
                    if (_this.centerPoint.length > 0) {
                        centerPoint = new BMap.Point(_this.centerPoint[0], _this.centerPoint[1]);
                    }
                    else {
                        centerPoint = new BMap.Point(116.404, 39.915);
                    }
                    _this.map.centerAndZoom(centerPoint, 15);
                }
                else {
                    var viewPort = _this.map.getViewport(points);
                    _this.map.centerAndZoom(viewPort.center, viewPort.zoom);
                }
                var polyline = new BMap.Polyline(points, {
                    strokeColor: '#37A2DA',
                    strokeWeight: 2,
                    strokeOpacity: 1,
                });
                polyline.disableMassClear();
                // 绘制折线
                _this.map.addOverlay(polyline);
                // 设置最佳视野
                _this.map.setViewport(points);
                _this.createLocationControl(_this.map);
                var objs = _this.objGroups;
                var _loop_3 = function (i) {
                    if (objs[i].groupType === 'device') {
                        marker = new BMap.Marker(new BMap.Point(+objs[i].longitude, +objs[i].latitude), {
                            title: objs[i].deviceNo,
                            icon: _this.icons[objs[i].inspectionStatus],
                        });
                        marker.addEventListener('click', function () {
                            console.log(objs[i].objId);
                        });
                        _this.map.addOverlay(marker);
                    }
                };
                var marker;
                for (var i in objs) {
                    _loop_3(i);
                }
            });
        }
    };
    // 地图定位
    InspectionsDetailsPage.prototype.createLocationControl = function (map) {
        var _this = this;
        function MapTypeControl() {
            // 设置默认停靠位置和偏移量
            this.defaultAnchor = 3;
            this.defaultOffset = new BMap.Size(10, 10);
        }
        MapTypeControl.prototype = new BMap.Control();
        MapTypeControl.prototype.initialize = function () {
            // 创建一个DOM元素
            var div = document.createElement('div'); // 添加文字说明
            div.style.width = '34px';
            div.style.height = '34px';
            div.style.background = 'rgba(255,255,255,0.8)';
            div.style.textAlign = 'center';
            div.style.borderRadius = '3px';
            div.style.border = '1px solid rgba(255,255,255,0.5);';
            var min = document.createElement('img');
            min.src = 'assets/imgs/map/location.png';
            min.style.width = '25px';
            min.style.marginTop = '5px';
            min.style.marginTop = '5px';
            min.onclick = function () {
                _this.getPosition().then(function (data) {
                    map.panTo(new BMap.Point(+data.longitude, +data.latitude));
                });
            };
            div.appendChild(min);
            map.getContainer().appendChild(div); // 将DOM元素返回
            return div;
        };
        var myMapTypeCtrl = new MapTypeControl(); // 添加到地图当中
        map.addControl(myMapTypeCtrl);
    };
    InspectionsDetailsPage.prototype.initObjGroups = function () {
        return new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["c" /* FormGroup */]({
            groupId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            groupName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            groupType: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            deviceType: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            objs: this.fb.array([]),
        });
    };
    InspectionsDetailsPage.prototype.initObj = function () {
        return new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["c" /* FormGroup */]({
            objId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            inspectionId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            standardId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            objGroup: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            psrId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            deviceId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            latitude: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            longitude: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            inspectionStatus: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            updateTime: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            updater: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            deviceNo: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            deviceName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            inspectionStatusText: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            docId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            uri: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            items: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            status: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
        });
    };
    InspectionsDetailsPage.prototype.getObjGroups = function (form) {
        return form.controls.objGroups.controls;
    };
    InspectionsDetailsPage.prototype.getObjs = function (form) {
        return form.controls.objs.controls;
    };
    InspectionsDetailsPage.prototype.addObj = function (objGroup, index) {
        var _this = this;
        if (!this.form.value.stationId) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        if (!this.form.value.inspectionId) {
            this.mutilservice.popToastView('请先开始巡检');
            return;
        }
        if (objGroup.value.groupType === 'pic') {
            this.groupId = objGroup.value.groupId;
            this.getPosition().then(function (data) {
                _this.uploadPicParams = {
                    inspectionId: _this.inspectionId,
                    objGroup: _this.groupId,
                    latitude: +data.latitude,
                    longitude: +data.longitude,
                };
                _this.chooseType(index);
            });
        }
        else {
            this.canLeave = true;
            this.groupId = objGroup.value.groupId;
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_1__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
                stationId: this.form.value.stationId,
                deviceType: objGroup.value.deviceType,
                isSingle: true,
                isTracking: this.isTracking,
            });
        }
    };
    InspectionsDetailsPage.prototype.editObj = function (objId) {
        var _this = this;
        this.inspectionsprovider.getObj({ objId: objId }).subscribe(function (res) {
            _this.canLeave = true;
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_17__inspection_device_inspection_device__["a" /* InspectionDevicePage */], {
                objInfo: __assign({}, res),
                isTracking: true,
                objPermission: _this.objPermission,
            });
        });
    };
    InspectionsDetailsPage.prototype.chooseType = function (index) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: [
                {
                    text: '拍照',
                    handler: function () {
                        _this.takePhoto(index);
                    },
                },
                {
                    text: '从相册选择',
                    handler: function () {
                        _this.upload(index);
                    },
                },
                {
                    text: '取消',
                    handler: function () {
                        console.log('cancel');
                    },
                },
            ],
            cssClass: 'commonSheet',
        });
        actionSheet.present().then(function (value) {
            return value;
        });
    };
    InspectionsDetailsPage.prototype.takePhoto = function (index) {
        var _this = this;
        var options = {
            quality: 100,
            allowEdit: false,
            targetWidth: 200,
            targetHeight: 200,
            saveToPhotoAlbum: false,
        };
        this.camera.getPicture(options).then(function (image) {
            _this.pluginservice
                .uploadPic(image, '/api/m/v2/inspections/pic', 'file', _this.uploadPicParams)
                .then(function (res) {
                _this.savePic(res.data, index);
            });
        }, function (error) {
            console.log('Error: ' + error);
        });
    };
    InspectionsDetailsPage.prototype.upload = function (index) {
        var _this = this;
        // if (this.platform.is('android')) {
        this.imagePicker
            .getPictures({ maximumImagesCount: 1, width: 200, height: 200 })
            .then(function (results) {
            _this.pluginservice
                .uploadPic(results[0], '/api/m/v2/inspections/pic', 'file', _this.uploadPicParams)
                .then(function (res) {
                _this.savePic(res.data, index);
            });
        }, function (err) { });
        // } else {
        //   this.filePicker
        //     .pickFile()
        //     .then((uri) => {
        //       this.pluginservice
        //         .uploadPic(
        //           uri,
        //           '/api/m/v2/inspections/pic',
        //           'file',
        //           this.uploadPicParams
        //         )
        //         .then((res: any) => {
        //           this.savePic(res, index);
        //         });
        //     })
        //     .catch((err) => console.log('Error', err));
        // }
    };
    InspectionsDetailsPage.prototype.savePic = function (data, index) {
        var _this = this;
        var objGroupscontrol = this.form.get('objGroups');
        var control = objGroupscontrol.controls[index].get('objs');
        var objItems = this.form.value.objGroups[index].objs || [];
        objItems.push(data);
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        objItems.map(function () {
            control.push(_this.initObj());
        });
        control.patchValue(objItems);
        this.mutilservice.popToastView('上传成功');
    };
    InspectionsDetailsPage.prototype.deletePic = function (objId, index) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除该项吗？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.inspectionsprovider.deleteObj(objId).subscribe(function (res) {
                            var objGroupscontrol = _this.form.get('objGroups');
                            var control = objGroupscontrol.controls[index].get('objs');
                            var objItems = _this.form.value.objGroups[index].objs || [];
                            __WEBPACK_IMPORTED_MODULE_15_lodash__["remove"](objItems, function (o) {
                                return o.objId === objId;
                            });
                            while (control.length) {
                                control.removeAt(control.length - 1);
                            }
                            objItems.map(function () {
                                control.push(_this.initObj());
                            });
                            control.patchValue(objItems);
                            _this.mutilservice.popToastView('删除成功');
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    InspectionsDetailsPage.prototype.viewPic = function (url) {
        this.photoViewer.show(url);
    };
    InspectionsDetailsPage.prototype.initNodes = function () {
        return new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["c" /* FormGroup */]({
            statusText: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            name: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            nodeType: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            user: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            status: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
        });
    };
    InspectionsDetailsPage.prototype.initLinks = function () {
        return new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["c" /* FormGroup */]({
            sourceId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            targetId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            source: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            target: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
        });
    };
    InspectionsDetailsPage.prototype.initWorkflowLogs = function () {
        return new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["c" /* FormGroup */]({
            logId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            action: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            executeTime: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            flowId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            nextNodeId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            nextNodeName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            nodeId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            preNodeId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            preNodeName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            userId: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_9__angular_forms__["b" /* FormControl */](null),
        });
    };
    InspectionsDetailsPage.prototype.getWorkflowLogs = function (form) {
        return form.controls.workflowLogs.controls;
    };
    InspectionsDetailsPage.prototype.formatISOTime = function () {
        if (this.form.value.planStartTime) {
            if (this.form.value.planStartTime.indexOf('Z') != -1) {
                this.form.patchValue({
                    planStartTime: __WEBPACK_IMPORTED_MODULE_16_moment__(this.form.value.planStartTime.substr(0, this.form.value.planStartTime.length - 1)).format(),
                });
            }
        }
        if (this.form.value.planEndTime) {
            if (this.form.value.planEndTime.indexOf('Z') != -1) {
                this.form.patchValue({
                    planEndTime: __WEBPACK_IMPORTED_MODULE_16_moment__(this.form.value.planEndTime.substr(0, this.form.value.planEndTime.length - 1)).format(),
                });
            }
        }
        if (this.form.value.planStartTime && this.form.value.planEndTime) {
            if (__WEBPACK_IMPORTED_MODULE_16_moment__(this.form.value.planEndTime).valueOf() -
                __WEBPACK_IMPORTED_MODULE_16_moment__(this.form.value.planStartTime).valueOf() <
                0) {
                this.mutilservice.popToastView('计划开始时间要小于计划结束时间！');
                this.form.patchValue({
                    planEndTime: null,
                });
                return false;
            }
        }
        if (this.form.value.startTime) {
            if (this.form.value.startTime.indexOf('Z') != -1) {
                this.form.patchValue({
                    startTime: __WEBPACK_IMPORTED_MODULE_16_moment__(this.form.value.startTime.substr(0, this.form.value.startTime.length - 1)).format(),
                });
            }
        }
        if (this.form.value.endTime) {
            if (this.form.value.endTime.indexOf('Z') != -1) {
                this.form.patchValue({
                    endTime: __WEBPACK_IMPORTED_MODULE_16_moment__(this.form.value.endTime.substr(0, this.form.value.endTime.length - 1)).format(),
                });
            }
        }
        if (this.form.value.startTime && this.form.value.endTime) {
            if (__WEBPACK_IMPORTED_MODULE_16_moment__(this.form.value.endTime).valueOf() -
                __WEBPACK_IMPORTED_MODULE_16_moment__(this.form.value.startTime).valueOf() <
                0) {
                this.mutilservice.popToastView('实际结束时间要大于实际开始时间！');
                this.form.patchValue({
                    endTime: null,
                });
                return false;
            }
        }
        return true;
    };
    InspectionsDetailsPage.prototype.changeDate = function (start, end) {
        var values = this.form.value;
        if (values[start] && values[end]) {
            if (__WEBPACK_IMPORTED_MODULE_16_moment__(values[end]).valueOf() - __WEBPACK_IMPORTED_MODULE_16_moment__(values[start]).valueOf() < 0) {
                this.mutilservice.popToastView(this.fields[end].name + "\u8981\u5927\u4E8E" + this.fields[start].name);
                return;
            }
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_10__angular_core__["ViewChild"])('container'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_10__angular_core__["ElementRef"])
    ], InspectionsDetailsPage.prototype, "mapElement", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_10__angular_core__["ViewChild"])('echart'),
        __metadata("design:type", Object)
    ], InspectionsDetailsPage.prototype, "echart", void 0);
    InspectionsDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_10__angular_core__["Component"])({
            selector: 'page-inspections-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections-details/inspections-details.html"*/'<!--\n  Generated template for the InspectionsDetailsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{title}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content\n  [ngClass]="{\'h0\': buttons&&buttons.length==0,\'h44\': buttons&&buttons.length>4&&buttonToggle==false,\'h88\': buttons&&buttons.length<=4&&buttons&&buttons.length>0,\'h180\':buttons&&buttons.length>4&&buttons&&buttons.length<=8&&buttonToggle==true,\'h240\':buttons&&buttons.length>8&&buttons&&buttons.length<=12&&buttonToggle==true,\'h300\':buttons&&buttons.length>12&&buttons&&buttons.length<=16&&buttonToggle==true}"\n>\n  <form [formGroup]="form">\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleBaseInfo = !toggleBaseInfo">\n        基础信息\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleBaseInfo?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 基础信息 -->\n      <ng-container *ngIf="toggleBaseInfo">\n        <!--电站名称  -->\n        <ion-item\n          *ngIf="fields?.stationId.show"\n          [attr.detail-push]="fields?.stationId.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.stationId.nullable">*</b\n            >{{fields?.stationId.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectStation($event)"\n            formControlName="stationName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="stationName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 巡检类型 -->\n        <ion-item\n          *ngIf="fields?.inspectionType.show"\n          [attr.detail-push]="fields?.inspectionType.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.inspectionType.nullable">*</b\n            >{{fields?.inspectionType.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.inspectionType.editable"\n            (tap)="openSheetModal(\'inspectionType\',\'inspectionTypeText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="inspectionTypeText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.inspectionType.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="inspectionTypeText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 派单人 -->\n        <ion-item\n          *ngIf="fields?.dispatcher.show"\n          [attr.detail-push]="fields?.dispatcher.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.dispatcher.nullable">*</b\n            >{{fields?.dispatcher.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.dispatcher.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'dispatcher\',\'dispatcherName\')"\n            formControlName="dispatcherName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.dispatcher.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="dispatcherName"\n          ></ion-input>\n        </ion-item>\n        <!-- 巡检负责人 -->\n        <ion-item\n          *ngIf="fields?.responsiblePerson.show"\n          [attr.detail-push]="fields?.responsiblePerson.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.responsiblePerson.nullable">*</b\n            >{{fields?.responsiblePerson.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.responsiblePerson.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'responsiblePerson\',\'responsiblePersonName\')"\n            formControlName="responsiblePersonName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.responsiblePerson.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="responsiblePersonName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 同组巡检人员 -->\n        <ion-item\n          *ngIf="fields?.players.show"\n          [attr.detail-push]="fields?.players.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.players.nullable">*</b\n            >{{fields?.players.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectplayers($event,fields?.players.editable)"\n            formControlName="playersText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 计划开始时间 -->\n        <ion-item\n          *ngIf="fields?.planStartTime.show"\n          [attr.detail-push]="fields?.planStartTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.planStartTime.nullable">*</b\n            >{{fields?.planStartTime.name}}：</ion-label\n          >\n          <ion-datetime\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="planStartTime"\n            [disabled]="fields?.planStartTime.editable?false:true"\n            (ionChange)="changeDate(\'planStartTime\',\'planEndTime\')"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 计划结束时间 -->\n        <ion-item\n          *ngIf="fields?.planEndTime.show"\n          [attr.detail-push]="fields?.planEndTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.planEndTime.nullable">*</b\n            >{{fields?.planEndTime.name}}：</ion-label\n          >\n          <ion-datetime\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="planEndTime"\n            [disabled]="fields?.planEndTime.editable?false:true"\n            (ionChange)="changeDate(\'planStartTime\',\'planEndTime\')"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 实际开始时间 -->\n        <ion-item\n          *ngIf="fields?.startTime.show"\n          [attr.detail-push]="fields?.startTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.startTime.nullable">*</b\n            >{{fields?.startTime.name}}：</ion-label\n          >\n          <ion-datetime\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n            [disabled]="fields?.startTime.editable?false:true"\n            (ionChange)="changeDate(\'startTime\',\'endTime\')"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 实际结束时间 -->\n        <ion-item\n          *ngIf="fields?.endTime.show"\n          [attr.detail-push]="fields?.endTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.endTime.nullable">*</b\n            >{{fields?.endTime.name}}：</ion-label\n          >\n          <ion-datetime\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n            [disabled]="fields?.endTime.editable?false:true"\n            (ionChange)="changeDate(\'startTime\',\'endTime\')"\n          ></ion-datetime>\n        </ion-item>\n\n        <!-- 工作量 -->\n        <ion-item\n          *ngIf="fields?.workHours.show"\n          [attr.detail-push]="fields?.workHours.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.workHours.nullable">*</b\n            >{{fields?.workHours.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'workHours\',fields?.workHours.editable, \'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="workHours"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <ion-list class="new-list" *ngIf="inspectionType===\'22\'">\n      <ion-list-header no-lines (tap)="toggleBackEndData = !toggleBackEndData">\n        后台数据\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleBackEndData?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleBackEndData">\n        <!-- 当前功率(kW) -->\n        <ion-item\n          *ngIf="fields?.power.show"\n          [attr.detail-push]="fields?.power.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.power.nullable">*</b\n            >{{fields?.power.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.power.editable"\n            (tap)="openInputModal(\'power\',fields?.power.editable,\'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="power"\n          ></ion-input>\n        </ion-item>\n        <!-- 日发电量(kW) -->\n        <ion-item\n          *ngIf="fields?.dayEnergy.show"\n          [attr.detail-push]="fields?.dayEnergy.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.dayEnergy.nullable">*</b\n            >{{fields?.dayEnergy.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.dayEnergy.editable"\n            (tap)="openInputModal(\'dayEnergy\',fields?.dayEnergy.editable,\'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="dayEnergy"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 巡检项 -->\n    <ng-container formArrayName="objGroups">\n      <ion-list\n        class="new-list"\n        *ngFor="let objGroup of getObjGroups(form);let i = index"\n        [formGroupName]="i"\n      >\n        <ion-list-header\n          no-lines\n          (tap)="objToggle[i].show = !objToggle[i].show"\n        >\n          {{objGroup.value.groupName}}({{objGroup.value.objs.length}})\n          <button ion-button icon-only item-end clear type="button">\n            <ion-icon\n              name="{{objToggle[i]?.show?\'arrow-up\':\'arrow-down\'}}"\n            ></ion-icon>\n          </button>\n        </ion-list-header>\n        <ng-container *ngIf="objToggle[i]?.show">\n          <ng-container *ngIf="objGroup.value.groupType===\'pic\'">\n            <ion-grid class="obj-items" formArrayName="objs">\n              <ion-row\n                *ngFor="let obj of getObjs(objGroup); let j = index"\n                [formGroupName]="j"\n              >\n                <ion-col col-6 class="obj-img"\n                  ><img\n                    [src]="fileBasePath+obj.value.uri"\n                    (tap)="viewPic(fileBasePath+obj.value.uri)"\n                /></ion-col>\n                <ion-col col-6 class="obj-status">\n                  {{obj.value.updateTime | date:\'yyyy-MM-dd HH:mm\'}}\n                  <ion-icon\n                    name="md-remove-circle"\n                    style="margin-left: 10px"\n                    (tap)="deletePic(obj.value.objId,i)"\n                    *ngIf="objPermission!==0"\n                  ></ion-icon>\n                </ion-col>\n              </ion-row>\n              <ion-row class="add-row" *ngIf="objPermission===2">\n                <ion-col col-12>\n                  <ion-icon\n                    name="md-add-circle"\n                    (tap)="addObj(objGroup,i)"\n                  ></ion-icon>\n                </ion-col>\n              </ion-row>\n            </ion-grid>\n          </ng-container>\n          <ng-container *ngIf="objGroup.value.groupType!==\'pic\'">\n            <ion-grid class="obj-items" formArrayName="objs">\n              <ion-row\n                *ngFor="let obj of getObjs(objGroup); let j = index"\n                [formGroupName]="j"\n                (tap)="editObj(obj.value.objId)"\n              >\n                <ion-col col-6 class="obj-name">\n                  {{obj.value.deviceNo}}\n                </ion-col>\n                <ion-col col-6 class="obj-status">\n                  {{obj.value.inspectionStatusText}}\n                  <img\n                    src="assets/imgs/list/status-{{obj.value.inspectionStatus}}.png"\n                    alt=""\n                  />\n                  <ion-icon name="arrow-forward"></ion-icon>\n                </ion-col>\n              </ion-row>\n              <ion-row class="add-row" *ngIf="objPermission===2">\n                <ion-col col-12>\n                  <ion-icon\n                    name="md-add-circle"\n                    (tap)="addObj(objGroup,i)"\n                  ></ion-icon>\n                </ion-col>\n              </ion-row>\n            </ion-grid>\n          </ng-container>\n        </ng-container>\n      </ion-list>\n    </ng-container>\n\n    <!-- 巡检路线 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="showTracks()">\n        巡检路线\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleInspectionTracks?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <div\n        style="overflow: hidden"\n        [ngStyle]="{height: (inspectionId&&toggleInspectionTracks)?\'300px\':\'0\'}"\n      >\n        <div class="tracks-map" id="container" #container></div>\n      </div>\n    </ion-list>\n\n    <!-- 巡检单检查 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleInspectionCheck = !toggleInspectionCheck"\n      >\n        巡检单检查\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleInspectionCheck?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleInspectionCheck">\n        <!-- 检查结果 -->\n        <ion-item\n          *ngIf="fields?.checkStatus.show"\n          [attr.detail-push]="fields?.checkStatus.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkStatus.nullable">*</b\n            >{{fields?.checkStatus.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.checkStatus.editable"\n            (tap)="openSheetModal(\'checkStatus\',\'checkStatusText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.checkStatus.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查人 -->\n        <ion-item\n          *ngIf="fields?.checker.show"\n          [attr.detail-push]="fields?.checker.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checker.nullable">*</b\n            >{{fields?.checker.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkerName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查时间 -->\n        <ion-item\n          *ngIf="fields?.checkTime.show"\n          [attr.detail-push]="fields?.checkTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkTime.nullable">*</b\n            >{{fields?.checkTime.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkTime"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查备注 -->\n        <ion-item\n          *ngIf="fields?.checkMemo.show"\n          [attr.detail-push]="fields?.checkMemo.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkMemo.nullable">*</b\n            >{{fields?.checkMemo.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.checkMemo.name,\'checkMemo\',fields?.checkMemo.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkMemo"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 工作流程 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWorkFlow = !toggleWorkFlow">\n        工作流程\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWorkFlow?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWorkFlow">\n        <div echarts #echart [options]="options" class="workflow-chart"></div>\n      </ng-container>\n    </ion-list>\n\n    <!-- 流程日志 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleWorkflowLogs = !toggleWorkflowLogs"\n      >\n        流程日志\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWorkflowLogs?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWorkflowLogs">\n        <ng-container formArrayName="workflowLogs">\n          <ng-container\n            *ngFor="let item of getWorkflowLogs(form); let i = index"\n            [formGroupName]="i"\n          >\n            <div class="workflow-log">\n              <p>\n                {{item.value.executeTime | date:\'yyyy-MM-dd HH:mm\'}}\n                {{item.value.userName }}\n              </p>\n              <div class="action-content">{{item.value.action}}</div>\n            </div>\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 抄送 -->\n    <ion-list class="new-list">\n      <cc\n        [ccPermission]="ccPermission"\n        [users]="ccUsers"\n        (userEvent)="ccUserEvent($event)"\n      ></cc>\n    </ion-list>\n\n    <!-- 评论  -->\n    <ion-list class="new-list" *ngIf="inspectionId!==0">\n      <ion-list-header no-lines (tap)="toggleComment = !toggleComment">\n        评论\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleComment?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleComment">\n        <comment [orderId]="orderId" [commentsList]="commentsList"></comment>\n      </ng-container>\n    </ion-list>\n  </form>\n</ion-content>\n<ion-footer *ngIf="buttons.length>0">\n  <ion-toolbar class="footer-bar">\n    <ng-container *ngIf="buttons.length<=4">\n      <ion-grid>\n        <ion-row>\n          <ion-col\n            *ngFor="let button of buttons"\n            class="{{buttonFlex(buttons.length)}}"\n          >\n            <div class="btn">\n              <!-- <img\n                (tap)="buttonFunction(button)"\n                src="assets/imgs/buttons/{{button.buttonIcon}}"\n                alt=""\n              /> -->\n              <ion-icon\n                (tap)="buttonFunction(button)"\n                [name]="button.buttonIcon.split(\'.\')[0]"\n              ></ion-icon>\n              <p>{{button.buttonText}}</p>\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ng-container>\n    <ng-container *ngIf="buttons.length>4">\n      <button\n        ion-button\n        block\n        (tap)="showMoreButtons()"\n        *ngIf="buttonToggle==false"\n        style="background-color: #54a4e4"\n      >\n        <span style="margin-right: 5px">处理</span\n        ><ion-icon name="arrow-up"></ion-icon>\n      </button>\n      <ng-container *ngIf="buttonToggle==true">\n        <ion-grid>\n          <ion-row>\n            <ion-col *ngFor="let button of buttons" class="col-3">\n              <div class="btn">\n                <!-- <img\n                  (tap)="buttonFunction(button)"\n                  src="assets/imgs/buttons/{{button.buttonIcon}}"\n                  alt=""\n                /> -->\n                <ion-icon\n                  (tap)="buttonFunction(button)"\n                  [name]="button.buttonIcon.split(\'.\')[0]"\n                ></ion-icon>\n                <p>{{button.buttonText}}</p>\n              </div>\n            </ion-col>\n          </ion-row>\n          <ion-row>\n            <ion-col col-12 style="padding-top: 10px">\n              <ion-icon\n                name="arrow-down"\n                (tap)="showMoreButtons()"\n                style="font-size: 1.6em"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ng-container>\n    </ng-container>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections-details/inspections-details.html"*/,
        }),
        __param(17, Object(__WEBPACK_IMPORTED_MODULE_10__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_23__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_7_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_9__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_7_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_7_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_inspections_service__["a" /* InspectionsProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_defes_servicer__["a" /* DefesService */],
            __WEBPACK_IMPORTED_MODULE_7_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_18__ionic_native_geolocation__["a" /* Geolocation */],
            __WEBPACK_IMPORTED_MODULE_5__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_21__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_4__providers_util_plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_7_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_3__ionic_native_image_picker__["a" /* ImagePicker */],
            __WEBPACK_IMPORTED_MODULE_22__ionic_native_file_picker__["a" /* IOSFilePicker */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_photo_viewer__["a" /* PhotoViewer */],
            __WEBPACK_IMPORTED_MODULE_0__providers_location_plugin__["a" /* NativeService */], Object])
    ], InspectionsDetailsPage);
    return InspectionsDetailsPage;
}());

//# sourceMappingURL=inspections-details.js.map

/***/ }),

/***/ 778:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InspectionDevicePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ionic_native_photo_viewer__ = __webpack_require__(98);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_inspections_service__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_geolocation__ = __webpack_require__(246);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_gcoord__ = __webpack_require__(779);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_camera__ = __webpack_require__(96);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_util_plugin_service__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_image_picker__ = __webpack_require__(114);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_file_picker__ = __webpack_require__(97);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__defect_management_details_defect_management_details__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__providers_location_plugin__ = __webpack_require__(339);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__more_menu_more_menu__ = __webpack_require__(787);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__inspections_inspections__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__home_equipment_message_equipment_message__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__device_archive_device_archive__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__inventoris_inventoris__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__util_modal_common_radio_textarea_common_radio_textarea__ = __webpack_require__(343);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__inspection_item_his_inspection_item_his__ = __webpack_require__(793);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};

























/**
 * Generated class for the InspectionDevicePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InspectionDevicePage = /** @class */ (function () {
    function InspectionDevicePage(navCtrl, navParams, geolocation, actionSheetCtrl, modalCtrl, camera, pluginservice, platform, imagePicker, filePicker, mutilservice, alertCtrl, inspectionsprovider, nativeservice, photoViewer, popoverCtrl, appConfig) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.geolocation = geolocation;
        this.actionSheetCtrl = actionSheetCtrl;
        this.modalCtrl = modalCtrl;
        this.camera = camera;
        this.pluginservice = pluginservice;
        this.platform = platform;
        this.imagePicker = imagePicker;
        this.filePicker = filePicker;
        this.mutilservice = mutilservice;
        this.alertCtrl = alertCtrl;
        this.inspectionsprovider = inspectionsprovider;
        this.nativeservice = nativeservice;
        this.photoViewer = photoViewer;
        this.popoverCtrl = popoverCtrl;
        this.appConfig = appConfig;
        this.buttons = [];
        this.fileBasePath = this.appConfig.fileEndpoint;
    }
    InspectionDevicePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad InspectionDevicePage');
        this.objInfo = this.navParams.get('objInfo');
        this.isTracking = this.navParams.get('isTracking');
        this.objPermission = this.navParams.get('objPermission');
        this.itemGroups = this.objInfo.itemGroups;
        this.longitude = +this.objInfo.longitude;
        this.latitude = +this.objInfo.latitude;
        this.buttons = this.objInfo.objId
            ? [
                {
                    buttonIcon: 'wo-delete.png',
                    buttonText: '删除',
                    buttonAction: 'delete',
                },
                {
                    buttonIcon: 'wo-save.png',
                    buttonText: '保存',
                    buttonAction: 'save',
                },
                {
                    buttonIcon: 'wo-defect.png',
                    buttonText: '缺陷单',
                    buttonAction: 'defect',
                },
            ]
            : [
                {
                    buttonIcon: 'wo-save.png',
                    buttonText: '保存',
                    buttonAction: 'save',
                },
                {
                    buttonIcon: 'wo-defect.png',
                    buttonText: '缺陷单',
                    buttonAction: 'defect',
                },
            ];
        if (!this.objInfo.objId) {
            this.inspectionTime = __WEBPACK_IMPORTED_MODULE_14_moment__().format('YYYY-MM-DD HH:mm');
        }
        if (this.objInfo.updateTime) {
            this.inspectionTime = __WEBPACK_IMPORTED_MODULE_14_moment__(this.objInfo.updateTime).format('YYYY-MM-DD HH:mm');
        }
        this.setPosition();
    };
    InspectionDevicePage.prototype.ionViewWillLeave = function () {
        if (this.isTracking) {
            this.navCtrl.getPrevious().data.isTracking = true;
        }
    };
    InspectionDevicePage.prototype.setPosition = function () {
        var _this = this;
        if (this.longitude && this.latitude) {
            // 创建地图实例
            var map = new BMap.Map(this.mapElement.nativeElement);
            // 创建点坐标
            var point = new BMap.Point(this.longitude, this.latitude);
            // 初始化地图， 设置中心点坐标和地图级别
            map.centerAndZoom(point, 19);
            map.enableDragging();
            map.enableScrollWheelZoom(true);
            map.setViewport([point]);
            var marker = new BMap.Marker(new BMap.Point(this.longitude, this.latitude), {
                title: this.objInfo.deviceNo,
                icon: new BMap.Icon('assets/imgs/map/map-mask.svg', new BMap.Size(32, 32), {
                    anchor: new BMap.Size(16, 32),
                }),
            });
            map.addOverlay(marker);
            this.createLocationControl(map);
        }
        else {
            this.getPosition().then(function (data) {
                if (data) {
                    _this.longitude = +data.longitude;
                    _this.latitude = +data.latitude;
                    // 创建地图实例
                    var map = new BMap.Map(_this.mapElement.nativeElement);
                    // 创建点坐标
                    var point = new BMap.Point(_this.longitude, _this.latitude);
                    // 初始化地图， 设置中心点坐标和地图级别
                    map.centerAndZoom(point, 19);
                    map.enableDragging();
                    map.enableScrollWheelZoom(true);
                    map.setViewport([point]);
                    var marker = new BMap.Marker(new BMap.Point(_this.longitude, _this.latitude), {
                        title: _this.objInfo.deviceNo,
                        icon: new BMap.Icon('assets/imgs/map/map-mask.svg', new BMap.Size(32, 32), {
                            anchor: new BMap.Size(16, 32),
                        }),
                    });
                    map.addOverlay(marker);
                    _this.createLocationControl(map);
                }
            });
        }
    };
    InspectionDevicePage.prototype.getPosition = function () {
        if (this.platform.is('android')) {
            return this.nativeservice.getUserLocation().then(function (data) {
                var point = Object(__WEBPACK_IMPORTED_MODULE_6_gcoord__["d" /* transform */])([+data.lng, +data.lat], // 经纬度坐标
                __WEBPACK_IMPORTED_MODULE_6_gcoord__["b" /* GCJ02 */], // 当前坐标系
                __WEBPACK_IMPORTED_MODULE_6_gcoord__["a" /* BD09 */] // 目标坐标系
                );
                return {
                    latitude: point[1],
                    longitude: point[0],
                    trackTime: __WEBPACK_IMPORTED_MODULE_14_moment__().valueOf(),
                };
            });
        }
        else {
            return this.geolocation
                .getCurrentPosition()
                .then(function (data) {
                var point = Object(__WEBPACK_IMPORTED_MODULE_6_gcoord__["d" /* transform */])([+data.coords.longitude, +data.coords.latitude], // 经纬度坐标
                __WEBPACK_IMPORTED_MODULE_6_gcoord__["c" /* WGS84 */], // 当前坐标系
                __WEBPACK_IMPORTED_MODULE_6_gcoord__["a" /* BD09 */] // 目标坐标系
                );
                return {
                    latitude: point[1],
                    longitude: point[0],
                    trackTime: data.timestamp,
                };
            })
                .catch(function (error) {
                console.warn('ERROR(' + error.code + '): ' + error.message);
            });
        }
    };
    InspectionDevicePage.prototype.openRadioTextarea = function (item) {
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_23__util_modal_common_radio_textarea_common_radio_textarea__["a" /* CommonRadioTextareaPage */], {
            item: item,
        }, {
            cssClass: 'commonModal commonRadioTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    item.itemValue = data.value;
                    item.itemMemo = data.memo;
                }
            }
        });
        modal.present();
    };
    InspectionDevicePage.prototype.setItemValue = function (props, value) {
        if (props && props.length > 0) {
            var findedValue = __WEBPACK_IMPORTED_MODULE_15_lodash__["find"](props, function (o) { return o.first === value; });
            return findedValue && findedValue.second;
        }
        return null;
    };
    InspectionDevicePage.prototype.openSheetModal = function (item) {
        var _this = this;
        var buttons = [];
        console.log(this.objInfo);
        console.log(item);
        // if (item) {
        //   const options = item.props;
        //   buttons = options.map((option) => {
        //     return {
        //       text: option.second,
        //       handler: () => {
        //         item.itemValue = option.second;
        //       },
        //     };
        //   });
        // } else {
        var options = this.objInfo.status;
        if (options) {
            buttons = options.map(function (option) {
                return {
                    text: option.second,
                    handler: function () {
                        _this.objInfo.inspectionStatus = option.first;
                        _this.objInfo.inspectionStatusText = option.second;
                    },
                };
            });
        }
        // }
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    InspectionDevicePage.prototype.openInputModal = function (item, type) {
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_modal_common_input_common_input__["a" /* CommonInputPage */], {
            value: item.itemValue,
            title: item.itemName,
            type: type,
        }, {
            cssClass: 'commonModal commonInputModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                item.itemValue = data.value;
            }
        });
        modal.present();
    };
    InspectionDevicePage.prototype.openTextarea = function (item) {
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: item.itemName,
            value: item.itemValue,
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    item.itemValue = data.value;
                }
            }
        });
        modal.present();
    };
    InspectionDevicePage.prototype.chooseType = function (item) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: [
                {
                    text: '拍照',
                    handler: function () {
                        _this.takePhoto(item);
                    },
                },
                {
                    text: '从相册选择',
                    handler: function () {
                        _this.upload(item);
                    },
                },
                {
                    text: '取消',
                    handler: function () {
                        console.log('cancel');
                    },
                },
            ],
            cssClass: 'commonSheet',
        });
        actionSheet.present().then(function (value) {
            return value;
        });
    };
    InspectionDevicePage.prototype.takePhoto = function (item) {
        var _this = this;
        var options = {
            quality: 100,
            allowEdit: false,
            targetWidth: 200,
            targetHeight: 200,
            saveToPhotoAlbum: true,
        };
        this.camera.getPicture(options).then(function (image) {
            // this.avatar = image.slice(7);
            _this.pluginservice
                .uploadPic(image, '/api/m/v2/inspections/obj/files', 'file', {
                objItemId: item.objItemId,
            })
                .then(function (res) {
                item.docs = item.docs || [];
                item.docs.push(res.data);
                _this.mutilservice.popToastView('上传成功');
            });
        }, function (error) {
            console.log('Error: ' + error);
        });
    };
    InspectionDevicePage.prototype.upload = function (item) {
        var _this = this;
        // if (this.platform.is('android')) {
        this.imagePicker
            .getPictures({ maximumImagesCount: 1, width: 200, height: 200 })
            .then(function (results) {
            _this.pluginservice
                .uploadPic(results[0], '/api/m/v2/inspections/obj/files', 'file', {
                objItemId: item.objItemId,
            })
                .then(function (res) {
                item.docs = item.docs || [];
                item.docs.push(res.data);
                _this.mutilservice.popToastView('上传成功');
            });
        }, function (err) { });
        // } else {
        //   this.filePicker
        //     .pickFile()
        //     .then((uri) => {
        //       this.pluginservice
        //         .uploadPic(uri, '/api/m/v2/inspections/obj/file', 'file', {
        //           objItemId: item.objItemId,
        //         })
        //         .then((res: any) => {
        //           this.mutilservice.popToastView('上传成功');
        //           item.docs = item.docs || [];
        //           item.docs.push(res);
        //         });
        //     })
        //     .catch((err) => console.log('Error', err));
        // }
    };
    InspectionDevicePage.prototype.deleteDoc = function (item, docIds) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定删除该照片吗?',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.pluginservice.deleteDoc(docIds).subscribe(function (res) {
                            __WEBPACK_IMPORTED_MODULE_15_lodash__["remove"](item.docs, function (o) {
                                return o.docId === docIds;
                            });
                            console.log(item.docs);
                            _this.mutilservice.popToastView('删除成功');
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    InspectionDevicePage.prototype.buttonFunction = function (action) {
        if (action === 'delete') {
            this.deleteFunction();
        }
        else if (action === 'save') {
            this.saveFunction();
        }
        else if (action === 'defect') {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_16__defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */], {
                deviceId: this.objInfo.deviceId,
                parentOrderId: this.objInfo.inspectionId,
            });
        }
    };
    InspectionDevicePage.prototype.saveFunction = function () {
        var _this = this;
        for (var groupsKey in this.itemGroups) {
            if (this.itemGroups.hasOwnProperty(groupsKey)) {
                if (groupsKey === 'item') {
                    var itemGroup = this.itemGroups[groupsKey];
                    for (var key in itemGroup) {
                        if (itemGroup.hasOwnProperty(key)) {
                            var element = itemGroup[key];
                            if (!element.nullable) {
                                if (element.itemType !== '06' && !element.itemValue) {
                                    var alert_1 = this.alertCtrl.create({
                                        title: '警告',
                                        subTitle: element.itemName + '字段不能为空',
                                        buttons: ['关闭'],
                                    });
                                    alert_1.present();
                                    return;
                                }
                                else if (element.itemType === '06' &&
                                    element.docs &&
                                    element.docs.length === 0) {
                                    var alert_2 = this.alertCtrl.create({
                                        title: '警告',
                                        subTitle: element.itemName + '字段不能为空',
                                        buttons: ['关闭'],
                                    });
                                    alert_2.present();
                                    return;
                                }
                            }
                        }
                    }
                }
            }
        }
        console.log("inspectionStatusText:", this.inspectionStatusText);
        if (!this.inspectionStatusText) {
            var alert_3 = this.alertCtrl.create({
                title: '警告',
                subTitle: '巡检结果必填',
                buttons: ['关闭'],
            });
            alert_3.present();
            return;
        }
        this.objInfo.inspectionStatusText = this.inspectionStatusText;
        var params = __assign(__assign({}, this.objInfo), { longitude: this.longitude, latitude: this.latitude });
        if (params.itemGroups && params.itemGroups.length > 0) {
            params.itemGroups.map(function (itemGroup) {
                if (itemGroup.items && itemGroup.items.length > 0) {
                    itemGroup.items.map(function (item) {
                        item.props = null;
                    });
                }
            });
        }
        params.status = null;
        this.inspectionsprovider.saveObj(params).subscribe(function (res) {
            if (_this.objInfo.objId) {
                _this.navCtrl.getPrevious().data.objInfo = {
                    type: 'edit',
                    params: params,
                };
            }
            else {
                _this.navCtrl.getPrevious().data.objInfo = {
                    type: 'add',
                    params: __assign(__assign({}, params), { objId: res }),
                };
            }
            _this.navCtrl.pop();
        });
    };
    InspectionDevicePage.prototype.deleteFunction = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除此设备吗?',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.inspectionsprovider
                            .deleteObj(_this.objInfo.objId)
                            .subscribe(function (res) {
                            _this.mutilservice.popToastView('删除成功');
                            _this.navCtrl.getPrevious().data.objInfo = {
                                type: 'delete',
                                params: {
                                    objId: _this.objInfo.objId,
                                    objGroup: _this.objInfo.objGroup,
                                },
                            };
                            _this.navCtrl.pop();
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    InspectionDevicePage.prototype.buttonFlex = function (length) {
        switch (length) {
            case 1:
                return 'col-12';
            case 2:
                return 'col-6';
            case 3:
                return 'col-4';
            case 4:
                return 'col-3';
            default:
                break;
        }
    };
    // 地图类型切换
    InspectionDevicePage.prototype.createLocationControl = function (map) {
        var _this = this;
        function MapTypeControl() {
            // 设置默认停靠位置和偏移量
            this.defaultAnchor = 3;
            this.defaultOffset = new BMap.Size(10, 10);
        }
        MapTypeControl.prototype = new BMap.Control();
        MapTypeControl.prototype.initialize = function () {
            // 创建一个DOM元素
            var div = document.createElement('div'); // 添加文字说明
            div.style.width = '34px';
            div.style.height = '34px';
            div.style.background = 'rgba(255,255,255,0.8)';
            div.style.textAlign = 'center';
            div.style.borderRadius = '3px';
            div.style.border = '1px solid rgba(255,255,255,0.5);';
            var min = document.createElement('img');
            min.src = 'assets/imgs/map/location.png';
            min.style.width = '25px';
            min.style.marginTop = '5px';
            min.style.marginTop = '5px';
            min.onclick = function () {
                var confirm = _this.alertCtrl.create({
                    title: '提示',
                    message: '确定要重新定位设备位置吗?',
                    buttons: [
                        {
                            text: '取消',
                            handler: function () {
                                console.log('Disagree clicked');
                            },
                        },
                        {
                            text: '确定',
                            handler: function () {
                                map.clearOverlays();
                                _this.getPosition().then(function (data) {
                                    map.panTo(new BMap.Point(+data.longitude, +data.latitude));
                                    _this.longitude = data.longitude;
                                    _this.latitude = data.latitude;
                                    var marker = new BMap.Marker(new BMap.Point(_this.longitude, _this.latitude), {
                                        title: _this.objInfo.deviceNo,
                                        icon: new BMap.Icon('assets/imgs/map/map-mask.svg', new BMap.Size(32, 32), {
                                            anchor: new BMap.Size(16, 32),
                                        }),
                                    });
                                    map.addOverlay(marker);
                                });
                            },
                        },
                    ],
                });
                confirm.present();
            };
            div.appendChild(min);
            map.getContainer().appendChild(div); // 将DOM元素返回
            return div;
        };
        var myMapTypeCtrl = new MapTypeControl(); // 添加到地图当中
        map.addControl(myMapTypeCtrl);
    };
    InspectionDevicePage.prototype.viewPic = function (url) {
        this.photoViewer.show(url);
    };
    //新增巡检单
    InspectionDevicePage.prototype.openMoreMenu = function (myEvent) {
        var _this = this;
        this.popover = this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_18__more_menu_more_menu__["a" /* InspectionsMoreMenuPage */], {}, {
            cssClass: 'maintainsMenus',
            showBackdrop: true,
        });
        this.popover.onDidDismiss(function (res) {
            if (res) {
                switch (res.type) {
                    case 1:
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_19__inspections_inspections__["a" /* InspectionsPage */], {
                            type: 'view',
                            params: {
                                stationId: _this.objInfo.stationId,
                                stationName: _this.objInfo.stationName,
                                deviceName: _this.objInfo.deviceName,
                                deviceId: _this.objInfo.deviceId,
                                startTime: __WEBPACK_IMPORTED_MODULE_14_moment__().subtract(1, 'year').format('YYYY-MM-DD'),
                                endTime: __WEBPACK_IMPORTED_MODULE_14_moment__().format('YYYY-MM-DD'),
                            },
                        });
                        break;
                    case 2:
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_20__home_equipment_message_equipment_message__["a" /* EquipmentMessage */], {
                            deviceId: _this.objInfo.deviceId,
                        });
                        break;
                    case 3:
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_21__device_archive_device_archive__["a" /* DeviceArchivePage */], {
                            deviceId: _this.objInfo.deviceId,
                        });
                        break;
                    case 4:
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_22__inventoris_inventoris__["a" /* InventorisPage */], {
                            equipment: {
                                deviceId: _this.objInfo.deviceId,
                                deviceName: _this.objInfo.deviceName,
                            },
                            stationId: _this.objInfo.stationId,
                            stationName: _this.objInfo.stationName,
                        });
                        break;
                    default:
                        break;
                }
            }
        });
        this.popover.present({
            ev: myEvent,
        });
    };
    InspectionDevicePage.prototype.itemHis = function (event, item) {
        event.stopPropagation && event.stopPropagation();
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_24__inspection_item_his_inspection_item_his__["a" /* InspectionItemHisPage */], {
            pageTitle: item.itemGroup,
            psrId: this.objInfo.psrId,
            itemId: item.itemId,
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["ViewChild"])('container'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__angular_core__["ElementRef"])
    ], InspectionDevicePage.prototype, "mapElement", void 0);
    InspectionDevicePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'page-inspection-device',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections-details/inspection-device/inspection-device.html"*/'<!--\n  Generated template for the InspectionDevicePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{objInfo?.deviceNo}}</ion-title>\n    <ion-buttons end>\n      <button (click)="openMoreMenu($event)" class="title-icon">\n        <ion-icon name="md-more" class="device-list"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <ion-list class="new-list">\n    <div>\n      <div style="width: 100%; height: 300px" id="container" #container></div>\n    </div>\n  </ion-list>\n  <ion-list class="new-list" *ngFor="let itemGroup of itemGroups">\n    <ion-list-header no-lines> {{itemGroup.itemGroup}} </ion-list-header>\n    <ng-container *ngFor="let item of itemGroup.items">\n      <div class="div-item">\n        <ion-item *ngIf="item.itemType!==\'06\'" detail-push no-lines>\n          <ion-label>\n            <b *ngIf="!item?.nullable">*</b>{{item?.itemName}}：</ion-label\n          >\n          <ion-input\n            *ngIf="item.itemType===\'01\'&&item.itemValue===item.defaultValue"\n            type="text"\n            [readonly]="true"\n            text-right\n            [value]="setItemValue(item.props,item.itemValue)"\n            (tap)="openRadioTextarea(item)"\n          ></ion-input>\n          <div\n            *ngIf="item.itemType===\'01\'&&item.itemValue!==item.defaultValue"\n            item-end\n            style="width: 120px"\n            (tap)="openRadioTextarea(item)"\n          >\n            <h3 text-right style="color: #f00">\n              {{setItemValue(item.props,item.itemValue)}}\n            </h3>\n            <div text-right style="color: #f00" class="ell">\n              {{item.itemMemo}}\n            </div>\n          </div>\n\n          <ion-input\n            *ngIf="item.itemType===\'03\'"\n            type="text"\n            [readonly]="true"\n            text-right\n            [value]="item.itemValue"\n            (tap)="openInputModal(item.itemValue,item.itemName,\'text\')"\n          ></ion-input>\n\n          <ion-input\n            *ngIf="item.itemType===\'04\'"\n            type="text"\n            [readonly]="true"\n            text-right\n            [value]="item.itemValue"\n            (tap)="openInputModal(item,\'number\')"\n          ></ion-input>\n\n          <ion-input\n            *ngIf="item.itemType===\'05\'"\n            type="text"\n            [readonly]="true"\n            text-right\n            [value]="item.itemValue"\n            (tap)="openTextarea(item)"\n          ></ion-input>\n        </ion-item>\n        <span\n          *ngIf="item.itemType!==\'06\'"\n          class="item-his"\n          (click)="itemHis($event,item)"\n          ><ion-icon name="md-more"></ion-icon\n        ></span>\n      </div>\n      <ion-item\n        no-lines\n        *ngIf="item.itemType===\'06\'"\n        [ngStyle]="{\'margin-bottom\': (item.docs&&item.docs.length>0)?\'0\':\'1px\'}"\n      >\n        <ion-label>\n          <b *ngIf="!item?.nullable">*</b>{{item?.itemName}}：</ion-label\n        >\n        <button\n          *ngIf="item.itemType===\'06\'"\n          ion-button\n          icon-only\n          item-end\n          clear\n          type="button"\n          (tap)="chooseType(item)"\n        >\n          <ion-icon name="md-add"></ion-icon>\n        </button>\n      </ion-item>\n      <div\n        class="docs-container"\n        *ngIf="item.itemType===\'06\'&&item.docs&&item.docs.length>0"\n      >\n        <ion-grid>\n          <ion-row>\n            <ion-col col-3 *ngFor="let doc of item.docs; let i = index">\n              <div class="img-container">\n                <img\n                  [src]="fileBasePath+doc.uri"\n                  (tap)="viewPic(fileBasePath+doc.uri)"\n                />\n                <!-- <img\n                    (tap)="deleteDoc(item,doc.docId)"\n                    class="delete-doc"\n                    src="assets/imgs/buttons/delete-grey.png"\n                /> -->\n                <ion-icon\n                  (tap)="deleteDoc(item,doc.docId)"\n                  class="delete-doc"\n                  name="delete-grey"\n                ></ion-icon>\n              </div>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </div>\n    </ng-container>\n  </ion-list>\n  <ion-list class="new-list">\n    <ion-item no-lines>\n    <!-- <ion-item [attr.detail-push]="true" no-lines>\n            [value]="objInfo?.inspectionStatusText"\n            (tap)="openSheetModal()"\n    -->\n      <ion-label> <b>*</b>巡检结果：</ion-label>\n      <ion-input\n        type="text"\n        text-right\n        [(ngModel)]="inspectionStatusText"\n      ></ion-input>\n    </ion-item>\n    <ion-item no-lines>\n      <ion-label>巡检时间：</ion-label>\n      <ion-input\n        type="text"\n        [readonly]="true"\n        text-right\n        [value]="inspectionTime"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n</ion-content>\n\n<ion-footer *ngIf="buttons.length&&objPermission===2">\n  <ion-toolbar class="footer-bar">\n    <ng-container *ngIf="buttons.length<=4">\n      <ion-grid>\n        <ion-row>\n          <ion-col\n            *ngFor="let button of buttons"\n            class="{{buttonFlex(buttons.length)}}"\n          >\n            <div class="btn">\n              <!-- <img\n                                (tap)="buttonFunction(button.buttonAction)"\n                                src="assets/imgs/buttons/{{button.buttonIcon}}"\n                                alt=""\n                            /> -->\n              <ion-icon\n                (tap)="buttonFunction(button.buttonAction)"\n                [name]="button.buttonIcon.split(\'.\')[0]"\n              ></ion-icon>\n              <p>{{button.buttonText}}</p>\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ng-container>\n  </ion-toolbar>\n</ion-footer>r>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections-details/inspection-device/inspection-device.html"*/,
        }),
        __param(16, Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_13__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_geolocation__["a" /* Geolocation */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_10__providers_util_plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_image_picker__["a" /* ImagePicker */],
            __WEBPACK_IMPORTED_MODULE_12__ionic_native_file_picker__["a" /* IOSFilePicker */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1__providers_inspections_service__["a" /* InspectionsProvider */],
            __WEBPACK_IMPORTED_MODULE_17__providers_location_plugin__["a" /* NativeService */],
            __WEBPACK_IMPORTED_MODULE_0__ionic_native_photo_viewer__["a" /* PhotoViewer */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["t" /* PopoverController */], Object])
    ], InspectionDevicePage);
    return InspectionDevicePage;
}());

//# sourceMappingURL=inspection-device.js.map

/***/ }),

/***/ 780:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WorkTicket1Page; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the WorkTicket1Page page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var WorkTicket1Page = /** @class */ (function () {
    function WorkTicket1Page(navCtrl, navParams) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
    }
    WorkTicket1Page.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad WorkTicket1Page');
    };
    WorkTicket1Page = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-work-ticket1',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/work-ticket1/work-ticket1.html"*/'<!--\n  Generated template for the WorkTicket1Page page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <ion-title>workTicket1</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/work-ticket1/work-ticket1.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */]])
    ], WorkTicket1Page);
    return WorkTicket1Page;
}());

//# sourceMappingURL=work-ticket1.js.map

/***/ }),

/***/ 781:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WorkTicket2Page; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the WorkTicket2Page page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var WorkTicket2Page = /** @class */ (function () {
    function WorkTicket2Page(navCtrl, navParams) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
    }
    WorkTicket2Page.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad WorkTicket2Page');
    };
    WorkTicket2Page = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-work-ticket2',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/work-ticket2/work-ticket2.html"*/'<!--\n  Generated template for the WorkTicket2Page page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <ion-title>workTicket2</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/work-ticket2/work-ticket2.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */]])
    ], WorkTicket2Page);
    return WorkTicket2Page;
}());

//# sourceMappingURL=work-ticket2.js.map

/***/ }),

/***/ 782:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonDefectCodePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__operations_repair_ticket_details_repair_ticket_details__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__operations_defect_management_details_defect_management_details__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the CommonDefectCodePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonDefectCodePage = /** @class */ (function () {
    function CommonDefectCodePage(navCtrl, navParams, viewCtrl, materialservice, mutilservice, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.materialservice = materialservice;
        this.mutilservice = mutilservice;
        this.alertCtrl = alertCtrl;
        this.value = {
            relaBusinessCode: null,
            relaBusinessId: null
        };
        this.type = 'text';
    }
    CommonDefectCodePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonInputPage');
        this.title = this.navParams.get('title');
        this.value = this.navParams.get('value') || {
            relaBusinessCode: null,
            relaBusinessId: null
        };
        this.type = this.navParams.get('type');
    };
    CommonDefectCodePage.prototype.ok = function () {
        var _this = this;
        if (this.value.relaBusinessCode) {
            this.checkDefectCode(function (res) {
                _this.viewCtrl.dismiss({
                    value: {
                        relaBusinessCode: _this.value.relaBusinessCode,
                        relaBusinessId: res.orderId
                    },
                    type: 'ok'
                });
            });
        }
        else {
            var alert_1 = this.alertCtrl.create({
                title: '警告',
                subTitle: "\u8BF7\u8F93\u5165" + this.title,
                buttons: ['确认']
            });
            alert_1.present();
            return;
        }
    };
    CommonDefectCodePage.prototype.clear = function () {
        this.viewCtrl.dismiss({
            value: {
                relaBusinessCode: null,
                relaBusinessId: null
            },
            type: 'clear'
        });
    };
    CommonDefectCodePage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonDefectCodePage.prototype.goDefectManagementDetail = function () {
        var _this = this;
        this.checkDefectCode(function (res) {
            switch (res.orderType) {
                case '01': //缺陷单
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__operations_defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */], {
                        defectId: _this.value.relaBusinessId
                    });
                    break;
                case '02':
                    // todo 巡检单
                    break;
                case '03':
                    // todo 维护单
                    break;
                case '04':
                    // todo 检修预试单
                    break;
                case '05':
                    // todo 技改单
                    break;
                case '06':
                    // todo 工作票
                    break;
                case '07':
                    // todo 操作票
                    break;
                case '08': //抢修单
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__operations_repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */], {
                        ticketId: _this.value.relaBusinessId
                    });
                    break;
                case '09':
                    // todo 清洗单
                    break;
                default:
                    break;
            }
        });
    };
    CommonDefectCodePage.prototype.checkDefectCode = function (fn) {
        var _this = this;
        return this.materialservice
            .getOrderIdByOrderCode(this.value.relaBusinessCode)
            .subscribe(function (res) {
            if (res) {
                return fn(res);
            }
            else {
                _this.mutilservice.popToastView('单号不存在！');
            }
        });
    };
    CommonDefectCodePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["Component"])({
            selector: 'page-common-defect-code',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-defect-code/common-defect-code.html"*/'<!--\n  Generated template for the CommonDefectCodePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n    <h6>{{title}}</h6>\n    <ion-grid style="margin-top: 0;">\n        <ion-row>\n            <ion-col col-10>\n                <ion-input [type]="type" [(ngModel)]="value.relaBusinessCode"></ion-input>\n            </ion-col>\n            <ion-col col-2 text-center>\n                <ion-icon\n                    name="md-arrow-dropright-circle"\n                    (tap)="goDefectManagementDetail()"\n                ></ion-icon>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n\n    <ion-grid>\n        <ion-row>\n            <ion-col col-6>\n                <button ion-button small color="light" class="clear-btn" (tap)="clear()">\n                    清除\n                </button>\n            </ion-col>\n            <ion-col col-6>\n                <button ion-button small class="ok-btn" (tap)="ok()">\n                    确定\n                </button>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-defect-code/common-defect-code.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_material_service__["a" /* MaterialService */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["b" /* AlertController */]])
    ], CommonDefectCodePage);
    return CommonDefectCodePage;
}());

//# sourceMappingURL=common-defect-code.js.map

/***/ }),

/***/ 783:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonTeamsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_repair_tickets_service__ = __webpack_require__(231);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the CommonTeamsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonTeamsPage = /** @class */ (function () {
    function CommonTeamsPage(navCtrl, navParams, repairticketsservice, viewCtrl, mutilservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.repairticketsservice = repairticketsservice;
        this.viewCtrl = viewCtrl;
        this.mutilservice = mutilservice;
        this.teams = [];
        this.name = null;
        this.searchParams = {
            name: null,
            page: 0,
            size: 10
        };
    }
    CommonTeamsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonTeamsPage');
        this.selectedTeam = this.navParams.get('team');
        this.getTeamList(true);
    };
    CommonTeamsPage.prototype.getTeamList = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            name: this.name,
            page: this.page,
            size: 10
        };
        this.repairticketsservice.getTeamList(params).subscribe(function (res) {
            if (res) {
                _this.teams = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    CommonTeamsPage.prototype.clickItem = function (team) {
        this.viewCtrl.dismiss({
            type: 'ok',
            value: team
        });
    };
    CommonTeamsPage.prototype.showIcon = function (id) {
        var selectedTeam = [];
        if (this.selectedTeam) {
            selectedTeam = [this.selectedTeam];
        }
        var index = __WEBPACK_IMPORTED_MODULE_4_lodash__["findIndex"](selectedTeam, function (o) { return o.teamId == id; });
        return index != -1;
    };
    CommonTeamsPage.prototype.onCancel = function () {
        this.getTeamList(true);
    };
    CommonTeamsPage.prototype.doRefresh = function (refresher) {
        this.getTeamList(true, refresher);
    };
    CommonTeamsPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            name: this.name,
            page: this.page,
            size: 10
        };
        this.repairticketsservice.getTeamList(params).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.teams = _this.teams.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.teams.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    CommonTeamsPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonTeamsPage.prototype.clearAll = function () {
        this.viewCtrl.dismiss({
            type: 'clear'
        });
    };
    CommonTeamsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-common-teams',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-teams/common-teams.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button icon-only (click)="close()">\n        <ion-icon name="arrow-back" style="color: #fff"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title> 班组 </ion-title>\n  </ion-navbar>\n  <ion-toolbar no-border-top>\n    <ion-searchbar\n      [(ngModel)]="name"\n      placeholder="班组名称或部门名称"\n      (ionInput)="onCancel($event)"\n    >\n    </ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n<ion-content>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <div class="notice-list-box">\n    <div\n      class="new-notice-list"\n      *ngFor="let team of teams"\n      (click)="clickItem(team)"\n    >\n      <div class="notice">\n        <div class="notice-title">{{team.teamName}}({{team.users.length}})</div>\n        <div class="notice-subtitle">\n          <div class="notice-subtitle-content">\n            <span> {{team.deptName}} </span>\n          </div>\n        </div>\n      </div>\n      <div class="left-img">\n        <!-- <img src="assets/imgs/list/team.png" class="alarm-img" /> -->\n        <ion-icon name="team" class="alarm-img"></ion-icon>\n      </div>\n      <div class="checked-icon" *ngIf="showIcon(team.teamId)">\n        <!-- <img src="assets/imgs/buttons/ok.png" /> -->\n        <ion-icon name="ok"></ion-icon>\n      </div>\n    </div>\n    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n      <ion-infinite-scroll-content\n        loadingSpinner="bubbles"\n        loadingText="加载更多数据..."\n      >\n      </ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n  </div>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar no-border-top class="page-bottom">\n    <button ion-button block class="clear" color="light" (click)="clearAll()">\n      清除\n    </button>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-teams/common-teams.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1__providers_repair_tickets_service__["a" /* RepairTicketsProvider */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */]])
    ], CommonTeamsPage);
    return CommonTeamsPage;
}());

//# sourceMappingURL=common-teams.js.map

/***/ }),

/***/ 784:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonOperateStepPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the CommonOperateStepPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonOperateStepPage = /** @class */ (function () {
    function CommonOperateStepPage(navCtrl, navParams, viewCtrl, fb, alertCtrl) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.fb = fb;
        this.alertCtrl = alertCtrl;
        this.customExecuteTimePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.executeTime = null); }
                }
            ],
            cssClass: 'hiddenCancelButton'
        };
        this.form = this.fb.group({
            taskId: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            ticketId: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            orderNo: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            taskDesc: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            taskStatus: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            executeTime: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null)
        });
    }
    CommonOperateStepPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonOperateStepPage');
        this.type = this.navParams.get('type');
        this.value = this.navParams.get('value');
        console.log(this.value);
        if (this.value.executeTime) {
            this.value.executeTime = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.value.executeTime).format();
        }
        this.form.patchValue(this.value);
    };
    CommonOperateStepPage.prototype.clearItem = function () {
        this.viewCtrl.dismiss({
            type: 'clear',
            value: null
        });
    };
    CommonOperateStepPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonOperateStepPage.prototype.deleteItem = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定删除此步骤么？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.viewCtrl.dismiss({
                            type: 'delete',
                            value: null
                        });
                    }
                }
            ]
        });
        confirm.present();
    };
    CommonOperateStepPage.prototype.ok = function () {
        if (this.type === 'add') {
            this.viewCtrl.dismiss({
                type: 'ok',
                value: this.form.value
            });
        }
        else {
            this.viewCtrl.dismiss({
                type: 'editOk',
                value: this.form.value
            });
        }
    };
    CommonOperateStepPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-common-operate-step',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-operate-step/common-operate-step.html"*/'<!--\n  Generated template for the CommonOperateStepPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <form [formGroup]="form">\n    <h6>操作步骤</h6>\n    <ion-textarea formControlName="taskDesc"></ion-textarea>\n    <h6>操作时间</h6>\n    <ion-datetime\n      doneText="确定"\n      cancelText="清除"\n      displayFormat="YYYY-MM-DD HH:mm:ss"\n      formControlName="executeTime"\n      [pickerOptions]="customExecuteTimePickerOptions"\n    ></ion-datetime>\n  </form>\n  <ion-grid>\n    <ion-row>\n      <ion-col col-6>\n        <button\n          ion-button\n          small\n          color="light"\n          class="clear-btn"\n          *ngIf="type===\'add\'"\n          (tap)="clearItem()"\n        >\n          取消\n        </button>\n        <button\n          ion-button\n          small\n          color="light"\n          class="clear-btn"\n          *ngIf="type===\'edit\'"\n          (tap)="deleteItem()"\n        >\n          删除\n        </button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button small class="ok-btn" (tap)="ok()">确定</button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-operate-step/common-operate-step.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */]])
    ], CommonOperateStepPage);
    return CommonOperateStepPage;
}());

//# sourceMappingURL=common-operate-step.js.map

/***/ }),

/***/ 785:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonTypicalOperateTicketsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_operate_tickets_service__ = __webpack_require__(233);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the CommonTypicalOperateTicketsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonTypicalOperateTicketsPage = /** @class */ (function () {
    function CommonTypicalOperateTicketsPage(navCtrl, navParams, operateticketsservice, viewCtrl, mutilservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.operateticketsservice = operateticketsservice;
        this.viewCtrl = viewCtrl;
        this.mutilservice = mutilservice;
        this.operateDesc = null;
    }
    CommonTypicalOperateTicketsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CommonTypicalOperateTicketsPage');
        this.stationId = this.navParams.get('stationId') || null;
        this.getOperateTemplates(true);
    };
    CommonTypicalOperateTicketsPage.prototype.getOperateTemplates = function (first, refresher) {
        var _this = this;
        if (first) {
            this.page = 0;
        }
        var params = {
            stationId: this.stationId,
            operateDesc: this.operateDesc,
            page: this.page,
            size: 10,
        };
        this.operateticketsservice.getOperateTemplates(params).subscribe(function (res) {
            if (res) {
                _this.operateTemplates = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    CommonTypicalOperateTicketsPage.prototype.onCancel = function () {
        this.getOperateTemplates(true);
    };
    CommonTypicalOperateTicketsPage.prototype.doRefresh = function (refresher) {
        this.getOperateTemplates(true, refresher);
    };
    CommonTypicalOperateTicketsPage.prototype.clickItem = function (id) {
        this.viewCtrl.dismiss({
            type: 'ok',
            value: id,
        });
    };
    CommonTypicalOperateTicketsPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            stationId: this.stationId,
            operateDesc: this.operateDesc,
            page: this.page,
            size: 10,
        };
        this.operateticketsservice.getOperateTemplates(params).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.operateTemplates = _this.operateTemplates.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.operateTemplates.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    CommonTypicalOperateTicketsPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonTypicalOperateTicketsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-common-typical-operate-tickets',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-typical-operate-tickets/common-typical-operate-tickets.html"*/'<!--\n  Generated template for the CommonTypicalOperateTicketsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button icon-only (click)="close()">\n        <ion-icon name="arrow-back" class="my-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title> 典型操作票 </ion-title>\n  </ion-navbar>\n  <ion-toolbar no-border-top>\n    <ion-searchbar\n      [(ngModel)]="operateDesc"\n      placeholder="操作任务"\n      (ionInput)="onCancel($event)"\n    >\n    </ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <div class="notice-list-box">\n    <div\n      class="new-notice-list"\n      *ngFor="let operateTemplate of operateTemplates"\n      (click)="clickItem(operateTemplate.id)"\n    >\n      <div class="notice">\n        <div class="notice-title">\n          <span> {{operateTemplate.title}} </span>\n        </div>\n        <div class="notice-subtitle">\n          <div class="notice-subtitle-content">\n            <span> {{operateTemplate.item1}} </span>\n          </div>\n        </div>\n      </div>\n      <div class="left-img">\n        <img\n          [src]="\'assets/imgs/list/\'+operateTemplate.icon"\n          class="alarm-img"\n        />\n      </div>\n    </div>\n    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n      <ion-infinite-scroll-content\n        loadingSpinner="bubbles"\n        loadingText="加载更多数据..."\n      >\n      </ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-typical-operate-tickets/common-typical-operate-tickets.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_operate_tickets_service__["a" /* OperateTicketsProvider */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__["a" /* MutilService */]])
    ], CommonTypicalOperateTicketsPage);
    return CommonTypicalOperateTicketsPage;
}());

//# sourceMappingURL=common-typical-operate-tickets.js.map

/***/ }),

/***/ 786:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DefectDevicesPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the DefectDevicesPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 * 新增设备
 */
var DefectDevicesPage = /** @class */ (function () {
    function DefectDevicesPage(navCtrl, navParams, fb, viewCtrl, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.viewCtrl = viewCtrl;
        this.alertCtrl = alertCtrl;
        this.form = this.fb.group({
            objNo: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            objId: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            deviceNo: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            objName: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            psrId: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            objCompany: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            objProvider: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            objClass: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            objClassName: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            workHours: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            lossEnergy: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            objCost: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
        });
    }
    DefectDevicesPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad DefectDevicesPage');
        this.stationId = this.navParams.get('stationId');
        this.value = this.navParams.get('value');
        if (this.value) {
            this.form.patchValue(this.value);
        }
    };
    DefectDevicesPage.prototype.ionViewWillEnter = function () {
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.navParams.data.equipmentList = [];
            if (equipmentList.length === 1) {
                this.form.patchValue({
                    objNo: null,
                    deviceNo: null,
                    objCompany: null,
                    objProvider: null,
                    objClass: null,
                    objClassName: null,
                    workHours: null,
                    lossEnergy: null,
                    objCost: null,
                    objId: equipmentList[0].deviceId,
                    objName: equipmentList[0].deviceName,
                    psrId: equipmentList[0].psrId,
                    deviceType: equipmentList[0].deviceType,
                });
            }
            else if (equipmentList.length === 0) {
                this.form.patchValue({
                    objNo: null,
                    objId: null,
                    deviceNo: null,
                    objName: null,
                    psrId: null,
                    objCompany: null,
                    objProvider: null,
                    objClass: null,
                    objClassName: null,
                    workHours: null,
                    lossEnergy: null,
                    objCost: null,
                });
            }
        }
    };
    DefectDevicesPage.prototype.selectEquipment = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            stationId: this.stationId,
            isSingle: true,
            deviceId: this.form.value.objId || null,
            deviceName: this.form.value.objName || null,
        });
    };
    DefectDevicesPage.prototype.ok = function () {
        var value = this.form.value;
        for (var key in value) {
            if (value.hasOwnProperty(key)) {
                if (key === 'objId' && !value[key]) {
                    var alert_1 = this.alertCtrl.create({
                        title: '提示',
                        subTitle: '设备不能为空',
                        buttons: ['关闭'],
                    });
                    alert_1.present();
                    return;
                }
                else if (key === 'workHours') {
                    if (__WEBPACK_IMPORTED_MODULE_4_lodash__["isNaN"](+value[key])) {
                        var alert_2 = this.alertCtrl.create({
                            title: '提示',
                            subTitle: '工作量请填写数字',
                            buttons: ['关闭'],
                        });
                        alert_2.present();
                        return;
                    }
                    else {
                        value[key] = Math.floor(+value[key] * 100) / 100;
                    }
                }
                else if (key === 'lossEnergy') {
                    if (__WEBPACK_IMPORTED_MODULE_4_lodash__["isNaN"](+value[key])) {
                        var alert_3 = this.alertCtrl.create({
                            title: '提示',
                            subTitle: '损失电量请填写数字',
                            buttons: ['关闭'],
                        });
                        alert_3.present();
                        return;
                    }
                    else {
                        value[key] = Math.floor(+value[key] * 100) / 100;
                    }
                }
                else if (key === 'objCost') {
                    if (__WEBPACK_IMPORTED_MODULE_4_lodash__["isNaN"](+value[key])) {
                        var alert_4 = this.alertCtrl.create({
                            title: '提示',
                            subTitle: '消缺费用请填写数字',
                            buttons: ['关闭'],
                        });
                        alert_4.present();
                        return;
                    }
                    else {
                        value[key] = Math.floor(+value[key] * 100) / 100;
                    }
                }
            }
        }
        this.viewCtrl.dismiss({ value: value, type: 'ok' });
    };
    DefectDevicesPage.prototype.clear = function () {
        // console.log(this.form)
        this.viewCtrl.dismiss({ value: null, type: 'clear' });
    };
    DefectDevicesPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    DefectDevicesPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-defect-devices',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/defect-devices/defect-devices.html"*/'<!--\n  Generated template for the DefectDevicesPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <form [formGroup]="form">\n    <h6>设备:</h6>\n    <ion-input\n      type="text"\n      formControlName="objName"\n      readonly="true"\n      (tap)="selectEquipment()"\n    ></ion-input>\n    <h6>工作量-h:</h6>\n    <ion-input type="number" formControlName="workHours"></ion-input>\n    <h6>损失电量-kWh:</h6>\n    <ion-input type="number" formControlName="lossEnergy"></ion-input>\n    <h6>消缺费用-元:</h6>\n    <ion-input type="number" formControlName="objCost"></ion-input>\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <button\n            type="button"\n            ion-button\n            small\n            color="light"\n            class="clear-btn"\n            (tap)="clear()"\n          >\n            取消\n          </button>\n        </ion-col>\n        <ion-col col-6>\n          <button ion-button small class="ok-btn" type="button" (tap)="ok()">\n            确定\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </form>\n</ion-content>\nt>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/defect-devices/defect-devices.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */]])
    ], DefectDevicesPage);
    return DefectDevicesPage;
}());

//# sourceMappingURL=defect-devices.js.map

/***/ }),

/***/ 787:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InspectionsMoreMenuPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the MoreMenuPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InspectionsMoreMenuPage = /** @class */ (function () {
    function InspectionsMoreMenuPage(navCtrl, navParams, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
    }
    InspectionsMoreMenuPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad MoreMenuPage');
    };
    InspectionsMoreMenuPage.prototype.inspectionsMenus = function (event, type) {
        this.viewCtrl.dismiss({ type: type });
    };
    InspectionsMoreMenuPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-more-menu',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections-details/more-menu/more-menu.html"*/'<!--\n  Generated template for the MoreMenuPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n    <ion-list>\n        <ion-item no-lines (tap)="inspectionsMenus($event,1)">\n            巡检记录\n        </ion-item>\n        <ion-item no-lines (tap)="inspectionsMenus($event,2)">\n            设备监视\n        </ion-item>\n        <ion-item no-lines (tap)="inspectionsMenus($event,3)">\n            设备档案\n        </ion-item>\n        <ion-item no-lines (tap)="inspectionsMenus($event,4)">\n            备品备件\n        </ion-item>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections-details/more-menu/more-menu.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], InspectionsMoreMenuPage);
    return InspectionsMoreMenuPage;
}());

//# sourceMappingURL=more-menu.js.map

/***/ }),

/***/ 788:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WarnSearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__common_equipment_equipmentList__ = __webpack_require__(50);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the WarnSearchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var WarnSearchPage = /** @class */ (function () {
    function WarnSearchPage(navCtrl, navParams, modalCtrl, mutilservice, viewCtrl) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modalCtrl = modalCtrl;
        this.mutilservice = mutilservice;
        this.viewCtrl = viewCtrl;
        this.customStartPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () {
                        return (_this.startDate = __WEBPACK_IMPORTED_MODULE_3_moment__(_this.initData.startDate).format());
                    },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.customEndPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.endDate = __WEBPACK_IMPORTED_MODULE_3_moment__(_this.initData.endDate).format()); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.alarmLevels = [];
        this.alarmTypes = [];
        this.alarmStatus = [];
    }
    WarnSearchPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad WarnSearchPage');
        var initData = this.navParams.get('initData');
        this.initData = __assign({}, initData);
        this.startDate = __WEBPACK_IMPORTED_MODULE_3_moment__(initData.startDate).format();
        this.endDate = __WEBPACK_IMPORTED_MODULE_3_moment__(initData.endDate).format();
        this.alarmLevels = initData.aAlarmLevels;
        this.alarmTypes = initData.aAlarmTypes;
        this.alarmStatus = initData.aAlarmStatus;
        this.station = this.navParams.get('station') || null;
        this.equipment = this.navParams.get('equipment') || null;
    };
    WarnSearchPage.prototype.ionViewWillEnter = function () {
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.equipment = equipmentList[0];
        }
    };
    // 电站选择
    WarnSearchPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.station = e;
            }
        });
        modal.present({ keyboardClose: true });
    };
    WarnSearchPage.prototype.clearStation = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.station = null;
    };
    // 电站选择
    WarnSearchPage.prototype.selectEquipment = function () {
        if (!this.station) {
            this.mutilservice.popToastView('请先选择电站！');
            return;
        }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            isSingle: true,
            stationId: this.station.id,
        });
    };
    WarnSearchPage.prototype.clearEquipment = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.equipment = null;
    };
    WarnSearchPage.prototype.selectAlarmLevels = function (item) {
        item.selected = !item.selected;
        __WEBPACK_IMPORTED_MODULE_2_lodash__["unionBy"](this.alarmLevels, item, 'id');
    };
    WarnSearchPage.prototype.selectAlarmTypes = function (item) {
        item.selected = !item.selected;
        __WEBPACK_IMPORTED_MODULE_2_lodash__["unionBy"](this.alarmTypes, item, 'id');
    };
    WarnSearchPage.prototype.selectAlarmStatus = function (item) {
        item.selected = !item.selected;
        __WEBPACK_IMPORTED_MODULE_2_lodash__["unionBy"](this.alarmStatus, item, 'id');
    };
    WarnSearchPage.prototype.reset = function () {
        this.startDate = __WEBPACK_IMPORTED_MODULE_3_moment__(this.initData.startDate).format();
        this.endDate = __WEBPACK_IMPORTED_MODULE_3_moment__(this.initData.endDate).format();
        this.station = null;
        this.equipment = null;
        this.alarmLevels.map(function (item) {
            item.selected = false;
        });
        this.alarmTypes.map(function (item) {
            item.selected = false;
        });
        this.alarmStatus.map(function (item) {
            item.selected = false;
        });
    };
    WarnSearchPage.prototype.ok = function () {
        var alarmLevels = [];
        this.alarmLevels.map(function (item) {
            if (item.selected) {
                alarmLevels.push(item.id);
            }
        });
        var alarmTypes = [];
        this.alarmTypes.map(function (item) {
            if (item.selected) {
                alarmTypes.push(item.id);
            }
        });
        var alarmStatus = [];
        this.alarmStatus.map(function (item) {
            if (item.selected) {
                alarmStatus.push(item.id);
            }
        });
        this.viewCtrl.dismiss({
            queryParams: {
                startDate: this.startDate,
                endDate: this.endDate,
                alarmLevels: alarmLevels,
                alarmTypes: alarmTypes,
                alarmStatus: alarmStatus,
            },
            station: this.station,
            equipment: this.equipment,
        });
    };
    WarnSearchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-warn-search',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/warn-search/warn-search.html"*/'<ion-content>\n  <div class="common-search-container">\n    <div class="common-search">\n      <div class="time-picker border-bottom">\n        <div class="query-label">告警时间</div>\n        <ion-datetime\n          displayFormat="YYYY-MM-DD"\n          pickerFormat="YYYY/MM/DD"\n          doneText="确定"\n          [(ngModel)]="startDate"\n          [pickerOptions]="customStartPickerOptions"\n        ></ion-datetime>\n        <div class="line">-</div>\n        <ion-datetime\n          displayFormat="YYYY-MM-DD"\n          pickerFormat="YYYY/MM/DD"\n          doneText="确定"\n          [pickerOptions]="customEndPickerOptions"\n          [(ngModel)]="endDate"\n        ></ion-datetime>\n      </div>\n      <div class="button-picker border-bottom">\n        <div class="query-label">电站</div>\n        <button ion-button round small color="light" (click)="selectStation()">\n          {{(station?.title)||\'未选择\'}}\n          <!-- <img\n                        *ngIf="station"\n                        (click)="clearStation($event)"\n                        class="clear-icon"\n                        src="assets/imgs/buttons/delete.png"\n                        alt=""\n                    /> -->\n          <ion-icon\n            *ngIf="station"\n            (click)="clearStation($event)"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n      <div class="button-picker border-bottom">\n        <div class="query-label">设备</div>\n        <button\n          ion-button\n          round\n          small\n          color="light"\n          (click)="selectEquipment()"\n        >\n          {{(equipment?.deviceName)||\'未选择\'}}\n          <!-- <img\n                        *ngIf="equipment"\n                        (click)="clearEquipment($event)"\n                        class="clear-icon"\n                        src="assets/imgs/buttons/delete.png"\n                        alt=""\n                    /> -->\n          <ion-icon\n            *ngIf="equipment"\n            (click)="clearEquipment($event)"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n\n      <div class="select-picker border-bottom">\n        <div class="query-label">告警级别</div>\n        <ion-grid>\n          <ion-row>\n            <ion-col col-6 *ngFor="let item of alarmLevels">\n              <div\n                class="select-option"\n                [ngClass]="{\'active-option\': item.selected===true}"\n                (click)="selectAlarmLevels(item)"\n              >\n                {{item.name}}\n              </div></ion-col\n            >\n          </ion-row>\n        </ion-grid>\n      </div>\n      <div class="select-picker border-bottom">\n        <div class="query-label">告警类型</div>\n        <ion-grid>\n          <ion-row>\n            <ion-col col-6 *ngFor="let item of alarmTypes">\n              <div\n                class="select-option"\n                [ngClass]="{\'active-option\': item.selected===true}"\n                (click)="selectAlarmTypes(item)"\n              >\n                {{item.name}}\n              </div></ion-col\n            >\n          </ion-row>\n        </ion-grid>\n      </div>\n      <div class="select-picker">\n        <div class="query-label">告警状态</div>\n        <ion-grid>\n          <ion-row>\n            <ion-col col-6 *ngFor="let item of alarmStatus">\n              <div\n                class="select-option"\n                [ngClass]="{\'active-option\': item.selected===true}"\n                (click)="selectAlarmStatus(item)"\n              >\n                {{item.name}}\n              </div></ion-col\n            >\n          </ion-row>\n        </ion-grid>\n      </div>\n    </div>\n    <ion-list>\n      <ion-row class="fix-bottom">\n        <ion-col col-6 text-center>\n          <button\n            ion-button\n            round\n            small\n            class="reset-btn"\n            color="light"\n            (click)="reset()"\n          >\n            重置\n          </button>\n        </ion-col>\n        <ion-col col-6 text-center>\n          <button ion-button round small class="query-btn" (click)="ok()">\n            查询\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-list>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/warn-search/warn-search.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], WarnSearchPage);
    return WarnSearchPage;
}());

//# sourceMappingURL=warn-search.js.map

/***/ }),

/***/ 789:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WarnDetails; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__operations_defect_management_details_defect_management_details__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_alarmlogs_service__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__util_modal_common_check_memos_common_check_memos__ = __webpack_require__(790);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var WarnDetails = /** @class */ (function () {
    function WarnDetails(navCtrl, alarmlogsService, navParams, popoverCtrl, fb, modalCtrl, mutilservice) {
        this.navCtrl = navCtrl;
        this.alarmlogsService = alarmlogsService;
        this.navParams = navParams;
        this.popoverCtrl = popoverCtrl;
        this.fb = fb;
        this.modalCtrl = modalCtrl;
        this.mutilservice = mutilservice;
        this.buttons = [];
        this.logId = this.navParams.get('logId');
        this.form = this.fb.group({
            stationName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deviceName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            alarmStatus: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            alarmType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            alarmLevel: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            startTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            alarmText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            alarmCheckStatus: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            defectId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            defectCode: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    }
    WarnDetails.prototype.ionViewWillEnter = function () {
        this.getalarmlogsDetail();
    };
    WarnDetails.prototype.getalarmlogsDetail = function () {
        var _this = this;
        this.alarmlogsService.getalarmlogsDetail(this.logId).subscribe(function (e) {
            if (e) {
                _this.alarmlogsDetail = e;
                _this.form.patchValue(__assign(__assign({}, _this.alarmlogsDetail), { defectCode: e.defectCode ? e.defectCode : '无' }));
                _this.buttons = e.buttons;
            }
        });
    };
    WarnDetails.prototype.actionFunction = function (fn) {
        fn === 'defect'
            ? this.defect({
                alarmInfo: {
                    alarmLogId: this.logId,
                    stationName: this.alarmlogsDetail.stationName,
                    stationId: this.alarmlogsDetail.stationId,
                    defectSource: '03',
                    defectSourceText: '系统告警',
                    defectDevices: this.alarmlogsDetail.deviceId
                        ? [
                            {
                                objId: this.alarmlogsDetail.deviceId,
                                objName: this.alarmlogsDetail.deviceName
                            }
                        ]
                        : []
                }
            })
            : this.check();
    };
    WarnDetails.prototype.check = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__util_modal_common_check_memos_common_check_memos__["a" /* CommonCheckMemosPage */], {
            ruleId: this.alarmlogsDetail.ruleId
        }, {
            cssClass: 'commonModal commonCheckMemosModal',
            showBackdrop: true,
            enableBackdropDismiss: true
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    _this.alarmlogsService
                        .handelalarmcheck(_this.alarmlogsDetail.logId, data.value)
                        .subscribe(function (res) {
                        if (res) {
                            _this.mutilservice.popToastView('告警已确认');
                        }
                    });
                }
            }
        });
        modal.present();
    };
    WarnDetails.prototype.defect = function (params) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_1__operations_defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */], params);
    };
    WarnDetails = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'warn-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/warn-details/warn.details.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>告警详情</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <form [formGroup]="form">\n    <ion-list class="new-list">\n      <ion-item no-lines>\n        <ion-label> 告警电站 </ion-label>\n        <ion-input\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="stationName"\n        ></ion-input>\n      </ion-item>\n      <ion-item no-lines>\n        <ion-label> 告警设备 </ion-label>\n        <ion-input\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="deviceName"\n        ></ion-input>\n      </ion-item>\n      <ion-item no-lines>\n        <ion-label> 告警状态 </ion-label>\n        <ion-input\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="alarmStatus"\n        ></ion-input>\n      </ion-item>\n      <ion-item no-lines>\n        <ion-label> 告警类别 </ion-label>\n        <ion-input\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="alarmType"\n        ></ion-input>\n      </ion-item>\n      <ion-item no-lines>\n        <ion-label> 告警级别 </ion-label>\n        <ion-input\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="alarmLevel"\n        ></ion-input>\n      </ion-item>\n      <ion-item no-lines>\n        <ion-label> 告警时间 </ion-label>\n        <ion-input\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="startTime"\n        ></ion-input>\n      </ion-item>\n      <ion-item no-lines>\n        <ion-label> 告警内容 </ion-label>\n        <ion-input\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="alarmText"\n        ></ion-input>\n      </ion-item>\n      <ion-item no-lines>\n        <ion-label> 告警状态 </ion-label>\n        <ion-input\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="alarmCheckStatus"\n        ></ion-input>\n      </ion-item>\n      <ion-item detail-push no-lines>\n        <ion-label> 缺陷单 </ion-label>\n        <ion-input\n          *ngIf="alarmlogsDetail?.defectId"\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="defectCode"\n          (tap)="defect({defectId:alarmlogsDetail.defectId})"\n        ></ion-input>\n        <ion-input\n          *ngIf="!alarmlogsDetail?.defectId"\n          type="text"\n          [readonly]="true"\n          text-right\n          formControlName="defectCode"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n  </form>\n</ion-content>\n<ion-footer *ngIf="buttons.length>0">\n  <ion-toolbar class="footer-bar">\n    <ion-grid>\n      <ion-row *ngIf="buttons.length==2">\n        <ion-col col-6 *ngFor="let item of buttons">\n          <div class="btn">\n            <!-- <img\n                            (tap)="actionFunction(item.function)"\n                            [src]="\'assets/imgs/buttons/\'+item.icon"\n                            alt=""\n                        /> -->\n            <ion-icon\n              (tap)="actionFunction(item.function)"\n              [name]="item.icon.split(\'.\')[0]"\n            ></ion-icon>\n            <p>{{item.text}}</p>\n          </div>\n        </ion-col>\n      </ion-row>\n      <ion-row *ngIf="buttons.length==1">\n        <ion-col col-12 *ngFor="let item of buttons">\n          <div class="btn">\n            <!-- <img\n                            (tap)="actionFunction(item.function)"\n                            [src]="\'assets/imgs/buttons/\'+item.icon"\n                            alt=""\n                        /> -->\n            <ion-icon\n              (tap)="actionFunction(item.function)"\n              [name]="item.icon.split(\'.\')[0]"\n            ></ion-icon>\n            <p>{{item.text}}</p>\n          </div>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/warn-details/warn.details.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_alarmlogs_service__["a" /* alarmlogsService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["t" /* PopoverController */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */]])
    ], WarnDetails);
    return WarnDetails;
}());

//# sourceMappingURL=warn.details.js.map

/***/ }),

/***/ 790:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonCheckMemosPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_alarmlogs_service__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the CommonCheckMemosPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonCheckMemosPage = /** @class */ (function () {
    function CommonCheckMemosPage(navCtrl, navParams, alarmlogsService, actionSheetCtrl, mutilservice, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.alarmlogsService = alarmlogsService;
        this.actionSheetCtrl = actionSheetCtrl;
        this.mutilservice = mutilservice;
        this.viewCtrl = viewCtrl;
        this.memo = null;
        this.sheetModalOptions = [];
    }
    CommonCheckMemosPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad CommonCheckMemosPage');
        var ruleId = this.navParams.get('ruleId');
        this.alarmlogsService.getCheckmemos(ruleId).subscribe(function (res) {
            _this.sheetModalOptions = res;
        });
    };
    CommonCheckMemosPage.prototype.openSheetModal = function () {
        var _this = this;
        var options = this.sheetModalOptions;
        var buttons = options.map(function (item) {
            return {
                text: item,
                handler: function () {
                    _this.memo = item;
                }
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet'
        });
        actionSheet.present();
    };
    CommonCheckMemosPage.prototype.cancel = function () {
        this.viewCtrl.dismiss();
    };
    CommonCheckMemosPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CommonCheckMemosPage.prototype.ok = function () {
        if (!this.memo) {
            this.mutilservice.popToastView('请填写备注说明');
            return;
        }
        else if (this.memo.length > 500) {
            this.mutilservice.popToastView('备注说明不超过500字符');
            return;
        }
        this.viewCtrl.dismiss({
            type: 'ok',
            value: this.memo
        });
    };
    CommonCheckMemosPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'page-common-check-memos',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-check-memos/common-check-memos.html"*/'<!--\n  Generated template for the CommonCheckMemosPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <h6>备注<b>*</b></h6>\n  <div class="check-memo">\n    <ion-input\n      type="text"\n      [readonly]="true"\n      placeholder="请选择备注说明"\n      (tap)="openSheetModal()"\n    ></ion-input>\n    <ion-icon name="ios-arrow-down"></ion-icon>\n  </div>\n  <ion-textarea [(ngModel)]="memo"></ion-textarea>\n  <ion-grid>\n    <ion-row>\n      <ion-col col-6>\n        <button\n          ion-button\n          small\n          color="light"\n          class="clear-btn"\n          (tap)="cancel()"\n        >\n          取消\n        </button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button small class="ok-btn" (tap)="ok()">确定</button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/common-check-memos/common-check-memos.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_alarmlogs_service__["a" /* alarmlogsService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], CommonCheckMemosPage);
    return CommonCheckMemosPage;
}());

//# sourceMappingURL=common-check-memos.js.map

/***/ }),

/***/ 791:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InventorisRecordSearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__common_iotypes_common_iotypes__ = __webpack_require__(792);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__common_materials_common_materials__ = __webpack_require__(229);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__common_warehouse_common_warehouse__ = __webpack_require__(230);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_backend_service__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_util_Mutil_service__ = __webpack_require__(9);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/**
 * Generated class for the JobRecordSearchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InventorisRecordSearchPage = /** @class */ (function () {
    function InventorisRecordSearchPage(navCtrl, navParams, modalCtrl, viewCtrl, backendservice, mutilservice) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modalCtrl = modalCtrl;
        this.viewCtrl = viewCtrl;
        this.backendservice = backendservice;
        this.mutilservice = mutilservice;
        this.aQueryFlag = [
            { first: '1', second: '我的申请' },
            { first: '2', second: '我的审批/确认' },
            { first: '3', second: '我的代办' },
            { first: '4', second: '抄送我的' },
        ];
        this.searchParams = {
            myOperate: '3',
            ioSubTypes: [],
            materia: [],
            warehouseId: null,
            startTime: __WEBPACK_IMPORTED_MODULE_3_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
            endTime: __WEBPACK_IMPORTED_MODULE_3_moment__().format('YYYY-MM-DD'),
            ioStatus: [],
            materialName: null,
            operator: null,
            approver: null,
        };
        this.customStartTimePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.startTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
        this.customEndTimePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.searchParams.endTime = null); },
                },
            ],
            cssClass: 'hiddenCancelButton',
        };
    }
    InventorisRecordSearchPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad InventorisRecordSearchPage');
        this.backendservice
            .getProps({ typeId: 'iostorageStatus' })
            .subscribe(function (res) {
            _this.ioStatus = res;
        });
        this.searchParams = this.navParams.get('searchParams');
        this.materialType = this.navParams.get('materialType') || '01';
        var _a = this.searchParams, warehouseId = _a.warehouseId, warehouseName = _a.warehouseName;
        if (warehouseId && warehouseName) {
            this.warehouses = { warehouseId: warehouseId, warehouseName: warehouseName };
        }
    };
    InventorisRecordSearchPage.prototype.selectStatusOption = function (status) {
        var removeItem = __WEBPACK_IMPORTED_MODULE_2_lodash__["remove"](this.searchParams.ioStatus, function (n) { return status === n; });
        if (removeItem.length == 0) {
            this.searchParams.ioStatus.push(status);
        }
    };
    InventorisRecordSearchPage.prototype.setIoSubType = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__common_iotypes_common_iotypes__["a" /* CommonIotypesPage */], {
            ioSubTypes: this.searchParams.ioSubTypes || [],
            materialType: this.materialType,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type) {
                    _this.searchParams.ioSubTypes = data.value;
                }
            }
        });
        modal.present();
    };
    InventorisRecordSearchPage.prototype.clearIoSubType = function () { };
    // 仓库选择
    InventorisRecordSearchPage.prototype.selectWarehouses = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__common_warehouse_common_warehouse__["a" /* CommonWarehousePage */]);
        modal.onDidDismiss(function (e) {
            if (e) {
                if (e.type === 'ok') {
                    _this.warehouses = e.value;
                    if (!__WEBPACK_IMPORTED_MODULE_2_lodash__["isEmpty"](_this.warehouses)) {
                        _this.searchParams.warehouseId = e.value.warehouseId;
                        _this.searchParams.warehouseName = e.value.warehouseName;
                    }
                }
                else {
                    _this.warehouses = null;
                    _this.searchParams.warehouseId = null;
                    _this.searchParams.warehouseName = null;
                }
            }
        });
        modal.present({ keyboardClose: true });
    };
    InventorisRecordSearchPage.prototype.clearWarehouses = function (event) {
        event.stopPropagation();
        this.warehouses = null;
        this.searchParams.warehouseId = null;
        this.searchParams.warehouseName = null;
    };
    // 负责人
    InventorisRecordSearchPage.prototype.selectUser = function (type) {
        var _this = this;
        this.userType = type;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
            selectedItem: [
                {
                    userId: this.searchParams[this.userType] &&
                        this.searchParams[this.userType].userId,
                },
            ],
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.searchParams[_this.userType] = data.value[0];
                }
            }
        });
        modal.present();
    };
    InventorisRecordSearchPage.prototype.clearUser = function (event, type) {
        this.userType = type;
        event.stopPropagation && event.stopPropagation();
        this.searchParams[this.userType] = null;
    };
    InventorisRecordSearchPage.prototype.selectQuickSearch = function (type) {
        if (this.searchParams.myOperate === type) {
            this.searchParams.myOperate = null;
        }
        else {
            this.searchParams.myOperate = type;
        }
        this.viewCtrl.dismiss({
            value: __assign(__assign({}, this.searchParams), { myOperate: this.searchParams.myOperate }),
            type: 'ok',
        });
    };
    InventorisRecordSearchPage.prototype.ok = function () {
        this.viewCtrl.dismiss({ value: __assign({}, this.searchParams), type: 'ok' });
    };
    InventorisRecordSearchPage.prototype.reset = function () {
        this.viewCtrl.dismiss({
            value: {
                myOperate: '3',
                ioSubTypes: [],
                materia: [],
                warehouseId: null,
                startTime: __WEBPACK_IMPORTED_MODULE_3_moment__().subtract(30, 'days').format('YYYY-MM-DD'),
                endTime: __WEBPACK_IMPORTED_MODULE_3_moment__().format('YYYY-MM-DD'),
                ioStatus: [],
                materialName: null,
                operator: null,
                approver: null,
            },
            type: 'reset',
        });
    };
    //物料选择
    InventorisRecordSearchPage.prototype.selectMaterials = function () {
        var _this = this;
        if (!this.warehouses) {
            return this.mutilservice.popToastView('请先选择仓库');
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_5__common_materials_common_materials__["a" /* CommonMaterialsPage */], {
            ioType: null,
            selectType: 'multi',
            materialType: this.materialType,
            warehouseId: this.warehouses.warehouseId || null,
            selectedItem: this.searchParams.materia || [],
        });
        modal.onDidDismiss(function (e) {
            if (e) {
                if (e.type == 'ok') {
                    _this.searchParams.materia = e.value;
                }
                else {
                    _this.searchParams.materia = [];
                }
            }
        });
        modal.present({ keyboardClose: true });
    };
    InventorisRecordSearchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-inventoris-record-search',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/inventoris-record-search/inventoris-record-search.html"*/'<ion-content>\n  <div class="common-search-container">\n    <div class="common-search">\n      <div class="select-picker border-bottom">\n        <div class="query-label">快速查询</div>\n        <ion-grid>\n          <ion-row>\n            <ion-col col-4 *ngFor="let item of aQueryFlag">\n              <div\n                class="select-option ell"\n                [ngClass]="{\'active-option\': searchParams.myOperate===item.first}"\n                (click)="selectQuickSearch(item.first)"\n              >\n                {{item.second}}\n              </div></ion-col\n            >\n          </ion-row>\n        </ion-grid>\n      </div>\n      <div class="select-picker border-bottom">\n        <div class="query-label">状态</div>\n        <ion-grid>\n          <ion-row>\n            <ion-col col-4 *ngFor="let item of ioStatus">\n              <div\n                class="select-option"\n                [ngClass]="{\'active-option\': searchParams.ioStatus.indexOf(item.first)!==-1}"\n                (click)="selectStatusOption(item.first)"\n              >\n                {{item.second}}\n              </div></ion-col\n            >\n          </ion-row>\n        </ion-grid>\n      </div>\n      <div class="button-picker border-bottom">\n        <div class="query-label">操作类型</div>\n        <button ion-button round small color="light" (click)="setIoSubType()">\n          {{searchParams?.ioSubTypes.length?\'已选\'+(searchParams?.ioSubTypes.length)+\'项\':\'未选择\'}}\n        </button>\n      </div>\n      <div class="button-picker border-bottom">\n        <div class="query-label">仓库</div>\n        <button\n          ion-button\n          round\n          small\n          color="light"\n          (click)="selectWarehouses()"\n        >\n          {{(warehouses?.warehouseName)||\'未选择\'}}\n          <ion-icon\n            *ngIf="warehouses"\n            (click)="clearWarehouses($event)"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n      <div class="button-picker border-bottom">\n        <div class="query-label">物料</div>\n        <button\n          ion-button\n          round\n          small\n          color="light"\n          (click)="selectMaterials()"\n        >\n          {{searchParams?.materia?.length?\'已选\'+(searchParams?.materia?.length)+\'项\':\'未选择\'}}\n        </button>\n      </div>\n      <div class="time-picker border-bottom">\n        <div class="query-label">出入库时间</div>\n        <ion-datetime\n          displayFormat="YYYY-MM-DD"\n          pickerFormat="YYYY/MM/DD"\n          doneText="确定"\n          [(ngModel)]="searchParams.startTime"\n          [pickerOptions]="customStartTimePickerOptions"\n        ></ion-datetime>\n        <div class="line">-</div>\n        <ion-datetime\n          displayFormat="YYYY-MM-DD"\n          pickerFormat="YYYY/MM/DD"\n          doneText="确定"\n          [pickerOptions]="customEndTimePickerOptions"\n          [(ngModel)]="searchParams.endTime"\n        ></ion-datetime>\n      </div>\n\n      <div class="button-picker border-bottom">\n        <div class="query-label">出入库人</div>\n        <button\n          ion-button\n          round\n          small\n          color="light"\n          (click)="selectUser(\'operator\')"\n        >\n          {{(searchParams[\'operator\']?.realName)||\'未选择\'}}\n          <ion-icon\n            *ngIf="searchParams[\'operator\']"\n            (click)="clearUser($event,\'operator\')"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n      <div class="button-picker border-bottom">\n        <div class="query-label">审批/确认人</div>\n        <button\n          ion-button\n          round\n          small\n          color="light"\n          (click)="selectUser(\'approver\')"\n        >\n          {{(searchParams[\'approver\']?.realName)||\'未选择\'}}\n          <ion-icon\n            *ngIf="searchParams[\'approver\']"\n            (click)="clearUser($event, \'approver\')"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n    </div>\n    <ion-list>\n      <ion-row class="fix-bottom">\n        <ion-col col-6 text-center>\n          <button\n            ion-button\n            round\n            small\n            class="reset-btn"\n            color="light"\n            (click)="reset()"\n          >\n            重置\n          </button>\n        </ion-col>\n        <ion-col col-6 text-center>\n          <button ion-button round small class="query-btn" (click)="ok()">\n            查询\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-list>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/inventoris-record-search/inventoris-record-search.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_8__providers_backend_service__["a" /* BackendService */],
            __WEBPACK_IMPORTED_MODULE_9__providers_util_Mutil_service__["a" /* MutilService */]])
    ], InventorisRecordSearchPage);
    return InventorisRecordSearchPage;
}());

//# sourceMappingURL=inventoris-record-search.js.map

/***/ }),

/***/ 792:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonIotypesPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_material_service__ = __webpack_require__(59);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the CommonIotypesPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CommonIotypesPage = /** @class */ (function () {
    function CommonIotypesPage(navCtrl, navParams, viewCtrl, materialservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.materialservice = materialservice;
        this.triggleParent = false;
    }
    CommonIotypesPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad CommonIotypesPage');
        var ioSubTypes = this.navParams.get('ioSubTypes') || [];
        var materialType = this.navParams.get('materialType');
        this.materialservice
            .getmaterialsIoTypes({ materialType: materialType })
            .subscribe(function (res) {
            _this.ioTypesOptions = res;
            _this.ioTypesOptions.map(function (item) {
                item.children.map(function (child) {
                    if (ioSubTypes.includes(child.first)) {
                        child.checked = true;
                    }
                });
                item.checked = item.children.every(function (child) { return child.checked; });
            });
        });
    };
    CommonIotypesPage.prototype.updateChildrenItems = function (event, value) {
        if (this.triggleParent) {
            return;
        }
        this.ioTypesOptions.map(function (item) {
            if (item.first === value) {
                item.children.map(function (child) {
                    child.checked = event.checked;
                });
            }
        });
    };
    CommonIotypesPage.prototype.checkedAll = function (parent) {
        this.triggleParent = true;
        parent.checked = parent.children.every(function (item) { return item.checked; });
    };
    CommonIotypesPage.prototype.close = function () {
        this.viewCtrl.dismiss(null);
    };
    CommonIotypesPage.prototype.cancel = function () {
        this.ioTypesOptions.map(function (item) {
            // item.checked = false;
            item.children.map(function (child) {
                child.checked = false;
            });
        });
        // this.viewCtrl.dismiss({ type: 'clear', value: [] });
    };
    CommonIotypesPage.prototype.save = function () {
        var checkedItem = [];
        this.ioTypesOptions.map(function (item) {
            item.children.map(function (child) {
                if (child.checked) {
                    checkedItem.push(child.first);
                }
            });
        });
        this.viewCtrl.dismiss({ type: 'ok', value: checkedItem });
    };
    CommonIotypesPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-common-iotypes',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-iotypes/common-iotypes.html"*/'<!--\n  Generated template for the CommonIotypesPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button icon-only (click)="close()">\n        <ion-icon name="arrow-back" style="color: #fff"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>操作类型</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n  <ion-list>\n    <ng-container *ngFor="let item of ioTypesOptions">\n      <ion-item no-lines (tap)="triggleParent=false">\n        <ion-label>{{item.second}}</ion-label>\n        <ion-checkbox\n          [(ngModel)]="item.checked"\n          (ionChange)="updateChildrenItems($event,item.first)"\n        ></ion-checkbox>\n      </ion-item>\n      <ng-container *ngFor="let child of item.children">\n        <ion-item style="padding-left: 50px" no-lines>\n          <ion-label>{{child.second}}</ion-label>\n          <ion-checkbox\n            [(ngModel)]="child.checked"\n            (ionChange)="checkedAll(item)"\n          ></ion-checkbox>\n        </ion-item>\n      </ng-container>\n    </ng-container>\n  </ion-list>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar no-border-top class="page-bottom">\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <button ion-button block class="clear" color="light" (tap)="cancel()">\n            清除\n          </button>\n        </ion-col>\n        <ion-col col-6>\n          <button ion-button block class="ok-btn" (click)="save()">确定</button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/common-iotypes/common-iotypes.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_material_service__["a" /* MaterialService */]])
    ], CommonIotypesPage);
    return CommonIotypesPage;
}());

//# sourceMappingURL=common-iotypes.js.map

/***/ }),

/***/ 793:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InspectionItemHisPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_inspections_service__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the InspectionItemHisPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var InspectionItemHisPage = /** @class */ (function () {
    function InspectionItemHisPage(navCtrl, navParams, mutilservice, inspectionsprovider) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.mutilservice = mutilservice;
        this.inspectionsprovider = inspectionsprovider;
        this.page = 0;
        this.size = 10;
    }
    InspectionItemHisPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad InspectionItemHisPage');
        this.pageTitle = this.navParams.get('pageTitle');
        this.psrId = this.navParams.get('psrId');
        this.itemId = this.navParams.get('itemId');
        console.log(this.pageTitle, this.psrId, this.itemId);
        this.getItemhisList(true);
    };
    // 获取巡检列表
    InspectionItemHisPage.prototype.getItemhisList = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            psrId: this.psrId,
            itemId: this.itemId,
            page: this.page,
            size: this.size,
        };
        this.inspectionsprovider.getObjItemHis(params).subscribe(function (res) {
            if (res) {
                _this.objItemHisList = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    // 下拉刷新
    InspectionItemHisPage.prototype.doRefresh = function (refresher) {
        this.getItemhisList(true, refresher);
    };
    // 加载更多
    InspectionItemHisPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            psrId: this.psrId,
            itemId: this.itemId,
            page: this.page,
            size: this.size,
        };
        this.inspectionsprovider.getObjItemHis(params).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.objItemHisList = _this.objItemHisList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.objItemHisList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    InspectionItemHisPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-inspection-item-his',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections-details/inspection-item-his/inspection-item-his.html"*/'<!--\n  Generated template for the InspectionItemHisPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{pageTitle}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding class="card-list" #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div ion-item detail-none no-lines no-padding>\n      <ion-grid>\n        <ion-row>\n          <ion-col col-5>时间</ion-col>\n          <ion-col col-3>值</ion-col>\n          <ion-col col-4>备注</ion-col>\n        </ion-row>\n      </ion-grid>\n    </div>\n    <div\n      ion-item\n      detail-none\n      no-lines\n      no-padding\n      *ngFor="let objItemHis of objItemHisList"\n    >\n      <ion-grid>\n        <ion-row>\n          <ion-col col-5>{{objItemHis.item1}}</ion-col>\n          <ion-col col-3>{{objItemHis.item2}} </ion-col>\n          <ion-col col-4>{{objItemHis.item3}}</ion-col>\n        </ion-row>\n      </ion-grid>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/inspections-details/inspection-item-his/inspection-item-his.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_0__providers_inspections_service__["a" /* InspectionsProvider */]])
    ], InspectionItemHisPage);
    return InspectionItemHisPage;
}());

//# sourceMappingURL=inspection-item-his.js.map

/***/ }),

/***/ 794:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OperateTicketsSearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the OperateTicketsSearchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var OperateTicketsSearchPage = /** @class */ (function () {
    function OperateTicketsSearchPage(navCtrl, navParams, modalCtrl, alertCtrl, viewCtrl) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modalCtrl = modalCtrl;
        this.alertCtrl = alertCtrl;
        this.viewCtrl = viewCtrl;
        this.aQueryFlag = [
            { first: '01', second: '我的待办' },
            { first: '02', second: '我负责的' },
            { first: '03', second: '抄送我的' }
        ];
        this.customStartOperatePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.startOperateTime = null); }
                }
            ],
            cssClass: 'hiddenCancelButton'
        };
        this.customEndOperatePickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.endOperateTime = null); }
                }
            ],
            cssClass: 'hiddenCancelButton'
        };
    }
    OperateTicketsSearchPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad OperateTicketsSearchPage');
        this.searchParams = this.navParams.get('searchParams');
        this.queryFlag = this.searchParams.queryFlag;
        this.ticketCode = this.searchParams.ticketCode;
        this.station = this.searchParams.stationId
            ? { id: this.searchParams.stationId, title: this.searchParams.stationName }
            : null;
        this.startOperateTime = this.searchParams.startOperateTime;
        this.endOperateTime = this.searchParams.endOperateTime;
        this.executor = this.searchParams.executor;
        this.supervisior = this.searchParams.supervisior;
    };
    OperateTicketsSearchPage.prototype.selectQuickSearch = function (type) {
        if (this.queryFlag === type) {
            this.queryFlag = null;
        }
        else {
            this.queryFlag = type;
        }
        this.ok();
    };
    // 电站选择
    OperateTicketsSearchPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_3__common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.station = e;
            }
        });
        modal.present({ keyboardClose: true });
    };
    OperateTicketsSearchPage.prototype.clearStation = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.station = null;
    };
    OperateTicketsSearchPage.prototype.selectUser = function (key) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_2__common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this[key] = data.value[0];
                }
            }
        });
        modal.present();
    };
    OperateTicketsSearchPage.prototype.clearUser = function (event, key) {
        event.stopPropagation && event.stopPropagation();
        this[key] = null;
    };
    OperateTicketsSearchPage.prototype.ok = function () {
        var params = {
            queryFlag: this.queryFlag,
            ticketCode: this.ticketCode,
            stationId: this.station && this.station.id,
            stationName: this.station && this.station.title,
            startOperateTime: this.startOperateTime,
            endOperateTime: this.endOperateTime,
            executor: this.executor,
            supervisior: this.supervisior
        };
        if (this.startOperateTime &&
            this.endOperateTime &&
            __WEBPACK_IMPORTED_MODULE_4_moment___default()(this.startOperateTime).valueOf() > __WEBPACK_IMPORTED_MODULE_4_moment___default()(this.endOperateTime).valueOf()) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选操作时间范围不正确',
                buttons: ['确定']
            });
            alert_1.present();
            return;
        }
        this.viewCtrl.dismiss({ value: params, type: 'ok' });
    };
    OperateTicketsSearchPage.prototype.reset = function () {
        this.queryFlag = null;
        this.ticketCode = null;
        this.station = null;
        this.startOperateTime = __WEBPACK_IMPORTED_MODULE_4_moment___default()()
            .subtract(30, 'days')
            .format('YYYY-MM-DD');
        this.endOperateTime = __WEBPACK_IMPORTED_MODULE_4_moment___default()().format('YYYY-MM-DD');
        this.executor = null;
        this.supervisior = null;
    };
    OperateTicketsSearchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-operate-tickets-search',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/operate-tickets-search/operate-tickets-search.html"*/'<!--\n  Generated template for the OperateTicketsSearchPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content>\n  <div class="common-search-container">\n    <div class="common-search">\n      <div class="select-picker border-bottom">\n        <div class="query-label">快速查询</div>\n        <ion-grid>\n          <ion-row>\n            <ion-col col-4 *ngFor="let item of aQueryFlag">\n              <div\n                class="select-option"\n                [ngClass]="{\'active-option\': queryFlag===item.first}"\n                (click)="selectQuickSearch(item.first)"\n              >\n                {{item.second}}\n              </div></ion-col\n            >\n          </ion-row>\n        </ion-grid>\n      </div>\n      <div class="input-picker border-bottom">\n        <div class="query-label">操作票单号</div>\n        <ion-input type="text" value="" [(ngModel)]="ticketCode"></ion-input>\n      </div>\n      <div class="button-picker border-bottom">\n        <div class="query-label">电站</div>\n        <button ion-button round small color="light" (click)="selectStation()">\n          {{(station?.title)||\'未选择\'}}\n          <!-- <img\n                        *ngIf="station"\n                        (click)="clearStation($event)"\n                        class="clear-icon"\n                        src="assets/imgs/buttons/delete.png"\n                        alt=""\n                    /> -->\n          <ion-icon\n            *ngIf="station"\n            (click)="clearStation($event)"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n      <div class="time-picker border-bottom">\n        <div class="query-label">操作时间</div>\n        <ion-datetime\n          displayFormat="YYYY-MM-DD"\n          pickerFormat="YYYY/MM/DD"\n          doneText="确定"\n          [(ngModel)]="startOperateTime"\n          [pickerOptions]="customStartOperatePickerOptions"\n        ></ion-datetime>\n        <div class="line">-</div>\n        <ion-datetime\n          displayFormat="YYYY-MM-DD"\n          pickerFormat="YYYY/MM/DD"\n          doneText="确定"\n          [pickerOptions]="customEndOperatePickerOptions"\n          [(ngModel)]="endOperateTime"\n        ></ion-datetime>\n      </div>\n\n      <div class="button-picker border-bottom">\n        <div class="query-label">操作人</div>\n        <button\n          ion-button\n          round\n          small\n          color="light"\n          (click)="selectUser(\'executor\')"\n        >\n          {{(executor?.realName)||\'未选择\'}}\n          <!-- <img\n                        *ngIf="executor"\n                        (click)="clearUser($event,\'executor\')"\n                        class="clear-icon"\n                        src="assets/imgs/buttons/delete.png"\n                        alt=""\n                    /> -->\n          <ion-icon\n            *ngIf="executor"\n            (click)="clearUser($event,\'executor\')"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n      <div class="button-picker">\n        <div class="query-label">监护人</div>\n        <button\n          ion-button\n          round\n          small\n          color="light"\n          (click)="selectUser(\'supervisior\')"\n        >\n          {{(supervisior?.realName)||\'未选择\'}}\n          <!-- <img\n            *ngIf="supervisior"\n            (click)="clearUser($event,\'supervisior\')"\n            class="clear-icon"\n            src="assets/imgs/buttons/delete.png"\n            alt=""\n          /> -->\n          <ion-icon\n            *ngIf="supervisior"\n            (click)="clearUser($event,\'supervisior\')"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n    </div>\n    <ion-list>\n      <ion-row class="fix-bottom">\n        <ion-col col-6 text-center>\n          <button\n            ion-button\n            round\n            small\n            class="reset-btn"\n            color="light"\n            (click)="reset()"\n          >\n            重置\n          </button>\n        </ion-col>\n        <ion-col col-6 text-center>\n          <button ion-button round small class="query-btn" (click)="ok()">\n            查询\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-list>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/operate-tickets-search/operate-tickets-search.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], OperateTicketsSearchPage);
    return OperateTicketsSearchPage;
}());

//# sourceMappingURL=operate-tickets-search.js.map

/***/ }),

/***/ 795:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModulesDetails1Page; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_modules_service__ = __webpack_require__(92);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__monitor_monitor__ = __webpack_require__(235);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__warn_message_warn_message__ = __webpack_require__(176);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__device_details_device_details__ = __webpack_require__(801);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var ModulesDetails1Page = /** @class */ (function () {
    function ModulesDetails1Page(navCtrl, modalCtrl, event, navParams, viewCtrl, modulesService, menuController, mUtil, actionSheetCtrl) {
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.event = event;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.modulesService = modulesService;
        this.menuController = menuController;
        this.mUtil = mUtil;
        this.actionSheetCtrl = actionSheetCtrl;
        this.toDate = this.mUtil.buildTime('yyyy-MM-dd', new Date().getTime());
        this.modulesList = [];
        this.page = 0;
        this.canInfinite = false;
        this.param = this.navParams.get('param');
    }
    ModulesDetails1Page.prototype.ionViewDidLoad = function () {
        this.initDetails(this.param);
    };
    /**
     * 初始化详情页面
     * @param param 参数 感觉不同模块获取不同参数
     */
    ModulesDetails1Page.prototype.initDetails = function (param) {
        var _this = this;
        var that = this;
        this.modulesService.modulesDetailsInit(param).subscribe(function (e) {
            console.log('新首页模块详情初始化：11', e);
            if (e) {
                that.modulesDetails = e;
                if (e.dateType == '1' || e.dateType == '2') {
                    that.startDate = __WEBPACK_IMPORTED_MODULE_7_moment__(e.startDate).format();
                }
                if (e.dateType == '2') {
                    that.endDate = __WEBPACK_IMPORTED_MODULE_7_moment__(e.endDate).format();
                }
                that.getModulesList();
                _this.hasCharts = _this.modulesDetails.hasCharts;
                if (_this.hasCharts) {
                    _this.loadChart();
                }
            }
        });
    };
    /**
     * 获取列表信息
     * @param param
     */
    ModulesDetails1Page.prototype.getModulesList = function (refresher) {
        var _this = this;
        this.modulesService
            .modulesList(this.param, this.buildData())
            .subscribe(function (e) {
            console.log('数据列表:', _this.param, ' ', e);
            if (e && e['content'] && e['content'].length > 0) {
                _this.modulesList = _this.modulesList.concat(e['content']);
                // this.modulesList = e.content;
            }
            if (_this.modulesList.length >= e.totalElements) {
                _this.canInfinite = false;
            }
            else {
                _this.canInfinite = true;
            }
            if (refresher) {
                refresher.complete();
                console.log('加载完成后，关闭刷新');
            }
        });
    };
    ModulesDetails1Page.prototype.loadChart = function () {
        var _this = this;
        var params = this.buildData();
        delete params.page;
        delete params.size;
        this.modulesService.getModuleChart(this.param, params).subscribe(function (res) {
            _this.searchChartOption = res;
        });
    };
    ModulesDetails1Page.prototype.buildData = function () {
        // 入参	startDate：日期，必填，默认今天，格式yyyy-MM-dd
        // stationName：电站，非必填
        // provinceId：省ID，非必填
        // cityId：市ID，非必填
        // countyId：县ID，非必填
        // stationType：电站类型ID，非必填
        // sort：排序字段code，必填
        // direction：排序方向，asc或desc，必填
        // page：当前页（从0开始），默认0
        // size：每页记录数，默认10
        var data = {};
        if (this.modulesDetails.dateType == '1' ||
            this.modulesDetails.dateType == '2') {
            data['startDate'] = __WEBPACK_IMPORTED_MODULE_7_moment__(this.modulesDetails.startDate).format('YYYY-MM-DD');
        }
        if (this.modulesDetails.dateType == '2') {
            data['endDate'] = __WEBPACK_IMPORTED_MODULE_7_moment__(this.modulesDetails.endDate).format('YYYY-MM-DD');
        }
        data['provinceId'] =
            (this.modulesDetails.province && this.modulesDetails.province.first) ||
                '';
        data['cityId'] =
            (this.modulesDetails.city && this.modulesDetails.city.first) || '';
        data['countyId'] =
            (this.modulesDetails.county && this.modulesDetails.county.first) || '';
        data['stationType'] =
            (this.modulesDetails.station && this.modulesDetails.station.first) || '';
        data['sort'] = this.modulesDetails.defaultSort.first;
        data['direction'] = this.modulesDetails.direction || 'asc';
        data['stationName'] = this.modulesDetails.stationName;
        data['page'] = this.page || 0;
        data['size'] = 10;
        return data;
    };
    ModulesDetails1Page.prototype.goBack = function () {
        this.viewCtrl.dismiss();
    };
    /**搜索菜单打开时 */
    ModulesDetails1Page.prototype.menuInit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.modulesDetails));
    };
    /**搜索菜单关闭时 */
    ModulesDetails1Page.prototype.ionClose = function () { };
    /**控制侧边栏 */
    ModulesDetails1Page.prototype.serchMenu = function () {
        this.menuController.enable(true, 'search');
        this.menuController.open('search');
    };
    /**拼接图片路径 */
    ModulesDetails1Page.prototype.getImg = function (imgName) {
        return "assets/imgs/list/" + imgName;
    };
    /**
     * 生成选项列表
     * @param datas 列表
     * @param name1 列表显示内容的key
     * @param name2 点击需要的key值 若为空则取整个对象
     * @param key 保存在modulesDetails中的key值
     * @param isQ 是否查询初始化查询列表
     */
    ModulesDetails1Page.prototype.buildActionSheet = function (datas, name1, name2, key, isQ) {
        var that = this;
        var buttons = [];
        var _loop_1 = function (data) {
            buttons.push({
                text: data[name1],
                handler: function () {
                    if (name2) {
                        that.modulesDetails[key] = data[name2];
                    }
                    else {
                        that.modulesDetails[key] = data;
                    }
                    if (isQ) {
                        that.submit();
                    }
                },
            });
        };
        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {
            var data = datas_1[_i];
            _loop_1(data);
        }
        buttons.push({
            text: '取消',
            role: 'cancel',
            handler: function () {
                console.log('取消 clicked');
            },
        });
        var actionSheet = this.actionSheetCtrl.create({
            cssClass: 'modules-details1-sheetctrl',
            buttons: buttons,
        });
        actionSheet.present();
        console.log('Clicked to update picture');
    };
    /**选择 */
    ModulesDetails1Page.prototype.select = function (key) {
        switch (key) {
            case 'defaultSort':
                this.buildActionSheet(this.modulesDetails.sorts, 'second', '', key, true);
                break;
            case 'desc':
                this.modulesDetails.direction = key;
                this.submit();
                break;
            case 'asc':
                this.modulesDetails.direction = key;
                this.submit();
                break;
            case 'province':
                this.getRegions('CN', key);
                this.modulesDetails.city = null;
                this.modulesDetails.county = null;
                break;
            case 'city':
                if (this.modulesDetails.province &&
                    this.modulesDetails.province.first) {
                    this.getRegions(this.modulesDetails.province.first, key);
                    this.modulesDetails.county = null;
                }
                break;
            case 'county':
                if (this.modulesDetails.city && this.modulesDetails.city.first) {
                    this.getRegions(this.modulesDetails.city.first, key);
                }
                break;
            case 'station':
                this.getStationType(key);
                break;
        }
    };
    /**
     * 查询省，市，县列表
     */
    ModulesDetails1Page.prototype.getRegions = function (parentId, key) {
        var _this = this;
        this.modulesService.regions(parentId).subscribe(function (e) {
            console.log(e);
            if (e && e.length > 0) {
                _this.buildActionSheet(e, 'second', '', key, false);
            }
            else {
                _this.mUtil.popToastView('暂无相关数据!');
            }
        });
    };
    /**获取电站类型列表 */
    ModulesDetails1Page.prototype.getStationType = function (key) {
        var _this = this;
        this.modulesService.stationType().subscribe(function (e) {
            console.log(e);
            if (e && e.length > 0) {
                _this.buildActionSheet(e, 'second', '', key, false);
            }
        });
    };
    /**时间选择 */
    ModulesDetails1Page.prototype.changeDate = function (type) {
        this.modulesDetails[type] = this[type];
    };
    /**重置 */
    ModulesDetails1Page.prototype.reset = function () {
        this.modulesDetails = JSON.parse(JSON.stringify(this.backupsModulesDetails));
        this.startDate = this.mUtil.buildTime('yyyy-MM-dd', this.modulesDetails.startDate);
        this.endDate = this.mUtil.buildTime('yyyy-MM-dd', this.modulesDetails.endDate);
        /* delete history data */
        if (this.modulesDetails.station) {
            delete this.modulesDetails.station;
        }
    };
    /**查询 */
    ModulesDetails1Page.prototype.submit = function () {
        this.menuController.close('search');
        this.page = 0;
        this.modulesList = [];
        this.getModulesList();
        if (this.hasCharts) {
            this.loadChart();
        }
    };
    /**
     * 下拉刷新
     *
     */
    ModulesDetails1Page.prototype.doRefresh = function (refresher) {
        console.log('下拉刷新');
        this.page = 0;
        this.modulesList = [];
        this.getModulesList(refresher);
        if (this.hasCharts) {
            this.loadChart();
        }
    };
    /**
     * 上拉加载
     * @param infiniteScroll
     */
    ModulesDetails1Page.prototype.doInfinite = function (infiniteScroll) {
        console.log('Begin async operation');
        this.page++;
        this.getModulesList(infiniteScroll);
    };
    /**
     * 接入设备页面
     */
    ModulesDetails1Page.prototype.toDevicePage = function (modules) {
        console.log(modules);
        if (modules && modules.url) {
            switch (modules.url) {
                case 'APP_STATION_MONITOR':
                    //跳转到对应电站的电站监视页面
                    localStorage.setItem('stationId', modules.id);
                    this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__monitor_monitor__["a" /* MonitorPage */], { hadBackButton: true });
                    break;
                case 'APP_ALARM':
                    //跳转到告警记录页面
                    this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__warn_message_warn_message__["a" /* WarnMessage */], {
                        station: { id: modules.id, title: modules.title },
                    });
                    break;
                default:
                    //跳转到设备监视列表页面
                    var index = modules.url.indexOf('APP_MT_DEVICE_LIST');
                    if (index == 0) {
                        var datas = modules.url.split('?');
                        if (datas && datas.length > 0) {
                            var searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__device_details_device_details__["a" /* DeviceDetailsPage */], {
                                param: {
                                    data: datas[1],
                                    stationId: modules.id,
                                    deviceType: this.modulesDetails.defaultSort.first,
                                },
                            }, { showBackdrop: true });
                            searchModal.present();
                        }
                        else {
                            this.mUtil.customAlert({ msg: '缺少必要参数' });
                        }
                    }
            }
        }
    };
    // // 电站选择
    // selectStation() {
    //     let modal = this.modalCtrl.create(CommonStationPage, {});
    //     modal.onDidDismiss((e) => {
    //         if (e) {
    //             this.modulesDetails['stationName'] = e.title
    //             // this.station = e;
    //         }
    //     });
    //     modal.present({ keyboardClose: true });
    // }
    ModulesDetails1Page.prototype.getValueHighLight = function (item) {
        if (this.param === 'stationAlarm') {
            var trimString = item.replace(/\s*/g, "");
            return trimString.split(':');
        }
        return item;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('echart'),
        __metadata("design:type", Object)
    ], ModulesDetails1Page.prototype, "echart", void 0);
    ModulesDetails1Page = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-modules-details1',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details1/modules-details1.html"*/'<ion-header class="modal-header">\n  <ion-navbar>\n    <ion-buttons start>\n      <button ion-button icon-only (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>{{modulesDetails && modulesDetails.title || \'\'}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon name="ios-search" class="title-bar-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n  <ion-toolbar>\n    <div class="search">\n      <span class="select-item" (click)=\'select("defaultSort")\'\n        >{{modulesDetails && modulesDetails.defaultSort &&\n        modulesDetails.defaultSort.second || \'\'}}</span\n      >\n      <div class="sort-btns">\n        <span\n          [ngClass]="{active: (modulesDetails && modulesDetails.direction === \'asc\')}"\n          (click)=\'select("asc")\'\n        ></span>\n        <span\n          [ngClass]="{active: (modulesDetails && modulesDetails.direction === \'desc\')}"\n          (click)=\'select("desc")\'\n        ></span>\n      </div>\n      <!-- \n      <ion-icon\n        name="md-arrow-round-up"\n        class="sort"\n        *ngIf=\'!(modulesDetails && modulesDetails.direction === "desc")\'\n        (click)=\'select("desc")\'\n      ></ion-icon>\n      <ion-icon\n        name="md-arrow-round-down"\n        class="sort"\n        *ngIf=\'modulesDetails && modulesDetails.direction === "desc"\'\n        (click)=\'select("asc")\'\n      ></ion-icon> -->\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="刷新..."\n    >\n    </ion-refresher-content>\n  </ion-refresher>\n  <ng-container *ngIf="hasCharts">\n    <div\n      class="search-chart"\n      echarts\n      #echart\n      [options]="searchChartOption"\n    ></div>\n  </ng-container>\n\n  <div class="card-list">\n    <div\n      class="card"\n      *ngFor="let modules of modulesList"\n      (click)="toDevicePage(modules)"\n    >\n      <img [src]="getImg(modules.icon)" alt="" />\n      <!-- <ion-icon [name]="getImg(modules.icon)"></ion-icon> -->\n      <div class="card-content">\n        <div class="info">{{modules.info}}</div>\n        <h1>{{modules.title}}</h1>\n        <div class="card-content-list" *ngFor="let item of modules.items">\n          <span *ngIf="param === \'stationAlarm\'">\n            <span class="item-title">{{getValueHighLight(item)[0]}}:</span>\n            <span class="item-value">{{getValueHighLight(item)[1]}}</span>\n          </span>\n          <span class="item-title" *ngIf="param !== \'stationAlarm\'">\n            {{item}}\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ion-infinite-scroll\n    (ionInfinite)="doInfinite($event)"\n    threshold="5%"\n    *ngIf="canInfinite"\n  >\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n<ion-menu\n  [content]="search"\n  side="right"\n  (ionOpen)="menuInit()"\n  (ionClose)="ionClose()"\n  id="search"\n  type="overlay"\n  swipeEnabled="true"\n  class="search-menu"\n>\n  <ion-content class="outer-content" no-bounce class="my-custom-menu">\n    <div>\n      <div\n        class="condition"\n        *ngIf=\'modulesDetails && (modulesDetails.dateType == "1" || modulesDetails.dateType == "2")\'\n      >\n        <p>日期</p>\n        <span\n          [class.had-endtime]=\'modulesDetails && modulesDetails.dateType == "2"\'\n        >\n          <!-- {{(modulesDetails && modulesDetails.startDate || \'\') | date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="startDate"\n            [max]="toDate"\n            (ionChange)="changeDate(\'startDate\')"\n          ></ion-datetime>\n        </span>\n        <span\n          [class.had-endtime]=\'modulesDetails && modulesDetails.dateType == "2"\'\n          *ngIf=\'modulesDetails && modulesDetails.dateType == "2"\'\n        >\n          <!-- {{(modulesDetails && modulesDetails.endDate || \'\')| date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="endDate"\n            [max]="toDate"\n            (ionChange)="changeDate(\'endDate\')"\n          ></ion-datetime>\n        </span>\n      </div>\n      <div class="condition">\n        <p>电站</p>\n        <!-- <span>请选择</span> -->\n        <input\n          type="text"\n          placeholder="请输入"\n          [(ngModel)]="modulesDetails[\'stationName\']"\n          *ngIf="modulesDetails"\n        />\n      </div>\n      <div class="condition">\n        <p>区域</p>\n        <span (click)=\'select("province")\'\n          >{{this.modulesDetails && this.modulesDetails.province &&\n          this.modulesDetails.province.second || \'省\'}}</span\n        >\n        <span (click)=\'select("city")\'\n          >{{this.modulesDetails && this.modulesDetails.city &&\n          this.modulesDetails.city.second || \'市\'}}</span\n        >\n        <span (click)=\'select("county")\'\n          >{{this.modulesDetails && this.modulesDetails.county &&\n          this.modulesDetails.county.second || \'县\'}}</span\n        >\n      </div>\n      <div class="condition">\n        <p>电站类型</p>\n        <span (click)=\'select("station")\'\n          >{{this.modulesDetails && this.modulesDetails.station &&\n          this.modulesDetails.station.second || \'请选择\'}}</span\n        >\n      </div>\n    </div>\n    <div class="my-button">\n      <button (click)="reset()">重置</button>\n      <button (click)="submit()">查询</button>\n    </div>\n  </ion-content>\n</ion-menu>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details1/modules-details1.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_modules_service__["a" /* ModulesService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */]])
    ], ModulesDetails1Page);
    return ModulesDetails1Page;
}());

//# sourceMappingURL=modules-details1.js.map

/***/ }),

/***/ 796:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CameraListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__camera_hls_camera_hls__ = __webpack_require__(797);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_video_service__ = __webpack_require__(345);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular_navigation_nav_params__ = __webpack_require__(37);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var CameraListPage = /** @class */ (function () {
    function CameraListPage(navCtrl, videoService, navParams, loadingCtrl, viewCtrl) {
        this.navCtrl = navCtrl;
        this.videoService = videoService;
        this.navParams = navParams;
        this.loadingCtrl = loadingCtrl;
        this.viewCtrl = viewCtrl;
        this.search = '';
        this.stationId = this.navParams.get('stationId');
    }
    CameraListPage.prototype.ionViewDidLoad = function () {
        this.getVideoList();
    };
    CameraListPage.prototype.getVideoList = function () {
        var _this = this;
        if (this.stationId) {
            this.videoService.getCameras({ stationId: this.stationId }).subscribe(function (e) {
                console.log(e);
                if (e && e.length > 0) {
                    _this.videoList = e;
                }
            });
        }
    };
    CameraListPage.prototype.play = function (video) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__camera_hls_camera_hls__["a" /* CameraHlsPage */], {
            cameraId: video.cameraId
        });
    };
    CameraListPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    CameraListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-cameraList',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/camera-list/camera-list.html"*/'<ion-header>\n  <ion-navbar>\n    <!-- <ion-buttons start>\n            <button (click)="close()" class="qz-back">返回</button>\n        </ion-buttons> -->\n    <ion-title>摄像头列表</ion-title>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n  <ion-list no-lines class="ledger">\n    <ng-container *ngFor="let video of videoList;let i = index">\n      <button ion-item [class.target]="i%2 === 0" (click)="play(video)">\n        <span>{{video.cameraName}}</span>\n      </button>\n    </ng-container>\n    <!-- <button ion-item>\n            <span>摄像头位置一</span>\n        </button>\n        <button ion-item target>\n            <span>摄像头位置一</span>\n        </button>  -->\n  </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/camera-list/camera-list.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_video_service__["a" /* VideoService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular_navigation_nav_params__["a" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["l" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */]])
    ], CameraListPage);
    return CameraListPage;
}());

//# sourceMappingURL=camera-list.js.map

/***/ }),

/***/ 797:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CameraHlsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_video_service__ = __webpack_require__(345);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_videogular2_src_streaming_vg_hls_vg_hls__ = __webpack_require__(556);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_videogular2_src_streaming_vg_hls_vg_hls___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_videogular2_src_streaming_vg_hls_vg_hls__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_screen_orientation__ = __webpack_require__(379);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_status_bar__ = __webpack_require__(247);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_hls_js__ = __webpack_require__(1249);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_hls_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_hls_js__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the CameraHlsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var CameraHlsPage = /** @class */ (function () {
    function CameraHlsPage(navCtrl, navParams, videoservice, screenOrientation, statusBar) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.videoservice = videoservice;
        this.screenOrientation = screenOrientation;
        this.statusBar = statusBar;
        this.currentStream = null;
        this.playr = {};
        this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.LANDSCAPE);
        // this.videoservice.getHikHls(cameraId).subscribe((res) => {
        //     this.currentStream = res;
        //     this.api.play();
        // });
    }
    CameraHlsPage.prototype.onPlayerReady = function (api) {
    };
    CameraHlsPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        var cameraId = this.navParams.get('cameraId');
        var params = {
            cameraIds: cameraId,
            protocol: 2,
            quality: 1
        };
        var videoContentEle = document.getElementById('video-content');
        this.videoservice.getCamerasLiveAddress(params).subscribe(function (object) {
            var video = document.getElementById('video-container-main');
            var hls = null;
            video.width = videoContentEle.offsetWidth;
            video.height = videoContentEle.offsetHeight;
            // video.height = videoContentEle.offsetHeight;
            var videoSrc = object[cameraId].url;
            if (__WEBPACK_IMPORTED_MODULE_6_hls_js___default.a.isSupported()) {
                hls = new __WEBPACK_IMPORTED_MODULE_6_hls_js___default.a();
                hls.loadSource(videoSrc);
                hls.attachMedia(video);
                hls.on(__WEBPACK_IMPORTED_MODULE_6_hls_js___default.a.Events.MANIFEST_PARSED, function () {
                    video.play();
                });
            }
            else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = videoSrc;
                video.addEventListener('loadedmetadata', function () {
                    video.play();
                });
            }
            _this.playr = {
                video: video,
                hls: hls,
            };
        });
    };
    CameraHlsPage.prototype.back = function () {
        this.navCtrl.pop();
    };
    CameraHlsPage.prototype.ionViewWillLeave = function () {
        if (this.playr && this.playr.hls) {
            this.playr.hls.destroy();
            this.playr.hls = null;
        }
        if (this.playr && this.playr.video) {
            this.playr.video.pause();
        }
        this.playr = {};
        this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.PORTRAIT);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_3_videogular2_src_streaming_vg_hls_vg_hls__["VgHLS"]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3_videogular2_src_streaming_vg_hls_vg_hls__["VgHLS"])
    ], CameraHlsPage.prototype, "vgHls", void 0);
    CameraHlsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-camera-hls',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/camera-hls/camera-hls.html"*/'<ion-content id="video-content">\n  <video id="video-container-main" (dblclick)="back()"></video>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/camera-hls/camera-hls.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0__providers_video_service__["a" /* VideoService */],
            __WEBPACK_IMPORTED_MODULE_4__ionic_native_screen_orientation__["a" /* ScreenOrientation */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_status_bar__["a" /* StatusBar */]])
    ], CameraHlsPage);
    return CameraHlsPage;
}());

//# sourceMappingURL=camera-hls.js.map

/***/ }),

/***/ 798:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EquipmentListPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_monitor_service__ = __webpack_require__(113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_cache_service__ = __webpack_require__(227);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__home_equipment_message_equipment_message__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__barcode_scanner_barcode_scanner__ = __webpack_require__(170);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var EquipmentListPage = /** @class */ (function () {
    function EquipmentListPage(navCtrl, monitorService, cacheService, navParams, viewCtrl) {
        this.navCtrl = navCtrl;
        this.monitorService = monitorService;
        this.cacheService = cacheService;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.equipmentTypes = [];
        this.equipmentAreas = [];
        this.equipmentList = [];
        this.param = {
            areaIds: '',
            classIds: '',
            deviceNoOrName: '',
        };
        this.pageIndex = 0;
        this.moreEquipmentAreas = false;
        this.moreEquipmentType = false;
        /********************************筛选条件*************************************************************************/
        /**显示/隐藏赛选页 */
        this.location_switch = true;
        this.type_switch = true;
        this.switch = true;
        /********************************筛选条件*************************************************************************/
        this.noDoInfinite = false;
        this.stationId = this.navParams.get('stationId');
    }
    /**设备区域查询条件 */
    EquipmentListPage.prototype.getEquipmentAreas = function () {
        var _this = this;
        this.monitorService.getEquipmentArea(this.stationId).subscribe(function (e) {
            if (e) {
                _this.equipmentAreas = e;
                console.log(e);
            }
        });
    };
    /**电站类型查询条件 */
    EquipmentListPage.prototype.getEquipmentTypes = function () {
        var _this = this;
        this.monitorService.getDeviceClasses({ stationId: this.stationId }).subscribe(function (e) {
            if (e) {
                _this.equipmentTypes = e;
                console.log(e);
            }
        });
    };
    /**电站列表查询 */
    EquipmentListPage.prototype.getEquipmentList = function (refresher) {
        var _this = this;
        if (this.timeout) {
            clearTimeout(this.timeout);
        }
        this.timeout = setTimeout(function () {
            _this.monitorService
                .getDevicesListUrl({
                stationId: _this.stationId,
                deviceNoOrName: _this.param.deviceNoOrName,
                classIds: _this.param.classIds,
                areaIds: _this.param.areaIds,
                page: _this.pageIndex,
                size: 10,
            })
                .subscribe(function (e) {
                if (e) {
                    console.log(e);
                    _this.equipmentList = _this.equipmentList.concat(e['content']);
                    if (!e['content'].length || e['content'].length < 0) {
                        _this.noDoInfinite = true;
                    }
                    else {
                        _this.noDoInfinite = false;
                    }
                }
                if (refresher)
                    refresher.complete();
            });
        }, 1000 * 1.5);
    };
    EquipmentListPage.prototype.ionViewDidLoad = function () {
        this.pageIndex = 0;
        this.param = this.cacheService.getDevicesSelect();
        this.getEquipmentList();
        this.getEquipmentAreas();
        this.getEquipmentTypes();
    };
    EquipmentListPage.prototype.ionViewWillEnter = function () {
        this.deviceNoOrName = this.navParams.get('qrResult');
        if (this.deviceNoOrName) {
            this.navParams.data.qrResult = null;
            this.param = {
                areaIds: '',
                classIds: '',
                deviceNoOrName: this.deviceNoOrName,
            };
            this.equipmentList = [];
            this.getEquipmentList();
        }
    };
    EquipmentListPage.prototype.ionViewWillLeave = function () {
        this.cacheService.setEquipmentSelect(this.param);
    };
    EquipmentListPage.prototype.getValue = function (value, number) {
        var arr = value.split(':');
        if (number == 0)
            return arr[number];
        if (number == 1 && arr.length == 2)
            return arr[number];
        else
            return '无';
    };
    EquipmentListPage.prototype.select = function (type, id) {
        if (id === this.param[type]) {
            this.param[type] = '';
        }
        else {
            this.param[type] = id;
        }
        this.equipmentList = [];
        this.pageIndex = 0;
        this.getEquipmentList();
    };
    EquipmentListPage.prototype.onCancel = function () {
        this.equipmentList = [];
        this.pageIndex = 0;
        this.getEquipmentList();
    };
    EquipmentListPage.prototype.doInfinite = function (refresher) {
        this.pageIndex++;
        this.getEquipmentList(refresher);
    };
    EquipmentListPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    EquipmentListPage.prototype.checkClick = function (equipment) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__home_equipment_message_equipment_message__["a" /* EquipmentMessage */], { deviceId: equipment.deviceId });
    };
    EquipmentListPage.prototype.scan = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__barcode_scanner_barcode_scanner__["a" /* BarcodeScannerPage */]);
    };
    EquipmentListPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'station-equipment-list',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/equipment/equipmentList.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title> 设备 </ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="scan()">\n        <ion-icon name="scan" class="title-bar-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n  <ion-toolbar>\n    <ion-searchbar\n      [(ngModel)]="param.deviceNoOrName"\n      placeholder="设备名称或编号"\n      (ionInput)="onCancel($event)"\n    >\n    </ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n<ion-content>\n  <ng-container>\n    <ng-container *ngIf="switch">\n      <div class="select-div">\n        <div class="other-title">\n          <span class="title">位置</span>\n        </div>\n        <div class="craft-div-box">\n          <ng-container *ngFor="let province of equipmentAreas;let i=index">\n            <div\n              *ngIf="i<5||moreEquipmentAreas"\n              class="craft-div"\n              [class.active]="province.id == param.areaIds"\n              (click)=\'select("areaIds",province.id)\'\n            >\n              {{province.name}}\n            </div>\n            <div\n              *ngIf="i==5&&!moreEquipmentAreas"\n              class="craft-div craft-more"\n              (click)="moreEquipmentAreas=true"\n            >\n              更多\n            </div>\n          </ng-container>\n        </div>\n        <div class="other-title">\n          <span class="title">类型</span>\n        </div>\n        <div class="craft-div-box" *ngIf="type_switch">\n          <ng-container\n            *ngFor="let equipmentType of equipmentTypes;let i=index"\n          >\n            <div\n              *ngIf="i<5||moreEquipmentType"\n              class="device-div"\n              [class.active]="equipmentType.id == param.classIds"\n              (click)=\'select("classIds",equipmentType.id)\'\n            >\n              {{equipmentType.name}}\n            </div>\n            <div\n              *ngIf="i==5&&!moreEquipmentType"\n              class="craft-div craft-more"\n              (click)="moreEquipmentType=true"\n            >\n              更多\n            </div>\n          </ng-container>\n        </div>\n      </div>\n    </ng-container>\n    <div class="open" (click)="switch=!switch">\n      <div></div>\n    </div>\n  </ng-container>\n\n  <div class="notice-list-box">\n    <div\n      class="new-notice-list"\n      *ngFor="let equipment of equipmentList"\n      (click)="checkClick(equipment)"\n    >\n      <div class="notice">\n        <div class="notice-title">{{equipment.displayName}}</div>\n        <div class="notice-subtitle">\n          <div class="notice-subtitle-content">\n            <span>{{equipment.areaName}}</span>\n          </div>\n        </div>\n        <div class="notice-subtitle">\n          <div class="notice-subtitle-content">\n            <span>{{equipment.className}}</span>|\n            <span>{{equipment.modelNo}}</span>\n          </div>\n        </div>\n      </div>\n      <div class="left-img">\n        <img src="assets/imgs/list/device.png" class="alarm-img" />\n        <!-- <ion-icon name="device" class="alarm-img"></ion-icon> -->\n        <div class="line"></div>\n      </div>\n    </div>\n    <ion-infinite-scroll\n      (ionInfinite)="doInfinite($event)"\n      *ngIf="!noDoInfinite"\n    >\n      <ion-infinite-scroll-content\n        loadingSpinner="bubbles"\n        loadingText="加载更多数据..."\n      >\n      </ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/equipment/equipmentList.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_monitor_service__["a" /* MonitorService */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_cache_service__["a" /* CacheService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], EquipmentListPage);
    return EquipmentListPage;
}());

//# sourceMappingURL=equipmentList.js.map

/***/ }),

/***/ 799:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PowStaRecords; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var PowStaRecords = /** @class */ (function () {
    function PowStaRecords(navCtrl, viewCtrl) {
        this.navCtrl = navCtrl;
        this.viewCtrl = viewCtrl;
        this.jibenMessage = [
            {
                name: '电站名称:',
                data: '启东盛世'
            },
            {
                name: '电站简称:',
                data: '海工车间'
            },
            {
                name: '电站编号:',
                data: 'DQKH-0001'
            },
            {
                name: '设计装机容量:',
                data: '20MW'
            },
            {
                name: '并网装机容量:',
                data: '15MW'
            },
            {
                name: '并网方式:',
                data: '并网方式1'
            },
            {
                name: '并网电压等级:',
                data: '等级1'
            },
            {
                name: '组建布置方式:',
                data: '方式1'
            },
            {
                name: '组建安装角度:',
                data: '20°'
            },
            {
                name: '电站状态:',
                data: '已接入系统'
            },
            {
                name: '所属部门:',
                data: '启东办事处'
            },
            {
                name: '竣工日期:',
                data: '2018-05-06'
            },
            {
                name: '并网日期:',
                data: '2018-05-16'
            },
            {
                name: '电站站长:',
                data: '李建富'
            },
        ];
    }
    PowStaRecords.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    PowStaRecords = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'pow-sta-records',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/power-station-records/pow.sta.records.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-buttons start >\n            <button (click) = \'close()\'  class = \'qz-back\'> 返回</button>\n        </ion-buttons>\n        <ion-title>电站档案</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <!-- ****** 基本信息 ****** -->\n    <div class="records">\n        <div class="rank">\n            <span class="line"></span>\n            <span class="r-title">基本信息</span>\n            <span class="line"></span>\n        </div>\n        <div class="records-message" *ngFor = "let mes of jibenMessage">\n            <span class="xing">*</span>\n            <span class="name">{{mes.name}}</span>\n            <span>{{mes.data}}</span>\n        </div>\n    </div>\n    <div></div>\n     <!-- ****** 地理位置信息 ****** -->\n    <div class="records">\n        <div class="rank">\n            <span class="line"></span>\n            <span class="r-title">地理位置信息</span>\n            <span class="line"></span>\n        </div>\n        <div class="records-message">\n            <span class="xing">*</span>\n            <span>国家:</span>\n            <span>中国</span>\n        </div>\n        <div class="records-message">\n            <span class="xing">*</span>\n            <span>省份:</span>\n            <span>江苏</span>\n        </div>\n        <div class="records-message">\n            <span class="xing">*</span>\n            <span>市/县:</span>\n            <span>南靖市/启东县</span>\n        </div>\n        <div class="records-message">\n            <span class="xing">*</span>\n            <span>经度:</span>\n            <span>124.32445</span>\n        </div>\n    </div>\n     <!-- ****** 其他信息 ****** -->\n    <div class="records">\n        <div class="rank">\n            <span class="line"></span>\n            <span class="r-title">其他信息</span>\n            <span class="line"></span>\n        </div>\n        <div class="records-message">\n            <span>占地面积:</span>\n            <span>800㎡</span>\n        </div>\n        <div class="records-message">\n            <span>海拔:</span>\n            <span>800</span>\n        </div>\n        <div class="records-message">\n            <span class="xing">*</span>\n            <span>产权单位:</span>\n            <span>单位名称</span>\n        </div>\n        <div class="records-message">\n            <span>设计单位:</span>\n            <span>单位名称</span>\n        </div>\n    </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/power-station-records/pow.sta.records.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], PowStaRecords);
    return PowStaRecords;
}());

//# sourceMappingURL=pow.sta.records.js.map

/***/ }),

/***/ 800:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SettingPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var SettingPage = /** @class */ (function () {
    function SettingPage(navCtrl, navParms, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParms = navParms;
        this.viewCtrl = viewCtrl;
        this.buttonList = [
            {
                name: '正序',
                value: 'asc',
                active: false
            },
            {
                name: '倒序',
                value: 'desc',
                active: false
            }
        ];
        this.rankingButtonList = [
            {
                name: '日发电量',
                value: 'AI-NB-ZXYGDD-D',
                active: false
            },
            {
                name: '月发电量',
                value: 'AI-NB-ZXYGDD-M',
                active: false
            },
            {
                name: '日等效时数',
                value: 'AI-NB-ZXYGDXS-D',
                active: false
            },
            {
                name: '月等效时数    ',
                value: 'AI-NB-ZXYGDXS-M',
                active: false
            }
        ];
        this.inverterrankParam = {
            cateId: 'AI-NB-ZXYGDXS-D',
            sort: 'desc'
        };
        this.inverterrankParam = this.navParms.get('inverterrankParam');
    }
    SettingPage.prototype.select = function (type, value) {
        this.inverterrankParam[type] = value;
    };
    SettingPage.prototype.close = function (type) {
        if (type == 'y') {
            this.viewCtrl.dismiss(this.inverterrankParam);
        }
        else {
            this.viewCtrl.dismiss();
        }
    };
    SettingPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'pow-setting',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/child/setting.html"*/'<ion-content class="model" no-scroll>\n  <div class="qz-content">\n    <div class="list-button">\n      <!-- <div ></div> -->\n      <p><img src="assets/imgs/home/title-icon.png" alt="" />排序方式</p>\n      <button\n        *ngFor="let button of buttonList"\n        class="select-item"\n        [class.active]="button.value == inverterrankParam.sort"\n        (click)=\'select("sort",button.value)\'\n      >\n        {{button.name}}\n      </button>\n    </div>\n    <div class="list-button">\n      <!-- <div ></div> -->\n      <p><img src="assets/imgs/home/title-icon.png" alt="" />排名内容</p>\n      <button\n        *ngFor="let button of rankingButtonList"\n        class="select-item"\n        [class.active]="button.value == inverterrankParam.cateId"\n        (click)=\'select("cateId",button.value)\'\n      >\n        {{button.name}}\n      </button>\n    </div>\n    <div class="submit">\n      <button class="submit-button" (click)=\'close("n")\'>取消</button\n      ><button class="submit-button" (click)=\'close("y")\'>确定</button>\n    </div>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/monitor/child/setting.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], SettingPage);
    return SettingPage;
}());

//# sourceMappingURL=setting.js.map

/***/ }),

/***/ 801:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeviceDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_modules_service__ = __webpack_require__(92);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__equipment_message_equipment_message__ = __webpack_require__(90);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var DeviceDetailsPage = /** @class */ (function () {
    function DeviceDetailsPage(navCtrl, modalCtrl, event, navParams, viewCtrl, modulesService, menuController, mUtil, actionSheetCtrl) {
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.event = event;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.modulesService = modulesService;
        this.menuController = menuController;
        this.mUtil = mUtil;
        this.actionSheetCtrl = actionSheetCtrl;
        this.param = {
            data: '',
            stationId: '',
            deviceType: ''
        }; //参数
        this.station = {};
        this.toDate = this.mUtil.buildTime('yyyy-MM-dd', new Date().getTime());
        this.modulesList = [];
        this.page = 0;
        this.canInfinite = false;
        this.param = this.navParams.get('param');
    }
    DeviceDetailsPage.prototype.ionViewDidLoad = function () {
        this.initDetails(this.param);
    };
    /**
     * 初始化详情页面
     * @param param 参数 根据不同模块获取不同参数
     */
    DeviceDetailsPage.prototype.initDetails = function (param) {
        var that = this;
        this.modulesService.deviceListInit(param.data, param.deviceType, param.stationId).subscribe(function (e) {
            console.log('设备状态列表初始化：', e);
            if (e) {
                that.station['id'] = param.stationId;
                that.station['title'] = e.title;
                that.modulesDetails = e;
                // if (e.dateType == '1' || e.dateType == '2') {
                //     that.startDate = that.mUtil.buildTime('yyyy-MM-dd', e.startDate);
                // }
                // if (e.dateType == '2') {
                //     that.endDate = that.mUtil.buildTime('yyyy-MM-dd', e.endDate);
                // }
                that.getModulesList();
            }
        });
    };
    /**
     * 获取列表信息
     * @param param
     */
    DeviceDetailsPage.prototype.getModulesList = function (refresher) {
        var _this = this;
        this.modulesService.deviceList(this.param.data, this.buildData()).subscribe(function (e) {
            console.log('数据列表:', _this.param, " ", e);
            if (e && e["content"] && e["content"].length > 0) {
                _this.modulesList = _this.modulesList.concat(e["content"]);
                // this.modulesList = e.content; 
            }
            if (_this.modulesList.length >= e.totalElements) {
                _this.canInfinite = false;
            }
            else {
                _this.canInfinite = true;
            }
            if (refresher) {
                refresher.complete();
                console.log('加载完成后，关闭刷新');
            }
        });
    };
    DeviceDetailsPage.prototype.buildData = function () {
        // stationId：电站ID，必填，单选
        // status：状态列表，非必填
        // deviceTypes：设备分类列表，非必填
        // deviceName：设备编号或名称，非必填
        // sort：排序字段code，必填
        // direction：排序方向，asc或desc，必填
        // page：当前页（从0开始），默认0 
        // size：每页记录数，默认10
        var build = function (data) {
            var param = '';
            for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
                var obj = data_1[_i];
                if (obj && obj.selected) {
                    if (param)
                        param = param + ',' + obj.id;
                    else
                        param = obj.id;
                }
            }
            return param;
        };
        var data = {};
        data['stationId'] = this.param.stationId;
        data['status'] = build(this.modulesDetails.status);
        data['deviceTypes'] = build(this.modulesDetails.deviceTypes);
        ;
        data['deviceName'] = this.modulesDetails.deviceName;
        data['sort'] = this.modulesDetails.defaultSort.first;
        data['direction'] = this.modulesDetails.direction || 'asc';
        data['page'] = this.page || 0;
        data['size'] = 10;
        return data;
    };
    DeviceDetailsPage.prototype.goBack = function () {
        this.viewCtrl.dismiss();
    };
    /**搜索菜单打开时 */
    DeviceDetailsPage.prototype.menuInit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.modulesDetails));
    };
    /**搜索菜单关闭时 */
    DeviceDetailsPage.prototype.ionClose = function () {
    };
    /**控制侧边栏 */
    DeviceDetailsPage.prototype.serchMenu = function () {
        this.menuController.enable(true, 'deivcesearch');
        this.menuController.open('deivcesearch');
    };
    /**拼接图片路径 */
    DeviceDetailsPage.prototype.getImg = function (imgName) {
        return this.modulesService.getImg(imgName);
    };
    /**
     * 生成选项列表
     * @param datas 列表
     * @param name1 列表显示内容的key
     * @param name2 点击需要的key值 若为空则取整个对象
     * @param key 保存在modulesDetails中的key值
     * @param isQ 是否查询初始化查询列表
     */
    DeviceDetailsPage.prototype.buildActionSheet = function (datas, name1, name2, key, isQ) {
        var that = this;
        var buttons = [];
        var _loop_1 = function (data) {
            buttons.push({
                text: data[name1],
                handler: function () {
                    if (name2) {
                        that.modulesDetails[key] = data[name2];
                    }
                    else {
                        that.modulesDetails[key] = data;
                    }
                    if (isQ) {
                        that.submit();
                    }
                }
            });
        };
        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {
            var data = datas_1[_i];
            _loop_1(data);
        }
        buttons.push({
            text: '取消',
            role: 'cancel',
            handler: function () {
                console.log('取消 clicked');
            }
        });
        var actionSheet = this.actionSheetCtrl.create({
            cssClass: 'modules-details1-sheetctrl',
            buttons: buttons
        });
        actionSheet.present();
        console.log('Clicked to update picture');
    };
    /**选择 */
    DeviceDetailsPage.prototype.select = function (key, obj) {
        switch (key) {
            case 'defaultSort':
                this.buildActionSheet(this.modulesDetails.sorts, 'second', '', key, true);
                break;
            case 'desc':
                this.modulesDetails.direction = key;
                this.submit();
                break;
            case 'asc':
                this.modulesDetails.direction = key;
                this.submit();
                break;
            case 'status':
                if (obj)
                    obj.selected = !obj.selected;
                break;
            case 'deviceTypes':
                if (obj)
                    obj.selected = !obj.selected;
                break;
        }
    };
    /**重置 */
    DeviceDetailsPage.prototype.reset = function () {
        this.modulesDetails = JSON.parse(JSON.stringify(this.backupsModulesDetails));
    };
    /**查询 */
    DeviceDetailsPage.prototype.submit = function () {
        this.menuController.close('deivcesearch');
        this.page = 0;
        this.modulesList = [];
        if (this.station['id'] !== this.param.stationId) {
            this.param.stationId = this.station['id'];
            this.param.stationId = this.station['id'];
            this.modulesDetails.title = this.station['title'];
        }
        this.getModulesList();
    };
    /**
     * 下拉刷新
     *
     */
    DeviceDetailsPage.prototype.doRefresh = function (refresher) {
        console.log("下拉刷新");
        this.page = 0;
        this.modulesList = [];
        this.getModulesList(refresher);
    };
    /**
     * 上拉加载
     * @param infiniteScroll
     */
    DeviceDetailsPage.prototype.doInfinite = function (infiniteScroll) {
        console.log('Begin async operation');
        this.page++;
        this.getModulesList(infiniteScroll);
    };
    // 电站选择
    DeviceDetailsPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                // this.modulesDetails['stationName'] = e.title
                // this.param.stationId =  e.id
                _this.station = e;
            }
        });
        modal.present({ keyboardClose: true });
    };
    /**
     * 进入设备监测页面
     * @param equipment
     */
    DeviceDetailsPage.prototype.checkClick = function (modules) {
        if (modules && modules.url && modules.url == 'APP_DEVICE_MONITOR')
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__equipment_message_equipment_message__["a" /* EquipmentMessage */], { deviceId: modules.id });
    };
    DeviceDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-device-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details1/device-details/device-details.html"*/'<ion-header>\n  <ion-navbar hideBackButton="true">\n    <ion-buttons start>\n      <button (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>{{modulesDetails && modulesDetails.title || \'\'}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon name="ios-search" class="title-bar-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n  <ion-toolbar>\n    <div class="search">\n      <span class="select-item" (click)=\'select("defaultSort")\'\n        >{{modulesDetails && modulesDetails.defaultSort &&\n        modulesDetails.defaultSort.second || \'\'}}</span\n      >\n      <div class="sort-btns">\n        <span\n          [ngClass]="{active: (modulesDetails && modulesDetails.direction === \'asc\')}"\n          (click)=\'select("asc")\'\n        ></span>\n        <span\n          [ngClass]="{active: (modulesDetails && modulesDetails.direction === \'desc\')}"\n          (click)=\'select("desc")\'\n        ></span>\n      </div>\n      <!-- \n      <ion-icon\n        name="md-arrow-round-up"\n        class="sort"\n        *ngIf=\'!(modulesDetails && modulesDetails.direction === "desc")\'\n        (click)=\'select("desc")\'\n      ></ion-icon>\n      <ion-icon\n        name="md-arrow-round-down"\n        class="sort"\n        *ngIf=\'modulesDetails && modulesDetails.direction === "desc"\'\n        (click)=\'select("asc")\'\n      ></ion-icon> -->\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content #deivcesearch>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="刷新..."\n    >\n    </ion-refresher-content>\n  </ion-refresher>\n  <div class="card-list">\n    <div\n      class="card"\n      *ngFor="let modules of modulesList"\n      (click)="checkClick(modules)"\n    >\n      <img [src]="getImg(modules.icon)" alt="" />\n      <div class="card-content">\n        <div class="info">{{modules.info}}</div>\n        <h1>{{modules.title}}</h1>\n        <div class="card-content-list" *ngFor="let item of modules.items">\n          {{item}}\n        </div>\n      </div>\n    </div>\n  </div>\n  <ion-infinite-scroll\n    (ionInfinite)="doInfinite($event)"\n    threshold="5%"\n    *ngIf="canInfinite"\n  >\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n<ion-menu\n  [content]="deivcesearch"\n  side="right"\n  (ionOpen)="menuInit()"\n  (ionClose)="ionClose()"\n  id="deivcesearch"\n  type="overlay"\n  swipeEnabled="true"\n  class="search-menu"\n>\n  <ion-content class="outer-content" no-bounce class="my-custom-menu">\n    <div>\n      <div class="condition">\n        <p>电站</p>\n        <span (click)="selectStation()"\n          >{{station && station[\'title\'] || \'请选择\'}}</span\n        >\n        <!-- <input type="text"  placeholder="请输入" [(ngModel)]="modulesDetails[\'stationName\']" *ngIf = \'modulesDetails\' > -->\n      </div>\n\n      <div class="condition" *ngIf="modulesDetails && modulesDetails.status">\n        <p>状态</p>\n        <span\n          class="select-box"\n          (click)=\'select("status",status)\'\n          *ngFor="let status of modulesDetails.status"\n          [class.selected]="status.selected"\n          >{{status.name}}</span\n        >\n      </div>\n      <div\n        class="condition"\n        *ngIf="modulesDetails && modulesDetails.deviceTypes"\n      >\n        <p>设备类型</p>\n        <span\n          class="select-box"\n          (click)=\'select("deviceTypes",deviceTypes)\'\n          *ngFor="let deviceTypes of modulesDetails.deviceTypes"\n          [class.selected]="deviceTypes.selected"\n          >{{deviceTypes.name}}</span\n        >\n      </div>\n      <div class="condition">\n        <p>设备编号或名称</p>\n        <input\n          type="text"\n          placeholder="请输入"\n          [(ngModel)]="modulesDetails[\'deviceName\']"\n          *ngIf="modulesDetails"\n        />\n      </div>\n    </div>\n    <div class="my-button">\n      <button (click)="reset()">重置</button>\n      <button (click)="submit()">查询</button>\n    </div>\n  </ion-content>\n</ion-menu>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details1/device-details/device-details.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_modules_service__["a" /* ModulesService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */]])
    ], DeviceDetailsPage);
    return DeviceDetailsPage;
}());

//# sourceMappingURL=device-details.js.map

/***/ }),

/***/ 802:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return JobRecordDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_modal_job_record_losses_job_record_losses__ = __webpack_require__(803);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_runlog_service__ = __webpack_require__(133);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_moment__);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













/**
 * Generated class for the JobRecordDetailsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var JobRecordDetailsPage = /** @class */ (function () {
    function JobRecordDetailsPage(navCtrl, navParams, fb, modalCtrl, runlogservice, actionSheetCtrl, alertCtrl, toastCtrl, loadingCtrl, mutilservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.modalCtrl = modalCtrl;
        this.runlogservice = runlogservice;
        this.actionSheetCtrl = actionSheetCtrl;
        this.alertCtrl = alertCtrl;
        this.toastCtrl = toastCtrl;
        this.loadingCtrl = loadingCtrl;
        this.mutilservice = mutilservice;
        this.toggleBaseInfo = true;
        this.togglePowerGeneration = false;
        this.toggleWeatherInfo = false;
        this.toggleJobRecordLosses = false;
        this.toggleInverter = false;
        this.toggleMemo = false;
        this.toggleCheckIn = false;
        this.toggleWork01 = false;
        this.toggleWork02 = false;
        this.toggleWork03 = false;
        this.toggleWork04 = false;
        this.loss = [];
        this.initForm();
    }
    JobRecordDetailsPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad JobRecordDetailsPage');
        this.stationId = this.navParams.get('stationId');
        this.recordId = this.navParams.get('recordId') ? this.navParams.get('recordId') : 0;
        var loading = this.loadingCtrl.create({
            spinner: 'crescent',
        });
        loading.present();
        this.runlogservice.getRecord(this.recordId, this.stationId).subscribe(function (res) {
            loading.dismiss();
            if (res) {
                _this.title = res.title;
                _this.fields = res.fields;
                _this.buttons = res.buttons;
                var values = res.jobRecord;
                _this.orginal_monthEnergy = values.monthEnergy || 0;
                _this.orginal_yearEnergy = values.yearEnergy || 0;
                for (var key in values) {
                    if (values.hasOwnProperty(key)) {
                        if (key === 'lastMeterValue' ||
                            key === 'lastDailyEnergy' ||
                            key === 'meterValue' ||
                            key === 'dailyEnergy' ||
                            key === 'dailyKwhkwp' ||
                            key === 'maxPower' ||
                            key === 'monthEnergy' ||
                            key === 'monthRate' ||
                            key === 'yearEnergy' ||
                            key === 'yearRate') {
                            values[key] = __WEBPACK_IMPORTED_MODULE_7_lodash__["ceil"](values[key], 2);
                        }
                    }
                }
                values.reportDate = __WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](values.reportDate)
                    ? __WEBPACK_IMPORTED_MODULE_10_moment__(values.reportDate).format()
                    : values.reportDate;
                if (_this.stationId) {
                    values.stationId = _this.stationId;
                    values.loss = [];
                    values.checkIn = [];
                    values.works = {
                        '01': [],
                        '02': [],
                        '03': [],
                        '04': [],
                    };
                    _this.form.patchValue(__assign({}, values));
                }
                else {
                    _this.stationId = values.stationId;
                    var loss = values.loss;
                    if (loss) {
                        _this.loss = loss;
                        var control_1 = _this.form.get('loss');
                        loss.map(function (item) {
                            control_1.push(_this.initJobRecordLoss());
                        });
                    }
                    else {
                        _this.loss = [];
                        values.loss = [];
                    }
                    // fill checkIn 表单
                    var checkIn = values.checkIn;
                    if (checkIn) {
                        checkIn.map(function (item, index) {
                            var control = _this.form.get('checkIn').controls[index].get('users');
                            item.users.map(function (user) {
                                control.push(_this.buildUserArray());
                            });
                            // control.patchValue(item.users);
                        });
                    }
                    else {
                        values.checkIn = [];
                    }
                    // fill works 表单
                    var works = values.works;
                    if (works) {
                        var _loop_1 = function (key) {
                            if (works.hasOwnProperty(key)) {
                                var element = works[key];
                                var control_2 = _this.form.get('works').controls[key];
                                element.map(function (item) {
                                    control_2.push(_this.initWork());
                                });
                                console.log(control_2);
                                // control.patchValue(element);
                            }
                        };
                        for (var key in works) {
                            _loop_1(key);
                        }
                    }
                    else {
                        values.works = [];
                    }
                    values.inverterStart = __WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](values.inverterStart)
                        ? __WEBPACK_IMPORTED_MODULE_10_moment__(values.inverterStart).format('HH:mm')
                        : values.inverterStart;
                    values.inverterStop = __WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](values.inverterStop)
                        ? __WEBPACK_IMPORTED_MODULE_10_moment__(values.inverterStop).format('HH:mm')
                        : values.inverterStop;
                    _this.form.patchValue(__assign({}, values));
                }
            }
        });
    };
    JobRecordDetailsPage.prototype.initForm = function () {
        this.form = this.fb.group({
            //基本信息
            recordId: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            reportDate: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            stationId: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            stationType: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            stationTypeText: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            operationDate: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            capacity: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            parallelCapacity: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            meterRatio: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            //发电情况
            lastMeterValue: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            lastDailyEnergy: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            meterValue: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            dailyEnergy: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            dailyKwhkwp: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            maxPower: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            monthEnergy: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            monthRate: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            yearEnergy: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            yearRate: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            //天气情况
            weatherInfo: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            weatherInfoText: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            irradiation: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            airQuality: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            airQualityText: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            maxTemp: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            minTemp: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            windDirection: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            windDirectionText: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            windSpeed: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            pm10: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            genHoursFine: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            genHoursPcloud: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            genHoursCloudy: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            genHoursWet: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            genHoursRain: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            genHours: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            // 电量损失情况
            loss: this.fb.array([]),
            // 逆变器运行情况
            inverterStart: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            inverterStop: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            inverterHours: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            // 出勤
            checkIn: this.fb.array([
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('01'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('出勤'),
                    users: this.fb.array([]),
                }),
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('02'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('轮休'),
                    users: this.fb.array([]),
                }),
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('03'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('事假'),
                    users: this.fb.array([]),
                }),
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('04'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('病假'),
                    users: this.fb.array([]),
                }),
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('05'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('调休'),
                    users: this.fb.array([]),
                }),
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('06'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('陪产假'),
                    users: this.fb.array([]),
                }),
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('07'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('婚假'),
                    users: this.fb.array([]),
                }),
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('08'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('丧假'),
                    users: this.fb.array([]),
                }),
                this.fb.group({
                    code: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('09'),
                    name: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */]('旷工'),
                    users: this.fb.array([]),
                }),
            ]),
            works: this.fb.group({
                '01': this.fb.array([]),
                '02': this.fb.array([]),
                '03': this.fb.array([]),
                '04': this.fb.array([]),
            }),
            memo: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
        });
    };
    JobRecordDetailsPage.prototype.openInputModal = function (type, editable, textType) {
        var _this = this;
        if (textType === void 0) { textType = 'text'; }
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__util_modal_common_input_common_input__["a" /* CommonInputPage */], {
            value: this.form.value[type],
            title: this.fields[type]['name'],
            type: textType,
        }, {
            cssClass: 'commonModal commonInputModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            var _a;
            if (data) {
                _this.form.patchValue((_a = {},
                    _a[type] = data.value ? __WEBPACK_IMPORTED_MODULE_7_lodash__["ceil"](data.value, 2) : null,
                    _a));
                if (type === 'parallelCapacity' || type === 'meterRatio' || type === 'meterValue') {
                    _this.form.patchValue({
                        dailyEnergy: (_this.form.value.meterRatio || 0) *
                            ((_this.form.value.meterValue || 0) -
                                (_this.form.value.lastMeterValue || 0)),
                    });
                    console.log(_this.form.value.dailyEnergy / _this.form.value.parallelCapacity);
                    _this.form.patchValue({
                        dailyKwhkwp: _this.form.value.parallelCapacity
                            ? __WEBPACK_IMPORTED_MODULE_7_lodash__["ceil"](_this.form.value.dailyEnergy / _this.form.value.parallelCapacity, 2)
                            : null,
                    });
                    if (_this.form.value.dailyKwhkwp > 8000) {
                        _this.mutilservice.popToastView('今日上网电量超大异常，请修改');
                    }
                    _this.form.patchValue({
                        monthEnergy: +_this.orginal_monthEnergy + _this.form.value.dailyEnergy,
                    });
                    _this.form.patchValue({
                        yearEnergy: +_this.orginal_yearEnergy + _this.form.value.dailyEnergy,
                    });
                }
                else if (type === 'dailyEnergy') {
                    _this.form.patchValue({
                        dailyKwhkwp: _this.form.value.parallelCapacity
                            ? __WEBPACK_IMPORTED_MODULE_7_lodash__["ceil"](_this.form.value.dailyEnergy / _this.form.value.parallelCapacity, 2)
                            : null,
                    });
                    _this.form.patchValue({
                        monthEnergy: +_this.orginal_monthEnergy + _this.form.value.dailyEnergy,
                    });
                    _this.form.patchValue({
                        yearEnergy: +_this.orginal_yearEnergy + _this.form.value.dailyEnergy,
                    });
                    if (_this.form.value.dailyKwhkwp > 8000) {
                        _this.mutilservice.popToastView('今日上网电量超大异常，请修改');
                    }
                }
            }
        });
        modal.present();
    };
    JobRecordDetailsPage.prototype.openSheetModal = function (type, typeText) {
        var _this = this;
        var options = this.fields[type]['props'];
        var buttons = options.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    var _a;
                    _this.form.patchValue((_a = {},
                        _a[type] = item.first,
                        _a[typeText] = item.second,
                        _a));
                },
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    JobRecordDetailsPage.prototype.addJobRecordLosses = function () {
        var _this = this;
        var control = this.form.get('loss');
        control.push(this.initJobRecordLoss());
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_1__util_modal_job_record_losses_job_record_losses__["a" /* JobRecordLossesPage */], {
            stationId: this.stationId,
            lossType: this.fields['loss.lossType'],
            deviceId: this.fields['loss.deviceId'],
            lossDesc: this.fields['loss.lossDesc'],
            startTime: this.fields['loss.startTime'],
            endTime: this.fields['loss.endTime'],
            lossEnergy: this.fields['loss.lossEnergy'],
        }, {
            cssClass: 'commonModal jobRecordLossesModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                console.log(_this.loss);
                if (data.type == 'ok') {
                    _this.loss.push(data.value);
                }
                else if (data.type == 'clear') {
                    control.removeAt(_this.loss.length);
                }
                console.log(_this.loss);
                _this.form.get('loss').patchValue(_this.loss);
            }
            else {
                control.removeAt(_this.loss.length);
            }
        });
        modal.present();
    };
    JobRecordDetailsPage.prototype.editJobRecordLoss = function (index) {
        var control = this.form.get('loss');
        var value = control.controls[index].value;
        value.startTime = __WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](value.startTime)
            ? __WEBPACK_IMPORTED_MODULE_10_moment__(value.startTime).format('HH:mm')
            : value.startTime;
        value.endTime = __WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](value.endTime)
            ? __WEBPACK_IMPORTED_MODULE_10_moment__(value.endTime).format('HH:mm')
            : value.endTime;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_1__util_modal_job_record_losses_job_record_losses__["a" /* JobRecordLossesPage */], {
            stationId: this.stationId,
            lossType: this.fields['loss.lossType'],
            deviceId: this.fields['loss.deviceId'],
            lossDesc: this.fields['loss.lossDesc'],
            startTime: this.fields['loss.startTime'],
            endTime: this.fields['loss.endTime'],
            lossEnergy: this.fields['loss.lossEnergy'],
            value: value,
        }, {
            cssClass: 'commonModal jobRecordLossesModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    control.controls[index].setValue(data.value);
                }
                else if (data.type == 'clear') {
                    control.removeAt(index);
                }
            }
        });
        modal.present();
    };
    JobRecordDetailsPage.prototype.initJobRecordLoss = function () {
        return new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["c" /* FormGroup */]({
            lossId: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            lossType: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            lossTypeText: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            deviceId: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            deviceName: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            lossDesc: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            startTime: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            endTime: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            lossEnergy: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
        });
    };
    JobRecordDetailsPage.prototype.buildUserArray = function () {
        return new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            icon: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            account: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            deptName: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
        });
    };
    JobRecordDetailsPage.prototype.getJobRecordLosses = function (form) {
        return form.controls.loss.controls;
    };
    JobRecordDetailsPage.prototype.addUser = function (index) {
        var _this = this;
        var values = this.form.get('checkIn').controls[index].get('users').value;
        var selectedItem = [];
        values.map(function (item) {
            selectedItem.push({
                userId: item.userId,
                realName: item.userName,
                userName: item.account,
                icon: item.icon,
                deptName: item.deptName,
            });
        });
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_common_user_common_user__["a" /* CommonUserPage */], {
            selectedItem: selectedItem,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    var control_3 = _this.form.get('checkIn').controls[index].get('users');
                    while (control_3.length !== 0) {
                        control_3.removeAt(0);
                    }
                    var values_1 = [];
                    data.value.map(function (item) {
                        values_1.push({
                            userId: item.userId,
                            userName: item.realName,
                            account: item.userName,
                            icon: item.icon,
                            deptName: item.deptName,
                        });
                        control_3.push(_this.buildUserArray());
                    });
                    control_3.patchValue(values_1);
                }
            }
        });
        modal.present();
    };
    JobRecordDetailsPage.prototype.getCheckIn = function (form) {
        return form.controls.checkIn.controls;
    };
    JobRecordDetailsPage.prototype.getUsersItem = function (form) {
        return form.controls.users.controls;
    };
    JobRecordDetailsPage.prototype.getWordItem = function (form, type) {
        return form.controls.works.controls[type].controls;
    };
    JobRecordDetailsPage.prototype.deleteUser = function (i, j) {
        var control = this.form.get('checkIn').controls[i].get('users');
        control.removeAt(j);
    };
    JobRecordDetailsPage.prototype.addWork = function (type, index) {
        var control = this.form.get('works').controls[index];
        control.push(this.initWork());
        var control_length = control.value.length;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: this.fields[type]['name'],
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    control.controls[control_length - 1].setValue({
                        workDesc: data.value,
                        workType: index,
                        workId: null,
                        recordId: null,
                        orderNo: null,
                    });
                }
                else if (data.type == 'clear') {
                    control.removeAt(control_length - 1);
                }
            }
            else {
                control.removeAt(control_length - 1);
            }
        });
        modal.present();
    };
    JobRecordDetailsPage.prototype.editWork = function (type, index, k) {
        var control = this.form.get('works').controls[index];
        var value = control.controls[k].value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: this.fields[type]['name'],
            value: value.workDesc,
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    control.controls[k].setValue({
                        workDesc: data.value,
                        workType: index,
                    });
                }
                else if (data.type == 'clear') {
                    control.removeAt(k);
                }
            }
        });
        modal.present();
    };
    JobRecordDetailsPage.prototype.initWork = function () {
        return new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["c" /* FormGroup */]({
            workDesc: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            workType: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            workId: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            orderNo: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
            recordId: new __WEBPACK_IMPORTED_MODULE_6__angular_forms__["b" /* FormControl */](null),
        });
    };
    JobRecordDetailsPage.prototype.addMemo = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: '备注',
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue({ memo: data.value });
                }
                else if (data.type == 'clear') {
                    _this.form.patchValue({ memo: null });
                }
            }
        });
        modal.present();
    };
    JobRecordDetailsPage.prototype.editMemo = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_9__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: '备注',
            value: this.form.value.memo,
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue({ memo: data.value });
                }
                else if (data.type == 'clear') {
                    _this.form.patchValue({ memo: null });
                }
            }
        });
        modal.present();
    };
    JobRecordDetailsPage.prototype.buttonFunction = function (type) {
        if (type === 'save') {
            this.saveFunction();
        }
        else if (type === 'delete') {
            this.deleteFunction();
        }
    };
    JobRecordDetailsPage.prototype.saveFunction = function () {
        var _this = this;
        for (var key in this.fields) {
            if (this.fields.hasOwnProperty(key)) {
                var element = this.fields[key];
                if (this.form.value[key] === null && !element.nullable) {
                    var alert_1 = this.alertCtrl.create({
                        title: '警告',
                        subTitle: element.name + '必填!',
                        buttons: ['关闭'],
                    });
                    alert_1.present();
                    return;
                }
                if (key === 'dailyKwhkwp') {
                    if (this.form.value[key] > 8000) {
                        var alert_2 = this.alertCtrl.create({
                            title: '警告',
                            subTitle: '今日上网电量超大异常，请修改',
                            buttons: ['关闭'],
                        });
                        alert_2.present();
                        return;
                    }
                }
            }
        }
        // 处理电量损失情况的时间
        var values = __WEBPACK_IMPORTED_MODULE_7_lodash__["cloneDeep"](this.form.value);
        if (values && values.loss) {
            values.loss.map(function (item) {
                if (item.startTime) {
                    if (__WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](item.startTime)) {
                        item.startTime = __WEBPACK_IMPORTED_MODULE_10_moment__(item.startTime).format();
                    }
                    else {
                        var reportDate = __WEBPACK_IMPORTED_MODULE_10_moment__(values.reportDate).format('YYYY-MM-DD');
                        item.startTime = __WEBPACK_IMPORTED_MODULE_10_moment__(reportDate + ' ' + item.startTime).format();
                    }
                }
                if (item.endTime) {
                    if (__WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](item.endTime)) {
                        item.endTime = __WEBPACK_IMPORTED_MODULE_10_moment__(item.endTime).format();
                    }
                    else {
                        var reportDate = __WEBPACK_IMPORTED_MODULE_10_moment__(values.reportDate).format('YYYY-MM-DD');
                        item.endTime = __WEBPACK_IMPORTED_MODULE_10_moment__(reportDate + ' ' + item.endTime).format();
                    }
                }
            });
        }
        //逆变器运行情况
        var inverterStart = values.inverterStart;
        if (inverterStart) {
            if (__WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](inverterStart)) {
                values.inverterStart = __WEBPACK_IMPORTED_MODULE_10_moment__(inverterStart).format();
            }
            else {
                var reportDate = __WEBPACK_IMPORTED_MODULE_10_moment__(values.reportDate).format('YYYY-MM-DD');
                values.inverterStart = __WEBPACK_IMPORTED_MODULE_10_moment__(reportDate + ' ' + values.inverterStart).format();
            }
        }
        var inverterStop = values.inverterStop;
        if (inverterStop) {
            if (__WEBPACK_IMPORTED_MODULE_7_lodash__["isNumber"](inverterStop)) {
                values.inverterStop = __WEBPACK_IMPORTED_MODULE_10_moment__(inverterStop).format();
            }
            else {
                var reportDate = __WEBPACK_IMPORTED_MODULE_10_moment__(values.reportDate).format('YYYY-MM-DD');
                values.inverterStop = __WEBPACK_IMPORTED_MODULE_10_moment__(reportDate + ' ' + values.inverterStop).format();
            }
        }
        //出勤情况
        var unique_user = [];
        for (var _i = 0, _a = values.checkIn; _i < _a.length; _i++) {
            var item = _a[_i];
            for (var _b = 0, _c = item.users || []; _b < _c.length; _b++) {
                var user = _c[_b];
                if (unique_user.indexOf(user.userId) === -1) {
                    unique_user.push(user.userId);
                }
                else {
                    this.mutilservice.popToastView('人员只能出现一种出勤情况');
                    return;
                }
            }
        }
        if (this.recordId) {
            this.runlogservice.updateRecord(values).subscribe(function (res) {
                var toast = _this.toastCtrl.create({
                    message: '日志更新成功！',
                    duration: 500,
                    position: 'middle',
                });
                toast.onDidDismiss(function () {
                    _this.navCtrl.pop();
                });
                toast.present();
            });
        }
        else {
            var confirm_1 = this.alertCtrl.create({
                title: '提示',
                message: "\u8BF7\u786E\u8BA4\u4ECA\u65E5\u7535\u91CF\uFF1A" + this.form.value.dailyEnergy + "kWh \u662F\u5426\u51C6\u786E\uFF1F",
                buttons: [
                    {
                        text: '取消',
                        handler: function () {
                            console.log('Disagree clicked');
                        },
                    },
                    {
                        text: '确定',
                        handler: function () {
                            _this.runlogservice.saveRecord(values).subscribe(function (res) {
                                var toast = _this.toastCtrl.create({
                                    message: '日志保存成功！',
                                    duration: 500,
                                    position: 'middle',
                                });
                                toast.onDidDismiss(function () {
                                    _this.navCtrl.pop();
                                });
                                toast.present();
                            });
                        },
                    },
                ],
            });
            confirm_1.present();
        }
    };
    JobRecordDetailsPage.prototype.deleteFunction = function () {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除该条日报吗？',
            buttons: [
                {
                    text: '取消',
                    role: 'cancel',
                    handler: function () {
                        console.log('取消');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.runlogservice.deleteRecord(_this.recordId).subscribe(function (res) {
                            var toast = _this.toastCtrl.create({
                                message: '删除成功!',
                                duration: 500,
                                position: 'middle',
                            });
                            toast.onDidDismiss(function () {
                                _this.navCtrl.pop();
                            });
                            toast.present();
                        });
                    },
                },
            ],
        });
        alert.present();
    };
    JobRecordDetailsPage.prototype.setInverterHours = function (params) {
        var _a;
        var reportDate = __WEBPACK_IMPORTED_MODULE_10_moment__(this.form.value.reportDate).format('YYYY-MM-DD');
        var start = this.form.value.inverterStart;
        var end = this.form.value.inverterStop;
        if (start && end) {
            var intervalTime = __WEBPACK_IMPORTED_MODULE_10_moment__(reportDate + ' ' + end + ':00').valueOf() -
                __WEBPACK_IMPORTED_MODULE_10_moment__(reportDate + ' ' + start + ':00').valueOf();
            if (intervalTime > 0) {
                this.form.patchValue({
                    inverterHours: Math.round((Math.floor(intervalTime / 3600000) +
                        (intervalTime % 3600000) / 3600000) *
                        10) / 10,
                });
            }
            else {
                this.mutilservice.popToastView('开始发电时间要小于停止发电时间！');
                this.form.patchValue({
                    inverterHours: null,
                });
                return this.form.patchValue((_a = {},
                    _a[params] = null,
                    _a));
            }
        }
    };
    JobRecordDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_5__angular_core__["Component"])({
            selector: 'page-job-record-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/job-record-details/job-record-details.html"*/'<!--\n  Generated template for the JobRecordDetailsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{title}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <form [formGroup]="form">\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleBaseInfo = !toggleBaseInfo">\n        基础信息\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleBaseInfo?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 基础信息 -->\n      <ng-container *ngIf="toggleBaseInfo">\n        <!-- 日报时间 -->\n        <ion-item\n          *ngIf="fields?.reportDate.show"\n          [attr.detail-push]="fields?.reportDate.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.reportDate.nullable">*</b\n            >{{fields?.reportDate.name}}：</ion-label\n          >\n          <ion-datetime\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD"\n            formControlName="reportDate"\n          ></ion-datetime>\n        </ion-item>\n        <!--电站名称  -->\n        <ion-item\n          *ngIf="fields?.stationId.show"\n          [attr.detail-push]="fields?.stationId.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.stationId.nullable">*</b\n            >{{fields?.stationId.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="stationName"\n          ></ion-input>\n        </ion-item>\n        <!-- 电站类型 -->\n        <ion-item\n          *ngIf="fields?.stationType.show"\n          [attr.detail-push]="fields?.stationType.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.stationType.nullable">*</b\n            >{{fields?.stationType.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="stationTypeText"\n          ></ion-input>\n        </ion-item>\n        <!--并网时间  -->\n        <ion-item\n          *ngIf="fields?.operationDate.show"\n          [attr.detail-push]="fields?.operationDate.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.operationDate.nullable">*</b\n            >{{fields?.operationDate.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="operationDate"\n          ></ion-input>\n        </ion-item>\n        <!-- 设计容量(MW) -->\n        <ion-item\n          *ngIf="fields?.capacity.show"\n          [attr.detail-push]="fields?.capacity.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.capacity.nullable">*</b\n            >{{fields?.capacity.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="capacity"\n          ></ion-input>\n        </ion-item>\n        <!-- 并网容量(MW) -->\n        <ion-item\n          *ngIf="fields?.parallelCapacity.show"\n          [attr.detail-push]="fields?.parallelCapacity.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.parallelCapacity.nullable">*</b\n            >{{fields?.parallelCapacity.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'parallelCapacity\',fields?.parallelCapacity.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="parallelCapacity"\n          ></ion-input>\n        </ion-item>\n        <!-- 关口表倍率 -->\n        <ion-item\n          *ngIf="fields?.meterRatio.show"\n          [attr.detail-push]="fields?.meterRatio.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.meterRatio.nullable">*</b\n            >{{fields?.meterRatio.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'meterRatio\',fields?.meterRatio.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="meterRatio"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="togglePowerGeneration = !togglePowerGeneration"\n      >\n        发电情况\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{togglePowerGeneration?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 发电情况 -->\n      <ng-container *ngIf="togglePowerGeneration">\n        <!-- 昨日计量表示数 -->\n        <ion-item\n          *ngIf="fields?.lastMeterValue.show"\n          [attr.detail-push]="fields?.lastMeterValue.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.lastMeterValue.nullable">*</b\n            >{{fields?.lastMeterValue.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="lastMeterValue"\n          ></ion-input>\n        </ion-item>\n        <!--昨日上网电量(KWh)  -->\n        <ion-item\n          *ngIf="fields?.lastDailyEnergy.show"\n          [attr.detail-push]="fields?.lastDailyEnergy.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.lastDailyEnergy.nullable">*</b\n            >{{fields?.lastDailyEnergy.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="lastDailyEnergy"\n          ></ion-input>\n        </ion-item>\n        <!-- 今日计量表示数 -->\n        <ion-item\n          *ngIf="fields?.meterValue.show"\n          [attr.detail-push]="fields?.meterValue.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.meterValue.nullable">*</b\n            >{{fields?.meterValue.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'meterValue\',fields?.meterValue.editable, \'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="meterValue"\n          ></ion-input>\n        </ion-item>\n        <!-- 今日上网电量(KWh) -->\n        <ion-item\n          *ngIf="fields?.dailyEnergy.show"\n          [attr.detail-push]="fields?.dailyEnergy.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.dailyEnergy.nullable">*</b\n            >{{fields?.dailyEnergy.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'dailyEnergy\',fields?.dailyEnergy.editable, \'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="dailyEnergy"\n          ></ion-input>\n        </ion-item>\n        <!-- 今日每MW上网电量(KWh) -->\n        <ion-item\n          *ngIf="fields?.dailyKwhkwp.show"\n          [attr.detail-push]="fields?.dailyKwhkwp.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.dailyKwhkwp.nullable">*</b\n            >{{fields?.dailyKwhkwp.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="dailyKwhkwp"\n          ></ion-input>\n        </ion-item>\n        <!-- 今日最大负荷(MW) -->\n        <ion-item\n          *ngIf="fields?.maxPower.show"\n          [attr.detail-push]="fields?.maxPower.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.maxPower.nullable">*</b\n            >{{fields?.maxPower.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'maxPower\',fields?.maxPower.editable, \'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="maxPower"\n          ></ion-input>\n        </ion-item>\n        <!-- 本月上网电量(KWh) -->\n        <ion-item\n          *ngIf="fields?.monthEnergy.show"\n          [attr.detail-push]="fields?.monthEnergy.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.monthEnergy.nullable">*</b\n            >{{fields?.monthEnergy.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'monthEnergy\',fields?.monthEnergy.editable, \'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="monthEnergy"\n          ></ion-input>\n        </ion-item>\n        <!-- 本月计划完成率(%) -->\n        <ion-item\n          *ngIf="fields?.monthRate.show"\n          [attr.detail-push]="fields?.monthRate.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.monthRate.nullable">*</b\n            >{{fields?.monthRate.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'monthRate\',fields?.monthRate.editable, \'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="monthRate"\n          ></ion-input>\n        </ion-item>\n        <!-- 本年上网电量(KWh) -->\n        <ion-item\n          *ngIf="fields?.yearEnergy.show"\n          [attr.detail-push]="fields?.yearEnergy.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.yearEnergy.nullable">*</b\n            >{{fields?.yearEnergy.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'yearEnergy\',fields?.yearEnergy.editable, \'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="yearEnergy"\n          ></ion-input>\n        </ion-item>\n        <!-- 本年计划完成率(%) -->\n        <ion-item\n          *ngIf="fields?.yearRate.show"\n          [attr.detail-push]="fields?.yearRate.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.yearRate.nullable">*</b\n            >{{fields?.yearRate.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'yearRate\',fields?.yearRate.editable, \'number\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="yearRate"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWeatherInfo = !toggleWeatherInfo">\n        天气情况\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWeatherInfo?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWeatherInfo">\n        <!-- 天气情况 -->\n        <ion-item\n          *ngIf="fields?.weatherInfo.show"\n          [attr.detail-push]="fields?.weatherInfo.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.weatherInfo.nullable">*</b\n            >{{fields?.weatherInfo.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openSheetModal(\'weatherInfo\',\'weatherInfoText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="weatherInfoText"\n          ></ion-input>\n        </ion-item>\n        <!-- 日辐照量(MJ/㎡) -->\n        <ion-item\n          *ngIf="fields?.irradiation.show"\n          [attr.detail-push]="fields?.irradiation.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.irradiation.nullable">*</b\n            >{{fields?.irradiation.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'irradiation\',fields?.irradiation.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="irradiation"\n          ></ion-input>\n        </ion-item>\n        <!-- 空气质量 -->\n        <ion-item\n          *ngIf="fields?.airQuality.show"\n          [attr.detail-push]="fields?.airQuality.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.airQuality.nullable">*</b\n            >{{fields?.airQuality.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openSheetModal(\'airQuality\',\'airQualityText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="airQualityText"\n          ></ion-input>\n        </ion-item>\n        <!-- 最高气温(℃) -->\n        <ion-item\n          *ngIf="fields?.maxTemp.show"\n          [attr.detail-push]="fields?.maxTemp.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.maxTemp.nullable">*</b\n            >{{fields?.maxTemp.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'maxTemp\',fields?.maxTemp.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="maxTemp"\n          ></ion-input>\n        </ion-item>\n        <!-- 最低气温(℃) -->\n        <ion-item\n          *ngIf="fields?.minTemp.show"\n          [attr.detail-push]="fields?.minTemp.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.minTemp.nullable">*</b\n            >{{fields?.minTemp.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'minTemp\',fields?.minTemp.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="minTemp"\n          ></ion-input>\n        </ion-item>\n        <!-- 风向 -->\n        <ion-item\n          *ngIf="fields?.windDirection.show"\n          [attr.detail-push]="fields?.windDirection.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.windDirection.nullable">*</b\n            >{{fields?.windDirection.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openSheetModal(\'windDirection\',\'windDirectionText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="windDirectionText"\n          ></ion-input>\n        </ion-item>\n        <!-- 风速(m/s) -->\n        <ion-item\n          *ngIf="fields?.windSpeed.show"\n          [attr.detail-push]="fields?.windSpeed.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.windSpeed.nullable">*</b\n            >{{fields?.windSpeed.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'windSpeed\',fields?.windSpeed.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="windSpeed"\n          ></ion-input>\n        </ion-item>\n        <!-- PM10 -->\n        <ion-item\n          *ngIf="fields?.pm10.show"\n          [attr.detail-push]="fields?.pm10.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.pm10.nullable">*</b\n            >{{fields?.pm10.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'pm10\',fields?.pm10.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="pm10"\n          ></ion-input>\n        </ion-item>\n        <!-- 晴(h) -->\n        <ion-item\n          *ngIf="fields?.genHoursFine.show&&false"\n          [attr.detail-push]="fields?.genHoursFine.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.genHoursFine.nullable">*</b\n            >{{fields?.genHoursFine.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'genHoursFine\',fields?.genHoursFine.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="genHoursFine"\n          ></ion-input>\n        </ion-item>\n        <!-- 少云(h) -->\n        <ion-item\n          *ngIf="fields?.genHoursPcloud.show&&false"\n          [attr.detail-push]="fields?.genHoursPcloud.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.genHoursPcloud.nullable">*</b\n            >{{fields?.genHoursPcloud.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'genHoursPcloud\',fields?.genHoursPcloud.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="genHoursPcloud"\n          ></ion-input>\n        </ion-item>\n        <!-- 多云(h) -->\n        <ion-item\n          *ngIf="fields?.genHoursCloudy.show&&false"\n          [attr.detail-push]="fields?.genHoursCloudy.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.genHoursCloudy.nullable">*</b\n            >{{fields?.genHoursCloudy.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'genHoursCloudy\',fields?.genHoursCloudy.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="genHoursCloudy"\n          ></ion-input>\n        </ion-item>\n        <!-- 阴雾(h) -->\n        <ion-item\n          *ngIf="fields?.genHoursWet.show&&false"\n          [attr.detail-push]="fields?.genHoursWet.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.genHoursWet.nullable">*</b\n            >{{fields?.genHoursWet.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'genHoursWet\',fields?.genHoursWet.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="genHoursWet"\n          ></ion-input>\n        </ion-item>\n        <!-- 雨雪(h) -->\n        <ion-item\n          *ngIf="fields?.genHoursRain.show&&false"\n          [attr.detail-push]="fields?.genHoursRain.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.genHoursRain.nullable">*</b\n            >{{fields?.genHoursRain.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'genHoursRain\',fields?.genHoursRain.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="genHoursRain"\n          ></ion-input>\n        </ion-item>\n        <!-- 设备运行小时数(h) -->\n        <ion-item\n          *ngIf="fields?.genHours.show&&false"\n          [attr.detail-push]="fields?.genHours.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.genHours.nullable">*</b\n            >{{fields?.genHours.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'genHours\',fields?.genHours.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="genHours"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n    <!-- 电量损失情况 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleJobRecordLosses = !toggleJobRecordLosses"\n      >\n        电量损失情况\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleJobRecordLosses?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleJobRecordLosses">\n        <ng-container formArrayName="loss">\n          <ng-container\n            *ngFor="let item of getJobRecordLosses(form); let i = index"\n            [formGroupName]="i"\n          >\n            <ion-item\n              *ngIf="fields?.loss.show"\n              [attr.detail-push]="fields?.loss.editable"\n              no-lines\n              (tap)="editJobRecordLoss(i)"\n            >\n              <ion-input\n                type="text"\n                [readonly]="true"\n                text-left\n                formControlName="memo"\n              ></ion-input>\n            </ion-item>\n          </ng-container>\n          <ion-item (tap)="addJobRecordLosses()">\n            <ion-label text-right>点击添加：</ion-label>\n            <button ion-button icon-only item-end clear type="button">\n              <ion-icon name="add-new"></ion-icon>\n            </button>\n          </ion-item>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!--逆变器运行情况-->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleInverter = !toggleInverter">\n        逆变器运行情况\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleInverter?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleInverter">\n        <!-- 开始发电时间 -->\n        <ion-item\n          *ngIf="fields?.inverterStart.show"\n          [attr.detail-push]="fields?.inverterStart.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.inverterStart.nullable">*</b\n            >{{fields?.inverterStart.name}}：</ion-label\n          >\n          <ion-datetime\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="HH:mm"\n            (ionChange)="setInverterHours(\'inverterStart\')"\n            formControlName="inverterStart"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 停止发电时间 -->\n        <ion-item\n          *ngIf="fields?.inverterStop.show"\n          [attr.detail-push]="fields?.inverterStop.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.inverterStop.nullable">*</b\n            >{{fields?.inverterStop.name}}：</ion-label\n          >\n          <ion-datetime\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="HH:mm"\n            (ionChange)="setInverterHours(\'inverterStop\')"\n            formControlName="inverterStop"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 设备运行小数数 -->\n        <ion-item\n          *ngIf="fields?.inverterHours.show"\n          [attr.detail-push]="fields?.inverterHours.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.inverterHours.nullable">*</b\n            >{{fields?.inverterHours.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="inverterHours"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 出勤情况 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleCheckIn = !toggleCheckIn">\n        出勤情况\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleCheckIn?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleCheckIn">\n        <ng-container formArrayName="checkIn">\n          <ng-container\n            *ngFor="let item of getCheckIn(form); let i = index"\n            [formGroupName]="i"\n          >\n            <div class="check-in-item">\n              <p class="p-header">{{item.value.name}}</p>\n              <ion-grid>\n                <ion-row formArrayName="users">\n                  <ion-col\n                    col-3\n                    *ngFor="let user_item of getUsersItem(item); let j = index"\n                    [formGroupName]="j"\n                  >\n                    <div class="img-container">\n                      <img\n                        src="assets/imgs/avatar/{{user_item.value.icon||\'00.png\'}}"\n                      />\n                      <!-- <img\n                        (tap)="deleteUser(i,j)"\n                        class="delete-user"\n                        src="assets/imgs/buttons/delete.png"\n                      /> -->\n                      <ion-icon\n                        class="delete-user"\n                        (tap)="deleteUser(i,j)"\n                        name="delete"\n                      ></ion-icon>\n                    </div>\n\n                    <p>{{user_item.value.userName}}</p>\n                  </ion-col>\n                  <ion-col col-3>\n                    <button\n                      ion-button\n                      icon-only\n                      clear\n                      type="button"\n                      (tap)="addUser(i)"\n                    >\n                      <ion-icon name="add-new" class="add"></ion-icon>\n                    </button>\n                    <p>&nbsp;</p>\n                  </ion-col>\n                </ion-row>\n              </ion-grid>\n            </div>\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 今日完成工作 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWork01 = !toggleWork01">\n        今日完成工作\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleWork01?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWork01">\n        <ng-container formGroupName="works">\n          <ng-container formArrayName="01">\n            <ng-container\n              *ngFor="let item of getWordItem(form,\'01\'); let k = index"\n              [formGroupName]="k"\n            >\n              <ion-item\n                *ngIf="fields[\'works.01\']?.show"\n                [attr.detail-push]="fields[\'works.01\']?.editable"\n                no-lines\n                (tap)="editWork(\'works.01\',\'01\',k)"\n              >\n                <ion-input\n                  type="text"\n                  [readonly]="true"\n                  text-left\n                  formControlName="workDesc"\n                ></ion-input>\n              </ion-item>\n            </ng-container>\n          </ng-container>\n\n          <ion-item (tap)="addWork(\'works.01\',\'01\')">\n            <ion-label text-right>点击添加：</ion-label>\n            <button ion-button icon-only item-end clear type="button">\n              <ion-icon name="add-new"></ion-icon>\n            </button>\n          </ion-item>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 未完成工作 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWork02 = !toggleWork02">\n        未完成工作\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleWork02?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWork02">\n        <ng-container formGroupName="works">\n          <ng-container formArrayName="02">\n            <ng-container\n              *ngFor="let item of getWordItem(form,\'02\'); let k = index"\n              [formGroupName]="k"\n            >\n              <ion-item\n                *ngIf="fields[\'works.02\']?.show"\n                [attr.detail-push]="fields[\'works.02\']?.editable"\n                no-lines\n                (tap)="editWork(\'works.02\',\'02\',k)"\n              >\n                <ion-input\n                  type="text"\n                  [readonly]="true"\n                  text-left\n                  formControlName="workDesc"\n                ></ion-input>\n              </ion-item>\n            </ng-container>\n          </ng-container>\n\n          <ion-item (tap)="addWork(\'works.02\',\'02\')">\n            <ion-label text-right>点击添加：</ion-label>\n            <button ion-button icon-only item-end clear type="button">\n              <ion-icon name="add-new"></ion-icon>\n            </button>\n          </ion-item>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 需协调工作 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWork03 = !toggleWork03">\n        需协调工作\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleWork03?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWork03">\n        <ng-container formGroupName="works">\n          <ng-container formArrayName="03">\n            <ng-container\n              *ngFor="let item of getWordItem(form,\'03\'); let k = index"\n              [formGroupName]="k"\n            >\n              <ion-item\n                *ngIf="fields[\'works.03\']?.show"\n                [attr.detail-push]="fields[\'works.03\']?.editable"\n                no-lines\n                (tap)="editWork(\'works.03\',\'03\',k)"\n              >\n                <ion-input\n                  type="text"\n                  [readonly]="true"\n                  text-left\n                  formControlName="workDesc"\n                ></ion-input>\n              </ion-item>\n            </ng-container>\n          </ng-container>\n\n          <ion-item (tap)="addWork(\'works.03\',\'03\')">\n            <ion-label text-right>点击添加：</ion-label>\n            <button ion-button icon-only item-end clear type="button">\n              <ion-icon name="add-new"></ion-icon>\n            </button>\n          </ion-item>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 明日工作计划 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWork04 = !toggleWork04">\n        明日工作计划\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleWork04?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWork04">\n        <ng-container formGroupName="works">\n          <ng-container formArrayName="04">\n            <ng-container\n              *ngFor="let item of getWordItem(form,\'04\'); let k = index"\n              [formGroupName]="k"\n            >\n              <ion-item\n                *ngIf="fields[\'works.04\']?.show"\n                [attr.detail-push]="fields[\'works.04\']?.editable"\n                no-lines\n                (tap)="editWork(\'works.04\',\'04\',k)"\n              >\n                <ion-input\n                  type="text"\n                  [readonly]="true"\n                  text-left\n                  formControlName="workDesc"\n                ></ion-input>\n              </ion-item>\n            </ng-container>\n          </ng-container>\n\n          <ion-item (tap)="addWork(\'works.04\',\'04\')">\n            <ion-label text-right>点击添加：</ion-label>\n            <button ion-button icon-only item-end clear type="button">\n              <ion-icon name="add-new"></ion-icon>\n            </button>\n          </ion-item>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 备注 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleMemo = !toggleMemo">\n        备注\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleMemo?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleMemo">\n        <ion-item\n          *ngIf="form.value.memo"\n          [attr.detail-push]="true"\n          no-lines\n          (tap)="editMemo()"\n        >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-left\n            formControlName="memo"\n          ></ion-input>\n        </ion-item>\n\n        <ion-item *ngIf="!form.value.memo" (tap)="addMemo()">\n          <ion-label text-right>点击添加：</ion-label>\n          <button ion-button icon-only item-end clear type="button">\n            <ion-icon name="add-new"></ion-icon>\n          </button>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n  </form>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar class="footer-bar">\n    <ion-grid>\n      <ion-row>\n        <ion-col\n          *ngFor="let button of buttons"\n          class="{{buttons.length==1?\'col-12\':\'col-6\'}}"\n        >\n          <div class="btn">\n            <!-- <img\n                            (tap)="buttonFunction(button.function)"\n                            src="assets/imgs/buttons/{{button.icon}}"\n                            alt=""\n                        /> -->\n            <ion-icon\n              (tap)="buttonFunction(button.function)"\n              [name]="button.icon.split(\'.\')[0]"\n            ></ion-icon>\n            <p>{{button.text}}</p>\n          </div>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/job-record-details/job-record-details.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_6__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_runlog_service__["a" /* RunLogService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["v" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["l" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */]])
    ], JobRecordDetailsPage);
    return JobRecordDetailsPage;
}());

//# sourceMappingURL=job-record-details.js.map

/***/ }),

/***/ 803:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return JobRecordLossesPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_equipment_equipmentList__ = __webpack_require__(50);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the JobRecordLossesPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var JobRecordLossesPage = /** @class */ (function () {
    function JobRecordLossesPage(navCtrl, navParams, fb, viewCtrl, modalCtrl, actionSheetCtrl, alertCtrl) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.viewCtrl = viewCtrl;
        this.modalCtrl = modalCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.alertCtrl = alertCtrl;
        this.customStartPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return _this.form.patchValue({ startTime: null }); }
                }
            ],
            cssClass: 'hiddenCancelButton'
        };
        this.customEndPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return _this.form.patchValue({ endTime: null }); }
                }
            ],
            cssClass: 'hiddenCancelButton'
        };
        this.form = this.fb.group({
            lossId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            lossType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            lossTypeText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deviceId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deviceName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            lossDesc: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            startTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            endTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            lossEnergy: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    }
    JobRecordLossesPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad JobRecordLossesPage');
        this.lossType = this.navParams.get('lossType');
        this.deviceId = this.navParams.get('deviceId');
        this.stationId = this.navParams.get('stationId');
        this.lossDesc = this.navParams.get('lossDesc');
        this.startTime = this.navParams.get('startTime');
        this.endTime = this.navParams.get('endTime');
        this.lossEnergy = this.navParams.get('lossEnergy');
        var value = this.navParams.get('value');
        if (value) {
            this.form.patchValue(value);
        }
    };
    JobRecordLossesPage.prototype.ionViewWillEnter = function () {
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            this.navParams.data.equipmentList = [];
            if (equipmentList.length === 1) {
                this.form.patchValue({
                    deviceId: equipmentList[0].deviceId,
                    deviceName: equipmentList[0].deviceName
                });
            }
            else if (equipmentList.length === 0) {
                this.form.patchValue({
                    deviceId: null,
                    deviceName: null
                });
            }
        }
    };
    JobRecordLossesPage.prototype.ok = function () {
        var value = this.form.value;
        for (var key in value) {
            if (value.hasOwnProperty(key)) {
                if (this[key] && !this[key].nullable && value[key] == null) {
                    var alert_1 = this.alertCtrl.create({
                        title: '提示',
                        subTitle: this[key].name + '必填!',
                        buttons: ['关闭']
                    });
                    alert_1.present();
                    return;
                }
            }
        }
        if (value.endTime && value.startTime > value.endTime) {
            var alert_2 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选时间范围不正确',
                buttons: ['确定']
            });
            alert_2.present();
            return;
        }
        this.form.patchValue({
            memo: value.lossTypeText + value.lossEnergy + 'KWh'
        });
        this.viewCtrl.dismiss({ value: this.form.value, type: 'ok' });
    };
    JobRecordLossesPage.prototype.clear = function () {
        this.viewCtrl.dismiss({ value: null, type: 'clear' });
    };
    JobRecordLossesPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    JobRecordLossesPage.prototype.selectEquipment = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            stationId: this.stationId,
            isSingle: true,
            deviceId: this.form.value.deviceId,
            deviceName: this.form.value.deviceName
        });
    };
    JobRecordLossesPage.prototype.openSheetModal = function (type, typeText) {
        var _this = this;
        var options = this.lossType['props'];
        var buttons = options.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    _this.form.patchValue({
                        lossType: item.first,
                        lossTypeText: item.second
                    });
                    console.log(_this.form);
                }
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet'
        });
        actionSheet.present();
    };
    JobRecordLossesPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-job-record-losses',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/job-record-losses/job-record-losses.html"*/'<!--\n  Generated template for the JobRecordLossesPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n\n<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <form [formGroup]="form">\n    <h6><b *ngIf="!lossType?.nullable">*</b>{{lossType?.name}}:</h6>\n    <ion-input\n      type="text"\n      formControlName="lossTypeText"\n      readonly="true"\n      (tap)="openSheetModal()"\n    ></ion-input>\n    <h6><b *ngIf="!deviceId?.nullable">*</b>{{deviceId?.name}}:</h6>\n    <ion-input\n      type="text"\n      formControlName="deviceName"\n      [readonly]="true"\n      (tap)="selectEquipment()"\n    ></ion-input>\n    <h6><b *ngIf="!lossDesc?.nullable">*</b>{{lossDesc?.name}}:</h6>\n    <ion-textarea formControlName="lossDesc"></ion-textarea>\n    <h6><b *ngIf="!startTime?.nullable">*</b>{{startTime?.name}}:</h6>\n    <ion-datetime\n      cancelText="清除"\n      doneText="确定"\n      displayFormat="HH:mm"\n      pickerFormat="HH:mm"\n      formControlName="startTime"\n      [pickerOptions]="customStartPickerOptions"\n    ></ion-datetime>\n    <h6><b *ngIf="!endTime?.nullable">*</b>{{endTime?.name}}:</h6>\n    <ion-datetime\n      cancelText="清除"\n      doneText="确定"\n      displayFormat="HH:mm"\n      pickerFormat="HH:mm"\n      formControlName="endTime"\n      [pickerOptions]="customEndPickerOptions"\n    ></ion-datetime>\n    <h6><b *ngIf="!lossEnergy?.nullable">*</b>{{lossEnergy?.name}}:</h6>\n    <ion-input type="text" formControlName="lossEnergy"></ion-input>\n    <ion-grid>\n      <ion-row>\n        <ion-col col-6>\n          <button\n            type="button"\n            ion-button\n            small\n            color="light"\n            class="clear-btn"\n            (tap)="clear()"\n          >\n            删除\n          </button>\n        </ion-col>\n        <ion-col col-6>\n          <button ion-button small class="ok-btn" type="button" (tap)="ok()">\n            确定\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </form>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/job-record-losses/job-record-losses.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["b" /* AlertController */]])
    ], JobRecordLossesPage);
    return JobRecordLossesPage;
}());

//# sourceMappingURL=job-record-losses.js.map

/***/ }),

/***/ 804:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return JobRecordSearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the JobRecordSearchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var JobRecordSearchPage = /** @class */ (function () {
    function JobRecordSearchPage(navCtrl, navParams, modalCtrl, viewCtrl, alertCtrl) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modalCtrl = modalCtrl;
        this.viewCtrl = viewCtrl;
        this.alertCtrl = alertCtrl;
        this.station = null;
        this.startTime = null;
        this.endTime = null;
        this.customStartPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.startTime = null); }
                }
            ],
            cssClass: 'hiddenCancelButton'
        };
        this.customEndPickerOptions = {
            buttons: [
                {
                    text: '清除',
                    handler: function () { return (_this.endTime = null); }
                }
            ],
            cssClass: 'hiddenCancelButton'
        };
    }
    JobRecordSearchPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad JobRecordSearchPage');
        this.stationId = this.navParams.get('stationId');
        this.stationName = this.navParams.get('stationName');
        this.startTime = this.navParams.get('startTime') || __WEBPACK_IMPORTED_MODULE_3_moment__().format('YYYY-MM-DD');
        this.endTime = this.navParams.get('endTime') || __WEBPACK_IMPORTED_MODULE_3_moment__().format('YYYY-MM-DD');
        this.status = this.navParams.get('status');
        if (this.stationId && this.stationName) {
            this.station = {
                id: this.stationId,
                title: this.stationName
            };
        }
    };
    // 电站选择
    JobRecordSearchPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_2__common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.station = e;
            }
        });
        modal.present({ keyboardClose: true });
    };
    JobRecordSearchPage.prototype.clearStation = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.station = null;
    };
    JobRecordSearchPage.prototype.cancelDateTime = function (event, type) {
        console.log(event, type);
    };
    JobRecordSearchPage.prototype.selectStatus = function (type) {
        if (type !== this.status) {
            this.status = type;
        }
    };
    JobRecordSearchPage.prototype.ok = function () {
        var params = {
            stationId: this.station ? this.station.id : null,
            stationName: this.station ? this.station.title : null,
            startTime: this.startTime,
            endTime: this.endTime,
            status: this.status
        };
        if (this.startTime &&
            this.endTime &&
            __WEBPACK_IMPORTED_MODULE_3_moment__(this.startTime).valueOf() > __WEBPACK_IMPORTED_MODULE_3_moment__(this.endTime).valueOf()) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选时间范围不正确',
                buttons: ['确定']
            });
            alert_1.present();
            return;
        }
        this.viewCtrl.dismiss({ value: params, type: 'ok' });
    };
    JobRecordSearchPage.prototype.reset = function () {
        this.station = null;
        this.startTime = __WEBPACK_IMPORTED_MODULE_3_moment__().format('YYYY-MM-DD');
        this.endTime = __WEBPACK_IMPORTED_MODULE_3_moment__().format('YYYY-MM-DD');
        this.status = 1;
        // this.viewCtrl.dismiss({ value: null, type: 'reset' });
    };
    JobRecordSearchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-job-record-search',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/job-record-search/job-record-search.html"*/'<ion-content>\n  <div class="common-search-container">\n    <div class="common-search">\n      <div class="button-picker border-bottom">\n        <div class="query-label">电站</div>\n        <button ion-button round small color="light" (click)="selectStation()">\n          {{(station?.title)||\'未选择\'}}\n          <!-- <img\n                        *ngIf="station"\n                        (click)="clearStation($event)"\n                        class="clear-icon"\n                        src="assets/imgs/buttons/delete.png"\n                        alt=""\n                    /> -->\n          <ion-icon\n            *ngIf="station"\n            (click)="clearStation($event)"\n            class="clear-icon"\n            name="delete"\n          ></ion-icon>\n        </button>\n      </div>\n      <div class="time-picker border-bottom">\n        <div class="query-label">日报时间</div>\n        <ion-datetime\n          displayFormat="YYYY-MM-DD"\n          doneText="确定"\n          [(ngModel)]="startTime"\n          [pickerOptions]="customStartPickerOptions"\n        ></ion-datetime>\n        <div class="line">-</div>\n        <ion-datetime\n          displayFormat="YYYY-MM-DD"\n          doneText="确定"\n          [pickerOptions]="customEndPickerOptions"\n          [(ngModel)]="endTime"\n        ></ion-datetime>\n      </div>\n      <div class="select-picker">\n        <div class="query-label">填报状态</div>\n        <ion-grid>\n          <ion-row>\n            <ion-col col-6>\n              <div\n                class="select-option"\n                [ngClass]="{\'active-option\': status===1}"\n                (click)="selectStatus(1)"\n              >\n                已填报\n              </div></ion-col\n            >\n            <ion-col col-6>\n              <div\n                class="select-option"\n                [ngClass]="{\'active-option\': status===0}"\n                (click)="selectStatus(0)"\n              >\n                未填报\n              </div></ion-col\n            >\n          </ion-row>\n        </ion-grid>\n      </div>\n      <ion-list>\n        <ion-row class="fix-bottom">\n          <ion-col col-6 text-center>\n            <button\n              ion-button\n              round\n              small\n              class="reset-btn"\n              color="light"\n              (click)="reset()"\n            >\n              重置\n            </button>\n          </ion-col>\n          <ion-col col-6 text-center>\n            <button ion-button round small class="query-btn" (click)="ok()">\n              查询\n            </button>\n          </ion-col>\n        </ion-row>\n      </ion-list>\n    </div>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/job-record-search/job-record-search.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], JobRecordSearchPage);
    return JobRecordSearchPage;
}());

//# sourceMappingURL=job-record-search.js.map

/***/ }),

/***/ 805:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ReportDetail; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_dailyreport_service__ = __webpack_require__(348);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var ReportDetail = /** @class */ (function () {
    function ReportDetail(navCtrl, navParams, mutil, dailyReportService) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.mutil = mutil;
        this.dailyReportService = dailyReportService;
        this.stationGroup = 'previous';
        this.stationPart = 'previous';
    }
    ReportDetail.prototype.ionViewWillEnter = function () {
        console.log(this.navParams.data.date.date);
        this.getReportDetail();
    };
    ReportDetail.prototype.getReportDetail = function () {
        var _this = this;
        this.dailyReportService
            .getReportDetail(this.navParams.data.date.date)
            .subscribe(function (e) {
            _this.reportDetail = e;
            console.log(e);
        });
        this.dailyReportService
            .getGroupProgress(this.navParams.data.date.date)
            .subscribe(function (e) {
            console.log(e);
            _this.preYearByGroup = e.preYears;
            _this.thisYearByGroup = e.thisYear;
            _this.allYearByGroup = e.all;
        });
        this.dailyReportService
            .getPartProgress(this.navParams.data.date.date)
            .subscribe(function (e) {
            _this.preYearByPart = e.preYears;
            _this.thisYearByPart = e.thisYear;
            _this.allYearByPart = e.all;
            // this.preData = e.preYears.data.map((value,index) => {
            //     return value.data;
            // })
        });
    };
    ReportDetail = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'report-detail',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/daily-report/report-detail/report-detail.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>{{this.navParams.data.date.date}}</ion-title>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n  <ion-list>\n    <ul style="margin-bottom: 10px">\n      <li style="margin-bottom: 10px">\n        <div class="detail clearfix">\n          <div>\n            <span class="num">{{reportDetail?.stationNum.value}}</span><br />\n            <span class="dis">电站数量(个)</span>\n          </div>\n          <div>\n            <span class="num">{{reportDetail?.capacity.value}}</span><br />\n            <span class="dis">并网容量(MW)</span>\n          </div>\n          <div>\n            <span class="num">{{reportDetail?.dayIrrad.value}}</span><br />\n            <span class="dis">当日辐照(MJ)</span>\n          </div>\n        </div>\n      </li>\n      <li>\n        <div class="detail clearfix">\n          <div>\n            <span class="num" style="color: #fc5232"\n              >{{reportDetail?.dayEnergy.value}}</span\n            ><br />\n            <span class="dis">当日电量(万kWh)</span>\n          </div>\n          <div>\n            <span class="num" style="color: #fc5232"\n              >{{reportDetail?.monEnergy.value}}</span\n            ><br />\n            <span class="dis">当月电量(万kWh)</span>\n          </div>\n          <div>\n            <span class="num" style="color: #fc5232"\n              >{{reportDetail?.yearEnergy.value}}</span\n            ><br />\n            <span class="dis">当年电量(万kWh)</span>\n          </div>\n        </div>\n      </li>\n    </ul>\n    <div class="weather">\n      <ul class="clearfix">\n        <li *ngFor="let weather of reportDetail?.weathers;let i = index">\n          <img\n            src="assets/imgs/daily-report/weather/{{weather.icon}}.svg"\n            alt=""\n          />\n          <span class="num"\n            ><span style="font-size: 1.8rem">{{weather.value}}</span\n            ><span class="unit">(个)</span></span\n          >\n          <div>{{weather.label}}</div>\n        </li>\n      </ul>\n    </div>\n    <!-- 集团生产进度 -->\n    <div class="group-progress">\n      <ion-list-header>\n        <div class="color-block"></div>\n        <p>集团生产进度</p>\n      </ion-list-header>\n      <div>\n        <ion-segment [(ngModel)]="stationGroup">\n          <ion-segment-button value="previous">\n            往年并网电站：{{preYearByGroup?.stationNum}}\n          </ion-segment-button>\n          <ion-segment-button value="then">\n            当年并网电站：{{thisYearByGroup?.stationNum}}\n          </ion-segment-button>\n          <ion-segment-button value="all">\n            全部电站：{{allYearByGroup?.stationNum}}\n          </ion-segment-button>\n        </ion-segment>\n      </div>\n      <div [ngSwitch]="stationGroup">\n        <ul class="clearfix">\n          <li style="font-weight: Bold">计划类别</li>\n          <li>\n            <span class="list">计划电量</span><br /><span class="unit"\n              >(万kWh)</span\n            >\n          </li>\n          <li>\n            <span class="list">实际电量</span><br /><span class="unit"\n              >(万kWh)</span\n            >\n          </li>\n          <li>\n            <span class="list">完成进度</span><br /><span class="unit"\n              >(%)</span\n            >\n          </li>\n        </ul>\n        <ion-list *ngSwitchCase="\'previous\'">\n          <div>\n            <ul class="clearfix">\n              <li>月日历计划</li>\n              <li>{{preYearByGroup?.data[0][1]}}</li>\n              <li>{{preYearByGroup?.data[0][2]}}</li>\n              <li>{{preYearByGroup?.data[0][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>月度计划</li>\n              <li>{{preYearByGroup?.data[1][1]}}</li>\n              <li>{{preYearByGroup?.data[1][2]}}</li>\n              <li>{{preYearByGroup?.data[1][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>季度计划</li>\n              <li>{{preYearByGroup?.data[2][1]}}</li>\n              <li>{{preYearByGroup?.data[2][2]}}</li>\n              <li>{{preYearByGroup?.data[2][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>年度计划</li>\n              <li>{{preYearByGroup?.data[3][1]}}</li>\n              <li>{{preYearByGroup?.data[3][2]}}</li>\n              <li>{{preYearByGroup?.data[3][3]}}</li>\n            </ul>\n          </div>\n        </ion-list>\n        <ion-list *ngSwitchCase="\'then\'">\n          <div>\n            <ul class="clearfix">\n              <li>月日历计划</li>\n              <li>{{thisYearByGroup?.data[0][1]}}</li>\n              <li>{{thisYearByGroup?.data[0][2]}}</li>\n              <li>{{thisYearByGroup?.data[0][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>月度计划</li>\n              <li>{{thisYearByGroup?.data[1][1]}}</li>\n              <li>{{thisYearByGroup?.data[1][2]}}</li>\n              <li>{{thisYearByGroup?.data[1][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>季度计划</li>\n              <li>{{thisYearByGroup?.data[2][1]}}</li>\n              <li>{{thisYearByGroup?.data[2][2]}}</li>\n              <li>{{thisYearByGroup?.data[2][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>年度计划</li>\n              <li>{{thisYearByGroup?.data[3][1]}}</li>\n              <li>{{thisYearByGroup?.data[3][2]}}</li>\n              <li>{{thisYearByGroup?.data[3][3]}}</li>\n            </ul>\n          </div>\n        </ion-list>\n        <ion-list *ngSwitchCase="\'all\'">\n          <div>\n            <ul class="clearfix">\n              <li>月日历计划</li>\n              <li>{{allYearByGroup?.data[0][1]}}</li>\n              <li>{{allYearByGroup?.data[0][2]}}</li>\n              <li>{{allYearByGroup?.data[0][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>月度计划</li>\n              <li>{{allYearByGroup?.data[1][1]}}</li>\n              <li>{{allYearByGroup?.data[1][2]}}</li>\n              <li>{{allYearByGroup?.data[1][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>季度计划</li>\n              <li>{{allYearByGroup?.data[2][1]}}</li>\n              <li>{{allYearByGroup?.data[2][2]}}</li>\n              <li>{{allYearByGroup?.data[2][3]}}</li>\n            </ul>\n          </div>\n          <div>\n            <ul class="clearfix">\n              <li>年度计划</li>\n              <li>{{allYearByGroup?.data[3][1]}}</li>\n              <li>{{allYearByGroup?.data[3][2]}}</li>\n              <li>{{allYearByGroup?.data[3][3]}}</li>\n            </ul>\n          </div>\n        </ion-list>\n      </div>\n    </div>\n    <!-- 分区月度生产进度 -->\n    <div class="part-progress">\n      <ion-list-header>\n        <div class="color-block" style="background: #f08e23"></div>\n        <p>分区月度生产进度</p>\n      </ion-list-header>\n      <div>\n        <ion-segment [(ngModel)]="stationPart">\n          <ion-segment-button value="previous">\n            往年并网电站：{{preYearByPart?.stationNum}}\n          </ion-segment-button>\n          <ion-segment-button value="then">\n            当年并网电站：{{thisYearByPart?.stationNum}}\n          </ion-segment-button>\n          <ion-segment-button value="all">\n            全部电站：{{allYearByPart?.stationNum}}\n          </ion-segment-button>\n        </ion-segment>\n      </div>\n      <div [ngSwitch]="stationPart">\n        <ion-list\n          *ngSwitchCase="\'previous\'"\n          class="clearfix"\n          style="background: #fff"\n        >\n          <ul class="province">\n            <li class="tit">分区</li>\n            <li *ngFor="let province of preYearByPart?.regions;">\n              {{province}}\n            </li>\n          </ul>\n          <ul class="detail">\n            <li class="tit">\n              <span *ngFor="let tit of preYearByPart?.header;let i = index;"\n                >{{tit.label}}\n                <p>({{tit.unit}})</p></span\n              >\n            </li>\n            <li *ngFor="let value of preYearByPart?.data;let i = index;">\n              <span\n                *ngFor="let value of preYearByPart?.data[i].data;let i = index;"\n                >{{value.value}}<img\n                  style="width: 9px; height: 10px; margin-left: 5px"\n                  *ngIf="value.icon"\n                  src="assets/imgs/daily-report/icon_{{value.icon}}.png"\n              /></span>\n            </li>\n          </ul>\n        </ion-list>\n        <ion-list\n          *ngSwitchCase="\'then\'"\n          class="clearfix"\n          style="background: #fff"\n        >\n          <ul class="province">\n            <li class="tit">分区</li>\n            <li *ngFor="let province of thisYearByPart?.regions;">\n              {{province}}\n            </li>\n          </ul>\n          <ul class="detail">\n            <li class="tit">\n              <span\n                style="position: relative"\n                *ngFor="let tit of thisYearByPart?.header;let i = index;"\n                >{{tit.label}}\n                <p>({{tit.unit}})</p></span\n              >\n            </li>\n            <li *ngFor="let value of thisYearByPart?.data;let i = index;">\n              <span\n                *ngFor="let value of thisYearByPart?.data[i].data;let i = index;"\n                >{{value.value}}<img\n                  style="width: 9px; height: 10px; margin-left: 5px"\n                  *ngIf="value.icon"\n                  src="assets/imgs/daily-report/icon_{{value.icon}}.png"\n              /></span>\n            </li>\n          </ul>\n        </ion-list>\n        <ion-list\n          *ngSwitchCase="\'all\'"\n          class="clearfix"\n          style="background: #fff"\n        >\n          <ul class="province">\n            <li class="tit">分区</li>\n            <li *ngFor="let province of allYearByPart?.regions;">\n              {{province}}\n            </li>\n          </ul>\n          <ul class="detail">\n            <li class="tit">\n              <span\n                style="position: relative"\n                *ngFor="let tit of allYearByPart?.header;let i = index;"\n                >{{tit.label}}\n                <p>({{tit.unit}})</p></span\n              >\n            </li>\n            <li *ngFor="let value of allYearByPart?.data;let i = index;">\n              <span\n                *ngFor="let value of allYearByPart?.data[i].data;let i = index;"\n                >{{value.value}}<img\n                  style="width: 9px; height: 10px; margin-left: 5px"\n                  *ngIf="value.icon"\n                  src="assets/imgs/daily-report/icon_{{value.icon}}.png"\n              /></span>\n            </li>\n          </ul>\n        </ion-list>\n      </div>\n    </div>\n  </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/daily-report/report-detail/report-detail.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_2__providers_dailyreport_service__["a" /* DailyReportService */]])
    ], ReportDetail);
    return ReportDetail;
}());

//# sourceMappingURL=report-detail.js.map

/***/ }),

/***/ 806:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModulesDetails2Page; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_modules_service__ = __webpack_require__(92);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_echarts_service__ = __webpack_require__(91);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var ModulesDetails2Page = /** @class */ (function () {
    function ModulesDetails2Page(navCtrl, modalCtrl, event, navParams, viewCtrl, modulesService, menuController, mUtil, actionSheetCtrl, echartsService) {
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.event = event;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.modulesService = modulesService;
        this.menuController = menuController;
        this.mUtil = mUtil;
        this.actionSheetCtrl = actionSheetCtrl;
        this.echartsService = echartsService;
        this.toDate = this.mUtil.buildTime('yyyy-MM-dd', new Date().getTime());
        this.modulesList = [];
        this.page = 0;
        this.canInfinite = false;
        this.param = this.navParams.get('param');
    }
    ModulesDetails2Page.prototype.ionViewWillEnter = function () {
        this.initDetails(this.param);
    };
    /**
     * 初始化详情页面
     * @param param 参数 感觉不同模块获取不同参数
     */
    ModulesDetails2Page.prototype.initDetails = function (param) {
        var that = this;
        this.modulesService.modulesDetailsInit(param).subscribe(function (e) {
            console.log('新首页模块详情初始化：22', e);
            if (e) {
                that.modulesDetails = e;
                if (e.dateType == '1' || e.dateType == '2') {
                    that.startDate = that.mUtil.buildTime('yyyy-MM-dd', e.startDate);
                }
                if (e.dateType == '2') {
                    that.endDate = that.mUtil.buildTime('yyyy-MM-dd', e.endDate);
                }
                that.getModulesList();
            }
        });
    };
    ModulesDetails2Page.prototype.buildOption = function (datas) {
        return this.echartsService.buildYXXLGroupEchartOption(datas);
    };
    /**
     * 获取列表信息
     * @param param
     */
    ModulesDetails2Page.prototype.getModulesList = function (refresher) {
        var _this = this;
        this.modulesService.modulesList(this.param, this.buildData()).subscribe(function (e) {
            console.log('数据列表:', _this.param, " ", e);
            if (e && e["content"] && e["content"].length > 0) {
                _this.modulesList = _this.modulesList.concat(e["content"]);
                // this.modulesList = e.content; 
            }
            if (_this.modulesList.length >= e.totalElements) {
                _this.canInfinite = false;
            }
            else {
                _this.canInfinite = true;
            }
            if (refresher) {
                refresher.complete();
                console.log('加载完成后，关闭刷新');
            }
        });
    };
    ModulesDetails2Page.prototype.buildData = function () {
        // 入参	startDate：日期，必填，默认今天，格式yyyy-MM-dd
        // stationName：电站，非必填
        // provinceId：省ID，非必填
        // cityId：市ID，非必填
        // countyId：县ID，非必填
        // stationType：电站类型ID，非必填
        // sort：排序字段code，必填
        // direction：排序方向，asc或desc，必填
        // page：当前页（从0开始），默认0 
        // size：每页记录数，默认10
        var data = {};
        if (this.modulesDetails.dateType == '1' || this.modulesDetails.dateType == '2') {
            data['startDate'] = this.mUtil.buildTime('yyyy-MM-dd', this.modulesDetails.startDate);
        }
        if (this.modulesDetails.dateType == '2') {
            data['endDate'] = this.mUtil.buildTime('yyyy-MM-dd', this.modulesDetails.endDate);
        }
        data['provinceId'] = this.modulesDetails.province && this.modulesDetails.province.first || '';
        data['cityId'] = this.modulesDetails.city && this.modulesDetails.city.first || '';
        data['countyId'] = this.modulesDetails.county && this.modulesDetails.county.first || '';
        data['stationType'] = this.modulesDetails.station && this.modulesDetails.station.first || '';
        data['sort'] = this.modulesDetails.defaultSort.first;
        data['direction'] = this.modulesDetails.direction || 'asc';
        data['stationName'] = this.modulesDetails.stationName;
        data['page'] = this.page || 0;
        data['size'] = 10;
        return data;
    };
    ModulesDetails2Page.prototype.goBack = function () {
        this.viewCtrl.dismiss();
    };
    /**搜索菜单打开时 */
    ModulesDetails2Page.prototype.menuInit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.modulesDetails));
    };
    /**搜索菜单关闭时 */
    ModulesDetails2Page.prototype.ionClose = function () {
    };
    /**控制侧边栏 */
    ModulesDetails2Page.prototype.serchMenu = function () {
        this.menuController.enable(true, 'search');
        this.menuController.open('search');
    };
    /**拼接图片路径 */
    ModulesDetails2Page.prototype.getImg = function (imgName) {
        return 'assets/imgs/list/' + imgName;
    };
    /**
     * 生成选项列表
     * @param datas 列表
     * @param name1 列表显示内容的key
     * @param name2 点击需要的key值 若为空则取整个对象
     * @param key 保存在modulesDetails中的key值
     * @param isQ 是否查询初始化查询列表
     */
    ModulesDetails2Page.prototype.buildActionSheet = function (datas, name1, name2, key, isQ) {
        var that = this;
        var buttons = [];
        var _loop_1 = function (data) {
            buttons.push({
                text: data[name1],
                handler: function () {
                    if (name2) {
                        that.modulesDetails[key] = data[name2];
                    }
                    else {
                        that.modulesDetails[key] = data;
                    }
                    if (isQ) {
                        that.getModulesList();
                    }
                }
            });
        };
        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {
            var data = datas_1[_i];
            _loop_1(data);
        }
        buttons.push({
            text: '取消',
            role: 'cancel',
            handler: function () {
                console.log('取消 clicked');
            }
        });
        var actionSheet = this.actionSheetCtrl.create({
            cssClass: 'modules-details1-sheetctrl',
            buttons: buttons
        });
        actionSheet.present();
        console.log('Clicked to update picture');
    };
    /**选择 */
    ModulesDetails2Page.prototype.select = function (key) {
        switch (key) {
            case 'defaultSort':
                this.buildActionSheet(this.modulesDetails.sorts, 'second', '', key, true);
                break;
            case 'desc':
                this.modulesDetails.direction = key;
                this.getModulesList();
                break;
            case 'asc':
                this.modulesDetails.direction = key;
                this.getModulesList();
                break;
            case 'province':
                this.getRegions('CN', key);
                this.modulesDetails.city = null;
                this.modulesDetails.county = null;
                break;
            case 'city':
                if (this.modulesDetails.province && this.modulesDetails.province.first) {
                    this.getRegions(this.modulesDetails.province.first, key);
                    this.modulesDetails.county = null;
                }
                break;
            case 'county':
                if (this.modulesDetails.city && this.modulesDetails.city.first) {
                    this.getRegions(this.modulesDetails.city.first, key);
                }
                break;
            case 'station':
                this.getStationType(key);
                break;
        }
    };
    /**
     * 查询省，市，县列表
     */
    ModulesDetails2Page.prototype.getRegions = function (parentId, key) {
        var _this = this;
        this.modulesService.regions(parentId).subscribe(function (e) {
            console.log(e);
            if (e && e.length > 0) {
                _this.buildActionSheet(e, 'second', '', key, false);
            }
            else {
                _this.mUtil.popToastView('暂无相关数据!');
            }
        });
    };
    /**获取电站类型列表 */
    ModulesDetails2Page.prototype.getStationType = function (key) {
        var _this = this;
        this.modulesService.stationType().subscribe(function (e) {
            console.log(e);
            if (e && e.length > 0) {
                _this.buildActionSheet(e, 'second', '', key, false);
            }
        });
    };
    /**时间选择 */
    ModulesDetails2Page.prototype.changeDate = function (type) {
        this.modulesDetails[type] = this[type];
    };
    /**重置 */
    ModulesDetails2Page.prototype.reset = function () {
        this.modulesDetails = JSON.parse(JSON.stringify(this.backupsModulesDetails));
        this.startDate = this.mUtil.buildTime('yyyy-MM-dd', this.modulesDetails.startDate);
        this.endDate = this.mUtil.buildTime('yyyy-MM-dd', this.modulesDetails.endDate);
    };
    /**查询 */
    ModulesDetails2Page.prototype.submit = function () {
        this.menuController.close('search');
        this.page = 0;
        this.modulesList = [];
        this.getModulesList();
    };
    /**
     * 下拉刷新
     *
     */
    ModulesDetails2Page.prototype.doRefresh = function (refresher) {
        console.log("下拉刷新");
        this.page = 0;
        this.modulesList = [];
        this.getModulesList(refresher);
    };
    /**
     * 上拉加载
     * @param infiniteScroll
     */
    ModulesDetails2Page.prototype.doInfinite = function (infiniteScroll) {
        console.log('Begin async operation');
        this.page++;
        this.getModulesList(infiniteScroll);
    };
    ModulesDetails2Page = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-modules-details2',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details2/modules-details2.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>{{modulesDetails && modulesDetails.title || \'\'}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon name="ios-search" class="title-bar-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="刷新..."\n    >\n    </ion-refresher-content>\n  </ion-refresher>\n  <div class="search">\n    <span (click)=\'select("defaultSort")\'\n      >{{modulesDetails && modulesDetails.defaultSort &&\n      modulesDetails.defaultSort.second || \'\'}}</span\n    >\n    <ion-icon\n      name="md-arrow-round-up"\n      class="sort"\n      *ngIf=\'!(modulesDetails && modulesDetails.direction === "desc")\'\n      (click)=\'select("desc")\'\n    ></ion-icon>\n    <ion-icon\n      name="md-arrow-round-down"\n      class="sort"\n      *ngIf=\'modulesDetails && modulesDetails.direction === "desc"\'\n      (click)=\'select("asc")\'\n    ></ion-icon>\n  </div>\n  <div class="card-list">\n    <div class="card" *ngFor="let modules of modulesList">\n      <!-- <img [src]="getImg(modules.icon)" alt=""> -->\n      <div class="card-content">\n        <h1>{{modules.groupName}}</h1>\n        <div\n          echarts\n          [options]="buildOption(modules.values)"\n          class="card-content-echarts"\n        ></div>\n      </div>\n    </div>\n  </div>\n  <ion-infinite-scroll\n    (ionInfinite)="doInfinite($event)"\n    threshold="5%"\n    *ngIf="canInfinite"\n  >\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n<ion-menu\n  [content]="search"\n  side="right"\n  (ionOpen)="menuInit()"\n  (ionClose)="ionClose()"\n  id="search"\n  type="overlay"\n  swipeEnabled="true"\n  class="search-menu"\n>\n  <ion-content class="outer-content" no-bounce class="my-custom-menu">\n    <div>\n      <div\n        class="condition"\n        *ngIf=\'modulesDetails && (modulesDetails.dateType == "1" || modulesDetails.dateType == "2")\'\n      >\n        <p>日期</p>\n        <span\n          [class.had-endtime]=\'modulesDetails && modulesDetails.dateType == "2"\'\n        >\n          <!-- {{(modulesDetails && modulesDetails.startDate || \'\') | date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="startDate"\n            [max]="toDate"\n            (ionChange)="changeDate(\'startDate\')"\n          ></ion-datetime>\n        </span>\n        <span\n          [class.had-endtime]=\'modulesDetails && modulesDetails.dateType == "2"\'\n          *ngIf=\'modulesDetails && modulesDetails.dateType == "2"\'\n        >\n          <!-- {{(modulesDetails && modulesDetails.endDate || \'\')| date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="endDate"\n            [max]="toDate"\n            (ionChange)="changeDate(\'endDate\')"\n          ></ion-datetime>\n        </span>\n      </div>\n      <div class="condition">\n        <p>电站</p>\n        <!-- <span>请选择</span> -->\n        <input\n          type="text"\n          placeholder="请输入"\n          [(ngModel)]="modulesDetails[\'stationName\']"\n          *ngIf="modulesDetails"\n        />\n      </div>\n      <div class="condition">\n        <p>区域</p>\n        <span (click)=\'select("province")\'\n          >{{this.modulesDetails && this.modulesDetails.province &&\n          this.modulesDetails.province.second || \'省\'}}</span\n        >\n        <span (click)=\'select("city")\'\n          >{{this.modulesDetails && this.modulesDetails.city &&\n          this.modulesDetails.city.second || \'市\'}}</span\n        >\n        <span (click)=\'select("county")\'\n          >{{this.modulesDetails && this.modulesDetails.county &&\n          this.modulesDetails.county.second || \'县\'}}</span\n        >\n      </div>\n      <div class="condition">\n        <p>电站类型</p>\n        <span (click)=\'select("station")\'\n          >{{this.modulesDetails && this.modulesDetails.station &&\n          this.modulesDetails.station.second || \'请选择\'}}</span\n        >\n      </div>\n    </div>\n    <div class="my-button">\n      <button (click)="reset()">重置</button>\n      <button (click)="submit()">查询</button>\n    </div>\n  </ion-content>\n</ion-menu>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details2/modules-details2.html"*/
        })
        /**
         * 运行效率
         */
        ,
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_modules_service__["a" /* ModulesService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_echarts_service__["a" /* EchartsService */]])
    ], ModulesDetails2Page);
    return ModulesDetails2Page;
}());

//# sourceMappingURL=modules-details2.js.map

/***/ }),

/***/ 807:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModulesDetails3Page; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_echarts__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_echarts___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_echarts__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_modules_service__ = __webpack_require__(92);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_echarts_service__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__modules_details4_modules_details4__ = __webpack_require__(349);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









// declare var echarts;
var ModulesDetails3Page = /** @class */ (function () {
    function ModulesDetails3Page(navCtrl, modalCtrl, event, navParams, viewCtrl, modulesService, menuController, mUtil, actionSheetCtrl, echartsService) {
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.event = event;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.modulesService = modulesService;
        this.menuController = menuController;
        this.mUtil = mUtil;
        this.actionSheetCtrl = actionSheetCtrl;
        this.echartsService = echartsService;
        this.toDate = __WEBPACK_IMPORTED_MODULE_8_moment__(new Date().getTime()).format('YYYY-MM-DD');
        this.echartsDatas = [];
        this.myChart = {};
        this.modulesList = [];
        this.page = 0;
        this.canInfinite = false;
        this.param = this.navParams.get('param');
        this.modulesDetails = {};
        this.modulesDetails['title'] = this.navParams.get('title');
    }
    ModulesDetails3Page.prototype.ionViewDidLoad = function () {
        this.initDetails();
    };
    /**
     * 初始化详情页面
     */
    ModulesDetails3Page.prototype.initDetails = function () {
        this.startDate = __WEBPACK_IMPORTED_MODULE_8_moment__().startOf('month').format('YYYY-MM-DD');
        this.endDate = __WEBPACK_IMPORTED_MODULE_8_moment__().endOf('month').format('YYYY-MM-DD');
        this.modulesDetails.startDate = this.startDate;
        this.modulesDetails.endDate = this.endDate;
        this.getModulesList();
        this.getEchartData();
    };
    ModulesDetails3Page.prototype.buildOption = function (type) {
        var datas = [];
        for (var i in this.echartsDatas) {
            datas.push({
                name: this.echartsDatas[i].lossTypeText,
                value: this.echartsDatas[i][type],
            });
        }
        datas.sort(function (a, b) {
            return b.value - a.value;
        });
        var c;
        if (type === 'lossNum') {
            c = this.echarts2.nativeElement;
        }
        else {
            c = this.echarts1.nativeElement;
        }
        if (this.myChart[type]) {
            // 原图表实例还在，销毁实例以免出现出现多个点击事件问题
            this.myChart[type].clear();
            this.myChart[type].dispose();
        }
        this.myChart[type] = __WEBPACK_IMPORTED_MODULE_2_echarts___default.a.init(c, 'light');
        var option = this.echartsService.buildSSDLTJEchartOption(datas, type);
        this.myChart[type].setOption(option);
    };
    /**
     * 获取列表信息
     * @param param
     */
    ModulesDetails3Page.prototype.getModulesList = function (refresher) {
        var _this = this;
        this.modulesService.lossStationLossTypes(this.buildData()).subscribe(function (e) {
            console.log('数据列表:', _this.param, ' ', e);
            if (e && e['content'] && e['content'].length > 0) {
                _this.modulesList = _this.modulesList.concat(e['content']);
                // this.modulesList = e.content;
            }
            if (e.totalElements == 0) {
                _this.mUtil.popToastView('无数据');
            }
            if (_this.modulesList.length >= e.totalElements) {
                _this.canInfinite = false;
            }
            else {
                _this.canInfinite = true;
            }
            if (refresher) {
                refresher.complete();
                console.log('加载完成后，关闭刷新');
            }
        });
    };
    /**
     * 图片列表请求
     */
    ModulesDetails3Page.prototype.getEchartData = function () {
        var _this = this;
        this.modulesService.lossLossTypes(this.buildData('Echart')).subscribe(function (e) {
            console.log('图标数据:', e);
            if (e) {
                _this.echartsDatas = e;
                _this.buildOption('lossEnergy');
                _this.buildOption('lossNum');
            }
        });
    };
    /**列表请求参数 */
    ModulesDetails3Page.prototype.buildData = function (type) {
        var data = { stationIds: '' };
        data['startDate'] = __WEBPACK_IMPORTED_MODULE_8_moment__(this.modulesDetails.startDate).format('YYYY-MM-DD');
        data['endDate'] = __WEBPACK_IMPORTED_MODULE_8_moment__(this.modulesDetails.endDate).format('YYYY-MM-DD');
        if (this.modulesDetails.stationList) {
            for (var _i = 0, _a = this.modulesDetails.stationList; _i < _a.length; _i++) {
                var station = _a[_i];
                data['stationIds'] = data['stationIds'] + station.id + ',';
            }
        }
        if (type != 'Echart') {
            data['page'] = this.page || 0;
            data['size'] = 10;
        }
        return data;
    };
    ModulesDetails3Page.prototype.goBack = function () {
        this.viewCtrl.dismiss();
    };
    /**
     * 跳转至详情页
     * @param modules
     */
    ModulesDetails3Page.prototype.toDetailsPage = function (modules) {
        var param = {
            startDate: this.modulesDetails.startDate,
            endDate: this.modulesDetails.endDate,
            stationList: [{ id: modules.stationId, title: modules.stationName }],
            // stationIds:modules.stationId,
            title: '损失电量明细',
        };
        var searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__modules_details4_modules_details4__["a" /* ModulesDetails4Page */], { id: 'APP_RPT_LOSS2', title: '损失电量明细', param: param }, { showBackdrop: true });
        searchModal.present();
    };
    /**搜索菜单打开时 */
    ModulesDetails3Page.prototype.menuInit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.modulesDetails));
    };
    /**搜索菜单关闭时 */
    ModulesDetails3Page.prototype.ionClose = function () {
        this.reset();
    };
    /**控制侧边栏 */
    ModulesDetails3Page.prototype.serchMenu = function () {
        this.menuController.enable(true, 'search3');
        this.menuController.open('search3');
    };
    /**电站选择 */
    ModulesDetails3Page.prototype.selectStation = function () {
        var that = this;
        console.log('当前所选电站列表：', that.modulesDetails.stationList);
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_station_common_station__["a" /* CommonStationPage */], {
            isMultiSelect: true,
            stationList: that.modulesDetails.stationList,
        });
        modal.onDidDismiss(function (e) {
            if (e) {
                that.modulesDetails.stationList = e;
                console.log('选择的电站列表：', e);
            }
        });
        modal.present({ keyboardClose: true });
    };
    ModulesDetails3Page.prototype.getStationNum = function () {
        var num = this.modulesDetails.stationList && this.modulesDetails.stationList.length;
        if (num) {
            return '已选择 ' + num + ' 个电站';
        }
        else {
            return '请选择';
        }
    };
    /**时间选择 */
    ModulesDetails3Page.prototype.changeDate = function (type) {
        this.modulesDetails[type] = this[type];
    };
    /**重置 */
    ModulesDetails3Page.prototype.reset = function () {
        this.modulesDetails = JSON.parse(JSON.stringify(this.backupsModulesDetails));
        this.startDate = __WEBPACK_IMPORTED_MODULE_8_moment__(this.modulesDetails.startDate).format('YYYY-MM-DD');
        this.endDate = __WEBPACK_IMPORTED_MODULE_8_moment__(this.modulesDetails.endDate).format('YYYY-MM-DD');
    };
    /**查询 */
    ModulesDetails3Page.prototype.submit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.modulesDetails));
        this.menuController.close('search3');
        this.page = 0;
        this.modulesList = [];
        this.getModulesList();
        this.getEchartData();
    };
    /**
     * 下拉刷新
     *
     */
    ModulesDetails3Page.prototype.doRefresh = function (refresher) {
        console.log('下拉刷新');
        this.page = 0;
        this.modulesList = [];
        this.getEchartData();
        this.getModulesList(refresher);
    };
    /**
     * 上拉加载
     * @param infiniteScroll
     */
    ModulesDetails3Page.prototype.doInfinite = function (infiniteScroll) {
        console.log('Begin async operation');
        this.page++;
        this.getModulesList(infiniteScroll);
    };
    /**导出文件 */
    ModulesDetails3Page.prototype.downLoadFile = function () {
        var _this = this;
        this.mUtil.customPrompt({ msg: '确定下载该文件吗?' }, function () {
            _this.modulesService.exportStationLossTypes(_this.buildData('Echart'), "\u635F\u5931\u7535\u91CF\u7EDF\u8BA1.xlsx");
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('echarts1'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["ElementRef"])
    ], ModulesDetails3Page.prototype, "echarts1", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('echarts2'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["ElementRef"])
    ], ModulesDetails3Page.prototype, "echarts2", void 0);
    ModulesDetails3Page = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-modules-details3',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details3/modules-details3.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>{{modulesDetails && modulesDetails.title || \'\'}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon\n          name="search"\n          class="down-me"\n          style="font-size: 1.4em"\n        ></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="downLoadFile()">\n        <ion-icon\n          name="md-download"\n          class="down-me"\n          style="font-size: 1.4em"\n        ></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content #search3>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="刷新..."\n    >\n    </ion-refresher-content>\n  </ion-refresher>\n  <div class="echart-sss">\n    <ion-slides pager>\n      <ion-slide>\n        <div class="echarts-content">\n          <div #echarts1 class="echarts-content-div"></div>\n        </div>\n      </ion-slide>\n      <ion-slide>\n        <div class="echarts-content">\n          <div #echarts2 class="echarts-content-div"></div>\n        </div>\n      </ion-slide>\n    </ion-slides>\n  </div>\n  <div class="card-list">\n    <div\n      class="card"\n      *ngFor="let modules of modulesList"\n      (click)="toDetailsPage(modules)"\n    >\n      <!-- <img [src]="getImg(modules.icon)" alt=""> -->\n      <div class="card-content">\n        <h1>{{modules.stationName}}</h1>\n        <div class="card-content-test-list" *ngFor="let data of modules.datas">\n          <span>{{data.lossTypeText}}</span>\n          <span>{{data.lossNum}}次</span>\n          <span>{{data.lossEnergy}}kWh</span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ion-infinite-scroll\n    (ionInfinite)="doInfinite($event)"\n    threshold="5%"\n    *ngIf="canInfinite"\n  >\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n<ion-menu\n  [content]="search3"\n  side="right"\n  (ionOpen)="menuInit()"\n  (ionClose)="ionClose()"\n  id="search3"\n  type="overlay"\n  swipeEnabled="true"\n  class="search-menu"\n>\n  <ion-content class="outer-content" no-bounce class="my-custom-menu">\n    <div>\n      <div class="condition" *ngIf="modulesDetails">\n        <p>日期</p>\n        <span [class.had-endtime]="modulesDetails ">\n          <!-- {{(modulesDetails && modulesDetails.startDate || \'\') | date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="startDate"\n            [max]="toDate"\n            (ionChange)="changeDate(\'startDate\')"\n          ></ion-datetime>\n        </span>\n        <span [class.had-endtime]="modulesDetails" *ngIf="modulesDetails ">\n          <!-- {{(modulesDetails && modulesDetails.endDate || \'\')| date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="endDate"\n            [max]="toDate"\n            (ionChange)="changeDate(\'endDate\')"\n          ></ion-datetime>\n        </span>\n      </div>\n      <div class="condition">\n        <p>电站</p>\n        <span (click)="selectStation()">{{getStationNum()}}</span>\n      </div>\n    </div>\n    <div class="my-button">\n      <button (click)="reset()">重置</button>\n      <button (click)="submit()">查询</button>\n    </div>\n  </ion-content>\n</ion-menu>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-details3/modules-details3.html"*/,
        })
        /**
         * 损失电量统计
         */
        ,
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_modules_service__["a" /* ModulesService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_echarts_service__["a" /* EchartsService */]])
    ], ModulesDetails3Page);
    return ModulesDetails3Page;
}());

//# sourceMappingURL=modules-details3.js.map

/***/ }),

/***/ 808:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaintainsMenusPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_maintains_service__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the MaintainsMenusPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MaintainsMenusPage = /** @class */ (function () {
    function MaintainsMenusPage(navCtrl, navParams, viewCtrl, maintainsprovider) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.maintainsprovider = maintainsprovider;
    }
    MaintainsMenusPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad maintainsMenusPage');
        this.maintainsprovider.getMaintainsTypes().subscribe(function (res) {
            console.log(res);
            _this.maintainTypes = res;
        });
    };
    MaintainsMenusPage.prototype.ionViewWillEnter = function () { };
    MaintainsMenusPage.prototype.addMaintains = function (event, type) {
        this.viewCtrl.dismiss({ type: type });
    };
    MaintainsMenusPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-maintains-menus',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains/maintains-menus/maintains-menus.html"*/'<!--\n  Generated template for the MaintainsMenusPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n    <ion-list>\n        <ng-container *ngFor="let maintainType of maintainTypes">\n            <ion-item no-lines (tap)="addMaintains($event,maintainType.id)">\n                {{maintainType.name}}\n            </ion-item>\n        </ng-container>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains/maintains-menus/maintains-menus.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_maintains_service__["a" /* MaintainsProvider */]])
    ], MaintainsMenusPage);
    return MaintainsMenusPage;
}());

//# sourceMappingURL=maintains-menus.js.map

/***/ }),

/***/ 809:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaintainsDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_defes_servicer__ = __webpack_require__(172);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_camera__ = __webpack_require__(96);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_util_plugin_service__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_image_picker__ = __webpack_require__(114);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_picker__ = __webpack_require__(97);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_photo_viewer__ = __webpack_require__(98);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__maintains_device_maintains_device__ = __webpack_require__(810);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__work_flow_chart__ = __webpack_require__(1250);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__util_modal_common_dispatch_common_dispatch__ = __webpack_require__(232);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__util_modal_common_check_common_check__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__util_common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__providers_maintains_service__ = __webpack_require__(134);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};























/**
 * Generated class for the MaintainsDetailsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MaintainsDetailsPage = /** @class */ (function () {
    function MaintainsDetailsPage(navCtrl, navParams, fb, modalCtrl, actionSheetCtrl, maintainsprovider, defesservice, alertCtrl, mutilservice, camera, pluginservice, platform, imagePicker, filePicker, photoViewer, appConfig) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.modalCtrl = modalCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.maintainsprovider = maintainsprovider;
        this.defesservice = defesservice;
        this.alertCtrl = alertCtrl;
        this.mutilservice = mutilservice;
        this.camera = camera;
        this.pluginservice = pluginservice;
        this.platform = platform;
        this.imagePicker = imagePicker;
        this.filePicker = filePicker;
        this.photoViewer = photoViewer;
        this.appConfig = appConfig;
        this.buttons = [];
        this.toggleBaseInfo = true;
        this.toggleInspectionCheck = false;
        this.toggleWorkFlow = false;
        this.toggleWorkflowLogs = false;
        this.toggleBackEndData = false;
        this.toggleComment = false;
        this.buttonToggle = false;
        this.ccUsers = [];
        this.commentsList = [];
        this.firstLoadTracks = true;
        this.objToggle = [];
        this.objPermission = 2;
        this.initForm();
        this.fileBasePath = this.appConfig.fileEndpoint;
    }
    MaintainsDetailsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad InspectionsDetailsPage');
        this.inspectionId = this.navParams.get('inspectionId') || 0;
        this.inspectionType = this.navParams.get('inspectionType');
        this.getMaintainsDetails();
    };
    MaintainsDetailsPage.prototype.ionViewWillEnter = function () {
        var _this = this;
        var equipmentList = this.navParams.get('equipmentList');
        if (equipmentList) {
            var equipment_1 = equipmentList[0];
            this.navParams.data.equipmentList = null;
            var params = {
                deviceId: equipment_1.deviceId,
                inspectionType: this.inspectionType,
                objGroup: this.groupId,
                objId: 0,
            };
            this.maintainsprovider.getObj(params).subscribe(function (res) {
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__maintains_device_maintains_device__["a" /* MaintainsDevicePage */], {
                    objInfo: __assign(__assign({}, res), { inspectionId: _this.inspectionId, stationId: equipment_1.stationId, stationName: equipment_1.stationName }),
                    objPermission: _this.objPermission,
                });
            });
        }
        var objInfo = this.navParams.get('objInfo');
        if (objInfo) {
            this.navParams.data.objInfo = null;
            var data_1 = objInfo.params;
            var control_1 = this.form.get('objGroups');
            var objGroupValue_1 = control_1.value;
            if (objInfo.type === 'add') {
                objGroupValue_1.map(function (item, index) {
                    if (item.groupId === data_1.objGroup) {
                        var objControl = control_1.controls[index].get('objs');
                        objControl.push(_this.initObj());
                        objGroupValue_1[index].objs.push(data_1);
                        _this.form.get('objGroups').patchValue(objGroupValue_1);
                    }
                });
            }
            else if (objInfo.type === 'edit') {
                objGroupValue_1.map(function (item, index) {
                    if (item.groupId === data_1.objGroup) {
                        item.objs.map(function (objItem, i) {
                            if (objItem.objId === data_1.objId) {
                                objGroupValue_1[index].objs[i] = data_1;
                                _this.form.get('objGroups').patchValue(objGroupValue_1);
                            }
                        });
                    }
                });
            }
            else if (objInfo.type === 'delete') {
                objGroupValue_1.map(function (item, index) {
                    if (item.groupId === data_1.objGroup) {
                        __WEBPACK_IMPORTED_MODULE_12_lodash__["remove"](objGroupValue_1[index].objs, function (o) {
                            return o.objId === data_1.objId;
                        });
                        var objControl = control_1.controls[index].get('objs');
                        objControl.removeAt(__WEBPACK_IMPORTED_MODULE_12_lodash__["indexOf"](objGroupValue_1[index].objs, function (o) {
                            return o.objId === data_1.objId;
                        }));
                    }
                });
            }
            this.objGroups = [];
            this.form.value.objGroups.map(function (item) {
                item.objs.map(function (i) {
                    _this.objGroups.push({
                        objId: i.objId,
                        latitude: +i.latitude,
                        longitude: +i.longitude,
                        inspectionStatus: i.inspectionStatus,
                        deviceNo: i.deviceNo,
                        groupType: item.groupType,
                    });
                });
            });
        }
    };
    MaintainsDetailsPage.prototype.initForm = function () {
        this.form = this.fb.group({
            inspectionId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            inspectionCode: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            stationId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            inspectionType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            inspectionTypeText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            dispatcher: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            dispatcherName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            responsiblePerson: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            responsiblePersonName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            players: this.fb.array([]),
            playersText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            planStartTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            planEndTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            startTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            endTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            workHours: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            objGroups: this.fb.array([]),
            power: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            dayEnergy: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            // 抢修单检查
            checkStatus: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checkStatusText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checker: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checkerName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checkTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            checkMemo: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            // 工作流程
            workflow: this.fb.group({
                nodes: this.fb.array([]),
                links: this.fb.array([]),
            }),
            // 流程日志
            workflowLogs: this.fb.array([]),
            //抄送
            ccUsers: this.fb.array([]),
        });
    };
    MaintainsDetailsPage.prototype.getMaintainsDetails = function () {
        var _this = this;
        this.maintainsprovider
            .getMaintainsDetails(this.inspectionId, { inspectionType: this.inspectionType })
            .subscribe(function (res) {
            _this.fillValue(res);
        });
    };
    MaintainsDetailsPage.prototype.fillValue = function (res) {
        var _this = this;
        this.title = res.title;
        var values = res.inspection;
        if (res.fields) {
            this.fields = res.fields;
        }
        if (res.buttons) {
            this.buttons = res.buttons;
        }
        this.orderId = values.orderId;
        if (values.inspectionId) {
            this.inspectionId = values.inspectionId;
        }
        // 同组巡检人员
        if (values.players !== null) {
            var control_2 = this.form.get('players');
            while (control_2.length) {
                control_2.removeAt(control_2.length - 1);
            }
            var playersText = values.players.map(function (item) {
                control_2.push(_this.initPlayers());
                return item.userName;
            });
            values.playersText = playersText.join(',');
        }
        else {
            values.players = [];
        }
        // 计划开始时间
        values.planStartTime = __WEBPACK_IMPORTED_MODULE_12_lodash__["isNumber"](values.planStartTime)
            ? __WEBPACK_IMPORTED_MODULE_13_moment__(values.planStartTime).format()
            : values.planStartTime;
        // 计划结束时间
        values.planEndTime = __WEBPACK_IMPORTED_MODULE_12_lodash__["isNumber"](values.planEndTime)
            ? __WEBPACK_IMPORTED_MODULE_13_moment__(values.planEndTime).format()
            : values.planEndTime;
        // 实际开始时间
        values.startTime = __WEBPACK_IMPORTED_MODULE_12_lodash__["isNumber"](values.startTime)
            ? __WEBPACK_IMPORTED_MODULE_13_moment__(values.startTime).format()
            : values.startTime;
        // 实际结束时间
        values.endTime = __WEBPACK_IMPORTED_MODULE_12_lodash__["isNumber"](values.endTime) ? __WEBPACK_IMPORTED_MODULE_13_moment__(values.endTime).format() : values.endTime;
        // 检查时间
        values.checkTime = __WEBPACK_IMPORTED_MODULE_12_lodash__["isNumber"](values.checkTime)
            ? __WEBPACK_IMPORTED_MODULE_13_moment__(values.checkTime).format()
            : values.checkTime;
        if (values.objGroups !== null) {
            var control_3 = this.form.get('objGroups');
            while (control_3.length) {
                control_3.removeAt(control_3.length - 1);
            }
            this.objGroups = [];
            values.objGroups.map(function (item, index) {
                _this.objToggle.push({ show: false });
                control_3.push(_this.initObjGroups());
                var objControl = control_3.controls[index].get('objs');
                while (objControl.length) {
                    objControl.removeAt(objControl.length - 1);
                }
                item.objs.map(function (i) {
                    objControl.push(_this.initObj());
                    _this.objGroups.push({
                        objId: i.objId,
                        latitude: +i.latitude,
                        longitude: +i.longitude,
                        inspectionStatus: i.inspectionStatus,
                        deviceNo: i.deviceNo,
                        groupType: item.groupType,
                    });
                });
            });
        }
        else {
            values.objGroups = [];
            this.objGroups = [];
        }
        //工作流程
        if (values.workflow !== null) {
            var workflow = values.workflow;
            var _loop_1 = function (key) {
                if (workflow.hasOwnProperty(key)) {
                    var element = workflow[key];
                    if (key === 'nodes') {
                        this_1.nodes = element;
                        var control_4 = this_1.form.get('workflow').controls[key];
                        while (control_4.length) {
                            control_4.removeAt(control_4.length - 1);
                        }
                        element.map(function (item) {
                            control_4.push(_this.initNodes());
                        });
                    }
                    else if (key === 'links') {
                        this_1.links = element;
                        var control_5 = this_1.form.get('workflow').controls[key];
                        while (control_5.length) {
                            control_5.removeAt(control_5.length - 1);
                        }
                        element.map(function (item) {
                            control_5.push(_this.initLinks());
                        });
                    }
                }
            };
            var this_1 = this;
            for (var key in workflow) {
                _loop_1(key);
            }
            this.options = Object(__WEBPACK_IMPORTED_MODULE_14__work_flow_chart__["a" /* buildWorkFlow */])(this.links, this.nodes);
        }
        else {
            values.workflow = {};
        }
        // 流程日志
        if (values.workflowLogs) {
            var control_6 = this.form.get('workflowLogs');
            while (control_6.length) {
                control_6.removeAt(control_6.length - 1);
            }
            values.workflowLogs.map(function (item) {
                control_6.push(_this.initWorkflowLogs());
            });
        }
        else {
            values.workflowLogs = [];
        }
        // 抄送
        if (values.ccUsers !== null) {
            this.ccUsers = values.ccUsers;
            var control_7 = this.form.get('ccUsers');
            while (control_7.length) {
                control_7.removeAt(control_7.length - 1);
            }
            values.ccUsers.map(function (item) {
                control_7.push(_this.initCcUser());
            });
        }
        else {
            this.ccUsers = [];
            values.ccUsers = [];
        }
        if (values.comments !== null) {
            this.commentsList = values.comments;
        }
        else {
            this.commentsList = [];
            values.comments = [];
        }
        this.ccPermission = res.ccPermission;
        this.objPermission = res.objPermission;
        this.form.patchValue(values);
    };
    // 电站选择
    MaintainsDetailsPage.prototype.selectStation = function (event) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_15__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.form.patchValue({
                    stationId: e.id,
                    stationName: e.title,
                });
            }
        });
        modal.present({ keyboardClose: true });
    };
    MaintainsDetailsPage.prototype.openSheetModal = function (type, typeText) {
        var _this = this;
        var options = this.fields[type]['props'];
        var buttons = options.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    var _a;
                    _this.form.patchValue((_a = {},
                        _a[type] = item.first,
                        _a[typeText] = item.second,
                        _a));
                },
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    // 人员选择器
    MaintainsDetailsPage.prototype.selectUser = function (id, name) {
        var _this = this;
        var value = this.form.value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_16__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
            selectedItem: [{ userId: value[id], userName: value[name] }],
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {},
                        _a[id] = data.value[0] ? data.value[0].userId : null,
                        _a[name] = data.value[0] ? data.value[0].realName : null,
                        _a));
                }
                else {
                    _this.form.patchValue((_b = {},
                        _b[id] = null,
                        _b[name] = null,
                        _b));
                }
            }
        });
        modal.present();
    };
    // 同组巡检人员
    MaintainsDetailsPage.prototype.selectplayers = function (event, editable) {
        var _this = this;
        var value = this.form.value;
        var selectedItem = [];
        value.players.map(function (item) {
            selectedItem.push({
                userId: item.userId,
                realName: item.userName,
                userName: item.account,
                icon: item.userIcon,
                deptName: item.deptName,
            });
        });
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_16__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: false,
            selectedItem: selectedItem,
            editable: editable,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    var control_8 = _this.form.get('players');
                    while (control_8.length) {
                        control_8.removeAt(control_8.length - 1);
                    }
                    var players_1 = [];
                    var playersText = data.value.map(function (item) {
                        players_1.push({
                            userId: item.userId,
                            userName: item.realName,
                            account: item.userName,
                            userIcon: item.icon,
                            deptName: item.deptName,
                        });
                        control_8.push(_this.initPlayers());
                        return item.realName;
                    });
                    _this.form.get('players').patchValue(players_1);
                    _this.form.get('playersText').patchValue(playersText.join(','));
                }
            }
            else if (data && data.length === 0) {
                _this.form.patchValue({
                    playersText: '',
                    players: [],
                });
            }
        });
        modal.present();
    };
    MaintainsDetailsPage.prototype.initPlayers = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            account: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userIcon: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deptName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
        });
    };
    MaintainsDetailsPage.prototype.openInputModal = function (type, editable, inputType) {
        var _this = this;
        if (inputType === void 0) { inputType = 'text'; }
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_17__util_modal_common_input_common_input__["a" /* CommonInputPage */], {
            value: this.form.value[type],
            title: this.fields[type]['name'],
            type: inputType,
        }, {
            cssClass: 'commonModal commonInputModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            var _a;
            if (data) {
                _this.form.patchValue((_a = {},
                    _a[type] = data.value,
                    _a));
            }
        });
        modal.present();
    };
    // 多行文本内容
    MaintainsDetailsPage.prototype.addTextarea = function (title, key, editable) {
        var _this = this;
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_18__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: title,
            value: this.form.value[key],
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {}, _a[key] = data.value, _a));
                }
                else if (data.type == 'clear') {
                    _this.form.patchValue((_b = {}, _b[key] = null, _b));
                }
            }
        });
        modal.present();
    };
    MaintainsDetailsPage.prototype.ccUserEvent = function (data) {
        var _this = this;
        var control = this.form.get('ccUsers');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initCcUser());
        });
        this.form.patchValue({
            ccUsers: data,
        });
    };
    MaintainsDetailsPage.prototype.initCcUser = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
        });
    };
    MaintainsDetailsPage.prototype.buttonFunction = function (button) {
        var _this = this;
        // 表单检查
        if (button.formCheck === '1') {
            this.defesservice.checkNullable(button.targetNodeId).subscribe(function (res) {
                var _loop_2 = function (key) {
                    if (res.hasOwnProperty(key)) {
                        if (key.indexOf('.') === -1) {
                            var element = res[key];
                            if (_this.form.value[key] === null && !element) {
                                var alert_1 = _this.alertCtrl.create({
                                    title: '警告',
                                    subTitle: _this.fields[key].name + '字段不能为空',
                                    buttons: ['关闭'],
                                });
                                alert_1.present();
                                return { value: void 0 };
                            }
                        }
                        else {
                            var aNewKey_1 = key.split('.');
                            var element = res[key];
                            if (_this.form.value[aNewKey_1[0]].length > 0 && !element) {
                                var flag_1 = true;
                                _this.form.value[aNewKey_1[0]].every(function (item) {
                                    if (item[aNewKey_1[1]] === null) {
                                        var alert_2 = _this.alertCtrl.create({
                                            title: '警告',
                                            subTitle: _this.fields[aNewKey_1[0]].name + '字段不能为空',
                                            buttons: ['关闭'],
                                        });
                                        alert_2.present();
                                        flag_1 = false;
                                        return false;
                                    }
                                });
                                if (!flag_1) {
                                    return { value: void 0 };
                                }
                            }
                        }
                    }
                };
                for (var key in res) {
                    var state_1 = _loop_2(key);
                    if (typeof state_1 === "object")
                        return state_1.value;
                }
                _this.switchFunction(button);
            });
        }
        else {
            this.switchFunction(button);
        }
    };
    MaintainsDetailsPage.prototype.buttonFlex = function (length) {
        switch (length) {
            case 1:
                return 'col-12';
            case 2:
                return 'col-6';
            case 3:
                return 'col-4';
            case 4:
                return 'col-3';
            default:
                break;
        }
    };
    MaintainsDetailsPage.prototype.switchFunction = function (button) {
        switch (button.buttonAction) {
            // 派单
            case 'create':
                this.createFunction(button);
                break;
            // 开始
            case 'start':
                this.startFunction(button);
                break;
            // 驳回
            case 'reject':
                this.rejectFunction(button);
                break;
            // 完成
            case 'finish':
                this.finishFunction(button);
                break;
            // 检查
            case '$check$':
                this.checkFunction();
                break;
            case 'delete':
                this.deleteFunction();
                break;
            case '$remind$':
                this.remindFunction();
                break;
        }
    };
    MaintainsDetailsPage.prototype.createFunction = function (button) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_19__util_modal_common_dispatch_common_dispatch__["a" /* CommonDispatchPage */], {}, {
            cssClass: 'commonModal commonDispatchModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    var params = {
                        title: _this.title,
                        inspection: __assign(__assign({}, _this.form.value), { inspectionId: null, inspectionCode: null, objGroups: null }),
                        action: button,
                        nextUserIds: data.value.nextUserIds,
                        memo: data.value.memo,
                    };
                    _this.maintainsprovider.maintainsAction(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.navCtrl.getPrevious().data.freshPage = true;
                        _this.navCtrl.pop();
                    });
                }
            }
        });
        modal.present();
    };
    MaintainsDetailsPage.prototype.startFunction = function (button) {
        var _this = this;
        if (this.inspectionId) {
            this.form.patchValue({
                startTime: __WEBPACK_IMPORTED_MODULE_13_moment__().format(),
            });
            var params = {
                title: this.title,
                inspection: __assign(__assign({}, this.form.value), { objGroups: null }),
                action: button,
                nextUserIds: null,
                memo: null,
            };
            this.maintainsprovider.maintainsUpdateAction(params).subscribe(function (res) {
                _this.fillValue(res);
                // this.mutilservice.popToastView('巡检开始');
            });
        }
        else {
            this.form.patchValue({
                startTime: __WEBPACK_IMPORTED_MODULE_13_moment__().format(),
            });
            var params = {
                title: this.title,
                inspection: __assign(__assign({}, this.form.value), { objGroups: null }),
                action: button,
                nextUserIds: null,
                memo: null,
            };
            this.maintainsprovider.maintainsAction(params).subscribe(function (res) {
                _this.fillValue(res);
            });
        }
    };
    // 拒绝
    MaintainsDetailsPage.prototype.rejectFunction = function (button) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_18__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: '说明',
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    var params = {
                        title: _this.title,
                        inspection: __assign(__assign({}, _this.form.value), { objGroups: null }),
                        action: button,
                        nextUserIds: null,
                        memo: data.value,
                    };
                    _this.maintainsprovider.maintainsUpdateAction(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.navCtrl.getPrevious().data.freshPage = true;
                        _this.navCtrl.pop();
                    });
                }
            }
        });
        modal.present();
    };
    MaintainsDetailsPage.prototype.finishFunction = function (button) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定检修/预试已完成么？完成后将无法再增加或修改检修/预试内容',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        var params = {
                            title: _this.title,
                            inspection: __assign(__assign({}, _this.form.value), { objGroups: null }),
                            action: button,
                            nextUserIds: null,
                            memo: null,
                        };
                        _this.maintainsprovider.maintainsAction(params).subscribe(function (res) {
                            _this.mutilservice.popToastView('提交成功');
                            _this.navCtrl.getPrevious().data.freshPage = true;
                            _this.navCtrl.pop();
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    // 检查操作
    MaintainsDetailsPage.prototype.checkFunction = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_20__util_modal_common_check_common_check__["a" /* CommonCheckPage */], {
            options: this.fields['checkStatus'].props,
        }, {
            cssClass: 'commonModal commonCheckModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    var params = {
                        inspectionId: _this.inspectionId,
                        checkStatus: data.value.checkStatus,
                        checkMemo: data.value.checkMemo,
                    };
                    _this.maintainsprovider.check(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        res.checkTime = __WEBPACK_IMPORTED_MODULE_12_lodash__["isNumber"](res.checkTime)
                            ? __WEBPACK_IMPORTED_MODULE_13_moment__(res.checkTime).format('YYYY-MM-DD HH:mm')
                            : res.checkTime;
                        _this.form.patchValue(res);
                    });
                }
            }
        });
        modal.present();
    };
    // 删除
    MaintainsDetailsPage.prototype.deleteFunction = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除该检修/预试单吗?',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        var inspectionId = _this.inspectionId;
                        _this.maintainsprovider.check(inspectionId).subscribe(function (res) {
                            _this.mutilservice.popToastView('删除成功');
                            _this.navCtrl.getPrevious().data.freshPage = true;
                            _this.navCtrl.pop();
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    // 催单
    MaintainsDetailsPage.prototype.remindFunction = function () {
        var _this = this;
        this.maintainsprovider.remind(this.inspectionId).subscribe(function (res) {
            _this.mutilservice.popToastView('已发送催单消息');
        });
    };
    MaintainsDetailsPage.prototype.showMoreButtons = function () {
        this.buttonToggle = !this.buttonToggle;
    };
    MaintainsDetailsPage.prototype.initObjGroups = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            groupId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            groupName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            groupType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deviceType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            objs: this.fb.array([]),
        });
    };
    MaintainsDetailsPage.prototype.initObj = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            objId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            inspectionId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            standardId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            objGroup: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            psrId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deviceId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            latitude: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            longitude: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            inspectionStatus: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            updateTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            updater: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deviceNo: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            deviceName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            inspectionStatusText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            docId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            uri: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            items: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            status: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
        });
    };
    MaintainsDetailsPage.prototype.getObjGroups = function (form) {
        return form.controls.objGroups.controls;
    };
    MaintainsDetailsPage.prototype.getObjs = function (form) {
        return form.controls.objs.controls;
    };
    MaintainsDetailsPage.prototype.addObj = function (objGroup, index) {
        if (!this.form.value.stationId) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        if (!this.form.value.inspectionId) {
            this.mutilservice.popToastView('请先点击开始按钮');
            return;
        }
        if (objGroup.value.groupType === 'pic') {
            this.groupId = objGroup.value.groupId;
            this.uploadPicParams = {
                inspectionId: this.inspectionId,
                objGroup: this.groupId,
            };
            this.chooseType(index);
        }
        else {
            this.groupId = objGroup.value.groupId;
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_21__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
                stationId: this.form.value.stationId,
                deviceType: objGroup.value.deviceType,
                isSingle: true,
            });
        }
    };
    MaintainsDetailsPage.prototype.editObj = function (objId) {
        var _this = this;
        this.maintainsprovider.getObj({ objId: objId }).subscribe(function (res) {
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__maintains_device_maintains_device__["a" /* MaintainsDevicePage */], {
                objInfo: __assign(__assign({}, res), { inspectionId: _this.inspectionId, stationId: _this.form.value.stationId, stationName: _this.form.value.stationName }),
                objPermission: _this.objPermission,
            });
        });
    };
    MaintainsDetailsPage.prototype.chooseType = function (index) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: [
                {
                    text: '拍照',
                    handler: function () {
                        _this.takePhoto(index);
                    },
                },
                {
                    text: '从相册选择',
                    handler: function () {
                        _this.upload(index);
                    },
                },
                {
                    text: '取消',
                    handler: function () {
                        console.log('cancel');
                    },
                },
            ],
            cssClass: 'commonSheet',
        });
        actionSheet.present().then(function (value) {
            return value;
        });
    };
    MaintainsDetailsPage.prototype.takePhoto = function (index) {
        var _this = this;
        var options = {
            quality: 100,
            allowEdit: false,
            targetWidth: 200,
            targetHeight: 200,
            saveToPhotoAlbum: false,
        };
        this.camera.getPicture(options).then(function (image) {
            _this.pluginservice
                .uploadPic(image, '/api/m/v2/inspections/pic', 'file', _this.uploadPicParams)
                .then(function (res) {
                _this.savePic(res.data, index);
            });
        }, function (error) {
            console.log('Error: ' + error);
        });
    };
    MaintainsDetailsPage.prototype.upload = function (index) {
        var _this = this;
        // if (this.platform.is('android')) {
        this.imagePicker.getPictures({ maximumImagesCount: 1, width: 200, height: 200 }).then(function (results) {
            _this.pluginservice
                .uploadPic(results[0], '/api/m/v2/inspections/pic', 'file', _this.uploadPicParams)
                .then(function (res) {
                _this.savePic(res.data, index);
            });
        }, function (err) { });
        // } else {
        //   this.filePicker
        //     .pickFile()
        //     .then((uri) => {
        //       this.pluginservice
        //         .uploadPic(uri, '/api/m/v2/inspections/pic', 'file', this.uploadPicParams)
        //         .then((res: any) => {
        //           this.savePic(res, index);
        //         });
        //     })
        //     .catch((err) => console.log('Error', err));
        // }
    };
    MaintainsDetailsPage.prototype.savePic = function (data, index) {
        var _this = this;
        var objGroupscontrol = this.form.get('objGroups');
        var control = objGroupscontrol.controls[index].get('objs');
        var objItems = this.form.value.objGroups[index].objs || [];
        objItems.push(data);
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        objItems.map(function () {
            control.push(_this.initObj());
        });
        control.patchValue(objItems);
        this.mutilservice.popToastView('上传成功');
    };
    MaintainsDetailsPage.prototype.deletePic = function (objId, index) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除该项吗？',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.maintainsprovider.deleteObj(objId).subscribe(function (res) {
                            var objGroupscontrol = _this.form.get('objGroups');
                            var control = objGroupscontrol.controls[index].get('objs');
                            var objItems = _this.form.value.objGroups[index].objs || [];
                            __WEBPACK_IMPORTED_MODULE_12_lodash__["remove"](objItems, function (o) {
                                return o.objId === objId;
                            });
                            while (control.length) {
                                control.removeAt(control.length - 1);
                            }
                            objItems.map(function () {
                                control.push(_this.initObj());
                            });
                            control.patchValue(objItems);
                            _this.mutilservice.popToastView('删除成功');
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    MaintainsDetailsPage.prototype.viewPic = function (url) {
        this.photoViewer.show(url);
    };
    MaintainsDetailsPage.prototype.initNodes = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            statusText: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            nodeType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            user: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            status: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
        });
    };
    MaintainsDetailsPage.prototype.initLinks = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            sourceId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            targetId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            source: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            target: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
        });
    };
    MaintainsDetailsPage.prototype.initWorkflowLogs = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            logId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            action: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            executeTime: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            flowId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            nextNodeId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            nextNodeName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            nodeId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            preNodeId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            preNodeName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userId: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
        });
    };
    MaintainsDetailsPage.prototype.getWorkflowLogs = function (form) {
        return form.controls.workflowLogs.controls;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('echart'),
        __metadata("design:type", Object)
    ], MaintainsDetailsPage.prototype, "echart", void 0);
    MaintainsDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-maintains-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains-details/maintains-details.html"*/'<!--\n  Generated template for the CheckDetailsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{title}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content\n  [ngClass]="{\'h0\': buttons&&buttons.length==0,\'h44\': buttons&&buttons.length>4&&buttonToggle==false,\'h88\': buttons&&buttons.length<=4&&buttons&&buttons.length>0,\'h180\':buttons&&buttons.length>4&&buttons&&buttons.length<=8&&buttonToggle==true,\'h240\':buttons&&buttons.length>8&&buttons&&buttons.length<=12&&buttonToggle==true,\'h300\':buttons&&buttons.length>12&&buttons&&buttons.length<=16&&buttonToggle==true}"\n>\n  <form [formGroup]="form">\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleBaseInfo = !toggleBaseInfo">\n        基础信息\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleBaseInfo?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 基础信息 -->\n      <ng-container *ngIf="toggleBaseInfo">\n        <!--电站名称  -->\n        <ion-item\n          *ngIf="fields?.stationId.show"\n          [attr.detail-push]="fields?.stationId.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.stationId.nullable">*</b\n            >{{fields?.stationId.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectStation($event)"\n            formControlName="stationName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="stationName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 类型 -->\n        <ion-item\n          *ngIf="fields?.inspectionType.show"\n          [attr.detail-push]="fields?.inspectionType.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.inspectionType.nullable">*</b\n            >{{fields?.inspectionType.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.inspectionType.editable"\n            (tap)="openSheetModal(\'inspectionType\',\'inspectionTypeText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="inspectionTypeText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.inspectionType.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="inspectionTypeText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 派单人 -->\n        <ion-item\n          *ngIf="fields?.dispatcher.show"\n          [attr.detail-push]="fields?.dispatcher.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.dispatcher.nullable">*</b\n            >{{fields?.dispatcher.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.dispatcher.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'dispatcher\',\'dispatcherName\')"\n            formControlName="dispatcherName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.dispatcher.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="dispatcherName"\n          ></ion-input>\n        </ion-item>\n        <!-- 巡检负责人 -->\n        <ion-item\n          *ngIf="fields?.responsiblePerson.show"\n          [attr.detail-push]="fields?.responsiblePerson.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.responsiblePerson.nullable">*</b\n            >{{fields?.responsiblePerson.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.responsiblePerson.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser(\'responsiblePerson\',\'responsiblePersonName\')"\n            formControlName="responsiblePersonName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.responsiblePerson.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="responsiblePersonName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 同组巡检人员 -->\n        <ion-item\n          *ngIf="fields?.players.show"\n          [attr.detail-push]="fields?.players.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.players.nullable">*</b\n            >{{fields?.players.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectplayers($event,fields?.players.editable)"\n            formControlName="playersText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 计划开始时间 -->\n        <ion-item\n          *ngIf="fields?.planStartTime.show"\n          [attr.detail-push]="fields?.planStartTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.planStartTime.nullable">*</b\n            >{{fields?.planStartTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.planStartTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="planStartTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.planStartTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="planStartTime"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 计划结束时间 -->\n        <ion-item\n          *ngIf="fields?.planEndTime.show"\n          [attr.detail-push]="fields?.planEndTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.planEndTime.nullable">*</b\n            >{{fields?.planEndTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.planEndTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="planEndTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.planEndTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="planEndTime"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 实际开始时间 -->\n        <ion-item\n          *ngIf="fields?.startTime.show"\n          [attr.detail-push]="fields?.startTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.startTime.nullable">*</b\n            >{{fields?.startTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.startTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.startTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n          ></ion-datetime>\n        </ion-item>\n        <!-- 实际结束时间 -->\n        <ion-item\n          *ngIf="fields?.endTime.show"\n          [attr.detail-push]="fields?.endTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.endTime.nullable">*</b\n            >{{fields?.endTime.name}}：</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.endTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n          ></ion-datetime>\n          <ion-datetime\n            *ngIf="!fields?.endTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            [disabled]="true"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n          ></ion-datetime>\n        </ion-item>\n\n        <!-- 工作量 -->\n        <ion-item\n          *ngIf="fields?.workHours.show"\n          [attr.detail-push]="fields?.workHours.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.workHours.nullable">*</b\n            >{{fields?.workHours.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'workHours\',fields?.workHours.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="workHours"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 巡检项 -->\n    <ng-container formArrayName="objGroups">\n      <ion-list\n        class="new-list"\n        *ngFor="let objGroup of getObjGroups(form);let i = index"\n        [formGroupName]="i"\n      >\n        <ion-list-header\n          no-lines\n          (tap)="objToggle[i].show = !objToggle[i].show"\n        >\n          {{objGroup.value.groupName}}({{objGroup.value.objs.length}})\n          <button ion-button icon-only item-end clear type="button">\n            <ion-icon\n              name="{{objToggle[i]?.show?\'arrow-up\':\'arrow-down\'}}"\n            ></ion-icon>\n          </button>\n        </ion-list-header>\n        <ng-container *ngIf="objToggle[i]?.show">\n          <ng-container *ngIf="objGroup.value.groupType===\'pic\'">\n            <ion-grid class="obj-items" formArrayName="objs">\n              <ion-row\n                *ngFor="let obj of getObjs(objGroup); let j = index"\n                [formGroupName]="j"\n              >\n                <ion-col col-6 class="obj-img"\n                  ><img\n                    [src]="fileBasePath+obj.value.uri"\n                    (tap)="viewPic(fileBasePath+obj.value.uri)"\n                /></ion-col>\n                <ion-col col-6 class="obj-status">\n                  {{obj.value.updateTime | date:\'yyyy-MM-dd HH:mm\'}}\n                  <ion-icon\n                    name="md-remove-circle"\n                    style="margin-left: 10px"\n                    (tap)="deletePic(obj.value.objId,i)"\n                    *ngIf="objPermission!==0"\n                  ></ion-icon>\n                </ion-col>\n              </ion-row>\n              <ion-row class="add-row" *ngIf="objPermission===2">\n                <ion-col col-12>\n                  <ion-icon\n                    name="md-add-circle"\n                    (tap)="addObj(objGroup,i)"\n                  ></ion-icon>\n                </ion-col>\n              </ion-row>\n            </ion-grid>\n          </ng-container>\n          <ng-container *ngIf="objGroup.value.groupType!==\'pic\'">\n            <ion-grid class="obj-items" formArrayName="objs">\n              <ion-row\n                *ngFor="let obj of getObjs(objGroup); let j = index"\n                [formGroupName]="j"\n                (tap)="editObj(obj.value.objId)"\n              >\n                <ion-col col-6 class="obj-name">\n                  {{obj.value.deviceNo}}\n                </ion-col>\n                <ion-col col-6 class="obj-status">\n                  {{obj.value.inspectionStatusText}}\n                  <!-- <img\n                    src="assets/imgs/list/status-{{obj.value.inspectionStatus}}.png"\n                    alt=""\n                  /> -->\n                  <ion-icon\n                    name="status-{{obj.value.inspectionStatus}}"\n                  ></ion-icon>\n                  <ion-icon name="arrow-forward"></ion-icon>\n                </ion-col>\n              </ion-row>\n              <ion-row class="add-row" *ngIf="objPermission===2">\n                <ion-col col-12>\n                  <ion-icon\n                    name="md-add-circle"\n                    (tap)="addObj(objGroup,i)"\n                  ></ion-icon>\n                </ion-col>\n              </ion-row>\n            </ion-grid>\n          </ng-container>\n        </ng-container>\n      </ion-list>\n    </ng-container>\n\n    <!-- 工单检查 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleInspectionCheck = !toggleInspectionCheck"\n      >\n        工单检查\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleInspectionCheck?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleInspectionCheck">\n        <!-- 检查结果 -->\n        <ion-item\n          *ngIf="fields?.checkStatus.show"\n          [attr.detail-push]="fields?.checkStatus.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkStatus.nullable">*</b\n            >{{fields?.checkStatus.name}}：</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.checkStatus.editable"\n            (tap)="openSheetModal(\'checkStatus\',\'checkStatusText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.checkStatus.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查人 -->\n        <ion-item\n          *ngIf="fields?.checker.show"\n          [attr.detail-push]="fields?.checker.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checker.nullable">*</b\n            >{{fields?.checker.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkerName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查时间 -->\n        <ion-item\n          *ngIf="fields?.checkTime.show"\n          [attr.detail-push]="fields?.checkTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkTime.nullable">*</b\n            >{{fields?.checkTime.name}}：</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkTime"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查备注 -->\n        <ion-item\n          *ngIf="fields?.checkMemo.show"\n          [attr.detail-push]="fields?.checkMemo.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkMemo.nullable">*</b\n            >{{fields?.checkMemo.name}}：</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.checkMemo.name,\'checkMemo\',fields?.checkMemo.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkMemo"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 工作流程 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWorkFlow = !toggleWorkFlow">\n        工作流程\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWorkFlow?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWorkFlow">\n        <div echarts #echart [options]="options" class="workflow-chart"></div>\n      </ng-container>\n    </ion-list>\n\n    <!-- 流程日志 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleWorkflowLogs = !toggleWorkflowLogs"\n      >\n        流程日志\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWorkflowLogs?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWorkflowLogs">\n        <ng-container formArrayName="workflowLogs">\n          <ng-container\n            *ngFor="let item of getWorkflowLogs(form); let i = index"\n            [formGroupName]="i"\n          >\n            <div class="workflow-log">\n              <p>\n                {{item.value.executeTime | date:\'yyyy-MM-dd HH:mm\'}}\n                {{item.value.userName }}\n              </p>\n              <div class="action-content">{{item.value.action}}</div>\n            </div>\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 抄送 -->\n    <ion-list class="new-list">\n      <cc\n        [ccPermission]="ccPermission"\n        [users]="ccUsers"\n        (userEvent)="ccUserEvent($event)"\n      ></cc>\n    </ion-list>\n\n    <!-- 评论  -->\n    <ion-list class="new-list" *ngIf="inspectionId!==0">\n      <ion-list-header no-lines (tap)="toggleComment = !toggleComment">\n        评论\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleComment?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleComment">\n        <comment [orderId]="orderId" [commentsList]="commentsList"></comment>\n      </ng-container>\n    </ion-list>\n  </form>\n</ion-content>\n<ion-footer *ngIf="buttons.length>0">\n  <ion-toolbar class="footer-bar">\n    <ng-container *ngIf="buttons.length<=4">\n      <ion-grid>\n        <ion-row>\n          <ion-col\n            *ngFor="let button of buttons"\n            class="{{buttonFlex(buttons.length)}}"\n          >\n            <div class="btn">\n              <!-- <img\n                                (tap)="buttonFunction(button)"\n                                src="assets/imgs/buttons/{{button.buttonIcon}}"\n                                alt=""\n                            /> -->\n              <ion-icon\n                (tap)="buttonFunction(button)"\n                [name]="button.buttonIcon.split(\'.\')[0]"\n              ></ion-icon>\n              <p>{{button.buttonText}}</p>\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ng-container>\n    <ng-container *ngIf="buttons.length>4">\n      <button\n        ion-button\n        block\n        (tap)="showMoreButtons()"\n        *ngIf="buttonToggle==false"\n        style="background-color: #54a4e4"\n      >\n        <span style="margin-right: 5px">处理</span\n        ><ion-icon name="arrow-up"></ion-icon>\n      </button>\n      <ng-container *ngIf="buttonToggle==true">\n        <ion-grid>\n          <ion-row>\n            <ion-col *ngFor="let button of buttons" class="col-3">\n              <div class="btn">\n                <!-- <img\n                                    (tap)="buttonFunction(button)"\n                                    src="assets/imgs/buttons/{{button.buttonIcon}}"\n                                    alt=""\n                                /> -->\n                <ion-icon\n                  (tap)="buttonFunction(button)"\n                  [name]="button.buttonIcon.split(\'.\')[0]"\n                ></ion-icon>\n                <p>{{button.buttonText}}</p>\n              </div>\n            </ion-col>\n          </ion-row>\n          <ion-row>\n            <ion-col col-12 style="padding-top: 10px">\n              <ion-icon\n                name="arrow-down"\n                (tap)="showMoreButtons()"\n                style="font-size: 1.6em"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ng-container>\n    </ng-container>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains-details/maintains-details.html"*/,
        }),
        __param(15, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_10__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_22__providers_maintains_service__["a" /* MaintainsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_defes_servicer__["a" /* DefesService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_5__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_6__providers_util_plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_image_picker__["a" /* ImagePicker */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_picker__["a" /* IOSFilePicker */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_photo_viewer__["a" /* PhotoViewer */], Object])
    ], MaintainsDetailsPage);
    return MaintainsDetailsPage;
}());

//# sourceMappingURL=maintains-details.js.map

/***/ }),

/***/ 810:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaintainsDevicePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ionic_native_photo_viewer__ = __webpack_require__(98);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_camera__ = __webpack_require__(96);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_util_plugin_service__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_image_picker__ = __webpack_require__(114);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_picker__ = __webpack_require__(97);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__defect_management_details_defect_management_details__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__maintains_maintains__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__more_menu_more_menu__ = __webpack_require__(811);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__providers_maintains_service__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__home_equipment_message_equipment_message__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__device_archive_device_archive__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__inventoris_inventoris__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__util_modal_common_radio_textarea_common_radio_textarea__ = __webpack_require__(343);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__maintains_item_his_maintains_item_his__ = __webpack_require__(812);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






















/**
 * Generated class for the MaintainsDevicePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MaintainsDevicePage = /** @class */ (function () {
    function MaintainsDevicePage(navCtrl, navParams, actionSheetCtrl, modalCtrl, camera, pluginservice, platform, imagePicker, filePicker, mutilservice, alertCtrl, maintainsprovider, photoViewer, popoverCtrl, appConfig) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.actionSheetCtrl = actionSheetCtrl;
        this.modalCtrl = modalCtrl;
        this.camera = camera;
        this.pluginservice = pluginservice;
        this.platform = platform;
        this.imagePicker = imagePicker;
        this.filePicker = filePicker;
        this.mutilservice = mutilservice;
        this.alertCtrl = alertCtrl;
        this.maintainsprovider = maintainsprovider;
        this.photoViewer = photoViewer;
        this.popoverCtrl = popoverCtrl;
        this.appConfig = appConfig;
        this.buttons = [];
        this.fileBasePath = this.appConfig.fileEndpoint;
    }
    MaintainsDevicePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad InspectionDevicePage');
        this.objInfo = this.navParams.get('objInfo');
        this.objPermission = this.navParams.get('objPermission');
        this.itemGroups = this.objInfo.itemGroups;
        this.longitude = +this.objInfo.longitude;
        this.latitude = +this.objInfo.latitude;
        this.buttons = this.objInfo.objId
            ? [
                {
                    buttonIcon: 'wo-delete.png',
                    buttonText: '删除',
                    buttonAction: 'delete',
                },
                {
                    buttonIcon: 'wo-save.png',
                    buttonText: '保存',
                    buttonAction: 'save',
                },
                {
                    buttonIcon: 'wo-defect.png',
                    buttonText: '缺陷单',
                    buttonAction: 'defect',
                },
            ]
            : [
                {
                    buttonIcon: 'wo-save.png',
                    buttonText: '保存',
                    buttonAction: 'save',
                },
                {
                    buttonIcon: 'wo-defect.png',
                    buttonText: '缺陷单',
                    buttonAction: 'defect',
                },
            ];
        if (!this.objInfo.objId) {
            this.inspectionTime = __WEBPACK_IMPORTED_MODULE_11_moment__().format('YYYY-MM-DD HH:mm');
        }
        if (this.objInfo.updateTime) {
            this.inspectionTime = __WEBPACK_IMPORTED_MODULE_11_moment__(this.objInfo.updateTime).format('YYYY-MM-DD HH:mm');
        }
    };
    MaintainsDevicePage.prototype.openRadioTextarea = function (item) {
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_20__util_modal_common_radio_textarea_common_radio_textarea__["a" /* CommonRadioTextareaPage */], {
            item: item,
        }, {
            cssClass: 'commonModal commonRadioTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    item.itemValue = data.value;
                    item.itemMemo = data.memo;
                }
            }
        });
        modal.present();
    };
    MaintainsDevicePage.prototype.setItemValue = function (props, value) {
        if (props && props.length > 0) {
            var findedValue = __WEBPACK_IMPORTED_MODULE_12_lodash__["find"](props, function (o) { return o.first === value; });
            return findedValue && findedValue.second;
        }
        return null;
    };
    MaintainsDevicePage.prototype.openSheetModal = function (item) {
        var _this = this;
        var buttons = [];
        if (item) {
            var options = item.props;
            buttons = options.map(function (option) {
                return {
                    text: option.second,
                    handler: function () {
                        item.itemValue = option.second;
                    },
                };
            });
        }
        else {
            var options = this.objInfo.status;
            buttons = options.map(function (option) {
                return {
                    text: option.second,
                    handler: function () {
                        _this.objInfo.inspectionStatus = option.first;
                        _this.objInfo.inspectionStatusText = option.second;
                    },
                };
            });
        }
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    MaintainsDevicePage.prototype.openInputModal = function (item, type) {
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_4__util_modal_common_input_common_input__["a" /* CommonInputPage */], {
            value: item.itemValue,
            title: item.itemName,
            type: type,
        }, {
            cssClass: 'commonModal commonInputModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                item.itemValue = data.value;
            }
        });
        modal.present();
    };
    MaintainsDevicePage.prototype.openTextarea = function (item) {
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_5__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: item.itemName,
            value: item.itemValue,
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    item.itemValue = data.value;
                }
            }
        });
        modal.present();
    };
    MaintainsDevicePage.prototype.chooseType = function (item) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: [
                {
                    text: '拍照',
                    handler: function () {
                        _this.takePhoto(item);
                    },
                },
                {
                    text: '从相册选择',
                    handler: function () {
                        _this.upload(item);
                    },
                },
                {
                    text: '取消',
                    handler: function () {
                        console.log('cancel');
                    },
                },
            ],
            cssClass: 'commonSheet',
        });
        actionSheet.present().then(function (value) {
            return value;
        });
    };
    MaintainsDevicePage.prototype.takePhoto = function (item) {
        var _this = this;
        var options = {
            quality: 100,
            allowEdit: false,
            targetWidth: 200,
            targetHeight: 200,
            saveToPhotoAlbum: true,
        };
        this.camera.getPicture(options).then(function (image) {
            // this.avatar = image.slice(7);
            _this.pluginservice
                .uploadPic(image, '/api/m/v2/maintains/obj/file', 'file', {
                objItemId: item.objItemId,
            })
                .then(function (res) {
                item.docs = item.docs || [];
                item.docs.push(res.data);
                _this.mutilservice.popToastView('上传成功');
            });
        }, function (error) {
            console.log('Error: ' + error);
        });
    };
    MaintainsDevicePage.prototype.upload = function (item) {
        var _this = this;
        // if (this.platform.is('android')) {
        this.imagePicker
            .getPictures({ maximumImagesCount: 1, width: 200, height: 200 })
            .then(function (results) {
            _this.pluginservice
                .uploadPic(results[0], '/api/m/v2/maintains/obj/file', 'file', {
                objItemId: item.objItemId,
            })
                .then(function (res) {
                item.docs = item.docs || [];
                item.docs.push(res.data);
                _this.mutilservice.popToastView('上传成功');
            });
        }, function (err) { });
        //   } else {
        //   this.filePicker
        //     .pickFile()
        //     .then((uri) => {
        //       this.pluginservice
        //         .uploadPic(uri, '/api/m/v2/maintains/obj/file', 'file', {
        //           objItemId: item.objItemId,
        //         })
        //         .then((res: any) => {
        //           this.mutilservice.popToastView('上传成功');
        //           item.docs = item.docs || [];
        //           item.docs.push(res);
        //         });
        //     })
        //     .catch((err) => console.log('Error', err));
        // }
    };
    MaintainsDevicePage.prototype.deleteDoc = function (item, docIds) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定删除该照片吗?',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.pluginservice.deleteDoc(docIds).subscribe(function (res) {
                            __WEBPACK_IMPORTED_MODULE_12_lodash__["remove"](item.docs, function (o) {
                                return o.docId === docIds;
                            });
                            console.log(item.docs);
                            _this.mutilservice.popToastView('删除成功');
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    MaintainsDevicePage.prototype.buttonFunction = function (action) {
        if (action === 'delete') {
            this.deleteFunction();
        }
        else if (action === 'save') {
            this.saveFunction();
        }
        else if (action === 'defect') {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_13__defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */], {
                deviceId: this.objInfo.deviceId,
                parentOrderId: this.objInfo.inspectionId,
            });
        }
    };
    MaintainsDevicePage.prototype.saveFunction = function () {
        var _this = this;
        for (var groupsKey in this.itemGroups) {
            if (this.itemGroups.hasOwnProperty(groupsKey)) {
                if (groupsKey === 'item') {
                    var itemGroup = this.itemGroups[groupsKey];
                    for (var key in itemGroup) {
                        if (itemGroup.hasOwnProperty(key)) {
                            var element = itemGroup[key];
                            if (!element.nullable) {
                                if (element.itemType !== '06' && !element.itemValue) {
                                    var alert_1 = this.alertCtrl.create({
                                        title: '警告',
                                        subTitle: element.itemName + '字段不能为空',
                                        buttons: ['关闭'],
                                    });
                                    alert_1.present();
                                    return;
                                }
                                else if (element.itemType === '06' &&
                                    element.docs &&
                                    element.docs.length === 0) {
                                    var alert_2 = this.alertCtrl.create({
                                        title: '警告',
                                        subTitle: element.itemName + '字段不能为空',
                                        buttons: ['关闭'],
                                    });
                                    alert_2.present();
                                    return;
                                }
                            }
                        }
                    }
                }
            }
        }
        if (!this.objInfo.inspectionStatusText) {
            var alert_3 = this.alertCtrl.create({
                title: '警告',
                subTitle: '巡检结果必填',
                buttons: ['关闭'],
            });
            alert_3.present();
            return;
        }
        var params = __assign(__assign({}, this.objInfo), { longitude: this.longitude, latitude: this.latitude });
        if (params.itemGroups && params.itemGroups.length > 0) {
            params.itemGroups.map(function (itemGroup) {
                if (itemGroup.items && itemGroup.items.length > 0) {
                    itemGroup.items.map(function (item) {
                        item.props = null;
                    });
                }
            });
        }
        params.status = null;
        this.maintainsprovider.saveObj(params).subscribe(function (res) {
            if (_this.objInfo.objId) {
                _this.navCtrl.getPrevious().data.objInfo = {
                    type: 'edit',
                    params: params,
                };
            }
            else {
                _this.navCtrl.getPrevious().data.objInfo = {
                    type: 'add',
                    params: __assign(__assign({}, params), { objId: res }),
                };
            }
            _this.navCtrl.pop();
        });
    };
    MaintainsDevicePage.prototype.deleteFunction = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除此设备吗?',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        _this.maintainsprovider
                            .deleteObj(_this.objInfo.objId)
                            .subscribe(function (res) {
                            _this.mutilservice.popToastView('删除成功');
                            _this.navCtrl.getPrevious().data.objInfo = {
                                type: 'delete',
                                params: {
                                    objId: _this.objInfo.objId,
                                    objGroup: _this.objInfo.objGroup,
                                },
                            };
                            _this.navCtrl.pop();
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    MaintainsDevicePage.prototype.buttonFlex = function (length) {
        switch (length) {
            case 1:
                return 'col-12';
            case 2:
                return 'col-6';
            case 3:
                return 'col-4';
            case 4:
                return 'col-3';
            default:
                break;
        }
    };
    MaintainsDevicePage.prototype.viewPic = function (url) {
        this.photoViewer.show(url);
    };
    //新增巡检单
    MaintainsDevicePage.prototype.openMoreMenu = function (myEvent) {
        var _this = this;
        this.popover = this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_15__more_menu_more_menu__["a" /* MaintainsMoreMenuPage */], {}, {
            cssClass: 'maintainsMenus',
            showBackdrop: true,
        });
        this.popover.onDidDismiss(function (res) {
            if (res) {
                switch (res.type) {
                    case 1:
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_14__maintains_maintains__["a" /* MaintainsPage */], {
                            type: 'view',
                            params: {
                                stationId: _this.objInfo.stationId,
                                stationName: _this.objInfo.stationName,
                                deviceName: _this.objInfo.deviceName,
                                deviceId: _this.objInfo.deviceId,
                                startTime: __WEBPACK_IMPORTED_MODULE_11_moment__().subtract(1, 'year').format('YYYY-MM-DD'),
                                endTime: __WEBPACK_IMPORTED_MODULE_11_moment__().format('YYYY-MM-DD'),
                            },
                        });
                        break;
                    case 2:
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_17__home_equipment_message_equipment_message__["a" /* EquipmentMessage */], {
                            deviceId: _this.objInfo.deviceId,
                        });
                        break;
                    case 3:
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_18__device_archive_device_archive__["a" /* DeviceArchivePage */], {
                            deviceId: _this.objInfo.deviceId,
                        });
                        break;
                    case 4:
                        _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_19__inventoris_inventoris__["a" /* InventorisPage */], {
                            equipment: {
                                deviceId: _this.objInfo.deviceId,
                                deviceName: _this.objInfo.deviceName,
                            },
                            stationId: _this.objInfo.stationId,
                            stationName: _this.objInfo.stationName,
                        });
                        break;
                    default:
                        break;
                }
            }
        });
        this.popover.present({
            ev: myEvent,
        });
    };
    MaintainsDevicePage.prototype.itemHis = function (event, item) {
        event.stopPropagation && event.stopPropagation();
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_21__maintains_item_his_maintains_item_his__["a" /* MaintainsItemHisPage */], {
            pageTitle: item.itemGroup,
            psrId: this.objInfo.psrId,
            itemId: item.itemId,
        });
    };
    MaintainsDevicePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-maintains-device',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains-details/maintains-device/maintains-device.html"*/'<!--\n  Generated template for the InspectionDevicePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{objInfo?.deviceNo}}</ion-title>\n    <ion-buttons end>\n      <button\n        ion-button\n        icon-only\n        (click)="openMoreMenu($event)"\n        class="title-icon"\n      >\n        <ion-icon\n          name="md-more"\n          class="device-list"\n          style="font-size: 30px"\n        ></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <ion-list class="new-list" *ngFor="let itemGroup of itemGroups">\n    <ion-list-header no-lines> {{itemGroup.itemGroup}} </ion-list-header>\n    <ng-container *ngFor="let item of itemGroup.items">\n      <div class="div-item">\n        <ion-item *ngIf="item.itemType!==\'06\'" detail-push no-lines>\n          <ion-label>\n            <b *ngIf="!item?.nullable">*</b>{{item?.itemName}}：</ion-label\n          >\n          <ion-input\n            *ngIf="item.itemType===\'01\'&&item.itemValue===item.defaultValue"\n            type="text"\n            [readonly]="true"\n            text-right\n            [value]="setItemValue(item.props,item.itemValue)"\n            (tap)="openRadioTextarea(item)"\n          ></ion-input>\n          <div\n            *ngIf="item.itemType===\'01\'&&item.itemValue!==item.defaultValue"\n            item-end\n            style="width: 120px"\n            (tap)="openRadioTextarea(item)"\n          >\n            <h3 text-right style="color: #f00">\n              {{setItemValue(item.props,item.itemValue)}}\n            </h3>\n            <div text-right style="color: #f00" class="ell">\n              {{item.itemMemo}}\n            </div>\n          </div>\n\n          <ion-input\n            *ngIf="item.itemType===\'03\'"\n            type="text"\n            [readonly]="true"\n            text-right\n            [value]="item.itemValue"\n            (tap)="openInputModal(item.itemValue,item.itemName,\'text\')"\n          ></ion-input>\n\n          <ion-input\n            *ngIf="item.itemType===\'04\'"\n            type="text"\n            [readonly]="true"\n            text-right\n            [value]="item.itemValue"\n            (tap)="openInputModal(item,\'number\')"\n          ></ion-input>\n\n          <ion-input\n            *ngIf="item.itemType===\'05\'"\n            type="text"\n            [readonly]="true"\n            text-right\n            [value]="item.itemValue"\n            (tap)="openTextarea(item)"\n          ></ion-input>\n        </ion-item>\n        <span\n          *ngIf="item.itemType!==\'06\'"\n          class="item-his"\n          (click)="itemHis($event,item)"\n          ><ion-icon name="md-more"></ion-icon\n        ></span>\n      </div>\n      <ion-item\n        no-lines\n        *ngIf="item.itemType===\'06\'"\n        [ngStyle]="{\'margin-bottom\': (item.docs&&item.docs.length>0)?\'0\':\'1px\'}"\n      >\n        <ion-label>\n          <b *ngIf="!item?.nullable">*</b>{{item?.itemName}}：</ion-label\n        >\n        <button\n          *ngIf="item.itemType===\'06\'"\n          ion-button\n          icon-only\n          item-end\n          clear\n          type="button"\n          (tap)="chooseType(item)"\n        >\n          <ion-icon name="md-add"></ion-icon>\n        </button>\n      </ion-item>\n      <div\n        class="docs-container"\n        *ngIf="item.itemType===\'06\'&&item.docs&&item.docs.length>0"\n      >\n        <ion-grid>\n          <ion-row>\n            <ion-col col-3 *ngFor="let doc of item.docs; let i = index">\n              <div class="img-container">\n                <img\n                  [src]="fileBasePath+doc.uri"\n                  (tap)="viewPic(fileBasePath+doc.uri)"\n                />\n                <!-- <img\n                  (tap)="deleteDoc(item,doc.docId)"\n                  class="delete-doc"\n                  src="assets/imgs/buttons/delete-grey.png"\n                /> -->\n                <ion-icon\n                  (tap)="deleteDoc(item,doc.docId)"\n                  class="delete-doc"\n                  name="delete-grey"\n                ></ion-icon>\n              </div>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </div>\n    </ng-container>\n  </ion-list>\n  <ion-list class="new-list">\n    <ion-item [attr.detail-push]="true" no-lines>\n      <ion-label> <b>*</b>巡检结果：</ion-label>\n      <ion-input\n        type="text"\n        [readonly]="true"\n        text-right\n        [value]="objInfo?.inspectionStatusText"\n        (tap)="openSheetModal()"\n      ></ion-input>\n    </ion-item>\n    <ion-item no-lines>\n      <ion-label>巡检时间：</ion-label>\n      <ion-input\n        type="text"\n        [readonly]="true"\n        text-right\n        [value]="inspectionTime"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n</ion-content>\n\n<ion-footer *ngIf="buttons.length&&objPermission===2">\n  <ion-toolbar class="footer-bar">\n    <ng-container *ngIf="buttons.length<=4">\n      <ion-grid>\n        <ion-row>\n          <ion-col\n            *ngFor="let button of buttons"\n            class="{{buttonFlex(buttons.length)}}"\n          >\n            <div class="btn">\n              <!-- <img\n                (tap)="buttonFunction(button.buttonAction)"\n                src="assets/imgs/buttons/{{button.buttonIcon}}"\n                alt=""\n              /> -->\n              <ion-icon\n                (tap)="buttonFunction(button.buttonAction)"\n                [name]="button.buttonIcon.split(\'.\')[0]"\n              ></ion-icon>\n              <p>{{button.buttonText}}</p>\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ng-container>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains-details/maintains-device/maintains-device.html"*/,
        }),
        __param(14, Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_10__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_6__ionic_native_camera__["a" /* Camera */],
            __WEBPACK_IMPORTED_MODULE_7__providers_util_plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["s" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_image_picker__["a" /* ImagePicker */],
            __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_picker__["a" /* IOSFilePicker */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_16__providers_maintains_service__["a" /* MaintainsProvider */],
            __WEBPACK_IMPORTED_MODULE_0__ionic_native_photo_viewer__["a" /* PhotoViewer */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["t" /* PopoverController */], Object])
    ], MaintainsDevicePage);
    return MaintainsDevicePage;
}());

//# sourceMappingURL=maintains-device.js.map

/***/ }),

/***/ 811:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaintainsMoreMenuPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the MoreMenuPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MaintainsMoreMenuPage = /** @class */ (function () {
    function MaintainsMoreMenuPage(navCtrl, navParams, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
    }
    MaintainsMoreMenuPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad MoreMenuPage');
    };
    MaintainsMoreMenuPage.prototype.maintainsMenus = function (event, type) {
        this.viewCtrl.dismiss({ type: type });
    };
    MaintainsMoreMenuPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-more-menu',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains-details/more-menu/more-menu.html"*/'<!--\n  Generated template for the MoreMenuPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n    <ion-list>\n        <ion-item no-lines (tap)="maintainsMenus($event,1)">\n            检修/预试记录\n        </ion-item>\n        <ion-item no-lines (tap)="maintainsMenus($event,2)">\n            设备监视\n        </ion-item>\n        <ion-item no-lines (tap)="maintainsMenus($event,3)">\n            设备档案\n        </ion-item>\n        <ion-item no-lines (tap)="maintainsMenus($event,4)">\n            备品备件\n        </ion-item>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains-details/more-menu/more-menu.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */]])
    ], MaintainsMoreMenuPage);
    return MaintainsMoreMenuPage;
}());

//# sourceMappingURL=more-menu.js.map

/***/ }),

/***/ 812:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaintainsItemHisPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_maintains_service__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the MaintainsItemHisPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MaintainsItemHisPage = /** @class */ (function () {
    function MaintainsItemHisPage(navCtrl, navParams, mutilservice, maintainsprovider) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.mutilservice = mutilservice;
        this.maintainsprovider = maintainsprovider;
        this.page = 0;
        this.size = 10;
    }
    MaintainsItemHisPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad MaintainsItemHisPage');
        this.pageTitle = this.navParams.get('pageTitle');
        this.psrId = this.navParams.get('psrId');
        this.itemId = this.navParams.get('itemId');
        console.log(this.pageTitle, this.psrId, this.itemId);
        this.getItemhisList(true);
    };
    // 获取巡检列表
    MaintainsItemHisPage.prototype.getItemhisList = function (first, refresher) {
        var _this = this;
        if (!refresher) {
            this.mutilservice.showLoading();
        }
        if (first) {
            this.page = 0;
        }
        var params = {
            psrId: this.psrId,
            itemId: this.itemId,
            page: this.page,
            size: this.size,
        };
        this.maintainsprovider.getObjItemHis(params).subscribe(function (res) {
            if (res) {
                _this.objItemHisList = res.content;
            }
            if (refresher)
                refresher.complete();
            _this.mutilservice.hideLoading();
        });
    };
    // 下拉刷新
    MaintainsItemHisPage.prototype.doRefresh = function (refresher) {
        this.getItemhisList(true, refresher);
    };
    // 加载更多
    MaintainsItemHisPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.page++;
        var params = {
            psrId: this.psrId,
            itemId: this.itemId,
            page: this.page,
            size: this.size,
        };
        this.maintainsprovider.getObjItemHis(params).subscribe(function (res) {
            if (res && res.content.length > 0) {
                _this.objItemHisList = _this.objItemHisList.concat(res['content']);
            }
            else {
                _this.page--;
            }
            if (_this.objItemHisList.length >= res['totalElements']) {
                _this.canInfinite = false;
            }
            infiniteScroll.complete();
        });
    };
    MaintainsItemHisPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-maintains-item-his',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains-details/maintains-item-his/maintains-item-his.html"*/'<!--\n  Generated template for the InspectionItemHisPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{pageTitle}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding class="card-list" #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="正在刷新..."\n    ></ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div ion-item detail-none no-lines no-padding>\n      <ion-grid>\n        <ion-row>\n          <ion-col col-5>时间</ion-col>\n          <ion-col col-3>值</ion-col>\n          <ion-col col-4>备注</ion-col>\n        </ion-row>\n      </ion-grid>\n    </div>\n    <div\n      ion-item\n      detail-none\n      no-lines\n      no-padding\n      *ngFor="let objItemHis of objItemHisList"\n    >\n      <ion-grid>\n        <ion-row>\n          <ion-col col-5>{{objItemHis.item1}}</ion-col>\n          <ion-col col-3>{{objItemHis.item2}} </ion-col>\n          <ion-col col-4>{{objItemHis.item3}}</ion-col>\n        </ion-row>\n      </ion-grid>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n    <ion-infinite-scroll-content\n      loadingSpinner="crescent"\n      loadingText="加载更多数据..."\n    ></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/maintains-details/maintains-item-his/maintains-item-his.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_0__providers_maintains_service__["a" /* MaintainsProvider */]])
    ], MaintainsItemHisPage);
    return MaintainsItemHisPage;
}());

//# sourceMappingURL=maintains-item-his.js.map

/***/ }),

/***/ 813:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ReportProductionMonthlyLyPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_home_service__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_monitor_service__ = __webpack_require__(113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__util_common_station_common_station__ = __webpack_require__(35);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the ReportProductionMonthlyLyPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var ReportProductionMonthlyLyPage = /** @class */ (function () {
    function ReportProductionMonthlyLyPage(navCtrl, navParams, viewCtrl, menuController, mUtil, modalCtrl, monitorservice, homeservice, loadingCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.menuController = menuController;
        this.mUtil = mUtil;
        this.modalCtrl = modalCtrl;
        this.monitorservice = monitorservice;
        this.homeservice = homeservice;
        this.loadingCtrl = loadingCtrl;
        this.showMenu = false;
        this.modules = this.navParams.get('param');
        this.searchParams = {};
        this.title = this.navParams.get('title');
    }
    ReportProductionMonthlyLyPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad ReportProductionMonthlyLyPage');
        this.searchParams.settleMonth = __WEBPACK_IMPORTED_MODULE_5_moment___default()().startOf('month').format();
        this.month = __WEBPACK_IMPORTED_MODULE_5_moment___default()(this.searchParams.settleMonth).get('month') + 1;
        this.monitorservice
            .getsummary()
            .toPromise()
            .then(function (res) {
            _this.searchParams.station = {
                id: res.stationId,
                title: res.stationName,
            };
        })
            .then(function () {
            _this.getReportProductionMonthlyLy();
        });
    };
    /**重置 */
    ReportProductionMonthlyLyPage.prototype.reset = function () {
        var _this = this;
        this.monitorservice.getsummary().subscribe(function (res) {
            _this.searchParams.station = {
                id: res.stationId,
                title: res.stationName,
            };
        });
        this.searchParams.settleMonth = __WEBPACK_IMPORTED_MODULE_5_moment___default()().startOf('month').format();
    };
    /**搜索菜单打开时 */
    ReportProductionMonthlyLyPage.prototype.menuInit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.searchParams));
    };
    /**控制侧边栏 */
    ReportProductionMonthlyLyPage.prototype.serchMenu = function () {
        var _this = this;
        this.showMenu = true;
        setTimeout(function () {
            _this.menuController.enable(true, 'reportProductionMonthlyLySearch');
            _this.menuController.open('reportProductionMonthlyLySearch');
        }, 0);
    };
    // 电站选择
    ReportProductionMonthlyLyPage.prototype.selectStation = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_6__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.searchParams.station = e;
            }
        });
        modal.present({ keyboardClose: true });
    };
    ReportProductionMonthlyLyPage.prototype.clearStation = function (event) {
        event.stopPropagation && event.stopPropagation();
        this.searchParams.station = null;
    };
    /**查询 */
    ReportProductionMonthlyLyPage.prototype.ok = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify(this.searchParams));
        this.menuController.close('reportProductionMonthlyLySearch');
        this.getReportProductionMonthlyLy();
    };
    ReportProductionMonthlyLyPage.prototype.getReportProductionMonthlyLy = function () {
        var _this = this;
        if (!(this.searchParams.station && this.searchParams.station.id)) {
            this.mUtil.popToastView('电站不能为空');
            return;
        }
        if (!this.searchParams.settleMonth) {
            this.mUtil.popToastView('月份不能为空');
            return;
        }
        var params = {
            stationId: this.searchParams.station.id,
            settleMonth: __WEBPACK_IMPORTED_MODULE_5_moment___default()(this.searchParams.settleMonth).format('YYYY-MM-DD'),
        };
        var loading = null;
        loading = this.loadingCtrl.create({
            spinner: 'crescent',
        });
        loading.present();
        this.homeservice.getReportProductionMonthlyLy(params).subscribe(function (res) {
            _this.month = __WEBPACK_IMPORTED_MODULE_5_moment___default()(params.settleMonth).get('month') + 1;
            _this.reportInfo = res;
        }, function () {
            if (loading) {
                loading.dismiss();
            }
        }, function () {
            if (loading) {
                loading.dismiss();
            }
        });
    };
    ReportProductionMonthlyLyPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'page-report-production-monthly-ly',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/report-production-monthly-ly/report-production-monthly-ly.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>{{title}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon name="search" class="title-bar-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content #reportProductionMonthlyLySearch>\n  <div>\n    <p text-center>电站信息</p>\n    <ion-list>\n      <ion-item detail-none>\n        <ion-label> 电站名称： </ion-label>\n        <ion-note item-end> {{reportInfo?.stationName}} </ion-note>\n      </ion-item>\n      <ion-item detail-none>\n        <ion-label> 地区： </ion-label>\n        <ion-note item-end> {{reportInfo?.region}} </ion-note>\n      </ion-item>\n      <ion-item detail-none>\n        <ion-label> 设计装机容量-MW： </ion-label>\n        <ion-note item-end> {{reportInfo?.capacity}} </ion-note>\n      </ion-item>\n      <ion-item detail-none>\n        <ion-label> 并网装机容量-MW： </ion-label>\n        <ion-note item-end> {{reportInfo?.parallelCapacity}} </ion-note>\n      </ion-item>\n    </ion-list>\n    <ion-list class="report-header">\n      <ion-item>\n        <ion-note item-end>\n          <ion-grid>\n            <ion-row>\n              <div col-6 text-right>{{month}}月</div>\n              <div col-6 text-right>全年</div>\n            </ion-row>\n          </ion-grid>\n        </ion-note>\n      </ion-item>\n    </ion-list>\n    <ng-container *ngFor="let groups of reportInfo?.groups;let i = index">\n      <p text-center *ngIf="i===0||i===4">\n        {{i===0?\'一、电量指标\':\'二、经济技术指标\'}}\n      </p>\n      <ion-list class="report-body">\n        <ng-container *ngFor="let data of groups.datas">\n          <ion-item>\n            <ion-label> {{data.itemName}}： </ion-label>\n            <ion-note item-end>\n              <ion-grid>\n                <ion-row>\n                  <div col-6 text-right>{{data.value1}}</div>\n                  <div col-6 text-right>{{data.valueYear}}</div>\n                </ion-row>\n              </ion-grid>\n            </ion-note>\n          </ion-item>\n        </ng-container>\n      </ion-list>\n    </ng-container>\n  </div>\n</ion-content>\n<ng-container *ngIf="showMenu">\n  <ion-menu\n    [content]="reportProductionMonthlyLySearch"\n    side="right"\n    (ionOpen)="menuInit()"\n    id="reportProductionMonthlyLySearch"\n    type="overlay"\n    [swipeEnabled]="true"\n    class="search-menu"\n    [persistent]="true"\n  >\n    <ion-content class="outer-content" no-bounce class="my-custom-menu">\n      <div class="common-search-container">\n        <div class="common-search">\n          <div class="button-picker border-bottom">\n            <div class="query-label">电站</div>\n            <button\n              ion-button\n              round\n              small\n              color="light"\n              (click)="selectStation()"\n            >\n              {{(searchParams?.station?.title)||\'未选择\'}}\n              <!-- <img\n                                *ngIf="searchParams?.station"\n                                (click)="clearStation($event)"\n                                class="clear-icon"\n                                src="assets/imgs/buttons/delete.png"\n                                alt=""\n                            /> -->\n              <ion-icon\n                *ngIf="searchParams?.station"\n                (click)="clearStation($event)"\n                class="clear-icon"\n                name="delete"\n              ></ion-icon>\n            </button>\n          </div>\n          <div class="time-picker full-time-picker border-bottom">\n            <div class="query-label">月份</div>\n            <ion-datetime\n              displayFormat="YYYY-MM"\n              doneText="确定"\n              cancelText="取消"\n              [(ngModel)]="searchParams.settleMonth"\n            ></ion-datetime>\n          </div>\n          <ion-list>\n            <ion-row class="fix-bottom">\n              <ion-col col-6 text-center>\n                <button\n                  ion-button\n                  round\n                  small\n                  class="reset-btn"\n                  color="light"\n                  (click)="reset()"\n                >\n                  重置\n                </button>\n              </ion-col>\n              <ion-col col-6 text-center>\n                <button ion-button round small class="query-btn" (click)="ok()">\n                  查询\n                </button>\n              </ion-col>\n            </ion-row>\n          </ion-list>\n        </div>\n      </div>\n    </ion-content>\n  </ion-menu>\n</ng-container>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/report-production-monthly-ly/report-production-monthly-ly.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1__providers_monitor_service__["a" /* MonitorService */],
            __WEBPACK_IMPORTED_MODULE_0__providers_home_service__["a" /* HomeService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["l" /* LoadingController */]])
    ], ReportProductionMonthlyLyPage);
    return ReportProductionMonthlyLyPage;
}());

//# sourceMappingURL=report-production-monthly-ly.js.map

/***/ }),

/***/ 814:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EnergyReportPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular_components_alert_alert_controller__ = __webpack_require__(191);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_modules_service__ = __webpack_require__(92);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_lodash__);
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the EnergyReportPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var EnergyReportPage = /** @class */ (function () {
    function EnergyReportPage(navCtrl, navParams, modulesservice, menuController, actionSheetCtrl, mUtil, viewCtrl, alertCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modulesservice = modulesservice;
        this.menuController = menuController;
        this.actionSheetCtrl = actionSheetCtrl;
        this.mUtil = mUtil;
        this.viewCtrl = viewCtrl;
        this.alertCtrl = alertCtrl;
        this.modulesDetails = {};
        this.page = 0;
        this.canInfinite = false;
        this.modulesList = [];
    }
    /**拼接图片路径 */
    EnergyReportPage.prototype.getImg = function (imgName) {
        return 'ios-' + imgName.split('.')[0];
    };
    EnergyReportPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad EnergyReportPage');
        this.initPage();
    };
    EnergyReportPage.prototype.initPage = function () {
        var _this = this;
        this.modulesservice.reportEnergyInit().subscribe(function (res) {
            if (!__WEBPACK_IMPORTED_MODULE_6_lodash__["isEmpty"](res)) {
                _this.title = res.title;
                _this.initData = __assign({}, res);
                _this.modulesDetails = __assign(__assign({}, res), { dataType: 'all', timeType: 'day', stationName: null, provinceId: null, cityId: null, countyId: null, stationType: null });
                _this.startDate = _this.formatData(_this.modulesDetails.defaultDates['day'][0]);
                _this.endDate = _this.formatData(_this.modulesDetails.defaultDates['day'][1]);
                _this.getModulesList();
            }
        });
        this.modulesservice.stationType().subscribe(function (res) {
            if (res && res.length > 0) {
                _this.stationTypeOptions = res;
            }
        });
    };
    EnergyReportPage.prototype.goBack = function () {
        this.viewCtrl.dismiss();
    };
    /**控制侧边栏 */
    EnergyReportPage.prototype.serchMenu = function () {
        this.menuController.enable(true, 'search');
        this.menuController.open('search');
    };
    /**
     * 下拉刷新
     *
     */
    EnergyReportPage.prototype.doRefresh = function (refresher) {
        console.log('下拉刷新');
        this.page = 0;
        this.modulesList = [];
        this.getModulesList(refresher);
    };
    /**
     * 上拉加载
     * @param infiniteScroll
     */
    EnergyReportPage.prototype.doInfinite = function (infiniteScroll) {
        console.log('Begin async operation');
        this.page++;
        this.getModulesList(infiniteScroll);
    };
    /**
     * 获取列表信息
     * @param param
     */
    EnergyReportPage.prototype.getModulesList = function (refresher) {
        var _this = this;
        this.modulesservice.reportEnergyList(this.buildData()).subscribe(function (e) {
            console.log('数据列表:', ' ', e);
            if (e && e['content'] && e['content'].length > 0) {
                _this.modulesList = _this.modulesList.concat(e['content']);
                // this.modulesList = e.content;
            }
            if (_this.modulesList.length >= e.totalElements) {
                _this.canInfinite = false;
            }
            else {
                _this.canInfinite = true;
            }
            if (refresher) {
                refresher.complete();
                console.log('加载完成后，关闭刷新');
            }
        });
    };
    /**选择 */
    EnergyReportPage.prototype.select = function (key) {
        switch (key) {
            case 'defaultSort':
                this.buildActionSheet(this.modulesDetails.sorts, 'second', '', key, true);
                break;
            case 'desc':
                this.modulesDetails.direction = key;
                this.submit();
                break;
            case 'asc':
                this.modulesDetails.direction = key;
                this.submit();
                break;
            case 'province':
                this.getRegions('CN', key);
                this.modulesDetails.city = null;
                this.modulesDetails.county = null;
                break;
            case 'city':
                if (this.modulesDetails.province &&
                    this.modulesDetails.province.first) {
                    this.getRegions(this.modulesDetails.province.first, key);
                    this.modulesDetails.county = null;
                }
                break;
            case 'county':
                if (this.modulesDetails.city && this.modulesDetails.city.first) {
                    this.getRegions(this.modulesDetails.city.first, key);
                }
                break;
            case 'station':
                this.buildActionSheet(this.stationTypeOptions, 'second', '', key, false);
                break;
        }
    };
    /**
     * 查询省，市，县列表
     */
    EnergyReportPage.prototype.getRegions = function (parentId, key) {
        var _this = this;
        this.modulesservice.regions(parentId).subscribe(function (e) {
            console.log(e);
            if (e && e.length > 0) {
                _this.buildActionSheet(e, 'second', '', key, false);
            }
            else {
                _this.mUtil.popToastView('暂无相关数据!');
            }
        });
    };
    /**
     * 生成选项列表
     * @param datas 列表
     * @param name1 列表显示内容的key
     * @param name2 点击需要的key值 若为空则取整个对象
     * @param key 保存在modulesDetails中的key值
     * @param isQ 是否查询初始化查询列表
     */
    EnergyReportPage.prototype.buildActionSheet = function (datas, name1, name2, key, isQ) {
        var that = this;
        var buttons = [];
        var _loop_1 = function (data) {
            buttons.push({
                text: data[name1],
                handler: function () {
                    if (name2) {
                        that.modulesDetails[key] = data[name2];
                    }
                    else {
                        that.modulesDetails[key] = data;
                    }
                    if (isQ) {
                        that.submit();
                    }
                },
            });
        };
        for (var _i = 0, datas_1 = datas; _i < datas_1.length; _i++) {
            var data = datas_1[_i];
            _loop_1(data);
        }
        buttons.push({
            text: '取消',
            role: 'cancel',
            handler: function () {
                console.log('取消 clicked');
            },
        });
        var actionSheet = this.actionSheetCtrl.create({
            cssClass: 'modules-details1-sheetctrl',
            buttons: buttons,
        });
        actionSheet.present();
        console.log('Clicked to update picture');
    };
    EnergyReportPage.prototype.buildData = function () {
        var data = {};
        data['dataType'] = this.modulesDetails.dataType || 'all';
        data['timeType'] = this.modulesDetails.timeType || 'day';
        switch (data['timeType']) {
            case 'day':
                data['startDate'] = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['startDate']).format('YYYY-MM-DD');
                data['endDate'] = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['endDate']).format('YYYY-MM-DD');
                break;
            case 'month':
                data['startDate'] = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['startDate']).format('YYYY-MM');
                data['endDate'] = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['endDate']).format('YYYY-MM');
                break;
            case 'quarter':
                data['startDate'] = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['startDate']).format('YYYY-MM');
                data['endDate'] = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['endDate']).format('YYYY-MM');
                break;
            case 'year':
                data['startDate'] = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['startDate']).format('YYYY');
                data['endDate'] = __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['endDate']).format('YYYY');
                break;
            default:
                break;
        }
        data['stationName'] = this.modulesDetails['stationName'];
        data['provinceId'] =
            (this.modulesDetails.province && this.modulesDetails.province.first) ||
                null;
        data['cityId'] =
            (this.modulesDetails.city && this.modulesDetails.city.first) || null;
        data['countyId'] =
            (this.modulesDetails.county && this.modulesDetails.county.first) || null;
        data['stationType'] =
            (this.modulesDetails.station && this.modulesDetails.station.first) ||
                null;
        if (data['dataType'] !== 'all') {
            data['energyFloor'] = !isNaN(this.modulesDetails['energyFloor'])
                ? this.modulesDetails['energyFloor']
                : null;
            data['energyCeil'] = !isNaN(this.modulesDetails['energyCeil'])
                ? this.modulesDetails['energyCeil']
                : null;
            if (data['energyFloor'] > data['energyCeil']) {
                data['energyCeil'] = null;
            }
            data['kwhkwpFloor'] = !isNaN(this.modulesDetails['kwhkwpFloor'])
                ? this.modulesDetails['kwhkwpFloor']
                : null;
            data['kwhkwpCeil'] = !isNaN(this.modulesDetails['kwhkwpCeil'])
                ? this.modulesDetails['kwhkwpCeil']
                : null;
            if (data['kwhkwpFloor'] > data['kwhkwpCeil']) {
                data['kwhkwpCeil'] = null;
            }
            data['rateFloor'] = !isNaN(this.modulesDetails['rateFloor'])
                ? this.modulesDetails['rateFloor']
                : null;
            data['rateCeil'] = !isNaN(this.modulesDetails['rateCeil'])
                ? this.modulesDetails['rateCeil']
                : null;
            if (data['rateFloor'] > data['rateCeil']) {
                data['rateCeil'] = null;
            }
        }
        data['sort'] = this.modulesDetails.defaultSort.first;
        data['direction'] = this.modulesDetails.direction || 'asc';
        data['stationName'] = this.modulesDetails.stationName;
        data['page'] = this.page || 0;
        data['size'] = 10;
        return data;
    };
    /**查询 */
    EnergyReportPage.prototype.submit = function () {
        if (__WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['startDate']).valueOf() >
            __WEBPACK_IMPORTED_MODULE_3_moment___default()(this.modulesDetails['endDate']).valueOf()) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '所选时间范围不正确',
                buttons: ['确定'],
            });
            alert_1.present();
            return;
        }
        this.menuController.close('search');
        this.page = 0;
        this.modulesList = [];
        this.getModulesList();
    };
    /**搜索菜单打开时 */
    EnergyReportPage.prototype.menuInit = function () {
        // this.backupsModulesDetails = JSON.parse(JSON.stringify(this.modulesDetails));
    };
    /**搜索菜单关闭时 */
    EnergyReportPage.prototype.ionClose = function () { };
    /**重置 */
    EnergyReportPage.prototype.reset = function () {
        this.modulesDetails = __assign(__assign({}, this.initData), { dataType: 'all', timeType: 'day', stationName: null, provinceId: null, cityId: null, countyId: null, stationType: null });
        this.startDate = this.formatData(this.modulesDetails.defaultDates['day'][0]);
        this.endDate = this.formatData(this.modulesDetails.defaultDates['day'][1]);
    };
    EnergyReportPage.prototype.changeDate = function (event, date) {
        this.modulesDetails[date] = this[date];
    };
    EnergyReportPage.prototype.setTimeType = function (type) {
        this.modulesDetails.timeType = type;
        switch (this.modulesDetails.timeType) {
            case 'day':
                this.startDate = this.formatData(this.modulesDetails.defaultDates['day'][0]);
                this.endDate = this.formatData(this.modulesDetails.defaultDates['day'][1]);
                break;
            case 'month':
                this.startDate = this.formatData(this.modulesDetails.defaultDates['month'][0]);
                this.endDate = this.formatData(this.modulesDetails.defaultDates['month'][1]);
                break;
            case 'quarter':
                this.startDate = this.formatData(this.modulesDetails.defaultDates['quarter'][0]);
                this.endDate = this.formatData(this.modulesDetails.defaultDates['quarter'][1]);
                break;
            case 'year':
                this.startDate = this.formatData(this.modulesDetails.defaultDates['year'][0]);
                this.endDate = this.formatData(this.modulesDetails.defaultDates['year'][1]);
                break;
            default:
                this.startDate = this.formatData(this.modulesDetails.defaultDates['day'][0]);
                this.endDate = this.formatData(this.modulesDetails.defaultDates['day'][1]);
                break;
        }
    };
    EnergyReportPage.prototype.showFormat = function () {
        switch (this.modulesDetails.timeType) {
            case 'day':
                return 'YYYY-MM-DD';
            case 'month':
                return 'YYYY-MM';
            case 'quarter':
                return 'YYYY-MM';
            case 'year':
                return 'YYYY';
            default:
                return 'YYYY-MM-DD';
        }
    };
    EnergyReportPage.prototype.formatData = function (data) {
        if (data === void 0) { data = null; }
        var dateFormString = '';
        switch (this.modulesDetails.timeType) {
            case 'day':
                dateFormString = 'YYYY-MM-DD';
                break;
            case 'month':
                dateFormString = 'YYYY-MM';
                break;
            case 'quarter':
                dateFormString = 'YYYY-MM';
                break;
            case 'year':
                dateFormString = 'YYYY';
                break;
            default:
                dateFormString = 'YYYY-MM-DD';
                break;
        }
        if (data) {
            return __WEBPACK_IMPORTED_MODULE_3_moment___default()(data).format(dateFormString);
        }
        return null;
    };
    EnergyReportPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-energy-report',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/energy-report/energy-report.html"*/'<!--\n  Generated template for the EnergyReportPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>{{title || \'\'}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon\n          style="font-size: 1.4em"\n          class="title-bar-icon"\n          name="search"\n        ></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n\n  <ion-toolbar>\n    <div class="search">\n      <span class="select-item" (click)=\'select("defaultSort")\'\n        >{{modulesDetails && modulesDetails.defaultSort &&\n        modulesDetails.defaultSort.second || \'\'}}</span\n      >\n      <div class="sort-btns">\n        <span\n          [ngClass]="{active: (modulesDetails && modulesDetails.direction === \'asc\')}"\n          (click)=\'select("asc")\'\n        ></span>\n        <span\n          [ngClass]="{active: (modulesDetails && modulesDetails.direction === \'desc\')}"\n          (click)=\'select("desc")\'\n        ></span>\n      </div>\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content #search>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="刷新..."\n    >\n    </ion-refresher-content>\n  </ion-refresher>\n\n  <div class="card-list">\n    <div class="card" *ngFor="let modules of modulesList">\n      <!-- <img [src]="getImg(modules.icon)" alt="" /> -->\n      <ion-icon [name]="getImg(modules.icon)"></ion-icon>\n      <div class="card-content">\n        <div class="info">{{modules.info}}</div>\n        <h1>{{modules.title}}</h1>\n        <div class="card-content-list" *ngFor="let item of modules.items">\n          {{item}}\n        </div>\n      </div>\n    </div>\n  </div>\n  <ion-infinite-scroll\n    (ionInfinite)="doInfinite($event)"\n    threshold="5%"\n    *ngIf="canInfinite"\n  >\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n\n<ion-menu\n  [content]="search"\n  side="right"\n  (ionOpen)="menuInit()"\n  (ionClose)="ionClose()"\n  id="search"\n  type="overlay"\n  swipeEnabled="true"\n  class="search-menu"\n>\n  <ion-content class="outer-content" no-bounce>\n    <div class="common-search-container">\n      <div class="common-search">\n        <div class="select-picker border-bottom">\n          <div class="query-label">统计维度</div>\n          <ion-grid>\n            <ion-row>\n              <ion-col col-4>\n                <div\n                  class="select-option"\n                  [ngClass]="{\'active-option\': modulesDetails?.dataType===\'all\'}"\n                  (click)="modulesDetails.dataType = \'all\'"\n                >\n                  全部\n                </div></ion-col\n              >\n              <ion-col col-4>\n                <div\n                  class="select-option"\n                  [ngClass]="{\'active-option\':  modulesDetails?.dataType===\'region\'}"\n                  (click)="modulesDetails.dataType = \'region\'"\n                >\n                  区域\n                </div></ion-col\n              >\n              <ion-col col-4>\n                <div\n                  class="select-option"\n                  [ngClass]="{\'active-option\':  modulesDetails?.dataType===\'station\'}"\n                  (click)="modulesDetails.dataType = \'station\'"\n                >\n                  电站\n                </div></ion-col\n              >\n            </ion-row>\n          </ion-grid>\n        </div>\n        <div class="select-picker border-bottom">\n          <div class="query-label">时间维度</div>\n          <ion-grid>\n            <ion-row>\n              <ion-col col-3>\n                <div\n                  class="select-option"\n                  [ngClass]="{\'active-option\': modulesDetails?.timeType===\'day\'}"\n                  (click)="setTimeType(\'day\')"\n                >\n                  日\n                </div></ion-col\n              >\n              <ion-col col-3>\n                <div\n                  class="select-option"\n                  [ngClass]="{\'active-option\':  modulesDetails?.timeType===\'month\'}"\n                  (click)="setTimeType(\'month\')"\n                >\n                  月\n                </div></ion-col\n              >\n              <ion-col col-3>\n                <div\n                  class="select-option"\n                  [ngClass]="{\'active-option\':  modulesDetails?.timeType===\'quarter\'}"\n                  (click)="setTimeType(\'quarter\')"\n                >\n                  季\n                </div></ion-col\n              >\n              <ion-col col-3>\n                <div\n                  class="select-option"\n                  [ngClass]="{\'active-option\':  modulesDetails?.timeType===\'year\'}"\n                  (click)="setTimeType(\'year\')"\n                >\n                  年\n                </div></ion-col\n              >\n            </ion-row>\n          </ion-grid>\n          <ion-grid>\n            <ion-row>\n              <ion-col col-6>\n                <div class="select-option">\n                  <ion-datetime\n                    cancelText="取消"\n                    doneText="确定"\n                    [displayFormat]="showFormat()"\n                    [pickerFormat]="showFormat()"\n                    [(ngModel)]="startDate"\n                    [max]="\'2099-12-31\'"\n                    (ionChange)="changeDate($event,\'startDate\')"\n                  ></ion-datetime>\n                </div>\n              </ion-col>\n              <ion-col col-6>\n                <div class="select-option">\n                  <ion-datetime\n                    cancelText="取消"\n                    doneText="确定"\n                    [displayFormat]="showFormat()"\n                    [pickerFormat]="showFormat()"\n                    [(ngModel)]="endDate"\n                    [max]="\'2099-12-31\'"\n                    (ionChange)="changeDate($event,\'endDate\')"\n                  ></ion-datetime>\n                </div>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </div>\n        <div class="input-picker border-bottom">\n          <div class="query-label">电站</div>\n          <ion-input\n            type="text"\n            placeholder="请输入"\n            [(ngModel)]="modulesDetails[\'stationName\']"\n            *ngIf="modulesDetails"\n          ></ion-input>\n        </div>\n\n        <div class="select-picker border-bottom">\n          <div class="query-label">区域</div>\n          <ion-grid>\n            <ion-row>\n              <ion-col col-4>\n                <div class="select-option" (click)=\'select("province")\'>\n                  {{this.modulesDetails && this.modulesDetails.province &&\n                  this.modulesDetails.province.second || \'省\'}}\n                </div></ion-col\n              >\n\n              <ion-col col-4>\n                <div class="select-option" (click)=\'select("city")\'>\n                  {{this.modulesDetails && this.modulesDetails.city &&\n                  this.modulesDetails.city.second || \'市\'}}\n                </div></ion-col\n              >\n\n              <ion-col col-4>\n                <div class="select-option" (click)=\'select("county")\'>\n                  {{this.modulesDetails && this.modulesDetails.county &&\n                  this.modulesDetails.county.second || \'县\'}}\n                </div></ion-col\n              >\n            </ion-row>\n          </ion-grid>\n        </div>\n        <div class="button-picker border-bottom">\n          <div class="query-label">电站类型</div>\n          <button\n            ion-button\n            round\n            small\n            color="light"\n            (click)=\'select("station")\'\n          >\n            {{this.modulesDetails && this.modulesDetails.station &&\n            this.modulesDetails.station.second || \'请选择\'}}\n          </button>\n        </div>\n\n        <div\n          class="input-picker border-bottom"\n          *ngIf="modulesDetails?.dataType!==\'all\'"\n        >\n          <div class="query-label">电量</div>\n          <ion-grid>\n            <ion-row>\n              <ion-col col-6>\n                <ion-input\n                  type="number"\n                  [min]="0"\n                  [(ngModel)]="modulesDetails.energyFloor"\n                ></ion-input>\n              </ion-col>\n              <ion-col col-6>\n                <ion-input\n                  type="number"\n                  [min]="modulesDetails.energyFloor||0"\n                  [(ngModel)]="modulesDetails.energyCeil"\n                ></ion-input>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </div>\n\n        <div\n          class="input-picker border-bottom"\n          *ngIf="modulesDetails?.dataType!==\'all\'"\n        >\n          <div class="query-label">等效时</div>\n          <ion-grid>\n            <ion-row>\n              <ion-col col-6>\n                <ion-input\n                  type="number"\n                  [min]="0"\n                  [(ngModel)]="modulesDetails.kwhkwpFloor"\n                ></ion-input>\n              </ion-col>\n              <ion-col col-6>\n                <ion-input\n                  type="number"\n                  [min]="modulesDetails.kwhkwpFloor||0"\n                  [(ngModel)]="modulesDetails.kwhkwpCeil"\n                ></ion-input>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </div>\n\n        <div\n          class="input-picker border-bottom"\n          *ngIf="modulesDetails?.dataType!==\'all\'"\n        >\n          <div class="query-label">计划完成率</div>\n          <ion-grid>\n            <ion-row>\n              <ion-col col-6>\n                <ion-input\n                  type="number"\n                  [min]="0"\n                  [(ngModel)]="modulesDetails.rateFloor"\n                ></ion-input>\n              </ion-col>\n              <ion-col col-6>\n                <ion-input\n                  type="number"\n                  [min]="modulesDetails.rateFloor||0"\n                  [(ngModel)]="modulesDetails.rateCeil"\n                ></ion-input>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </div>\n      </div>\n      <ion-list>\n        <ion-row class="fix-bottom">\n          <ion-col col-6 text-center>\n            <button\n              ion-button\n              round\n              small\n              class="reset-btn"\n              color="light"\n              (click)="reset()"\n            >\n              重置\n            </button>\n          </ion-col>\n          <ion-col col-6 text-center>\n            <button ion-button round small class="query-btn" (click)="submit()">\n              查询\n            </button>\n          </ion-col>\n        </ion-row>\n      </ion-list>\n    </div>\n  </ion-content>\n</ion-menu>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/energy-report/energy-report.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_4__providers_modules_service__["a" /* ModulesService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_5__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular_components_alert_alert_controller__["a" /* AlertController */]])
    ], EnergyReportPage);
    return EnergyReportPage;
}());

//# sourceMappingURL=energy-report.js.map

/***/ }),

/***/ 815:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommentProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



/*
  Generated class for the CommentProvider provider.

  See https://angular.io/guide/dependency-injection for more info on providers
  and Angular DI.
*/
var CommentProvider = /** @class */ (function () {
    function CommentProvider(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        console.log('Hello CommentProvider Provider');
        this.addCommentUrl = this.appConfig.apiEndpoint + '/api/workOrders/comment';
        this.deleteCommentUrl = this.appConfig.apiEndpoint + '/api/comments';
    }
    CommentProvider.prototype.addComment = function (parmas) {
        return this.http.put(this.addCommentUrl + '?orderId=' + parmas.orderId + '&comment=' + parmas.comment, parmas);
    };
    CommentProvider.prototype.deleteComment = function (commentId) {
        return this.http.delete(this.deleteCommentUrl + '?commentId=' + commentId);
    };
    CommentProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__auth_http_service__["a" /* AuthHttpService */], Object])
    ], CommentProvider);
    return CommentProvider;
}());

//# sourceMappingURL=comment.js.map

/***/ }),

/***/ 816:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AllCompany; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular_navigation_nav_params__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_backend_service__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__monitor_monitor__ = __webpack_require__(235);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var AllCompany = /** @class */ (function () {
    function AllCompany(navCtrl, backendService, navParams, events, viewCtrl) {
        this.navCtrl = navCtrl;
        this.backendService = backendService;
        this.navParams = navParams;
        this.events = events;
        this.viewCtrl = viewCtrl;
        this.stationList = [];
        this.search = '';
        this.returnPage = this.navParams.get('returnPage');
        this.type = this.navParams.get('type');
    }
    AllCompany.prototype.powerStation = function (index) {
        this.stationList[index]['hidePower'] = !this.stationList[index]['hidePower'];
    };
    AllCompany.prototype.ionViewWillEnter = function () {
        this.getSampleStations();
    };
    AllCompany.prototype.getSampleStations = function () {
        var _this = this;
        this.backendService.getSampleStations().subscribe(function (e) {
            if (e && e['content'] && e['content'].length > 0) {
                var _loop_1 = function (station) {
                    var rs = _this.stationList.find(function (data) {
                        if (data && data['provinceId'] == station['provinceId']) {
                            if (!data['content']) {
                                data['content'] = [];
                            }
                            data['content'].push(station);
                            return true;
                        }
                    });
                    if (!rs) {
                        _this.stationList.push({ provinceId: station['provinceId'], provinceName: station['provinceName'], content: [station] });
                    }
                };
                for (var _i = 0, _a = e['content']; _i < _a.length; _i++) {
                    var station = _a[_i];
                    _loop_1(station);
                }
            }
        });
    };
    // 返回监控数据页面
    AllCompany.prototype.returnMonitor = function (content) {
        switch (this.returnPage) {
            case 'MonitorPage':
                this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_4__monitor_monitor__["a" /* MonitorPage */], { content: content });
                break;
            case 'RunLog':
                this.events.publish('RunLogSelect', content);
                this.navCtrl.pop();
                // this.navCtrl.setRoot(RunLog,{content:content})
                break;
            case 'ImplementAlarm':
                this.events.publish('ImplementAlarmSelect', content);
                this.navCtrl.pop();
                // this.navCtrl.setRoot(RunLog,{content:content})
                break;
            case 'DefectsPage':
                this.viewCtrl.dismiss(content);
                // this.navCtrl.setRoot(RunLog,{content:content})
                break;
            case 'NewDefectsPage':
                this.events.publish('defectSelect', content);
                this.navCtrl.pop();
                break;
        }
    };
    //查询
    AllCompany.prototype.searchShow = function (name) {
        if (this.search == '' || !this.search)
            return true;
        return name.indexOf(this.search) >= 0;
    };
    AllCompany.prototype.getStationNumber = function (station) {
        var num = 0;
        if (!station || !station["content"])
            return num;
        for (var _i = 0, _a = station["content"]; _i < _a.length; _i++) {
            var content = _a[_i];
            if (this.searchShow(content.shortName)) {
                num++;
            }
        }
        return num;
    };
    AllCompany = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'allcompany',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/common/allCompany/all-company.html"*/'<ion-header *ngIf = \'type !== "notitle"\'>\n    <ion-navbar>\n        <ion-title>电站列表</ion-title>\n    </ion-navbar>\n</ion-header>\n    \n<ion-content>\n  <ion-searchbar placeholder="输入电站名称" [(ngModel)]=  \'search\' *ngIf = \'type !== "notitle"\'></ion-searchbar>\n  <div [ngSwitch]="pet">\n    <!-- 公司 -->\n    <ion-list >\n      <!--  *ngSwitchCase="\'company\'" -->\n      <!-- <ion-item ion-item class="title" (click) = "returnMonitor()">林阳集团</ion-item> -->\n      <div *ngFor = \'let station of stationList;let i = index\'>\n        <button ion-item  (click) = "powerStation(i)">\n          {{station.provinceName}}({{getStationNumber(station)}})\n        </button> \n        <ion-list   *ngIf="station[\'hidePower\']" class="power-station" >\n          <ng-container *ngFor = \'let content of station["content"]\'>\n              <ion-item  ion-item *ngIf = \'searchShow(content.shortName)\' (click) = "returnMonitor(content)">{{content.shortName}}</ion-item>\n          </ng-container>\n        </ion-list>\n    </div>\n    </ion-list>\n  </div>\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/common/allCompany/all-company.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_backend_service__["a" /* BackendService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular_navigation_nav_params__["a" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["w" /* ViewController */]])
    ], AllCompany);
    return AllCompany;
}());

//# sourceMappingURL=all-company.js.map

/***/ }),

/***/ 817:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EquipmentService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var EquipmentService = /** @class */ (function () {
    function EquipmentService(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        this.equipmentListUrl = this.appConfig.apiEndpoint + "/api/device/devices";
        this.recentStationsUrl =
            this.appConfig.apiEndpoint + "/api/v1/monitor/recentStations";
    }
    /**
     * 设备列表
     */
    EquipmentService.prototype.getequipmentListUrl = function (stationId, page, deviceNoOrName) {
        if (!page) {
            page = 0;
        }
        var url = this.equipmentListUrl +
            "?stationIds=" +
            stationId +
            "&page=" +
            page +
            "&size=" +
            20;
        if (deviceNoOrName) {
            url = url + "&deviceNoOrName=" + deviceNoOrName;
        }
        return this.http.get(url);
    };
    /**
     * 设备列表
     */
    EquipmentService.prototype.getRecentStations = function () {
        var url = this.recentStationsUrl;
        return this.http.get(url);
    };
    EquipmentService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */], Object])
    ], EquipmentService);
    return EquipmentService;
}());

//# sourceMappingURL=equipment.service.js.map

/***/ }),

/***/ 818:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeviceDocPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_plugin_service__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_qr_search_service__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__models_app_config__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






/**
 * Generated class for the DeviceDocPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DeviceDocPage = /** @class */ (function () {
    function DeviceDocPage(navCtrl, navParams, qrsearchservice, pluginservice, mutilservice, appConfig) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.qrsearchservice = qrsearchservice;
        this.pluginservice = pluginservice;
        this.mutilservice = mutilservice;
        this.appConfig = appConfig;
        this.DDVList = [];
        this.DMDList = [];
        this.DCLList = [];
        this.downloadUrl = this.appConfig.apiEndpoint + '/api/doc/download';
    }
    DeviceDocPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        this.deviceId = this.navParams.get('deviceId');
        this.deviceName = this.navParams.get('deviceName');
        this.qrsearchservice.getDeviceDocs(this.deviceId).subscribe(function (res) {
            if (res) {
                _this.fileTypeList = [
                    { name: 'DDV', value: res.DDV },
                    { name: 'DMD', value: res.DMD },
                    { name: 'DCL', value: res.DCL },
                ];
            }
        });
    };
    DeviceDocPage.prototype.download = function (docId, docName) {
        var _this = this;
        this.mutilservice.customPrompt({ msg: '确定下载该文件吗?' }, function () {
            _this.pluginservice.downloadFile(_this.downloadUrl + '?docId=' + docId, docName);
        });
    };
    DeviceDocPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'page-device-doc',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/device-doc/device-doc.html"*/'<!--\n  Generated template for the DeviceDocPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n    <ion-navbar>\n        <ion-title>{{deviceName}}</ion-title>\n    </ion-navbar>\n</ion-header>\n\n<ion-content>\n    <ion-list no-lines *ngFor="let fileType of fileTypeList">\n        <ion-item *ngFor="let item of fileType.value">\n            <ion-label>{{item.docName}} </ion-label>\n            <button ion-button icon-only item-start clear>\n                <ion-icon\n                    name="file-new"\n                    style="font-size: 1.3em;color: #727272;"\n                ></ion-icon>\n            </button>\n            <button\n                ion-button\n                icon-only\n                item-end\n                clear\n                (click)="download(item.docId,item.docName)"\n            >\n                <ion-icon\n                    name="download-new"\n                    style="font-size: 1.3em;color: #727272;"\n                ></ion-icon>\n            </button>\n        </ion-item>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/device-doc/device-doc.html"*/,
        }),
        __param(5, Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_5__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_qr_search_service__["a" /* QrSearchService */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */], Object])
    ], DeviceDocPage);
    return DeviceDocPage;
}());

//# sourceMappingURL=device-doc.js.map

/***/ }),

/***/ 819:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeviceTopoPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_qr_search_service__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__device_topo_chart__ = __webpack_require__(1256);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the DeviceTopoPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DeviceTopoPage = /** @class */ (function () {
    function DeviceTopoPage(navCtrl, navParams, qrsearchservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.qrsearchservice = qrsearchservice;
    }
    DeviceTopoPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('ionViewDidLoad DeviceTopoPage');
        this.deviceId = this.navParams.get('deviceId');
        this.deviceName = this.navParams.get('deviceName');
        this.qrsearchservice.getDeviceTopo(this.deviceId).subscribe(function (res) {
            if (res) {
                _this.options = Object(__WEBPACK_IMPORTED_MODULE_3__device_topo_chart__["a" /* buildDeviceTopo */])(res, _this.deviceId);
            }
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["ViewChild"])('echart'),
        __metadata("design:type", Object)
    ], DeviceTopoPage.prototype, "echart", void 0);
    DeviceTopoPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'page-device-topo',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/device-topo/device-topo.html"*/'<!--\n  Generated template for the DeviceTopoPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n    <ion-navbar>\n        <ion-title>{{deviceName}}</ion-title>\n    </ion-navbar>\n</ion-header>\n\n<ion-content>\n    <div echarts #echart [options]="options" style="height: 100%;"></div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/device-topo/device-topo.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0__providers_qr_search_service__["a" /* QrSearchService */]])
    ], DeviceTopoPage);
    return DeviceTopoPage;
}());

//# sourceMappingURL=device-topo.js.map

/***/ }),

/***/ 820:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HomePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__operations_defect_management_defect_management__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_qr_search_service__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_echarts_service__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__util_global_search_global_search__ = __webpack_require__(821);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__log_list_log_list__ = __webpack_require__(822);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_home_service__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__daily_report_daily_report__ = __webpack_require__(347);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__operations_tool_v1_tool__ = __webpack_require__(824);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__operations_cargo_manage_cargo_manage__ = __webpack_require__(827);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__operations_notice_list_notice_list__ = __webpack_require__(830);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__operations_operate_task_operate_task__ = __webpack_require__(832);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__barcode_scanner_barcode_scanner__ = __webpack_require__(170);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__qr_result_bar_qr_result_bar__ = __webpack_require__(833);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__operations_job_record_job_record__ = __webpack_require__(346);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__operations_inventoris_inventoris__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__modules_details_modules_new__ = __webpack_require__(834);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__models_app_config__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



















var HomePage = /** @class */ (function () {
    function HomePage(navCtrl, navParams, echartsService, modalCtrl, homeService, event, qrsearchservice, appConfig) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.echartsService = echartsService;
        this.modalCtrl = modalCtrl;
        this.homeService = homeService;
        this.event = event;
        this.qrsearchservice = qrsearchservice;
        this.appConfig = appConfig;
        this.task = 'mytask';
        this.homePage = navParams.get('homepage');
    }
    HomePage.prototype.gethomeinfo = function () {
        var _this = this;
        var params = this.homePage === 'DEFAULT' ? true : false;
        this.homeService.gethomeinfo(params).subscribe(function (e) {
            _this.homeInfo = e;
            _this.trendChartOption = _this.echartsService.initEc1(e['chartOption'], _this.appConfig.theme);
            // this.trendChartOption1 = this.echartsService.initEc5(
            //   e['subInfos'],
            //   this.appConfig.theme
            // );
        });
    };
    HomePage.prototype.getPie = function (data, index) {
        return {
            graphic: {
                name: data.title,
                elements: [
                    {
                        type: 'image',
                        style: {
                            image: "assets/imgs/home/topbg/icon-" + (index + 1) + ".png",
                            width: 30,
                            height: 30,
                        },
                        left: 'center',
                        top: 'middle',
                        z: 0
                    }
                ]
            },
            series: [
                {
                    type: 'pie',
                    name: 'center',
                    radius: ['60%', '75%'],
                    center: ['50%', '50%'],
                    color: ['rgba(255,255,255,1)', 'rgba(255,255,255,0.15)'],
                    data: [{
                            value: 0,
                        }, {
                            value: 100,
                        }],
                    label: {
                        show: false,
                    },
                    hoverAnimation: false,
                },
                {
                    type: 'pie',
                    name: data.title,
                    radius: ['85%', '100%'],
                    center: ['50%', '50%'],
                    color: ['rgba(255,255,255,1)', 'rgba(255,255,255,0.25)'],
                    data: [{
                            value: data.ratio,
                        },
                        {
                            value: 100 - data.ratio,
                        },],
                    label: {
                        show: false,
                    },
                    hoverAnimation: false,
                }
            ]
        };
    };
    HomePage.prototype.getmodules = function () {
        var _this = this;
        this.homeService.modules().subscribe(function (e) {
            if (e) {
                _this.homePageModules = e['allModules'];
            }
            console.log(e);
        });
    };
    HomePage.prototype.ionViewWillEnter = function () {
        var _this = this;
        this.gethomeinfo();
        this.getmodules();
        this.device = this.navParams.get('qrResult');
        if (this.device) {
            this.qrsearchservice.qrsearch(this.device).subscribe(function (res) {
                if (res) {
                    var qrSearchBarHeight = '';
                    if (res.modules.length <= 4) {
                        qrSearchBarHeight = 'qrSearchBar1';
                    }
                    else if (res.modules.length > 4 && res.modules.length <= 8) {
                        qrSearchBarHeight = 'qrSearchBar2';
                    }
                    else if (res.modules.length > 8 && res.modules.length <= 12) {
                        qrSearchBarHeight = 'qrSearchBar3';
                    }
                    var modal = _this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_14__qr_result_bar_qr_result_bar__["a" /* QrResultBarPage */], { info: res }, {
                        cssClass: qrSearchBarHeight,
                        showBackdrop: true,
                        enableBackdropDismiss: true,
                    });
                    modal.onDidDismiss(function (data) {
                        if (data) {
                            _this.navCtrl.push(data.page, data.params);
                        }
                        else {
                            _this.navParams.data.qrResult = null;
                        }
                    });
                    modal.present();
                }
            });
        }
    };
    /**判断模块是否显示 */
    HomePage.prototype.showModule = function (modelType) {
        if (this.homePageModules && this.homePageModules.length > 0) {
            for (var _i = 0, _a = this.homePageModules; _i < _a.length; _i++) {
                var homePageModule = _a[_i];
                if (homePageModule.id == modelType) {
                    return homePageModule.show;
                }
            }
        }
    };
    /** */
    HomePage.prototype.changerTab = function (index) {
        // this.event.publish('changerTab', { index: index });
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_17__modules_details_modules_new__["a" /* ModulesNewPage */]);
    };
    /**
     * 运行日志
     */
    HomePage.prototype.logList = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__log_list_log_list__["a" /* LogList */]);
    };
    /**
     * 扫码信息
     */
    HomePage.prototype.scan = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_13__barcode_scanner_barcode_scanner__["a" /* BarcodeScannerPage */]);
    };
    /**
     * 搜索页面
     */
    HomePage.prototype.search = function () {
        // let searchModal = this.modalCtrl.create(GlobalSearch);
        // searchModal.present();
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__util_global_search_global_search__["a" /* GlobalSearch */]);
    };
    HomePage.prototype.noticeList = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__operations_notice_list_notice_list__["a" /* NoticeList */]);
    };
    HomePage.prototype.toCargoManage = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__operations_cargo_manage_cargo_manage__["a" /* CargoManage */]);
    };
    HomePage.prototype.toTool = function (classType) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__operations_tool_v1_tool__["a" /* ToolPageV1 */], { classType: classType });
    };
    HomePage.prototype.toDefectManage = function () {
        // this.navCtrl.push(DefectManage);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__operations_defect_management_defect_management__["a" /* DefectManagementPage */]);
    };
    HomePage.prototype.toOperateTask = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__operations_operate_task_operate_task__["a" /* OperateTask */]);
    };
    /***********************************************旧的 */
    /**
     * 电量日报
     */
    HomePage.prototype.dailyReport = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__daily_report_daily_report__["a" /* DailyReport */]);
    };
    // 运行日报
    HomePage.prototype.toJobRecord = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__operations_job_record_job_record__["a" /* JobRecordPage */]);
    };
    // 备品备件
    HomePage.prototype.toInventoris = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_16__operations_inventoris_inventoris__["a" /* InventorisPage */]);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["ViewChild"])('echart'),
        __metadata("design:type", Object)
    ], HomePage.prototype, "echart", void 0);
    HomePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-home',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/home.html"*/'<ion-header class="page-header">\n  <ion-navbar>\n    <ion-title start>{{homeInfo&&homeInfo.title}}</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="search()">\n        <ion-icon name="ios-search" class="title-bar-icon"></ion-icon>\n      </button>\n      <button ion-button icon-only (click)="scan()">\n        <ion-icon name="ios-scan" class="title-bar-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <div class="trend-container">\n    <!-- <div class="trend-bg">\n      <div\n        echarts\n        #echart\n        [options]="trendChartOption"\n        class="trend-chart"\n      ></div> \n      <div class="power-energy" *ngIf="homeInfo">\n        <div\n          echarts\n          #echart\n          [options]="trendChartOption1"\n          class="trend-chart dif-height"\n        ></div>\n        <div class="power">\n          <div>\n            {{homeInfo.subInfos[0].value}} {{homeInfo.subInfos[0].unit}}\n          </div>\n          <div>\n            {{homeInfo.subInfos[0].subTitle}}:{{homeInfo.subInfos[0].subValue}}\n            {{homeInfo.subInfos[0].subUnit}}\n          </div>\n        </div>\n        <div class="power tr">\n          <div>\n            {{homeInfo.subInfos[1].value}} {{homeInfo.subInfos[1].unit}}\n          </div>\n          <div>\n            {{homeInfo.subInfos[1].subTitle}}:{{homeInfo.subInfos[1].subValue}}\n            {{homeInfo.subInfos[1].subUnit}}\n          </div>\n        </div>\n        <div class="power lb">\n          <div>\n            {{homeInfo.subInfos[2].value}} {{homeInfo.subInfos[2].unit}}\n          </div>\n          <div>\n            {{homeInfo.subInfos[2].subTitle}}:{{homeInfo.subInfos[2].subValue}}\n            {{homeInfo.subInfos[2].subUnit}}\n          </div>\n        </div>\n        <div class="power br">\n          <div>\n            {{homeInfo.subInfos[3].value}} {{homeInfo.subInfos[3].unit}}\n          </div>\n          <div>\n            {{homeInfo.subInfos[3].subTitle}}:{{homeInfo.subInfos[3].subValue}}\n            {{homeInfo.subInfos[3].subUnit}}\n          </div>\n        </div>\n      </div>\n    </div> -->\n\n    <div class="topbg-container">\n      <div\n        *ngFor="let item of homeInfo?.subInfos;let i = index"\n        [class]="\'topbg topbg-\'+i"\n      >\n        <div class="title">{{item.title}}</div>\n        <div class="main">\n          <span>{{item.value}}</span>\n          <span>{{item.unit}}</span>\n        </div>\n        <div echarts #echart class="echart" [options]="getPie(item,i)"></div>\n        <div class="sub">\n          <span>{{item.subTitle}}:{{item.subValue}}{{item.subUnit}}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <homepage2-modules *ngIf="homePage!==\'DEFAULT\'"></homepage2-modules>\n\n  <div class="option opton-left" *ngIf=\'homePage === "DEFAULT"\'>\n    <div (click)="changerTab(2)">\n      <img src="assets/imgs/home/more.png" />\n      <p>更多功能</p>\n    </div>\n  </div>\n  <div class="option" *ngIf=\'homePage === "DEFAULT"\'>\n    <div (click)="toJobRecord()" *ngIf=\'showModule("APP_JOB_RECORD")\'>\n      <img src="assets/imgs/operations/yunxingrb.png" />\n      <p>运行日报</p>\n    </div>\n    <div (click)="dailyReport()" *ngIf=\'showModule("APP_ENERGY_RPT")\'>\n      <img src="assets/imgs/operations/defect-mana.png" />\n      <p>集团日报</p>\n    </div>\n    <div *ngIf=\'showModule("APP_ALARM")\'>\n      <img src="assets/imgs/operations/notice.png" />\n      <p>告警管理</p>\n    </div>\n\n    <div (click)="toDefectManage()" *ngIf=\'showModule("APP_DEFECT")\'>\n      <img src="assets/imgs/home/bug.png" />\n      <p>缺陷管理</p>\n    </div>\n    <div (click)="noticeList()" *ngIf=\'showModule("")\'>\n      <img src="assets/imgs/home/gonggao.png" />\n      <p>公告</p>\n    </div>\n    <div (click)="toOperateTask()" *ngIf=\'showModule("APP_MAINTAIN")\'>\n      <img src="assets/imgs/operations/ywtask.png" />\n      <p>运维任务</p>\n    </div>\n    <div (click)="toCargoManage()" *ngIf=\'showModule("APP_MATERIAL")\'>\n      <img src="assets/imgs/operations/wuliao.png" />\n      <p>物料管理</p>\n    </div>\n    <div (click)=\'toTool("03")\' *ngIf=\'showModule("APP_TOOL")\'>\n      <img src="assets/imgs/operations/gongju.png" />\n      <p>工具器</p>\n    </div>\n    <div (click)="toInventoris()" *ngIf=\'showModule("APP_MATERIAL")\'>\n      <img src="assets/imgs/module/bpbj.png" />\n      <p>备品备件</p>\n    </div>\n  </div>\n\n  <!-- ******** 高层首页显示 ******** -->\n  <ng-container *ngIf=\'homeInfo && homePage === "DEFAULT"\'>\n    <!-- <div>\n            <img src="assets/imgs/home/publicity.png" class="publicity"/>\n        </div> -->\n    <div class="plan-title">\n      <i></i>\n      <span>各区域生产计划完成情况</span>\n    </div>\n    <div class="plan" *ngFor="let regionInfo of homeInfo.regionInfos| keys">\n      <div class="p-name">\n        <p>{{regionInfo.key}}</p>\n        <!-- <p>&</p>\n                <p>山东</p> -->\n      </div>\n      <div class="p-power">\n        <span\n          >{{regionInfo.value[0].title}}：{{regionInfo.value[0].value}}{{regionInfo.value[0].unit}}</span\n        >\n        <span\n          >{{regionInfo.value[1].title}}：{{regionInfo.value[1].value}}{{regionInfo.value[1].unit}}</span\n        >\n      </div>\n      <div>\n        <span class="p-energy"\n          ><span [style.width]=\'(regionInfo.value[0].ratio*0.36)+"%"\'></span\n        ></span>\n        <span class="p-energy"\n          ><span [style.width]=\'(regionInfo.value[1].ratio*0.36)+"%"\'></span\n        ></span>\n      </div>\n      <div class="p-power">\n        <span\n          >{{regionInfo.value[2].title}}：{{regionInfo.value[2].value}}{{regionInfo.value[2].unit}}</span\n        >\n        <span\n          >{{regionInfo.value[3].title}}：{{regionInfo.value[3].value}}{{regionInfo.value[3].unit}}</span\n        >\n      </div>\n      <div>\n        <span class="p-energy"\n          ><span [style.width]=\'(regionInfo.value[2].ratio*0.36)+"%"\'></span\n        ></span>\n        <span class="p-energy"\n          ><span [style.width]=\'(regionInfo.value[3].ratio*0.36)+"%"\'></span\n        ></span>\n      </div>\n    </div>\n  </ng-container>\n  <!-- ******** 中层和基层首页显示 ******** -->\n  <ng-container *ngIf="false">\n    <div class="new-notice">\n      <img src="assets/imgs/home/zxgg.png" />\n      <span class="notice-title">最新公告：</span>\n      <span>公告内容</span>\n    </div>\n    <div>\n      <ion-segment [(ngModel)]="task">\n        <ion-segment-button value="mytask">代办任务(8)</ion-segment-button>\n        <span class="boundary"></span>\n        <ion-segment-button value="notask">告警信息</ion-segment-button>\n      </ion-segment>\n    </div>\n    <div [ngSwitch]="task">\n      <div *ngSwitchCase=" \'mytask\' ">\n        <div class="task-details dif-heihgt">\n          <div class="home-title">\n            <img src="assets/imgs/home/bugtask.png" />\n            <p>缺陷任务</p>\n          </div>\n          <div class="time-status">\n            <span class="time">任务类型</span>\n            <span>任务类型A</span>\n            <span class="time t-right">发布时间</span>\n            <span>05/23 14:00</span>\n          </div>\n          <div class="time-status">\n            <span class="time">其他信息</span>\n            <span>设备外机被破损，可能会漏水.....</span>\n          </div>\n        </div>\n      </div>\n      <div *ngSwitchCase=" \'notask\' ">\n        <div class="task-details dif-heihgt">\n          <div class="home-title">\n            <img src="assets/imgs/home/bugtask.png" />\n            <p>缺陷任务</p>\n          </div>\n          <div class="time-status">\n            <span class="time">任务类型</span>\n            <span>任务类型A</span>\n            <span class="time t-right">发布时间</span>\n            <span>05/23 14:00</span>\n          </div>\n          <div class="time-status">\n            <span class="time">其他信息</span>\n            <span>设备外机被破损，可能会漏水.....</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/home.html"*/,
        }),
        __param(7, Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_18__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_4__providers_echarts_service__["a" /* EchartsService */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_7__providers_home_service__["a" /* HomeService */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_1__providers_qr_search_service__["a" /* QrSearchService */], Object])
    ], HomePage);
    return HomePage;
}());

//# sourceMappingURL=home.js.map

/***/ }),

/***/ 821:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GlobalSearch; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_home_service__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__home_equipment_message_equipment_message__ = __webpack_require__(90);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var GlobalSearch = /** @class */ (function () {
    function GlobalSearch(viewCtrl, homeService, navCtrl, event) {
        this.viewCtrl = viewCtrl;
        this.homeService = homeService;
        this.navCtrl = navCtrl;
        this.event = event;
        this.searResult = 'dianzhan';
        this.historyRecord = ['xxx电站', 'xxx电站', 'xxx电站', 'xxx电站'];
        this.pageIndex = 0;
        this.searchInfo = [];
    }
    GlobalSearch.prototype.onInput = function () {
        var _this = this;
        var searchType = 'S';
        if (this.searResult == 'dianzhan') {
            searchType = 'S';
        }
        else if (this.searResult == 'shebei') {
            searchType = 'D';
        }
        else {
            searchType = 'O';
        }
        this.homeService
            .searchInfo(searchType, this.myInput, this.pageIndex)
            .subscribe(function (e) {
            if (e) {
                _this.searchInfo = e.content;
                console.log(e);
            }
        });
    };
    GlobalSearch.prototype.onCancel = function () {
        this.viewCtrl.dismiss();
    };
    GlobalSearch.prototype.segmentChanged = function () {
        this.pageIndex = 0;
        this.onInput();
    };
    GlobalSearch.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.pageIndex++;
        var searchType = 'S';
        if (this.searResult == 'dianzhan') {
            searchType = 'S';
        }
        else if (this.searResult == 'shebei') {
            searchType = 'D';
        }
        else {
            searchType = 'O';
        }
        this.homeService
            .searchInfo(searchType, this.myInput, this.pageIndex)
            .subscribe(function (e) {
            infiniteScroll.complete();
            if (e) {
                _this.searchInfo.push.apply(_this.searchInfo, e.content);
                console.log(e);
            }
            if (_this.searchInfo.length == e.totalElements) {
                infiniteScroll.enable(false);
            }
        });
    };
    // stationId changed
    GlobalSearch.prototype.stationClick = function (station) {
        // this.navCtrl.push(PowStaRecords, { stationId: station.id });
        this.onCancel();
        localStorage.setItem('stationId', station.id);
        localStorage.setItem('isFromGlobalSearch', 'true');
        this.event.publish('changerTab', { index: 1 });
    };
    GlobalSearch.prototype.equipmentClick = function (equipment) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__home_equipment_message_equipment_message__["a" /* EquipmentMessage */], { deviceId: equipment.id });
    };
    GlobalSearch = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'global-search',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/global-search/global.search.html"*/'<ion-header>\n  <ion-toolbar>\n    <!-- <ion-title>Subheader</ion-title> -->\n\n    <ion-buttons start>\n      <button ion-button icon-only (click)="onCancel()">\n        <ion-icon name="arrow-back"></ion-icon>\n      </button>\n    </ion-buttons>\n\n    <ion-searchbar\n      class="mysearchbar"\n      [(ngModel)]="myInput"\n      placeholder="搜索"\n      [showCancelButton]="true"\n      cancelButtonText="取消"\n      (ionInput)="onInput()"\n      (ionCancel)="onCancel()"\n    >\n    </ion-searchbar>\n  </ion-toolbar>\n\n  <ion-toolbar class="segment-toolbar">\n    <div>\n      <ion-segment [(ngModel)]="searResult" (ionChange)="segmentChanged()">\n        <ion-segment-button value="dianzhan">电站</ion-segment-button>\n        <ion-segment-button value="shebei">设备</ion-segment-button>\n        <!-- <ion-segment-button value="qita">其他</ion-segment-button> -->\n      </ion-segment>\n    </div>\n  </ion-toolbar>\n</ion-header>\n<ion-content>\n  <ng-container>\n    <div [ngSwitch]="searResult" class="list-container">\n      <div *ngSwitchCase=" \'dianzhan\' " class="notice-list">\n        <div\n          class="notice-bg"\n          *ngFor="let equipment of searchInfo"\n          (click)="stationClick(equipment)"\n        >\n          <div class="notice">\n            <div class="notice-title">{{equipment.title}}</div>\n            <div class="notice-subtitle value">\n              <div class="notice-subtitle-content">\n                <span>{{equipment.text3}}</span>\n              </div>\n            </div>\n            <div class="notice-subtitle">\n              <div class="notice-subtitle-content">\n                <span>{{equipment.text2}}</span>\n                <span>{{equipment.text1}}</span>\n              </div>\n            </div>\n          </div>\n          <div class="left-img">\n            <img src="assets/imgs/home/station.png" class="alarm-img" />\n            <div class="notice-line"></div>\n          </div>\n        </div>\n        <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n          <ion-infinite-scroll-content\n            loadingSpinner="bubbles"\n            loadingText="加载更多数据..."\n          >\n          </ion-infinite-scroll-content>\n        </ion-infinite-scroll>\n      </div>\n      <div *ngSwitchCase=" \'shebei\' " class="notice-list">\n        <div\n          class="notice-bg"\n          *ngFor="let equipment of searchInfo"\n          (click)="equipmentClick(equipment)"\n        >\n          <div class="notice">\n            <div class="notice-title">{{equipment.title}}</div>\n            <div class="notice-subtitle value">\n              <div class="notice-subtitle-content">\n                <span>{{equipment.text3}}</span>\n              </div>\n            </div>\n            <div class="notice-subtitle">\n              <div class="notice-subtitle-content">\n                <span>{{equipment.text2}}</span>\n                <span>{{equipment.text1}}</span>\n              </div>\n            </div>\n          </div>\n          <div class="left-img">\n            <img src="assets/imgs/home/device.png" class="alarm-img" />\n          </div>\n          <div class="notice-line"></div>\n        </div>\n        <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n          <ion-infinite-scroll-content\n            loadingSpinner="bubbles"\n            loadingText="加载更多数据..."\n          >\n          </ion-infinite-scroll-content>\n        </ion-infinite-scroll>\n      </div>\n      <!-- <div *ngSwitchCase=" \'qita\' " class="notice-list">\n                <div class="notice-bg" *ngFor=\'let equipment of searchInfo\'>\n                    <div class="notice">\n                        <div class=\'notice-title\'>{{equipment.title}}</div>\n                        <div class=\'notice-subtitle\'>\n                            <div class="notice-subtitle-content">\n                                <span>{{equipment.text1}}</span>\n                            </div>\n                        </div>\n                        <div class=\'notice-subtitle\'>\n                            <div class="notice-subtitle-content">\n                                <span>{{equipment.text2}}</span>\n                                <span>{{equipment.text3}}</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="left-img">\n                        <img src="assets/imgs/home/alarm_new.png" class="alarm-img" />\n                    </div>\n                    <div class="notice-line"></div>\n                </div>\n            </div> -->\n    </div>\n  </ng-container>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/global-search/global.search.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_home_service__["a" /* HomeService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */]])
    ], GlobalSearch);
    return GlobalSearch;
}());

//# sourceMappingURL=global.search.js.map

/***/ }),

/***/ 822:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LogList; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__new_log_new_log__ = __webpack_require__(823);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var LogList = /** @class */ (function () {
    function LogList(navCtrl) {
        this.navCtrl = navCtrl;
    }
    LogList.prototype.newLog = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__new_log_new_log__["a" /* NewLog */]);
    };
    LogList = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'log-list',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/log-list/log.list.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>运行日志</ion-title>\n        <ion-buttons end>\n            <button style="color: #fff">电站列表</button>\n        </ion-buttons>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <ion-list no-lines>\n        <ion-item-sliding>\n            <ion-item>\n                <div class="date">\n                    <p>22</p>\n                    <p></p>\n                    <p>2018-05</p>\n                </div>\n                <div class="time-status">\n                    <span class="time">日上网电量</span>\n                    <span>7600.00KWh</span>\n                    <span class="time t-right">天气</span>\n                    <span>晴</span>\n                </div>\n                <div class="time-status">\n                    <span class="time">月上网电量</span>\n                    <span>120000KWh</span>\n                    <span class="time t-right">创建人</span>\n                    <span>赵永建</span>\n                </div>\n            </ion-item>\n            <ion-item-options>\n                <button ion-button class="delete">删除</button>\n                <button ion-button class="modify">修改</button>\n            </ion-item-options>\n        </ion-item-sliding>\n    </ion-list>\n</ion-content>\n<ion-footer>\n    <button ion-button full (click) = "newLog()">新建日志</button>\n</ion-footer>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/log-list/log.list.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */]])
    ], LogList);
    return LogList;
}());

//# sourceMappingURL=log.list.js.map

/***/ }),

/***/ 823:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NewLog; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var NewLog = /** @class */ (function () {
    function NewLog(navCtrl) {
        this.navCtrl = navCtrl;
        this.showPage = 1;
    }
    Object.defineProperty(NewLog.prototype, "generating", {
        get: function () {
            return this.showPage == 1;
        },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(NewLog.prototype, "powerCut", {
        get: function () {
            return this.showPage == 2;
        },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(NewLog.prototype, "weather", {
        get: function () {
            return this.showPage == 3;
        },
        enumerable: false,
        configurable: true
    });
    ;
    /**
     * 下一页
     */
    NewLog.prototype.next = function () {
        if (this.showPage == 1) {
            console.log(1);
        }
        else if (this.showPage == 2) {
            console.log(2);
        }
        else if (this.showPage == 3) {
            console.log(3);
        }
        if (this.showPage + 1 > 3) {
            this.navCtrl.pop();
        }
        else {
            this.showPage += 1;
        }
    };
    /**
     * 上一页
     */
    NewLog.prototype.prev = function () {
        if (this.showPage - 1 < 1) {
            this.navCtrl.pop();
        }
        else {
            this.showPage -= 1;
        }
    };
    NewLog = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'new-log',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/new-log/new.log.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>运行日志</ion-title>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n  <div class="nl-title">\n    <div class="fadian">\n      <i></i>\n      <span>发电</span>\n    </div>\n    <div class="tingdian" [class.power-cut]="powerCut || weather">\n      <i [class.power-cut1]="powerCut || weather"></i>\n      <span>停电</span>\n    </div>\n    <div class="weather" [class.power-cut]="weather">\n      <i [class.power-cut1]="weather"></i>\n      <span>天气</span>\n    </div>\n  </div>\n  <!-- *************发电情况************-->\n  <ion-list no-lines *ngIf="generating">\n    <!-- <i [class.power-cut] = \'powerCut\' [class.weather] = \'weather\'></i> -->\n    <ion-item>\n      <ion-label>电表倍率</ion-label>\n      <ion-input item-end type="text" placeholder="输入电表倍率"></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label>当前并网装机容量（MW）</ion-label>\n      <ion-input item-end type="text" placeholder="输入容量"></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label>昨日计量表示值</ion-label>\n      <ion-note item-end>1</ion-note>\n    </ion-item>\n    <ion-item>\n      <ion-label>今日上网电量（KWh）</ion-label>\n      <ion-input item-end type="text" placeholder="输入电量"></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label>今日每MW上网电量（KWh）</ion-label>\n      <ion-input item-end type="text" placeholder="输入电量"></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label>今日最大负荷（KWh）</ion-label>\n      <ion-note item-end>1000</ion-note>\n    </ion-item>\n  </ion-list>\n  <!-- *************停电情况************-->\n  <ion-list no-lines *ngIf="powerCut">\n    <ion-item>停电情况</ion-item>\n    <textarea placeholder="输入停电情况"></textarea>\n    <ion-item>\n      <ion-label>约损失电量（KWh）</ion-label>\n      <ion-input item-end placeholder="输入电量"></ion-input>\n    </ion-item>\n  </ion-list>\n  <!-- *************天气情况************-->\n  <ion-list no-lines *ngIf="weather">\n    <ion-item>\n      <ion-label>日辐照量（MJ/㎡）</ion-label>\n      <ion-input item-end placeholder="输入辐照量"></ion-input>\n    </ion-item>\n    <button ion-item>\n      <ion-label>今日天气</ion-label>\n      <ion-note item-end>选择天气情况</ion-note>\n    </button>\n    <ion-item>\n      <ion-label>设备运行小时数</ion-label>\n      <ion-note item-end>1000</ion-note>\n    </ion-item>\n    <ion-item>\n      <ion-label>最高温度（℃）</ion-label>\n      <ion-input item-end placeholder="输入温度"></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label>最低温度（℃）</ion-label>\n      <ion-input item-end placeholder="输入温度"></ion-input>\n    </ion-item>\n    <button ion-item>\n      <ion-label>风向</ion-label>\n      <ion-note item-end>选择风向</ion-note>\n    </button>\n    <ion-item>\n      <ion-label>风速（m/s）</ion-label>\n      <ion-note item-end>1000</ion-note>\n    </ion-item>\n  </ion-list>\n</ion-content>\n<ion-footer>\n  <span (click)="prev()">{{ generating ? "取消" : "上一步" }}</span\n  ><span (click)="next()">{{ weather ? "保存" : "下一步" }}</span>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/new-log/new.log.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */]])
    ], NewLog);
    return NewLog;
}());

//# sourceMappingURL=new.log.js.map

/***/ }),

/***/ 824:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ToolPageV1; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tool_content_one__ = __webpack_require__(825);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__tool_content_two__ = __webpack_require__(826);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__models_material_condition__ = __webpack_require__(1257);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * 备件工具列表页面
*/
var ToolPageV1 = /** @class */ (function () {
    function ToolPageV1(navCtrl, navParms, popoverCtrl, materialService) {
        this.navCtrl = navCtrl;
        this.navParms = navParms;
        this.popoverCtrl = popoverCtrl;
        this.materialService = materialService;
        this.meterialCondition = new __WEBPACK_IMPORTED_MODULE_5__models_material_condition__["a" /* MeterialCondition */]();
        this.meterialCondition.classType = this.navParms.get('classType');
    }
    ToolPageV1.prototype.ionViewWillEnter = function () {
        var _this = this;
        this.materialService.getMeterial(this.meterialCondition).subscribe(function (e) {
            if (e && e['content'] && e['content'].length >= 0) {
                _this.meterials = e['content'];
                console.log(_this.meterials);
            }
        });
    };
    ToolPageV1.prototype.presentPopoverOne = function (type) {
        var _this = this;
        if (this.popover) {
            this.popover.dismiss();
            return;
        }
        this.popover = this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_2__tool_content_one__["a" /* ToolonePage */], { meterialCondition: this.meterialCondition, type: type }, { cssClass: 'tool-content-one' });
        this.popover.onWillDismiss(function (e) {
            if (e) {
                _this.meterialCondition = e;
                _this.ionViewWillEnter();
            }
            _this.popover = null;
        });
        this.popover.present();
    };
    ToolPageV1.prototype.presentPopoverTwo = function () {
        var _this = this;
        if (this.popover) {
            this.popover.dismiss();
            return;
        }
        this.popover = this.popoverCtrl.create(__WEBPACK_IMPORTED_MODULE_3__tool_content_two__["a" /* TooltwoPage */], { meterialCondition: this.meterialCondition }, { cssClass: 'tool-content-two' });
        this.popover.onWillDismiss(function (e) {
            if (e) {
                _this.meterialCondition = e;
                _this.ionViewWillEnter();
            }
            _this.popover = null;
        });
        this.popover.present();
    };
    ToolPageV1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-tool',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/tool-v1/tool.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      {{this.meterialCondition.classType==\'03\'?\'工具\':\'备件\'}}列表\n    </ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <ion-option>\n    <div class="top">\n      <div class="options options-diff" (click)="presentPopoverOne(\'CK\')">\n        <p>仓库</p>\n        <div class="box"></div>\n      </div>\n      <div class="options" (click)="presentPopoverOne(\'CLASS\')">\n        <p> {{this.meterialCondition.classType==\'03\'?\'工具\':\'备件\'}}类别</p>\n        <div class="box"></div>\n      </div>\n      <div class="options" (click)="presentPopoverOne(\'INVENTORY\')">\n        <p>库存类别</p>\n        <div class="box"></div>\n      </div>\n      <div class="options" (click)="presentPopoverTwo()">\n        <p>工具名称</p>\n        <div class="box"></div>\n      </div>\n    </div>\n  </ion-option>\n  <ion-list>\n    <div class="number" *ngFor=\'let meterial of meterials;let i = index\' [class.number-diff]=\'i%2 == 0\'>\n      <p>{{meterial.materialNo}}{{meterial.materialName}}</p>\n      <div class="massage">\n        <!-- <div></div> -->\n        <p>{{meterial.warehouseName}}</p>\n        <!-- <div class="massage-diff"></div> -->\n        <p>{{meterial.inventoryCateText}}</p>\n        <!-- <div class="massage-diff"></div> -->\n        <p>数量：<span>{{meterial.inventoryNum}}</span>{{meterial.unitText}}</p>\n      </div>\n      <div class="massage">\n        <p>{{meterial.materialSpec}}</p>\n        <p>{{meterial.materialDesc}}</p>\n        <p>{{meterial.companyName}}</p>\n      </div>\n      <!-- <div class="word"><p></p></div> -->\n    </div>\n    <!-- <div class="number">\n              <p>XXXXXXXXX（物料号）</p>\n              <div class="massage">\n                <div></div>\n                <p>仓库名称</p>\n                <div class="massage-diff"></div>\n                <p>库存类别</p>\n                <div class="massage-diff"></div>\n                <p>数量：<span>25</span>个</p>\n              </div>\n              <div class="word"><p>工具名称</p><span>工具名称工具</span></div>\n              <div class="word"><p>规格型号</p><span>规格型号规格型号规格型号规格型号规格型号工具名称工具名称工具名称</span></div>\n            </div> -->\n\n  </ion-list>\n\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/tool-v1/tool.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["t" /* PopoverController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_material_service__["a" /* MaterialService */]])
    ], ToolPageV1);
    return ToolPageV1;
}());

//# sourceMappingURL=tool.js.map

/***/ }),

/***/ 825:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ToolonePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_material_service__ = __webpack_require__(59);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ToolonePage = /** @class */ (function () {
    function ToolonePage(viewCtrl, navparams, materialService) {
        this.viewCtrl = viewCtrl;
        this.navparams = navparams;
        this.materialService = materialService;
        this.inventoryCates = [{ name: '正常库存', value: '01', select: false }, { name: '异常库存', value: '02', select: false }];
        this.meterialCondition = this.navparams.get('meterialCondition');
        this.type = this.navparams.get('type');
    }
    ToolonePage.prototype.ionViewWillEnter = function () {
        switch (this.type) {
            case 'CK':
                this.getWarehouse();
                break;
            case 'CLASS':
                this.getclassfications();
                break;
            case 'INVENTORY':
                if (this.meterialCondition.inventoryCates) {
                    for (var index = 0; index < this.inventoryCates.length; index++) {
                        var prop = this.inventoryCates[index];
                        prop['select'] = this.meterialCondition.inventoryCates.indexOf(prop['value']) > -1;
                    }
                }
                else {
                    this.inventoryCates = [{ name: '正常库存', value: '01', select: false }, { name: '异常库存', value: '02', select: false }];
                }
                break;
        }
    };
    /**
     * 仓库查询
     */
    ToolonePage.prototype.getWarehouse = function () {
        var _this = this;
        this.materialService.getWarehouse().subscribe(function (e) {
            if (e) {
                _this.warehouses = e;
                if (_this.meterialCondition.warehouseIds) {
                    for (var index = 0; index < e.length; index++) {
                        var prop = e[index];
                        prop['select'] = _this.meterialCondition.warehouseIds.indexOf(prop['warehouseId']) > -1;
                        _this.selectAllChildren(prop, _this.meterialCondition.warehouseIds, 'warehouseId');
                    }
                }
            }
            else {
                _this.warehouses = [];
            }
            console.log(e);
        });
    };
    ToolonePage.prototype.selectAllChildren = function (prop, stringArr, code) {
        if (prop && prop.children) {
            for (var _i = 0, _a = (prop.children || []); _i < _a.length; _i++) {
                var children = _a[_i];
                children['select'] = stringArr.indexOf(children[code]) > -1;
                this.selectAllChildren(children, stringArr, code);
            }
        }
    };
    /**
    * 工具备件类别
    */
    ToolonePage.prototype.getclassfications = function () {
        var _this = this;
        this.materialService.getclassfications(this.meterialCondition.classType).subscribe(function (e) {
            if (e) {
                _this.classfications = e;
                if (_this.meterialCondition.materialClasses) {
                    for (var index = 0; index < e.length; index++) {
                        var prop = e[index];
                        prop['select'] = _this.meterialCondition.materialClasses.indexOf(prop['classId']) > -1;
                        _this.selectAllChildren(prop, _this.meterialCondition.materialClasses, 'classId');
                    }
                }
            }
            else {
                _this.classfications = [];
            }
        });
    };
    ToolonePage.prototype.selectChildren = function (obj) {
        if (obj.children) {
            for (var _i = 0, _a = obj.children; _i < _a.length; _i++) {
                var children = _a[_i];
                children.select = obj.select;
                this.selectChildren(children);
            }
        }
    };
    ToolonePage.prototype.select = function (type, obj) {
        switch (type) {
            case 'ALL':
                obj.select = !obj.select;
                this.selectChildren(obj);
                break;
            case 'ONE':
                obj.select = !obj.select;
                break;
        }
    };
    ToolonePage.prototype.getChildrenId = function (obj, strings, idname) {
        if (obj && obj.children) {
            for (var _i = 0, _a = (obj.children || []); _i < _a.length; _i++) {
                var children = _a[_i];
                if (children['select']) {
                    strings = strings + children[idname] + ',';
                }
                strings = this.getChildrenId(children, strings, idname);
            }
        }
        return strings;
    };
    //获取选中仓库id
    ToolonePage.prototype.getWarehouseIds = function () {
        var warehouseIds = '';
        if (this.warehouses && this.warehouses.length > 0) {
            for (var index = 0; index < this.warehouses.length; index++) {
                var warehouse = this.warehouses[index];
                if (warehouse['select']) {
                    warehouseIds = warehouseIds + warehouse.warehouseId + ',';
                }
                warehouseIds = this.getChildrenId(warehouse, warehouseIds, 'warehouseId');
            }
        }
        if (warehouseIds) {
            warehouseIds = warehouseIds.slice(0, warehouseIds.length - 1);
        }
        else {
            warehouseIds = null;
        }
        return warehouseIds;
    };
    //获取选中工具备件类别Id
    ToolonePage.prototype.getMaterialClasses = function () {
        var materialClasses = '';
        if (this.classfications && this.classfications.length > 0) {
            for (var index = 0; index < this.classfications.length; index++) {
                var classfication = this.classfications[index];
                if (classfication['select']) {
                    materialClasses = materialClasses + classfication.classId + ',';
                }
                materialClasses = this.getChildrenId(classfication, materialClasses, 'classId');
            }
        }
        if (materialClasses) {
            materialClasses = materialClasses.slice(0, materialClasses.length - 1);
        }
        else {
            materialClasses = null;
        }
        return materialClasses;
    };
    //获取选中库存类别Id
    ToolonePage.prototype.getInventoryCates = function () {
        if (this.inventoryCates[0]['select']) {
            this.meterialCondition.inventoryCates;
        }
        var inventoryCates = '';
        if (this.inventoryCates && this.inventoryCates.length > 0) {
            for (var _i = 0, _a = this.inventoryCates; _i < _a.length; _i++) {
                var inventoryCate = _a[_i];
                if (inventoryCate['select']) {
                    inventoryCates = inventoryCates + inventoryCate['value'] + ',';
                }
            }
        }
        if (inventoryCates) {
            inventoryCates = inventoryCates.slice(0, inventoryCates.length - 1);
        }
        else {
            inventoryCates = null;
        }
        return inventoryCates;
    };
    ToolonePage.prototype.close = function () {
        switch (this.type) {
            case 'CK':
                //添加仓库条件
                this.meterialCondition.warehouseIds = this.getWarehouseIds();
                break;
            case 'CLASS':
                //添加工具备件类别条件
                this.meterialCondition.materialClasses = this.getMaterialClasses();
                break;
            case 'INVENTORY':
                //添加库存类别条件
                this.meterialCondition.inventoryCates = this.getInventoryCates();
                break;
        }
        this.viewCtrl.dismiss(this.meterialCondition);
    };
    ToolonePage.prototype.resetModel = function () {
        // this.ionViewWillEnter();
        switch (this.type) {
            case 'CK':
                this.unselectAll(this.warehouses);
                break;
            case 'CLASS':
                //添加工具备件类别条件
                this.unselectAll(this.classfications);
                break;
            case 'INVENTORY':
                //添加库存类别条件
                this.inventoryCates = [{ name: '正常库存', value: '01', select: false }, { name: '异常库存', value: '02', select: false }];
                break;
        }
    };
    ToolonePage.prototype.unselectAll = function (arrs) {
        if (arrs) {
            for (var _i = 0, arrs_1 = arrs; _i < arrs_1.length; _i++) {
                var obj = arrs_1[_i];
                obj.select = false;
                if (obj.children) {
                    this.unselectAll(obj.children);
                }
            }
        }
    };
    /**电站筛选 */
    ToolonePage.prototype.showStation = function (name) {
        if (this.stationName && this.stationName !== 0) {
            return name.indexOf(this.stationName) >= 0;
        }
        else {
            return true;
        }
    };
    ToolonePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            template: "\n    <div class = 'tool-content'>\n        <ion-list *ngIf = 'this.type == \"CK\"'>\n        <div class=\"find\">\n            <input placeholder=\"\u8F93\u5165\u7535\u7AD9\u540D\u79F0\u641C\u7D22\" [(ngModel)] = 'stationName'>\n        </div>\n            <ng-container *ngFor = 'let warehouse of warehouses;let i = index' [class.gar-color] = ' i%2 == 0'>\n            <div class=\"top\" *ngIf = 'showStation(warehouse.warehouseName)'>\n                <div class=\"art\" (click) = 'select(\"ALL\",warehouse)'>\n                    {{warehouse.warehouseName}}\n                    <div class=\"sure\">\n                        <ion-icon name=\"checkmark\"  *ngIf = 'warehouse.select'></ion-icon>\n                    </div>\n                </div>\n\n                <div  *ngFor = 'let children of (warehouse.children||[])'>\n                    <div class=\"artchoose\"  (click) = 'select(\"ALL\",children)'>\n                        {{children.warehouseName}}\n                        <div class=\"sure\">\n                            <ion-icon name=\"checkmark\"*ngIf = 'children.select'  ></ion-icon>\n                        </div>\n                    </div>\n\n                    <div *ngFor = 'let children1 of (children.children||[])'>\n                        <div class=\"artchoose third\"   (click) = 'select(\"ALL\",children1)'>\n                            {{children1.warehouseName}}\n                            <div class=\"sure\">\n                                <ion-icon name=\"checkmark\" *ngIf = 'children1.select' ></ion-icon>\n                            </div>\n                        </div>\n\n                        <div *ngFor = 'let children2 of (children1.children||[])'>\n                            <div class=\"artchoose fouth\"   (click) = 'select(\"ALL\",children2)'>\n                                {{children2.warehouseName}}\n                                <div class=\"sure\">\n                                    <ion-icon name=\"checkmark\" *ngIf = 'children2.select' ></ion-icon>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </ng-container>\n        </ion-list>\n\n        <ion-list  *ngIf = 'this.type == \"CLASS\"'>\n            <div class=\"top\" *ngFor = 'let classfication of (classfications||[]) ;let i = index'[class.gar-color] = ' i%2 == 1' >\n                <div class=\"art\" (click) = 'select(\"ALL\",classfication)'>\n                    {{classfication.className}}\n                    <div class=\"sure\">\n                        <ion-icon name=\"checkmark\"  *ngIf = 'classfication.select'></ion-icon>\n                    </div>\n                </div>\n\n                <div *ngFor = 'let children of (classfication.children||[])'>\n                    <div class=\"artchoose\"   (click) = 'select(\"ALL\",children)'>\n                        {{children.className}}\n                        <div class=\"sure\">\n                            <ion-icon name=\"checkmark\" *ngIf = 'children.select' ></ion-icon>\n                        </div>\n                    </div>\n\n                    <div *ngFor = 'let children1 of (children.children||[])'>\n                        <div class=\"artchoose third\"   (click) = 'select(\"ALL\",children1)'>\n                            {{children1.className}}\n                            <div class=\"sure\">\n                                <ion-icon name=\"checkmark\" *ngIf = 'children1.select' ></ion-icon>\n                            </div>\n                        </div>\n\n                        <div *ngFor = 'let children2 of (children1.children||[])'>\n                            <div class=\"artchoose fouth\"   (click) = 'select(\"ALL\",children2)'>\n                                {{children2.className}}\n                                <div class=\"sure\">\n                                    <ion-icon name=\"checkmark\" *ngIf = 'children2.select' ></ion-icon>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n        </ion-list>\n\n        <ion-list  *ngIf = 'this.type == \"INVENTORY\"'>\n            <div class=\"top\" *ngFor = 'let inventoryCate of inventoryCates ;let i = index' [class.gar-color] = ' i%2 == 1'>\n                <div class=\"art\" (click) = 'select(\"ALL\",inventoryCate)'>\n                    {{inventoryCate.name}}\n                    <div class=\"sure\"><ion-icon name=\"checkmark\"  *ngIf = 'inventoryCate.select' ></ion-icon> </div>\n                </div>\n            </div>\n        </ion-list>\n</div>\n<ion-footer>\n            <div class=\"bnt\">\n                <div class=\"bnt-left\" (click) = resetModel()>\u91CD\u7F6E</div>\n                <div class=\"bnt-left bnt-right\" (click) = 'close()'>\u786E\u5B9A</div>\n            </div>\n            </ion-footer>\n    "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__providers_material_service__["a" /* MaterialService */]])
    ], ToolonePage);
    return ToolonePage;
}());

//# sourceMappingURL=tool-content-one.js.map

/***/ }),

/***/ 826:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TooltwoPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var TooltwoPage = /** @class */ (function () {
    function TooltwoPage(viewCtrl, navParams) {
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.meterialCondition = this.navParams.get('meterialCondition');
        this.name = this.meterialCondition.name;
    }
    TooltwoPage.prototype.close = function () {
        this.meterialCondition.name = this.name;
        this.viewCtrl.dismiss(this.meterialCondition);
    };
    TooltwoPage.prototype.resetModel = function () {
        this.name = null;
    };
    TooltwoPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            template: "\n     <div class = 'tool-content'>\n        <ion-list>\n            <div class=\"find\">\n                <p>\u5DE5\u5177\u540D\u79F0</p>\n                <input placeholder=\"\u8BF7\u8F93\u5165\u5DE5\u5177\u540D\u79F0\u5173\u952E\u5B57\" [(ngModel)] = 'name'>\n            </div>\n        </ion-list>\n</div>\n<ion-footer>\n            <div class=\"bnt\">\n                <div class=\"bnt-left\" (click) = resetModel()>\u91CD\u7F6E</div>\n                <div class=\"bnt-left bnt-right\" (click) = 'close()'>\u786E\u5B9A</div>\n            </div>\n            </ion-footer>\n    "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* NavParams */]])
    ], TooltwoPage);
    return TooltwoPage;
}());

//# sourceMappingURL=tool-content-two.js.map

/***/ }),

/***/ 827:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CargoManage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__modal_check_warehouse_check_warehouse__ = __webpack_require__(351);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__modal_search_warehouse_search_warehouse__ = __webpack_require__(352);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__cargo_out_cargo_out__ = __webpack_require__(828);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__cargo_in_cargo_in__ = __webpack_require__(829);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var CargoManage = /** @class */ (function () {
    function CargoManage(navCtrl, modalCtrl) {
        this.navCtrl = navCtrl;
        this.modalCtrl = modalCtrl;
        this.kckind = false;
        this.wlkind = false;
    }
    //仓库筛选
    CargoManage.prototype.toWarehouse = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__modal_check_warehouse_check_warehouse__["a" /* CheckWarehouse */]);
    };
    //查找 TODO
    CargoManage.prototype.tomodal = function () {
        var searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_3__modal_search_warehouse_search_warehouse__["a" /* SearchWarehouse */], { type: "01" });
        searchModal.present();
    };
    //出库
    CargoManage.prototype.outPut = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__cargo_out_cargo_out__["a" /* CargoOut */]);
    };
    //入库
    CargoManage.prototype.inPut = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__cargo_in_cargo_in__["a" /* CargoIn */]);
    };
    //库存类别
    CargoManage.prototype.kctoggle = function () {
        this.kckind = !this.kckind;
        this.wlkind = false;
    };
    //物料类别
    CargoManage.prototype.wltoggle = function () {
        this.wlkind = !this.wlkind;
        this.kckind = false;
    };
    //弹框消失
    CargoManage.prototype.masktoggle = function () {
        this.wlkind = false;
        this.kckind = false;
    };
    CargoManage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'cargo-manage',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/cargo-manage/cargo-manage.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>物料</ion-title>\n    </ion-navbar>\n    <ion-icon name="search" class="search-icon" (click)=\'tomodal()\'></ion-icon>\n</ion-header>\n<ion-content>\n    <div class="sort-div-box">\n        <div class="sort-div" (click)="toWarehouse()">\n            <span class="sort_name">仓库筛选</span>\n            <span class="tirangle"></span>\n        </div>\n        <div class="sort-div" (click)="wltoggle()">\n            <span class="sort_name">物料类别</span>\n            <span class="tirangle"></span>\n        </div>\n        <div class="sort-div" (click)="kctoggle()">\n            <span class="sort_name">库存类别</span>\n            <span class="tirangle"></span>\n        </div>\n    </div>\n    <div class="mask" *ngIf="kckind||wlkind" (click)="masktoggle()"></div>\n    <div class="kucun-pop" *ngIf="kckind">\n        <ion-item>正常库存</ion-item>\n        <ion-item>异常库存</ion-item>\n    </div>\n    <div class="kucun-pop" *ngIf="wlkind">\n        <ion-item>物料类别1</ion-item>\n        <ion-item>物料类别2</ion-item>\n        <ion-item>物料类别3</ion-item>\n    </div>\n    <div>\n        <ion-list class="cango-list">\n            <ion-item-sliding #item>\n                <ion-item class="cango-item">\n                    <div class="wuliao-div">\n                        <span class="wl-name">物料名称</span>\n                        <span class="line1"></span>\n                        <span class="wl-num">料号KJ-0001</span>\n                    </div>\n                    <div class="wl-detail_box">\n                        <div class="wl-detail">所属仓库：仓库名称</div>\n                        <div class="wl-detail">规格型号：规格型号1</div>\n                        <div class="wl-detail">库存类别：\n                            <span class="color1">异常库存</span>\n                        </div>\n                        <div class="wl-detail">物料数量：2000件</div>\n                    </div>\n                </ion-item>\n                <ion-item-options>\n                    <button ion-button class="chrku" (click)="outPut()">出库</button>\n                    <button ion-button class="chrku chkco" (click)="inPut()">入库</button>\n                </ion-item-options>\n            </ion-item-sliding>\n        </ion-list>\n        <ion-list class="cango-list">\n            <ion-item-sliding #item>\n                <ion-item class="cango-item">\n                    <div class="wuliao-div">\n                        <span class="wl-name">物料名称</span>\n                        <span class="line1"></span>\n                        <span class="wl-num">料号KJ-0001</span>\n                    </div>\n                    <div class="wl-detail_box">\n                        <div class="wl-detail">所属仓库：仓库名称</div>\n                        <div class="wl-detail">规格型号：规格型号1</div>\n                        <div class="wl-detail">库存类别：\n                            <span class="color2">异常库存</span>\n                        </div>\n                        <div class="wl-detail">物料数量：2000件</div>\n                    </div>\n                </ion-item>\n                <ion-item-options>\n                    <button ion-button class="chrku">出库</button>\n                    <button ion-button class="chrku chkco">入库</button>\n                </ion-item-options>\n            </ion-item-sliding>\n        </ion-list>\n        <ion-list class="cango-list">\n            <ion-item-sliding #item>\n                <ion-item class="cango-item">\n                    <div class="wuliao-div">\n                        <span class="wl-name">物料名称</span>\n                        <span class="line1"></span>\n                        <span class="wl-num">料号KJ-0001</span>\n                    </div>\n                    <div class="wl-detail_box">\n                        <div class="wl-detail">所属仓库：仓库名称</div>\n                        <div class="wl-detail">规格型号：规格型号1</div>\n                        <div class="wl-detail">库存类别：\n                            <span class="color1">异常库存</span>\n                        </div>\n                        <div class="wl-detail">物料数量：2000件</div>\n                    </div>\n                </ion-item>\n                <ion-item-options>\n                    <button ion-button class="chrku">出库</button>\n                    <button ion-button class="chrku chkco">入库</button>\n                </ion-item-options>\n            </ion-item-sliding>\n        </ion-list>\n    </div>\n\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/cargo-manage/cargo-manage.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */]])
    ], CargoManage);
    return CargoManage;
}());

//# sourceMappingURL=cargo-manage.js.map

/***/ }),

/***/ 828:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CargoOut; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_components_util__ = __webpack_require__(179);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var CargoOut = /** @class */ (function () {
    function CargoOut(util, navCtrl) {
        this.util = util;
        this.navCtrl = navCtrl;
        this.outTime = new Date(new Date().getTime() + 8 * 60 * 60 * 1000).toISOString();
    }
    CargoOut.prototype.sort = function () {
        this.util.showPopupList({
            buttons: [
                {
                    text: '正常库存',
                    handler: function () {
                        console.log("正常库存");
                    }
                }, {
                    text: '异常库存',
                    handler: function () {
                        console.log("异常库存");
                    }
                }
            ]
        });
    };
    CargoOut.prototype.next = function () {
        console.log(this.outTime);
        // this.navCtrl.pop();
    };
    CargoOut = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'cargo-out',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/cargo-manage/cargo-out/cargo-out.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>出库</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <ion-list no-lines>\n        <div ion-item>\n            <ion-label>仓库名称</ion-label>\n            <div item-right class="gray">仓库名称不可编辑</div>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>出库类别</ion-label>\n            <div item-right class="gray">选择入库类别</div>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>出库时间</ion-label>\n            <ion-datetime cancelText=\'取消\' doneText="确定" displayFormat="YYYY-MM-DD HH:mm" [(ngModel)]="outTime"></ion-datetime>\n            <!-- <div item-right class="gray">2018-05-23 16:00</div> -->\n        </div>\n        <div ion-item>\n            <ion-label>库存类别</ion-label>\n            <div item-right class="gray">库存类别1</div>\n        </div>\n        <div ion-item>\n            <ion-label>物料类别</ion-label>\n            <div item-right class="gray">物料类别1</div>\n        </div>\n        <div ion-item>\n            <ion-label>数量</ion-label>\n            <ion-input class="rinhtInput"  placeholder="输入数量"></ion-input>\n        </div>\n        <div ion-item>\n            <ion-label>单位</ion-label>\n            <ion-input class="rinhtInput" placeholder="单位"></ion-input>\n        </div>\n        <ion-item class="textarea">\n            <ion-label class="textareaTitle" stacked>说明</ion-label>\n            <ion-textarea placeholder="不超过100字"></ion-textarea>\n        </ion-item>\n    </ion-list>\n    <div class="buttons">\n        <div class="buttonfull"   (click)="next()">取消</div>\n        <div class="buttonfull blue"   (click)="next()">确定</div>\n    </div>\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/cargo-manage/cargo-out/cargo-out.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__util_components_util__["a" /* ComponentsUtil */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */]])
    ], CargoOut);
    return CargoOut;
}());

//# sourceMappingURL=cargo-out.js.map

/***/ }),

/***/ 829:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CargoIn; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_components_util__ = __webpack_require__(179);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var CargoIn = /** @class */ (function () {
    function CargoIn(util, navCtrl) {
        this.util = util;
        this.navCtrl = navCtrl;
        this.showBlack = false; //库存类别
        this.cargoSort = "选择库存类别";
        this.myDate = {};
        // this.myDate.time = new Date(new Date().getTime()+8*60*60*1000).toISOString();
        this.myDate.time = new Date().toISOString();
    }
    CargoIn.prototype.sort = function () {
        var that = this;
        this.util.showPopupList({
            buttons: [
                {
                    text: '正常库存',
                    handler: function () {
                        console.log("正常库存");
                        that.cargoSort = '正常库存';
                        that.showBlack = true;
                    }
                }, {
                    text: '异常库存',
                    handler: function () {
                        console.log("异常库存");
                        that.cargoSort = '异常库存';
                        that.showBlack = true;
                    }
                }
            ]
        });
    };
    CargoIn.prototype.changeTime = function () {
        this.myDate = new Date(new Date().getTime() + 8 * 60 * 60 * 1000).toISOString();
    };
    CargoIn.prototype.next = function () {
        this.navCtrl.pop();
    };
    CargoIn = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'cargo-in',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/cargo-manage/cargo-in/cargo-in.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>入库</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <ion-list no-lines>\n        <div ion-item>\n            <ion-label>仓库名称</ion-label>\n            <ion-input class="rinhtInput"  placeholder="输入仓库名称"></ion-input>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>入库类别</ion-label>\n            <div item-right class="gray">选择入库类别</div>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>入库时间</ion-label>\n            <ion-datetime cancelText=\'取消\' doneText="确定" placeholder="请选择入库时间" displayFormat="YYYY-MM-DD HH:mm" [(ngModel)]="myDate.time"></ion-datetime>\n            <!-- <div item-right class="gray">2018-05-23 16:00</div> -->\n        </div>\n        <div ion-item detail-push (click)="sort()">\n            <ion-label>库存类别</ion-label>\n            <div item-right class="gray" [class.black]=\'showBlack\'>{{cargoSort}}</div>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>物料类别</ion-label>\n            <div item-right class="gray">选择物料类别</div>\n        </div>\n        <div ion-item>\n            <ion-label>数量</ion-label>\n            <ion-input class="rinhtInput"  placeholder="输入数量"></ion-input>\n        </div>\n        <div ion-item>\n            <ion-label>单位</ion-label>\n            <ion-input class="rinhtInput" item-end placeholder="单位"></ion-input>\n        </div>\n        <ion-item class="textarea">\n            <ion-label class="textareaTitle" stacked>说明</ion-label>\n            <ion-textarea placeholder="不超过100字"></ion-textarea>\n        </ion-item>\n    </ion-list>\n    <div class="buttons">\n        <div class="buttonfull"   (click)="next()">取消</div>\n        <div class="buttonfull blue"   (click)="next()">确定</div>\n    </div>\n    \n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/cargo-manage/cargo-in/cargo-in.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__util_components_util__["a" /* ComponentsUtil */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */]])
    ], CargoIn);
    return CargoIn;
}());

//# sourceMappingURL=cargo-in.js.map

/***/ }),

/***/ 830:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NoticeList; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__notice_details_notice_details__ = __webpack_require__(831);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var NoticeList = /** @class */ (function () {
    function NoticeList(navCtrl) {
        this.navCtrl = navCtrl;
    }
    NoticeList.prototype.noticeDetails = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__notice_details_notice_details__["a" /* NoticeDetails */]);
    };
    NoticeList = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'notice-list',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/notice-list/notice.list.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>公告</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <div class="notice-list" (click)="noticeDetails()">\n        <div class="time">\n            <p>22</p>\n            <p></p>\n            <p>2018-05</p>\n        </div>\n        <div class="notice">\n            <p>公告标题公告标题公告标题公告标题</p>\n            <div>简要信息简要信息简要信息简要信息简要信息简要信息简要信息简要信息简要信息简要信息简要信息简要信息</div>\n        </div>\n    </div>\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/notice-list/notice.list.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */]])
    ], NoticeList);
    return NoticeList;
}());

//# sourceMappingURL=notice.list.js.map

/***/ }),

/***/ 831:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NoticeDetails; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var NoticeDetails = /** @class */ (function () {
    function NoticeDetails() {
    }
    NoticeDetails = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'notice-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/notice-details/notice.details.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>公告详情</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <div class="not-detai">\n        <div class="n-title">\n            公告标题公告标题公告标题公告标题\n        </div>\n        <span>2018-05-03</span>        \n        <p>\n            公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容公告正文内容\n        </p>\n        <div class="attachment ">\n            <div>\n                <img src="assets/imgs/operations/wenjian.png" class="att-img"/>\n                <a href="www.baidu.com/">附件名称下载</a>\n            </div>\n            <div>\n                <img src="assets/imgs/operations/wenjian.png" class="att-img"/>\n                <a href="www.baidu.com/">附件名称下载</a>\n            </div>\n            <div>\n                <img src="assets/imgs/operations/wenjian.png" class="att-img"/>\n                <a href="www.baidu.com/">附件名称下载</a>\n            </div>\n        </div>\n    </div>\n\n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/notice-details/notice.details.html"*/
        }),
        __metadata("design:paramtypes", [])
    ], NoticeDetails);
    return NoticeDetails;
}());

//# sourceMappingURL=notice.details.js.map

/***/ }),

/***/ 832:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OperateTask; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var OperateTask = /** @class */ (function () {
    function OperateTask(navCtrl) {
        this.navCtrl = navCtrl;
        this.qxkind = false;
        this.qxstate = false;
        this.others = false;
        this.heroes = [];
        this.heroes = [
            { name: '土建类', id: 1, checked: false },
            { name: '安装类', id: 2, checked: false },
            { name: '施工、设备类', id: 3, checked: false },
            { name: '施工类', id: 4, checked: false },
            { name: '清洗系统', id: 5, checked: false },
            { name: '设别类', id: 6, checked: false }
        ];
    }
    //电站筛选
    OperateTask.prototype.toPowerStation = function () {
        // this.navCtrl.push(PowerStation);
    };
    //缺陷类别
    OperateTask.prototype.qxkindtoggle = function () {
        this.qxkind = !this.qxkind;
        this.qxstate = false;
        this.others = false;
    };
    //物料类别
    OperateTask.prototype.qxstatetoggle = function () {
        this.qxstate = !this.qxstate;
        this.qxkind = false;
        this.others = false;
    };
    //其他
    OperateTask.prototype.othertoggle = function () {
        this.others = !this.others;
        this.qxkind = false;
        this.qxstate = false;
    };
    //弹框消失
    OperateTask.prototype.masktoggle = function () {
        this.qxkind = false;
        this.qxstate = false;
        this.others = false;
    };
    OperateTask.prototype.checkCraft = function (id) {
        for (var i = 0; i < this.heroes.length; i++) {
            if (this.heroes[i].id == id) {
                this.heroes[i].checked = !this.heroes[i].checked;
            }
        }
    };
    OperateTask = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'defect-manage',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/operate-task/operate-task.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>运维任务</ion-title>\n    </ion-navbar>\n    <ion-icon name="search" class="search-icon "></ion-icon>\n</ion-header>\n\n<ion-content>\n    <div class="sort-div-box">\n        <div class="sort-div" (click)="toPowerStation()">\n            <span class="sort_name">电站筛选</span>\n            <span class="tirangle"></span>\n        </div>\n        <div class="sort-div" (click)="qxkindtoggle()">\n            <span class="sort_name">任务类型</span>\n            <span class="tirangle"></span>\n        </div>\n        <div class="sort-div" (click)="qxstatetoggle()">\n            <span class="sort_name">任务状态</span>\n            <span class="tirangle"></span>\n        </div>\n        <div class="sort-div" (click)="othertoggle()">\n            <span class="sort_name">其他条件</span>\n            <span class="tirangle"></span>\n        </div>\n    </div>\n    <div class="mask" *ngIf="qxkind||qxstate||others" (click)="masktoggle()"></div>\n    <div class="kucun-pop" *ngIf="qxkind">\n        <ion-item>任务类型1</ion-item>\n        <ion-item>任务类型2</ion-item>\n    </div>\n    <div class="kucun-pop" *ngIf="qxstate">\n        <ion-item>待分配</ion-item>\n        <ion-item>带执行</ion-item>\n        <ion-item>已完成</ion-item>\n    </div>\n    <div class="other-pop" *ngIf="others">\n        <div class="other-title">\n            <span class="line1"></span>\n            <span class="title1">工艺类型</span>\n            <span class="line1"></span>\n        </div>\n        <div class="craft-div-box">\n            <div\n                class="craft-div"\n                [class.active]="hero.checked"\n                *ngFor="let hero of heroes"\n                (click)="checkCraft(hero.id)"\n            >\n                {{hero.name}}\n            </div>\n            <!-- <div class="craft-div active">土建类</div>\n            <div class="craft-div">安装类</div>\n            <div class="craft-div">施工、设备类</div>\n            <div class="craft-div">施工类</div>\n            <div class="craft-div">清洗系统</div>\n            <div class="craft-div">设别类</div> -->\n        </div>\n        <div class="other-title">\n            <span class="line1"></span>\n            <span class="title1">设备类型</span>\n            <span class="line1"></span>\n        </div>\n        <div class="craft-div-box">\n            <div class="device-div active">SVG</div>\n            <div class="device-div">一次</div>\n            <div class="device-div">供水系统</div>\n            <div class="device-div">光伏区</div>\n            <div class="device-div">光功率预测</div>\n            <div class="device-div">分站房</div>\n            <div class="device-div">后台</div>\n            <div class="device-div">土建</div>\n            <div class="device-div">开关柜</div>\n            <div class="device-div">开关站</div>\n            <div class="device-div">汇流箱</div>\n            <div class="device-div">箱变</div>\n        </div>\n        <div class="other-title">\n            <span class="line1"></span>\n            <span class="title1">其他</span>\n            <span class="line1"></span>\n        </div>\n        <div class="input-div">\n            <span class="title2">负责人</span>\n            <input type="text" class="input1" />\n        </div>\n        <div class="input-div">\n            <span class="title2">报告时间</span>\n            <ion-item class="date-box">\n                <ion-datetime displayFormat="MM/D" cancelText="取消" doneText="确定"></ion-datetime>\n            </ion-item>\n            <span class="date-line"></span>\n            <ion-item class="date-box">\n                <ion-datetime displayFormat="MM/D" cancelText="取消" doneText="确定"></ion-datetime>\n            </ion-item>\n        </div>\n        <div class="button1-box">\n            <div class="button1">清空</div>\n            <div class="button1" style="background: #5daee5;color: #fff;">确定</div>\n        </div>\n    </div>\n\n    <div>\n        <ion-list class="cango-list">\n            <ion-item-sliding #item>\n                <ion-item class="cango-item">\n                    <div class="wuliao-div">\n                        <span class="wl-name">任务名称</span>\n                    </div>\n                    <div class="wl-detail_box">\n                        <div class="wl-detail">提报时间：2018-05-23 14:00</div>\n                        <div class="wl-detail">\n                            缺陷状态：\n                            <span class="color2">待分配</span>\n                        </div>\n                        <div class="wl-detail">任务类型：巡检</div>\n                        <div class="wl-detail">执行人：李建国</div>\n                    </div>\n                </ion-item>\n                <ion-item-options>\n                    <button ion-button class="chrku">删除</button>\n                    <button ion-button class="chrku chkco">修改</button>\n                </ion-item-options>\n            </ion-item-sliding>\n        </ion-list>\n        <ion-list class="cango-list">\n            <ion-item-sliding #item>\n                <ion-item class="cango-item">\n                    <div class="wuliao-div">\n                        <span class="wl-name">任务名称</span>\n                    </div>\n                    <div class="wl-detail_box">\n                        <div class="wl-detail">提报时间：2018-05-23 14:00</div>\n                        <div class="wl-detail">\n                            缺陷状态：\n                            <span class="color4">已完成</span>\n                        </div>\n                        <div class="wl-detail">任务类型：巡检</div>\n                        <div class="wl-detail">执行人：李建国</div>\n                    </div>\n                </ion-item>\n                <ion-item-options>\n                    <button ion-button class="chrku">删除</button>\n                    <button ion-button class="chrku chkco">修改</button>\n                </ion-item-options>\n            </ion-item-sliding>\n        </ion-list>\n        <ion-list class="cango-list">\n            <ion-item-sliding #item>\n                <ion-item class="cango-item">\n                    <div class="wuliao-div">\n                        <span class="wl-name">任务名称</span>\n                    </div>\n                    <div class="wl-detail_box">\n                        <div class="wl-detail">提报时间：2018-05-23 14:00</div>\n                        <div class="wl-detail">\n                            缺陷状态：\n                            <span class="color1">待执行</span>\n                        </div>\n                        <div class="wl-detail">任务类型：巡检</div>\n                        <div class="wl-detail">执行人：李建国</div>\n                    </div>\n                </ion-item>\n                <ion-item-options>\n                    <button ion-button class="chrku">删除</button>\n                    <button ion-button class="chrku chkco">修改</button>\n                </ion-item-options>\n            </ion-item-sliding>\n        </ion-list>\n        <ion-list class="cango-list">\n            <ion-item-sliding #item>\n                <ion-item class="cango-item">\n                    <div class="wuliao-div">\n                        <span class="wl-name">任务名称</span>\n                    </div>\n                    <div class="wl-detail_box">\n                        <div class="wl-detail">提报时间：2018-05-23 14:00</div>\n                        <div class="wl-detail">\n                            缺陷状态：\n                            <span class="color2">待分配</span>\n                        </div>\n                        <div class="wl-detail">任务类型：巡检</div>\n                        <div class="wl-detail">执行人：李建国</div>\n                    </div>\n                </ion-item>\n                <ion-item-options>\n                    <button ion-button class="chrku">删除</button>\n                    <button ion-button class="chrku chkco">修改</button>\n                </ion-item-options>\n            </ion-item-sliding>\n        </ion-list>\n    </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/operate-task/operate-task.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */]])
    ], OperateTask);
    return OperateTask;
}());

//# sourceMappingURL=operate-task.js.map

/***/ }),

/***/ 833:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return QrResultBarPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__operations_repair_ticket_details_repair_ticket_details__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__operations_repair_ticket_repair_ticket__ = __webpack_require__(130);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__operations_defect_management_defect_management__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__device_archive_device_archive__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__device_topo_device_topo__ = __webpack_require__(819);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__device_doc_device_doc__ = __webpack_require__(818);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__home_equipment_message_equipment_message__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__operations_defect_management_details_defect_management_details__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__operations_inventoris_inventoris__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__operations_inspections_inspections__ = __webpack_require__(126);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












/**
 * Generated class for the QrResultBarPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var QrResultBarPage = /** @class */ (function () {
    function QrResultBarPage(navCtrl, navParams, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
    }
    QrResultBarPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad QrResultBarPage');
        this.info = this.navParams.get('info');
    };
    QrResultBarPage.prototype.goLink = function (id) {
        var data = null;
        switch (id) {
            // "运行监视"
            case 'APP_DEVICE_MONITOR':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_8__home_equipment_message_equipment_message__["a" /* EquipmentMessage */],
                    params: {
                        deviceId: this.info.deviceId,
                    },
                };
                break;
            // "设备档案"
            case 'APP_DEVICE_ARCHIVE':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_3__device_archive_device_archive__["a" /* DeviceArchivePage */],
                    params: {
                        deviceId: this.info.deviceId,
                    },
                };
                break;
            // "设备连接"
            case 'APP_DEVICE_CONNECT':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_6__device_topo_device_topo__["a" /* DeviceTopoPage */],
                    params: {
                        deviceId: this.info.deviceId,
                        deviceName: this.info.deviceName,
                    },
                };
                break;
            // "设备文档"
            case 'APP_DEVICE_DOC':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_7__device_doc_device_doc__["a" /* DeviceDocPage */],
                    params: {
                        deviceId: this.info.deviceId,
                        deviceName: this.info.deviceName,
                    },
                };
                break;
            // "设备缺陷"
            case 'APP_DEFECT':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_2__operations_defect_management_defect_management__["a" /* DefectManagementPage */],
                    params: {
                        equipment: {
                            deviceId: this.info.deviceId,
                            deviceName: this.info.deviceName,
                        },
                        stationId: this.info.stationId,
                        stationName: this.info.stationName,
                    },
                };
                break;
            // "新增缺陷"
            case 'APP_DEFECT_ADD':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_9__operations_defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */],
                    params: {
                        deviceId: this.info.deviceId,
                    },
                };
                break;
            // 备品备件
            case 'APP_MATERIAL':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_10__operations_inventoris_inventoris__["a" /* InventorisPage */],
                    params: {
                        equipment: {
                            deviceId: this.info.deviceId,
                            deviceName: this.info.deviceName,
                        },
                        stationId: this.info.stationId,
                        stationName: this.info.stationName,
                    },
                };
                break;
            // "设备抢修单"
            case 'APP_OP_REPAIR':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_1__operations_repair_ticket_repair_ticket__["a" /* RepairTicketPage */],
                    params: {
                        equipment: {
                            deviceId: this.info.deviceId,
                            deviceName: this.info.deviceName,
                        },
                        stationId: this.info.stationId,
                        stationName: this.info.stationName,
                    },
                };
                break;
            // "新增抢修单"
            case 'APP_OP_REPAIR_ADD':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_0__operations_repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */],
                    params: {
                        deviceId: this.info.deviceId,
                    },
                };
                break;
            // "巡视检查"
            case 'APP_INSPECTION':
                data = {
                    page: __WEBPACK_IMPORTED_MODULE_11__operations_inspections_inspections__["a" /* InspectionsPage */],
                    params: {
                        equipment: {
                            deviceId: this.info.deviceId,
                            deviceName: this.info.deviceName,
                        },
                        stationId: this.info.stationId,
                        stationName: this.info.stationName,
                    },
                };
                break;
            //"检修预试"
            case 'APP_CHECKTEST':
                break;
            // "关联物料"
            case 'APP_MATERIAL':
                break;
            default:
                break;
        }
        this.viewCtrl.dismiss(data);
    };
    QrResultBarPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["Component"])({
            selector: 'page-qr-result-bar',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/qr-result-bar/qr-result-bar.html"*/'<!--\n  Generated template for the QrResultBarPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n    <div class="station-name">\n        {{info?.stationName}}\n    </div>\n    <div class="device-name">\n        {{info?.deviceName}}\n    </div>\n    <ion-grid>\n        <ion-row>\n            <ng-container *ngFor="let item of info?.modules">\n                <ion-col *ngIf="item.show" col-3 (click)="goLink(item.id)">\n                    <ion-img\n                        style="width: 40px; height: 40px;"\n                        src="assets/imgs/module/{{item.icon}}"\n                    ></ion-img>\n                    <p>{{item.name}}</p>\n                </ion-col>\n            </ng-container>\n        </ion-row>\n    </ion-grid>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/qr-result-bar/qr-result-bar.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular__["w" /* ViewController */]])
    ], QrResultBarPage);
    return QrResultBarPage;
}());

//# sourceMappingURL=qr-result-bar.js.map

/***/ }),

/***/ 834:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModulesNewPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var ModulesNewPage = /** @class */ (function () {
    function ModulesNewPage() {
    }
    ModulesNewPage.prototype.ionViewWillEnter = function () {
    };
    ModulesNewPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-modules-new',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-new.html"*/'<ion-header>\n  <ion-navbar>\n    <!-- <ion-buttons start >\n        <button  (click)= \'goBack()\'>\n            <ion-icon name="ios-arrow-back" class = \'my-back\' ></ion-icon>\n        </button>\n    </ion-buttons> -->\n    <ion-title>全部功能</ion-title>\n    <!-- <ion-buttons end>\n        <button (click) = \'serchMenu()\'>\n            <img src="assets/imgs/home/search.png" class="scan"/>\n        </button>\n    </ion-buttons> -->\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <homepage2-modules></homepage2-modules>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/modules-details/modules-new.html"*/
        })
        /**
         *
         */
        ,
        __metadata("design:paramtypes", [])
    ], ModulesNewPage);
    return ModulesNewPage;
}());

//# sourceMappingURL=modules-new.js.map

/***/ }),

/***/ 835:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NewLog_old; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_runlog_req__ = __webpack_require__(1258);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_runlog_service__ = __webpack_require__(133);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular_navigation_nav_params__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_ionic_angular_components_action_sheet_action_sheet_controller__ = __webpack_require__(190);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_util_constants_service__ = __webpack_require__(353);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__common_deviceModel_device_model__ = __webpack_require__(350);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var NewLog_old = /** @class */ (function () {
    function NewLog_old(navCtrl, runLogService, navParams, mutilService, actionsheetCtrl, events, constantsService) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.runLogService = runLogService;
        this.navParams = navParams;
        this.mutilService = mutilService;
        this.actionsheetCtrl = actionsheetCtrl;
        this.events = events;
        this.constantsService = constantsService;
        this.ders = [
            { value: "NE", name: "东北" },
            { value: "ENE", name: "东东北" },
            { value: "E", name: "东" },
            { value: "ESE", name: "东东南" },
            { value: "SE", name: "东南" },
            { value: "SSE", name: "南东南" },
            { value: "S", name: "南" },
            { value: "SSW", name: "南西南" },
            { value: "SW", name: "西南" },
            { value: "WSW", name: "西西南" },
            { value: "W", name: "西" },
            { value: "WNW", name: "西西北" },
            { value: "NW", name: "西北" },
            { value: "NNW", name: "北西北" },
            { value: "N", name: "北" },
            { value: "NNE", name: "北东北" }
        ];
        this.runlogReq = new __WEBPACK_IMPORTED_MODULE_2__models_runlog_req__["a" /* RunlogReq */]();
        this.showPage = 1;
        this.station = this.navParams.get("station");
        this.events.subscribe("deviceModelSelect", function (e) {
            if (e) {
                _this.loadFlag = true;
                _this.runlogReq.jobRecordLosses[e.index]["deviceName"] = e.deviceName;
                _this.runlogReq.jobRecordLosses[e.index]["deviceId"] = e.deviceId;
            }
        });
    }
    NewLog_old.prototype.ionViewWillEnter = function () {
        var _this = this;
        if (!this.loadFlag) {
            this.runLogService
                .prevLogDetail(this.station.stationId, new Date().toISOString())
                .subscribe(function (e) {
                _this.yesterdayMsg = e;
                console.log(e);
                _this.runlogReq = new __WEBPACK_IMPORTED_MODULE_2__models_runlog_req__["a" /* RunlogReq */]();
                _this.initGeneratingValue(e);
            });
        }
    };
    Object.defineProperty(NewLog_old.prototype, "generating", {
        get: function () {
            return this.showPage == 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(NewLog_old.prototype, "powerCut", {
        get: function () {
            return this.showPage == 2;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(NewLog_old.prototype, "weather", {
        get: function () {
            return this.showPage == 3;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * 下一页
     */
    NewLog_old.prototype.next = function () {
        if (this.showPage == 1 && this.firstVerification() !== true) {
            //验证第一页数据是否正确
            console.log(this.firstVerification() + "不能为空");
            this.mutilService.customAlert({
                msg: this.firstVerification() + "不能为空"
            });
            return;
        }
        else if (this.showPage == 2 && this.secondVerification() !== true) {
            //验证第二页数据是否正确
            console.log(this.secondVerification() + "不能为空");
            this.mutilService.customAlert({
                msg: this.secondVerification() + "不能为空"
            });
            return;
        }
        else if (this.showPage == 3 && this.thirdVerification() !== true) {
            //验证第三页数据是否正确
            console.log(this.thirdVerification() + "不能为空");
            this.mutilService.customAlert({
                msg: this.thirdVerification() + "不能为空"
            });
            return;
        }
        if (this.showPage + 1 > 3) {
            this.add();
            // this.navCtrl.pop();
        }
        else {
            this.showPage = this.showPage + 1;
        }
    };
    /**
     * 上一页
     */
    NewLog_old.prototype.prev = function () {
        if (this.showPage - 1 < 1) {
            this.navCtrl.pop();
        }
        else {
            this.showPage = this.showPage - 1;
        }
    };
    NewLog_old.prototype.add = function () {
        var _this = this;
        this.runLogService.addLog(this.runlogReq).subscribe(function (e) {
            _this.events.publish("RunLogUpdate", e);
            _this.navCtrl.pop();
            // console.log(e)
        });
    };
    // 初始化第一页数据默认值
    NewLog_old.prototype.initGeneratingValue = function (e) {
        this.runlogReq.stationId = this.station.stationId;
        this.runlogReq.meterRatio =
            (e && e["lastJobRecord"] && e["lastJobRecord"]["meterRatio"]) || 1; // 电表倍率 （默认上一条数据）
        this.runlogReq.parallelCapacity =
            (e && e["lastJobRecord"] && e["lastJobRecord"]["parallelCapacity"]) || 1; // 当前并网装机容量(MW) （默认上一条数据）
        this.runlogReq.meterValue =
            (e && e["lastJobRecord"] && e["lastJobRecord"]["meterValue"]) || 0; // 今日计量表示值（默认上一条数据）
        this.runlogReq.genHoursFine = 0;
        this.runlogReq.genHoursPcloud = 0;
        this.runlogReq.genHoursCloudy = 0;
        this.runlogReq.genHoursWet = 0;
        this.runlogReq.genHoursRain = 0;
        this.runlogReq.genHours =
            this.runlogReq.genHoursFine +
                this.runlogReq.genHoursPcloud +
                this.runlogReq.genHoursCloudy +
                this.runlogReq.genHoursWet +
                this.runlogReq.genHoursRain;
        this.runlogReq.recordType = "01";
        this.runlogReq.windDirection = "0";
        this.runlogReq.reportDate = new Date().toISOString();
        this.runlogReq.jobRecordLosses = [];
    };
    /***************************************************************************** 页面展示值 *************************************/
    NewLog_old.prototype.meterValueChange = function () {
        this.runlogReq.dailyEnergy =
            (this.runlogReq.meterValue - this.getYesterdayMeterValue) *
                this.runlogReq.meterRatio;
    };
    Object.defineProperty(NewLog_old.prototype, "getYesterdayMeterValue", {
        //昨日计量表示值（默认上一条数据）
        get: function () {
            return ((this.yesterdayMsg &&
                this.yesterdayMsg["lastJobRecord"] &&
                this.yesterdayMsg["lastJobRecord"]["meterValue"]) ||
                0);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(NewLog_old.prototype, "getDailyEnergy", {
        //今日上网电量(KWh)
        get: function () {
            return ((this.runlogReq.meterValue - this.getYesterdayMeterValue) *
                this.runlogReq.meterRatio);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(NewLog_old.prototype, "getDailyEnergyMW", {
        //今日每MW上网电量(KWh)
        get: function () {
            return ((this.getDailyEnergy &&
                this.getDailyEnergy / this.runlogReq.parallelCapacity) ||
                0);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(NewLog_old.prototype, "getMouthEnergy", {
        //本月上网电量(KWh)
        get: function () {
            return (parseFloat((this.yesterdayMsg && this.yesterdayMsg["monthEnergy"]) || 0) +
                this.getDailyEnergy || 0);
        },
        enumerable: false,
        configurable: true
    });
    NewLog_old.prototype.getWindDirection = function () {
        for (var _i = 0, _a = this.ders; _i < _a.length; _i++) {
            var dir = _a[_i];
            if (this.runlogReq.windDirection == dir["value"]) {
                return dir["name"];
            }
        }
        this.runlogReq.windDirection = this.ders[0]["value"];
        return (this.runlogReq.windDirection = this.ders[0]["name"]);
    };
    NewLog_old.prototype.updateGenHours = function () {
        this.runlogReq.genHours =
            0 +
                this.toNumber(this.runlogReq.genHoursFine) +
                this.toNumber(this.runlogReq.genHoursPcloud) +
                this.toNumber(this.runlogReq.genHoursCloudy) +
                this.toNumber(this.runlogReq.genHoursWet) +
                this.toNumber(this.runlogReq.genHoursRain);
    };
    NewLog_old.prototype.toNumber = function (x) {
        if (typeof x === "number") {
            return x;
        }
        else {
            return parseFloat(x);
        }
    };
    /***************************************************************************** 结束 ****************************************************/
    //验证第一页数据是否正确
    NewLog_old.prototype.firstVerification = function () {
        if (!this.runlogReq.meterRatio ||
            this.decimalNum(parseInt(this.runlogReq.meterRatio.toString())) != 0) {
            return "电表倍率";
        }
        if (!this.runlogReq.parallelCapacity ||
            this.decimalNum(this.runlogReq.parallelCapacity) > 6) {
            return "当前并网装机容量";
        }
        if (this.runlogReq.meterValue &&
            this.decimalNum(this.runlogReq.meterValue) > 2) {
            return "今日计量表示值";
        }
        if (this.runlogReq.maxPower &&
            this.decimalNum(this.runlogReq.maxPower) == 9999) {
            return "今日最大负荷";
        }
        return true;
    };
    //验证第二页数据是否正确
    NewLog_old.prototype.secondVerification = function () {
        if (this.runlogReq.jobRecordLosses &&
            this.runlogReq.jobRecordLosses.length > 0) {
            var now = new Date();
            var date = now.getFullYear() + "-" + (now.getMonth() + 1) + "-" + now.getDate();
            for (var _i = 0, _a = this.runlogReq.jobRecordLosses; _i < _a.length; _i++) {
                var jobRecordLoss = _a[_i];
                if (!jobRecordLoss.lossType) {
                    return "损失类别";
                }
                if (!jobRecordLoss.start_time) {
                    return "停电开始时间";
                }
                else {
                    jobRecordLoss.startTime = new Date(date + " " + jobRecordLoss.start_time);
                }
                if (jobRecordLoss.end_time) {
                    jobRecordLoss.endTime = new Date(date + " " + jobRecordLoss.end_time);
                }
                if (!jobRecordLoss.lossEnergy ||
                    (jobRecordLoss.lossEnergy &&
                        this.decimalNum(jobRecordLoss.lossEnergy) > 4)) {
                    return "约损失电量";
                }
            }
        }
        return true;
    };
    //验证第三页数据是否正确
    NewLog_old.prototype.thirdVerification = function () {
        if (this.runlogReq.irradiation &&
            this.decimalNum(this.runlogReq.irradiation) > 2) {
            return "日辐照量";
        }
        if (!this.runlogReq.weatherInfo ||
            this.runlogReq.weatherInfo.length > 100) {
            return "今日天气";
        }
        if (this.runlogReq.maxTemp && this.decimalNum(this.runlogReq.maxTemp) > 2) {
            return "最高温度";
        }
        if (this.runlogReq.minTemp && this.decimalNum(this.runlogReq.minTemp) > 2) {
            return "最低温度";
        }
        if (this.runlogReq.windSpeed &&
            this.decimalNum(this.runlogReq.windSpeed) > 2) {
            return "风速";
        }
        if (this.runlogReq.genHoursFine &&
            this.decimalNum(this.runlogReq.genHoursFine) > 2) {
            return "晴天时长";
        }
        if (this.runlogReq.genHoursPcloud &&
            this.decimalNum(this.runlogReq.genHoursPcloud) > 2) {
            return "少云时长";
        }
        if (this.runlogReq.genHoursCloudy &&
            this.decimalNum(this.runlogReq.genHoursCloudy) > 2) {
            return "多云时长";
        }
        if (this.runlogReq.genHoursWet &&
            this.decimalNum(this.runlogReq.genHoursWet) > 2) {
            return "阴霾时长";
        }
        if (this.runlogReq.genHoursRain &&
            this.decimalNum(this.runlogReq.genHoursRain) > 2) {
            return "雨雪时长";
        }
        if (this.runlogReq.genHours &&
            this.decimalNum(this.runlogReq.genHours) > 2) {
            return "设备运行时长";
        }
        return true;
    };
    //判断有几位小数
    NewLog_old.prototype.decimalNum = function (num) {
        if (isNaN(num) || num.toString().split(".").length > 2)
            return 9999;
        if (num.toString().split(".").length == 1)
            return 0;
        return num.toString().split(".")[1].length;
    };
    NewLog_old.prototype.openMenu = function () {
        var _this = this;
        var buttons = [];
        var _loop_1 = function (dir) {
            buttons.push({
                text: dir["name"],
                handler: function () {
                    _this.runlogReq.windDirection = dir["value"];
                }
            });
        };
        for (var _i = 0, _a = this.ders; _i < _a.length; _i++) {
            var dir = _a[_i];
            _loop_1(dir);
        }
        var actionSheet = this.actionsheetCtrl.create({
            cssClass: "action-sheets-basic-page",
            buttons: buttons
        });
        actionSheet.present();
    };
    /**
     * 天气选择
     */
    NewLog_old.prototype.weatherInfo = function () {
        var _this = this;
        this.constantsService.weatherInfo(function (e) {
            _this.runlogReq.weatherInfo = e.propValue;
            _this.runlogReq.weatherInfoName = e.propName;
            console.log(e);
        });
    };
    /**
     * 损失类别选择
     */
    NewLog_old.prototype.getLossTypes = function (index) {
        var _this = this;
        this.constantsService.lossType(function (e) {
            _this.runlogReq.jobRecordLosses[index]["lossType"] = e.propValue;
            _this.runlogReq.jobRecordLosses[index]["lossTypeText"] = e.propName;
        });
    };
    NewLog_old.prototype.equipment = function (index, deviceName) {
        if (this.station && this.station.stationId) {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__common_deviceModel_device_model__["a" /* DeviceModel */], {
                stationId: this.station.stationId,
                index: index,
                deviceName: deviceName
            });
        }
        else {
            this.mutilService.customAlert({ msg: "请先选择电站!" });
        }
    };
    NewLog_old.prototype.deleteRecordLoss = function (index) {
        this.runlogReq.jobRecordLosses.splice(index, 1);
    };
    NewLog_old.prototype.addRecordLoss = function () {
        this.runlogReq.jobRecordLosses.push({});
    };
    NewLog_old = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: "new-NewLogold",template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/new-log/new-log.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>运行日报</ion-title>\n  </ion-navbar>\n</ion-header>\n<!--  发电情况页面  -->\n<ion-content>\n  <ion-list *ngIf="generating">\n    <ion-item ion-item class="title">\n      <span>发电情况</span>\n      <span>停电情况</span>\n      <span>天气情况</span>\n    </ion-item>\n    <i [class.power-cut]="powerCut" [class.weather]="weather"></i>\n    <ion-item>\n      <ion-label item-end>电表倍率</ion-label>\n      <ion-input\n        type="text"\n        placeholder="请输入数值"\n        [(ngModel)]="runlogReq.meterRatio"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>当前并网装机容量（MW）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="请输入数值"\n        [(ngModel)]="runlogReq.parallelCapacity"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>昨日计量表示值</ion-label>\n      <ion-input\n        type="text"\n        placeholder="{{ getYesterdayMeterValue }}"\n        disabled\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>今日计量表示值</ion-label>\n      <ion-input\n        type="text"\n        placeholder="请输入数值"\n        [(ngModel)]="runlogReq.meterValue"\n        (input)="meterValueChange()"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>今日上网电量（KWh）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="{{ getDailyEnergy }}"\n        [(ngModel)]="runlogReq.dailyEnergy"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>今日每MW上网电量（KWh）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="{{ getDailyEnergyMW }}"\n        disabled\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>本月上网电量（KWh）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="{{ getMouthEnergy }}"\n        disabled\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>今日最大负荷（KWh）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="请输入数值"\n        [(ngModel)]="runlogReq.maxPower"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <!-- </ion-content> -->\n  <!--  停电情况页面  -->\n  <!-- <ion-content *ngIf = \'powerCut\'> -->\n  <ion-list *ngIf="powerCut">\n    <ion-item ion-item class="title">\n      <span>发电情况</span>\n      <span>停电情况</span>\n      <span>天气情况</span>\n    </ion-item>\n    <i [class.power-cut]="powerCut" [class.weather]="weather"></i>\n    <!-- <textarea\n      placeholder="请输入停电情况"\n      [(ngModel)]="runlogReq.powerOutage"\n    ></textarea> -->\n    <ion-item-group\n      *ngFor="let jobRecordLoss of runlogReq.jobRecordLosses; let index = index"\n    >\n      <ion-item (click)="getLossTypes(index)">\n        <ion-label item-end>损失类别</ion-label>\n        <ion-note item-end>{{\n          jobRecordLoss?.lossTypeText || "选择损失类别"\n        }}</ion-note>\n      </ion-item>\n      <ion-item (click)="equipment(index, jobRecordLoss?.deviceName)">\n        <ion-label item-end>设备名称</ion-label>\n        <ion-note item-end>{{\n          jobRecordLoss?.deviceName || "选择设备名称"\n        }}</ion-note>\n      </ion-item>\n      <ion-item>\n        <ion-label item-end>损失情况描述</ion-label>\n        <ion-input\n          type="text"\n          placeholder="请输入损失情况描述"\n          [(ngModel)]="jobRecordLoss.lossDesc"\n        ></ion-input>\n      </ion-item>\n      <ion-item>\n        <ion-label item-end>停电开始时间</ion-label>\n        <ion-datetime\n          displayFormat="HH:mm"\n          cancelText="取消"\n          doneText="确定"\n          placeholder="请选择停电开始时间"\n          [(ngModel)]="jobRecordLoss.start_time"\n        ></ion-datetime>\n      </ion-item>\n      <ion-item>\n        <ion-label item-end>恢复时间</ion-label>\n        <ion-datetime\n          displayFormat="HH:mm"\n          cancelText="取消"\n          doneText="确定"\n          placeholder="请选择恢复时间"\n          [(ngModel)]="jobRecordLoss.end_time"\n        ></ion-datetime>\n      </ion-item>\n      <ion-item>\n        <ion-label item-end>约损失电量（KWh）</ion-label>\n        <ion-input\n          type="text"\n          placeholder="请输入数值"\n          [(ngModel)]="jobRecordLoss.lossEnergy"\n        ></ion-input>\n      </ion-item>\n      <ion-item-divider>\n        <button\n          ion-button\n          color="danger"\n          block\n          (click)="deleteRecordLoss(index)"\n        >\n          <ion-icon slot="start" name="trash"></ion-icon>删除\n        </button>\n      </ion-item-divider>\n    </ion-item-group>\n    <ion-item-group>\n      <ion-item>\n        <button ion-button color="secondary" block (click)="addRecordLoss()">\n          <ion-icon slot="start" name="add"></ion-icon>新增\n        </button>\n      </ion-item>\n    </ion-item-group>\n  </ion-list>\n  <!-- </ion-content> -->\n  <!--  天气情况  -->\n  <!-- <ion-content *ngIf = \'weather\'> -->\n  <ion-list *ngIf="weather">\n    <ion-item ion-item class="title">\n      <span>发电情况</span>\n      <span>停电情况</span>\n      <span>天气情况</span>\n    </ion-item>\n    <i [class.power-cut]="powerCut" [class.weather]="weather"></i>\n    <ion-item>\n      <ion-label item-end>日辐照量（MJ/M²）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="请输入数值"\n        [(ngModel)]="runlogReq.irradiation"\n      ></ion-input>\n    </ion-item>\n    <ion-item (click)="weatherInfo()">\n      <ion-label item-end>今日天气</ion-label>\n      <ion-note item-end>{{\n        (runlogReq && runlogReq.weatherInfoName) || "请选择天气"\n      }}</ion-note>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>晴天</ion-label>\n      <ion-input\n        type="number"\n        placeholder="请输入整天晴天时长/h"\n        [(ngModel)]="runlogReq.genHoursFine"\n        (input)="updateGenHours()"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>少云</ion-label>\n      <ion-input\n        type="number"\n        placeholder="请输入整天少云时长/h"\n        [(ngModel)]="runlogReq.genHoursPcloud"\n        (input)="updateGenHours()"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>多云</ion-label>\n      <ion-input\n        type="number"\n        placeholder="请输入整天多云时长/h"\n        [(ngModel)]="runlogReq.genHoursCloudy"\n        (input)="updateGenHours()"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>阴霾</ion-label>\n      <ion-input\n        type="number"\n        placeholder="请输入整天阴霾时长/h"\n        [(ngModel)]="runlogReq.genHoursWet"\n        (input)="updateGenHours()"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>雨雪</ion-label>\n      <ion-input\n        type="number"\n        placeholder="请输入整天雨雪时长/h"\n        [(ngModel)]="runlogReq.genHoursRain"\n        (input)="updateGenHours()"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>设备运行小时数</ion-label>\n      <ion-input\n        type="number"\n        placeholder="请输入整天设备运行时长/h"\n        [(ngModel)]="runlogReq.genHours"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>最高温度（℃）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="请输入数值"\n        [(ngModel)]="runlogReq.maxTemp"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>最低温度（℃）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="请输入数值"\n        [(ngModel)]="runlogReq.minTemp"\n      ></ion-input>\n    </ion-item>\n    <ion-item (click)="openMenu()">\n      <ion-label item-end>风向</ion-label>\n      <ion-note item-end>{{ getWindDirection() || "请选择风向" }}</ion-note>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>风速（m/s）</ion-label>\n      <ion-input\n        type="text"\n        placeholder="请输入数值"\n        [(ngModel)]="runlogReq.windSpeed"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n</ion-content>\n<ion-footer>\n  <!-- <button ion-button color="light">Lsight</button> -->\n  <!-- <button ion-button color="secondary">Default</button> -->\n  <span (click)="prev()">{{ generating ? "取消" : "上一步" }}</span\n  ><span (click)="next()">{{ weather ? "保存" : "下一步" }}</span>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/new-log/new-log.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3__providers_runlog_service__["a" /* RunLogService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular_navigation_nav_params__["a" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_5__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_6_ionic_angular_components_action_sheet_action_sheet_controller__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_7__providers_util_constants_service__["a" /* ConstantsService */]])
    ], NewLog_old);
    return NewLog_old;
}());

//# sourceMappingURL=new-log.js.map

/***/ }),

/***/ 836:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EditLog; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_runlog_service__ = __webpack_require__(133);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular_navigation_nav_params__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_angular_components_action_sheet_action_sheet_controller__ = __webpack_require__(190);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_util_constants_service__ = __webpack_require__(353);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__common_deviceModel_device_model__ = __webpack_require__(350);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var EditLog = /** @class */ (function () {
    function EditLog(navCtrl, navParams, runLogService, events, mutilService, actionsheetCtrl, constantsService) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.runLogService = runLogService;
        this.events = events;
        this.mutilService = mutilService;
        this.actionsheetCtrl = actionsheetCtrl;
        this.constantsService = constantsService;
        this.ders = [
            { value: "NE", name: "东北" },
            { value: "ENE", name: "东东北" },
            { value: "E", name: "东" },
            { value: "ESE", name: "东东南" },
            { value: "SE", name: "东南" },
            { value: "SSE", name: "南东南" },
            { value: "S", name: "南" },
            { value: "SSW", name: "南西南" },
            { value: "SW", name: "西南" },
            { value: "WSW", name: "西西南" },
            { value: "W", name: "西" },
            { value: "WNW", name: "西西北" },
            { value: "NW", name: "西北" },
            { value: "NNW", name: "北西北" },
            { value: "N", name: "北" },
            { value: "NNE", name: "北东北" }
        ];
        this.runlog = {};
        this.prevlog = {};
        this.viewOnly = false;
        this.showPage = 1;
        this.viewOnly = navParams.get("viewOnly");
        // this.viewOnly = false;
        this.runlog = navParams.get("runlog");
        this.runLogService.logDetail(this.runlog.recordId).subscribe(function (e) {
            _this.runlog = e || {};
            for (var _i = 0, _a = _this.runlog.jobRecordLosses; _i < _a.length; _i++) {
                var jobRecordLoss = _a[_i];
                if (jobRecordLoss.startTime) {
                    jobRecordLoss.start_time =
                        (new Date(jobRecordLoss.startTime).getHours() < 10
                            ? "0" + new Date(jobRecordLoss.startTime).getHours()
                            : new Date(jobRecordLoss.startTime).getHours()) +
                            ":" +
                            (new Date(jobRecordLoss.startTime).getMinutes() < 10
                                ? "0" + new Date(jobRecordLoss.startTime).getMinutes()
                                : new Date(jobRecordLoss.startTime).getMinutes());
                }
                if (jobRecordLoss.endTime) {
                    jobRecordLoss.end_time =
                        (new Date(jobRecordLoss.endTime).getHours() < 10
                            ? "0" + new Date(jobRecordLoss.endTime).getHours()
                            : new Date(jobRecordLoss.endTime).getHours()) +
                            ":" +
                            (new Date(jobRecordLoss.endTime).getMinutes() < 10
                                ? "0" + new Date(jobRecordLoss.startTime).getMinutes()
                                : new Date(jobRecordLoss.startTime).getMinutes());
                }
                if (jobRecordLoss.recordId) {
                    _this.recordId = jobRecordLoss.recordId;
                }
            }
        });
        this.runLogService
            .prevLogDetail(this.runlog.stationId, this.runlog.reportDate)
            .subscribe(function (e) {
            _this.yesterdayMsg = e;
            _this.prevlog = e.lastJobRecord || {};
        });
        this.events.subscribe("deviceModelSelect", function (e) {
            if (e) {
                _this.loadFlag = true;
                console.log(_this.runlog.jobRecordLosses);
                _this.runlog.jobRecordLosses[e.index]["deviceName"] = e.deviceName;
                _this.runlog.jobRecordLosses[e.index]["deviceId"] = e.deviceId;
            }
        });
    }
    Object.defineProperty(EditLog.prototype, "generating", {
        get: function () {
            return this.showPage == 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(EditLog.prototype, "powerCut", {
        get: function () {
            return this.showPage == 2;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(EditLog.prototype, "weather", {
        get: function () {
            return this.showPage == 3;
        },
        enumerable: false,
        configurable: true
    });
    EditLog.prototype.ionViewWillEnter = function () { };
    /**
     * 下一页
     */
    EditLog.prototype.next = function () {
        var _this = this;
        if (!this.viewOnly) {
            if (this.showPage == 1 && this.firstVerification() !== true) {
                //验证第一页数据是否正确
                console.log(this.firstVerification() + "不能为空");
                this.mutilService.customAlert({
                    msg: this.firstVerification() + "不能为空"
                });
                return;
            }
            else if (this.showPage == 2 && this.secondVerification() !== true) {
                //验证第二页数据是否正确
                console.log(this.secondVerification() + "不能为空");
                this.mutilService.customAlert({
                    msg: this.secondVerification() + "不能为空"
                });
                return;
            }
            else if (this.showPage == 3 && this.thirdVerification() !== true) {
                //验证第三页数据是否正确
                console.log(this.thirdVerification() + "不能为空");
                this.mutilService.customAlert({
                    msg: this.thirdVerification() + "不能为空"
                });
                return;
            }
        }
        var nextPage = this.showPage + 1;
        if (nextPage > 3) {
            if (this.viewOnly) {
                this.navCtrl.pop();
            }
            else {
                this.runLogService.updateLog(this.runlog).subscribe(function (res) {
                    _this.events.publish("RunLogUpdate", res);
                    _this.navCtrl.pop();
                });
            }
        }
        else {
            this.showPage = nextPage;
        }
    };
    /**
     * 上一页
     */
    EditLog.prototype.prev = function () {
        var prevPage = this.showPage - 1;
        if (prevPage < 1) {
            this.navCtrl.pop();
        }
        else {
            this.showPage = prevPage;
        }
    };
    /***************************************************************************** 页面展示值 *************************************/
    EditLog.prototype.meterValueChange = function () {
        this.runlog.dailyEnergy =
            (this.runlog.meterValue - this.getYesterdayMeterValue) *
                this.runlog.meterRatio;
    };
    Object.defineProperty(EditLog.prototype, "getYesterdayMeterValue", {
        //昨日计量表示值（默认上一条数据）
        get: function () {
            return this.prevlog["meterValue"] || 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(EditLog.prototype, "getDailyEnergy", {
        //今日上网电量(KWh)
        get: function () {
            return ((this.runlog.meterValue - this.getYesterdayMeterValue) *
                this.runlog.meterRatio);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(EditLog.prototype, "getDailyEnergyMW", {
        //今日每MW上网电量(KWh)
        get: function () {
            return ((this.getDailyEnergy &&
                this.getDailyEnergy / this.runlog.parallelCapacity) ||
                0);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(EditLog.prototype, "getMouthEnergy", {
        //本月上网电量(KWh)
        get: function () {
            return (parseFloat((this.yesterdayMsg && this.yesterdayMsg["monthEnergy"]) || 0) +
                this.getDailyEnergy);
        },
        enumerable: false,
        configurable: true
    });
    EditLog.prototype.getWindDirection = function () {
        for (var _i = 0, _a = this.ders; _i < _a.length; _i++) {
            var dir = _a[_i];
            if (this.runlog.windDirection == dir["value"]) {
                return dir["name"];
            }
        }
        this.runlog.windDirection = this.ders[0]["value"];
        return (this.runlog.windDirection = this.ders[0]["name"]);
    };
    /***************************************************************************** 结束 ****************************************************/
    //验证第一页数据是否正确
    EditLog.prototype.firstVerification = function () {
        if (!this.runlog.meterRatio ||
            this.decimalNum(parseInt(this.runlog.meterRatio.toString())) != 0) {
            return "电表倍率";
        }
        if (!this.runlog.parallelCapacity ||
            this.decimalNum(this.runlog.parallelCapacity) > 6) {
            return "当前并网装机容量";
        }
        if (this.runlog.meterValue && this.decimalNum(this.runlog.meterValue) > 2) {
            return "今日计量表示值";
        }
        if (this.runlog.maxPower && this.decimalNum(this.runlog.maxPower) == 9999) {
            return "今日最大负荷";
        }
        return true;
    };
    //验证第二页数据是否正确
    EditLog.prototype.secondVerification = function () {
        if (this.runlog.jobRecordLosses && this.runlog.jobRecordLosses.length > 0) {
            var now = new Date();
            var date = now.getFullYear() + "-" + (now.getMonth() + 1) + "-" + now.getDate();
            for (var _i = 0, _a = this.runlog.jobRecordLosses; _i < _a.length; _i++) {
                var jobRecordLoss = _a[_i];
                jobRecordLoss.recordId = this.recordId;
                if (!jobRecordLoss.lossType) {
                    return "损失类别";
                }
                if (!jobRecordLoss.start_time) {
                    return "停电开始时间";
                }
                else {
                    jobRecordLoss.startTime = new Date(date + " " + jobRecordLoss.start_time);
                }
                if (jobRecordLoss.end_time) {
                    jobRecordLoss.endTime = new Date(date + " " + jobRecordLoss.end_time);
                }
                if (!jobRecordLoss.lossEnergy ||
                    (jobRecordLoss.lossEnergy &&
                        this.decimalNum(jobRecordLoss.lossEnergy) > 4)) {
                    return "约损失电量";
                }
            }
        }
        return true;
    };
    //验证第三页数据是否正确
    EditLog.prototype.thirdVerification = function () {
        if (this.runlog.irradiation &&
            this.decimalNum(this.runlog.irradiation) > 2) {
            return "日辐照量";
        }
        if (!this.runlog.weatherInfo || this.runlog.weatherInfo.length > 100) {
            return "今日天气";
        }
        if (this.runlog.maxTemp && this.decimalNum(this.runlog.maxTemp) > 2) {
            return "最高温度";
        }
        if (this.runlog.minTemp && this.decimalNum(this.runlog.minTemp) > 2) {
            return "最低温度";
        }
        if (this.runlog.windSpeed && this.decimalNum(this.runlog.windSpeed) > 2) {
            return "风速";
        }
        if (this.runlog.genHoursFine &&
            this.decimalNum(this.runlog.genHoursFine) > 2) {
            return "晴天时长";
        }
        if (this.runlog.genHoursPcloud &&
            this.decimalNum(this.runlog.genHoursPcloud) > 2) {
            return "少云时长";
        }
        if (this.runlog.genHoursCloudy &&
            this.decimalNum(this.runlog.genHoursCloudy) > 2) {
            return "多云时长";
        }
        if (this.runlog.genHoursWet &&
            this.decimalNum(this.runlog.genHoursWet) > 2) {
            return "阴霾时长";
        }
        if (this.runlog.genHoursRain &&
            this.decimalNum(this.runlog.genHoursRain) > 2) {
            return "雨雪时长";
        }
        if (this.runlog.genHours && this.decimalNum(this.runlog.genHours) > 2) {
            return "设备运行时长";
        }
        return true;
    };
    //判断有几位小数
    EditLog.prototype.decimalNum = function (num) {
        if (isNaN(num) || num.toString().split(".").length > 2)
            return 9999;
        if (num.toString().split(".").length == 1)
            return 0;
        return num.toString().split(".")[1].length;
    };
    EditLog.prototype.openMenu = function () {
        var _this = this;
        var buttons = [];
        var _loop_1 = function (dir) {
            buttons.push({
                text: dir["name"],
                handler: function () {
                    _this.runlog.windDirection = dir["value"];
                }
            });
        };
        for (var _i = 0, _a = this.ders; _i < _a.length; _i++) {
            var dir = _a[_i];
            _loop_1(dir);
        }
        var actionSheet = this.actionsheetCtrl.create({
            cssClass: "action-sheets-basic-page",
            buttons: buttons
        });
        actionSheet.present();
    };
    /**
     * 天气选择
     */
    EditLog.prototype.weatherInfo = function () {
        var _this = this;
        if (this.viewOnly) {
            return;
        }
        this.constantsService.weatherInfo(function (e) {
            _this.runlog.weatherInfo = e.propValue;
            _this.runlog.weatherInfoName = e.propName;
            console.log(e);
        });
    };
    /**
     * 损失类别选择
     */
    EditLog.prototype.getLossTypes = function (index) {
        var _this = this;
        this.constantsService.lossType(function (e) {
            _this.runlog.jobRecordLosses[index]["lossType"] = e.propValue;
            _this.runlog.jobRecordLosses[index]["lossTypeText"] = e.propName;
        });
    };
    EditLog.prototype.equipment = function (index, deviceName) {
        if (this.runlog.stationId) {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__common_deviceModel_device_model__["a" /* DeviceModel */], {
                stationId: this.runlog.stationId,
                index: index,
                deviceName: deviceName
            });
        }
        else {
            this.mutilService.customAlert({ msg: "请先选择电站!" });
        }
    };
    EditLog.prototype.deleteRecordLoss = function (index) {
        this.runlog.jobRecordLosses.splice(index, 1);
    };
    EditLog.prototype.addRecordLoss = function () {
        if (this.runlog.jobRecordLosses == undefined) {
            this.runlog.jobRecordLosses = [];
        }
        this.runlog.jobRecordLosses.push({});
    };
    EditLog = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: "new-log",template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/run-log/edit-log/edit-log.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>运行日报</ion-title>\n  </ion-navbar>\n</ion-header>\n<!--  发电情况页面  -->\n<ion-content>\n  <ion-list *ngIf="generating">\n    <ion-item ion-item class="title">\n      <span>发电情况</span>\n      <span>停电情况</span>\n      <span>天气情况</span>\n    </ion-item>\n    <i [class.power-cut]="powerCut" [class.weather]="weather"></i>\n    <ion-item>\n      <ion-label item-end>电表倍率</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n        [(ngModel)]="runlog.meterRatio"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>当前并网装机容量（MW）</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n        [(ngModel)]="runlog.parallelCapacity"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>昨日计量表示值</ion-label>\n      <ion-input\n        type="text"\n        [(ngModel)]="getYesterdayMeterValue"\n        readonly="true"\n        disabled="true"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>今日计量表示值</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n        [(ngModel)]="runlog.meterValue"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n        (input)="meterValueChange()"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>今日上网电量（KWh）</ion-label>\n      <ion-input\n        type="text"\n        [(ngModel)]="runlog.dailyEnergy"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>今日每MW上网电量（KWh）</ion-label>\n      <ion-input\n        type="text"\n        [(ngModel)]="getDailyEnergyMW"\n        readonly="true"\n        disabled="true"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>本月上网电量（KWh）</ion-label>\n      <ion-input\n        type="text"\n        [(ngModel)]="getMouthEnergy"\n        readonly="true"\n        disabled="true"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>今日最大负荷（KWh）</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n        [(ngModel)]="runlog.maxPower"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <!-- </ion-content> -->\n  <!--  停电情况页面  -->\n  <!-- <ion-content *ngIf = \'powerCut\'> -->\n  <ion-list *ngIf="powerCut">\n    <ion-item ion-item class="title">\n      <span>发电情况</span>\n      <span>停电情况</span>\n      <span>天气情况</span>\n    </ion-item>\n    <i [class.power-cut]="powerCut" [class.weather]="weather"></i>\n    <!-- <textarea [placeholder]="viewOnly?\'\':\'请输入停电情况\'" [(ngModel)] = \'runlog.powerOutage\' [readonly]="viewOnly"></textarea>\n        <ion-item>\n        <ion-label item-end>约损失电量（KWh）</ion-label>\n            <ion-input type="text" [placeholder]="viewOnly?\'\':\'请输入数值\'" [(ngModel)]="runlog.dailyLoss" [readonly]="viewOnly" [disabled]="viewOnly"></ion-input>\n        </ion-item> -->\n    <ion-item-group\n      *ngFor="let jobRecordLoss of runlog.jobRecordLosses; let index = index"\n    >\n      <ion-item *ngIf="!viewOnly" (click)="getLossTypes(index)">\n        <ion-label item-end>损失类别</ion-label>\n        <ion-note item-end>{{\n          jobRecordLoss?.lossTypeText || "选择损失类别"\n        }}</ion-note>\n      </ion-item>\n      <ion-item *ngIf="viewOnly">\n        <ion-label item-end>损失类别</ion-label>\n        <ion-note item-end>{{\n          jobRecordLoss?.lossTypeText || "选择损失类别"\n        }}</ion-note>\n      </ion-item>\n\n      <ion-item\n        *ngIf="!viewOnly"\n        (click)="equipment(index, jobRecordLoss?.deviceName)"\n      >\n        <ion-label item-end>设备名称</ion-label>\n        <ion-note item-end>{{\n          jobRecordLoss?.deviceName || "选择设备名称"\n        }}</ion-note>\n      </ion-item>\n      <ion-item *ngIf="viewOnly">\n        <ion-label item-end>设备名称</ion-label>\n        <ion-note item-end>{{\n          jobRecordLoss?.deviceName || "选择设备名称"\n        }}</ion-note>\n      </ion-item>\n      <ion-item>\n        <ion-label item-end>损失情况描述</ion-label>\n        <ion-input\n          type="text"\n          [placeholder]="viewOnly ? \'\' : \'请输入损失情况描述\'"\n          [(ngModel)]="jobRecordLoss.lossDesc"\n          [readonly]="viewOnly"\n          [disabled]="viewOnly"\n        ></ion-input>\n      </ion-item>\n      <ion-item>\n        <ion-label item-end>停电开始时间</ion-label>\n        <ion-datetime\n          displayFormat="HH:mm"\n          cancelText="取消"\n          doneText="确定"\n          [placeholder]="viewOnly ? \'\' : \'请选择停电开始时间\'"\n          [(ngModel)]="jobRecordLoss.start_time"\n          [disabled]="viewOnly"\n        ></ion-datetime>\n      </ion-item>\n      <ion-item>\n        <ion-label item-end>恢复时间</ion-label>\n        <ion-datetime\n          displayFormat="HH:mm"\n          cancelText="取消"\n          doneText="确定"\n          [placeholder]="viewOnly ? \'\' : \'请选择恢复时间\'"\n          [(ngModel)]="jobRecordLoss.end_time"\n          [disabled]="viewOnly"\n        ></ion-datetime>\n      </ion-item>\n      <ion-item>\n        <ion-label item-end>约损失电量（KWh）</ion-label>\n        <ion-input\n          type="text"\n          [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n          [(ngModel)]="jobRecordLoss.lossEnergy"\n          [readonly]="viewOnly"\n          [disabled]="viewOnly"\n        ></ion-input>\n      </ion-item>\n      <ion-item-divider>\n        <button\n          ion-button\n          color="danger"\n          block\n          (click)="deleteRecordLoss(index)"\n          *ngIf="!viewOnly"\n        >\n          <ion-icon slot="start" name="trash"></ion-icon>删除\n        </button>\n      </ion-item-divider>\n    </ion-item-group>\n    <ion-item-group *ngIf="!viewOnly">\n      <ion-item>\n        <button ion-button color="secondary" block (click)="addRecordLoss()">\n          <ion-icon slot="start" name="add"></ion-icon>新增\n        </button>\n      </ion-item>\n    </ion-item-group>\n  </ion-list>\n  <!-- </ion-content> -->\n  <!--  天气情况  -->\n  <!-- <ion-content *ngIf = \'weather\'> -->\n  <ion-list *ngIf="weather">\n    <ion-item ion-item class="title">\n      <span>发电情况</span>\n      <span>停电情况</span>\n      <span>天气情况</span>\n    </ion-item>\n    <i [class.power-cut]="powerCut" [class.weather]="weather"></i>\n    <ion-item>\n      <ion-label item-end>日辐照量（MJ/M²）</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n        [(ngModel)]="runlog.irradiation"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item (click)="weatherInfo()">\n      <ion-label>今日天气</ion-label>\n      <ion-note item-end>{{\n        constantsService.getWeatherInfoName(runlog && runlog.weatherInfo) ||\n          "请选择天气"\n      }}</ion-note>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>晴天</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入整天晴天时长/h\'"\n        [(ngModel)]="runlog.genHoursFine"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>少云</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入整天少云时长/h\'"\n        [(ngModel)]="runlog.genHoursPcloud"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>多云</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入整天多云时长/h\'"\n        [(ngModel)]="runlog.genHoursCloudy"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>阴霾</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入整天阴霾时长/h\'"\n        [(ngModel)]="runlog.genHoursWet"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>雨雪</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入整天雨雪时长/h\'"\n        [(ngModel)]="runlog.genHoursRain"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>设备运行小时数</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入整天设备运行时长/h\'"\n        [(ngModel)]="runlog.genHours"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>最高温度（℃）</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n        [(ngModel)]="runlog.maxTemp"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>最低温度（℃）</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n        [(ngModel)]="runlog.minTemp"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n    <ion-item (click)="openMenu()">\n      <ion-label item-end>风向</ion-label>\n      <ion-note item-end>{{ getWindDirection() || "请选择风向" }}</ion-note>\n    </ion-item>\n    <ion-item>\n      <ion-label item-end>风速（m/s）</ion-label>\n      <ion-input\n        type="text"\n        [placeholder]="viewOnly ? \'\' : \'请输入数值\'"\n        [(ngModel)]="runlog.windSpeed"\n        [readonly]="viewOnly"\n        [disabled]="viewOnly"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n</ion-content>\n<ion-footer>\n  <!-- <button ion-button color="light">Lsight</button> -->\n  <!-- <button ion-button color="secondary">Default</button> -->\n  <span (click)="prev()">{{\n    generating ? (viewOnly ? "返回" : "取消") : "上一步"\n  }}</span\n  ><span (click)="next()">{{\n    weather ? (viewOnly ? "返回" : "保存") : "下一步"\n  }}</span>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/run-log/edit-log/edit-log.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular_navigation_nav_params__["a" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_0__providers_runlog_service__["a" /* RunLogService */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_5_ionic_angular_components_action_sheet_action_sheet_controller__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_6__providers_util_constants_service__["a" /* ConstantsService */]])
    ], EditLog);
    return EditLog;
}());

//# sourceMappingURL=edit-log.js.map

/***/ }),

/***/ 837:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RegisterPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_user_servicer__ = __webpack_require__(171);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







/**
 * Generated class for the RegisterPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var RegisterPage = /** @class */ (function () {
    function RegisterPage(navCtrl, mUtil, appConfig, userservice, fb, http) {
        this.navCtrl = navCtrl;
        this.mUtil = mUtil;
        this.appConfig = appConfig;
        this.userservice = userservice;
        this.fb = fb;
        this.http = http;
        this.form = null;
        this.showCustomers = false;
        this.initForm();
        this.logo = appConfig.logo;
    }
    RegisterPage.prototype.initForm = function () {
        this.form = this.fb.group({
            tenantId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            tenantName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            password: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
        });
    };
    RegisterPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad RegisterPage');
    };
    RegisterPage.prototype.queryCustomers = function (event, type) {
        var _this = this;
        console.log(type);
        if (type === 'focus') {
            if (event.value) {
                this.showCustomers = true;
            }
        }
        else {
            this.http.queryCustomers(event.value).subscribe(function (res) {
                if (res) {
                    _this.customers = res;
                    _this.showCustomers = true;
                }
                else {
                    _this.customers = [];
                    _this.showCustomers = false;
                }
            });
        }
    };
    RegisterPage.prototype.removeFocus = function () {
        var _this = this;
        setTimeout(function () {
            _this.showCustomers = false;
        }, 500);
    };
    RegisterPage.prototype.register = function (event) {
        var _this = this;
        var value = this.form.value;
        if (!value.tenantId) {
            this.mUtil.popToastView('请输入公司名称');
            return;
        }
        if (!value.userName) {
            this.mUtil.popToastView('请输入账号');
            return;
        }
        if (!value.password) {
            this.mUtil.popToastView('请输入账号');
            return;
        }
        var params = {
            tenantId: value.tenantId,
            userName: value.userName,
            password: value.password,
        };
        this.http.register(params, { responseType: 0 }).subscribe(function (res) {
            _this.mUtil.popToastView('注册成功');
            _this.navCtrl.pop();
        });
    };
    RegisterPage.prototype.selectCustomer = function (item) {
        this.form.patchValue({
            tenantName: item.customerAlias,
            tenantId: item.customerId,
        });
    };
    RegisterPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-register',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/register/register.html"*/'<ion-content>\n  <div class="logo">\n    <img [src]="\'assets/imgs/login/\'+logo" style="height: 120px" />\n  </div>\n\n  <form [formGroup]="form" (submit)="register($event)">\n    <ion-list no-lines>\n      <div class="autocomplete">\n        <ion-item>\n          <ion-input\n            type="text"\n            formControlName="tenantName"\n            (ionChange)="queryCustomers($event)"\n            (ionFocus)="queryCustomers($event,\'focus\')"\n            (ionBlur)="removeFocus()"\n            placeholder="公司"\n          ></ion-input>\n        </ion-item>\n        <ion-list [ngClass]="{show: showCustomers,hide:!showCustomers}">\n          <ion-item\n            *ngFor="let item of customers"\n            (click)="selectCustomer(item)"\n          >\n            {{item.customerAlias}}\n          </ion-item>\n        </ion-list>\n      </div>\n      <ion-item>\n        <input\n          formControlName="userName"\n          name="userName"\n          type="userName"\n          required\n          placeholder="账号"\n        />\n      </ion-item>\n      <ion-item class="hasImg">\n        <input\n          formControlName="password"\n          name="password"\n          type="password"\n          required\n          placeholder="密码"\n        />\n      </ion-item>\n    </ion-list>\n\n    <button type="submit" block>注册</button>\n  </form>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/register/register.html"*/,
        }),
        __param(2, Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_5__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_4__providers_util_Mutil_service__["a" /* MutilService */], Object, __WEBPACK_IMPORTED_MODULE_6__providers_user_servicer__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_0__providers_auth_http_service__["a" /* AuthHttpService */]])
    ], RegisterPage);
    return RegisterPage;
}());

//# sourceMappingURL=register.js.map

/***/ }),

/***/ 838:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Operations; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_home_service__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_operations_service__ = __webpack_require__(356);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_echarts__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_echarts___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_echarts__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_echarts_service__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__orderPage_order_page__ = __webpack_require__(839);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__defect_management_defect_management__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__operate_tickets_operate_tickets__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__repair_ticket_repair_ticket__ = __webpack_require__(130);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__maintains_maintains__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__inspections_inspections__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














var Operations = /** @class */ (function () {
    function Operations(navCtrl, homeService, mUtil, operationsService, echartsService, modalCtrl) {
        this.navCtrl = navCtrl;
        this.homeService = homeService;
        this.mUtil = mUtil;
        this.operationsService = operationsService;
        this.echartsService = echartsService;
        this.modalCtrl = modalCtrl;
        // toDate = this.mUtil.buildTime('yyyy-MM', new Date().getTime());
        this.toDate = __WEBPACK_IMPORTED_MODULE_13_moment__().format('YYYY-MM');
        // startDate = this.mUtil.buildTime('yyyy-MM', new Date().getTime()); //选择的时间
        this.startDate = __WEBPACK_IMPORTED_MODULE_13_moment__().format('YYYY-MM');
        this.calendarDateList = [
            { v: '日' },
            { v: '一' },
            { v: '二' },
            { v: '三' },
            { v: '四' },
            { v: '五' },
            { v: '六' },
        ]; // 周
        this.calendarList = []; // 日
        this.ordersTypeList = [];
        this.orderDayList = [];
        this.executed = 0; //总的已办数量
        this.unexecuted = 0; //总的待办数量
        this.dataType = '0';
    }
    Operations.prototype.ionViewWillEnter = function () {
        this.getOrders();
    };
    Operations.prototype.getOrders = function () {
        var _this = this;
        this.operationsService
            .ordersType(
        // .orderDay(
        this.dataType, __WEBPACK_IMPORTED_MODULE_13_moment__(this.startDate).startOf('month').format('YYYY-MM-DD'), __WEBPACK_IMPORTED_MODULE_13_moment__(this.startDate).endOf('month').format('YYYY-MM-DD'))
            .subscribe(function (e) {
            console.log('ordersType:', e);
            _this.ordersTypeList = [];
            _this.unexecuted = 0;
            _this.executed = 0;
            if (e) {
                _this.ordersTypeList = e;
                for (var i in e) {
                    if (e[i].executed != null)
                        _this.executed += e[i].executed;
                    // 总计 - 待办数量
                    // if (e[i].executed != null) {
                    //   let executed = e[i].total - e[i].unexecuted;
                    //   console.log("executed nums: ", executed);
                    //   this.executed += executed;
                    // }
                    if (e[i].unexecuted != null)
                        _this.unexecuted += e[i].unexecuted;
                }
                var rate = _this.executed + _this.unexecuted == 0
                    ? 'N/A'
                    : ((_this.executed * 100.0) / (_this.executed + _this.unexecuted)).toFixed(1);
                var datas = [
                    { name: 'executed', value: _this.executed },
                    { name: 'unexecuted', value: _this.unexecuted },
                ];
                var c = _this.echarts.nativeElement;
                if (_this.myChart) {
                    // 原图表实例还在，销毁实例以免出现出现多个点击事件问题
                    _this.myChart.clear();
                    _this.myChart.dispose();
                }
                _this.myChart = __WEBPACK_IMPORTED_MODULE_5_echarts___default.a.init(c, 'light');
                var option = _this.echartsService.bulidOrdersTypeEchartOption(datas, rate);
                _this.myChart.setOption(option);
            }
        });
        this.operationsService
            .orderDay(this.dataType, __WEBPACK_IMPORTED_MODULE_13_moment__(this.startDate).startOf('month').format('YYYY-MM-DD'), __WEBPACK_IMPORTED_MODULE_13_moment__(this.startDate).endOf('month').format('YYYY-MM-DD'))
            .subscribe(function (e) {
            console.log('orderDay:', e);
            _this.orderDayList = [];
            if (e) {
                _this.orderDayList = e;
                _this.buildCalendarList(_this.startDate, e);
            }
            // this.ordersTypeList = [];
            // this.unexecuted = 0;
            // this.executed = 0;
            // if (e) {
            //   for (var i in e) {
            //     // 总计 - 待办数量
            //     if (e[i].total != null) {
            //       let executed = e[i].total - e[i].unexecuted;
            //       e[i].executed = executed;
            //       console.log("executed nums: ", executed);
            //       this.executed += executed;
            //     }
            //     if (e[i].unexecuted != null) this.unexecuted += e[i].unexecuted;
            //   }
            //   this.ordersTypeList = e;
            //   console.log("ordersTypeList: ", this.ordersTypeList);
            //   let rate =
            //     this.executed + this.unexecuted == 0
            //       ? 'N/A'
            //       : ((this.executed * 100.0) / (this.executed + this.unexecuted)).toFixed(
            //         1
            //       );
            //   let datas = [
            //     { name: 'executed', value: this.executed },
            //     { name: 'unexecuted', value: this.unexecuted },
            //   ];
            //   let c = this.echarts.nativeElement;
            //   if (this.myChart) {
            //     // 原图表实例还在，销毁实例以免出现出现多个点击事件问题
            //     this.myChart.clear();
            //     this.myChart.dispose();
            //   }
            //   this.myChart = echarts.init(c, 'light');
            //   let option = this.echartsService.bulidOrdersTypeEchartOption(datas, rate);
            //   this.myChart.setOption(option);
            // }
        });
        // this.operationsService.workbenchOrders('1','0','2020-04-01','2020-04-30').subscribe(e=>{
        //     console.log('workbenchOrders:',e)
        // })
    };
    Operations.prototype.geOrderDayValue = function (v) { };
    /**
     * 根据年月份 创建当月信息
     * @param year
     * @param month
     */
    Operations.prototype.buildCalendarList = function (date, dayVArr) {
        var that = this;
        this.calendarList = [];
        if (date) {
            var year = date.split('-')[0], month = date.split('-')[1];
            var numD = new Date(year, month, 0).getDate(); //当月有几天
            var m = '00' + date.split('-')[1];
            m = m.substr(m.length - 2, 2);
            var week = new Date(date.split('-')[0] + "-" + m + "-01").getDay(); //判断是星期几
            for (var index = 0; index < week; index++) {
                this.calendarList.push({ v: '' });
            }
            var _loop_1 = function (index) {
                /**添加日历上数据 */
                var i = dayVArr.findIndex(function (e) {
                    var d = new Date(e.startTime).getDate();
                    return index + 1 === d;
                });
                var param = { v: index + 1 };
                if (i >= 0) {
                    param['total'] = dayVArr[i].total;
                    param['style'] = dayVArr[i].style;
                }
                this_1.calendarList.push(param);
            };
            var this_1 = this;
            for (var index = 0; index < numD; index++) {
                _loop_1(index);
            }
        }
        else {
        }
    };
    /**工单列表 */
    Operations.prototype.toOrderDay = function (param, singleDay) {
        if (singleDay) {
            if (param.total) {
                var searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__orderPage_order_page__["a" /* OrderPage */], {
                    singleDay: singleDay,
                    status: '',
                    dataType: this.dataType,
                    startDate: __WEBPACK_IMPORTED_MODULE_13_moment__(this.startDate).date(param.v).format('YYYY-MM-DD'),
                });
                searchModal.present();
            }
        }
        else {
            var searchModal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__orderPage_order_page__["a" /* OrderPage */], {
                singleDay: singleDay,
                status: param,
                dataType: this.dataType,
                startDate: this.startDate,
            });
            searchModal.present();
            // this.navCtrl.push(OrderPage, {
            //     singleDay: singleDay,
            //     status: param,
            //     dataType: this.dataType,
            //     startDate: this.startDate })
        }
    };
    /**我的 全部切换 */
    Operations.prototype.changeDataType = function (type) {
        this.dataType = type;
        this.getOrders();
    };
    /**时间选择 */
    Operations.prototype.changeDate = function () {
        console.log(this.startDate);
        this.getOrders();
    };
    Operations.prototype.toPage = function (orderType, queryFlag) {
        var param = { startDate: this.startDate };
        if (this.dataType === '0') {
            param['queryFlag'] = queryFlag;
        }
        switch (orderType.orderType) {
            // 缺陷管理
            case '01':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__defect_management_defect_management__["a" /* DefectManagementPage */], param);
                break;
            // 操作票
            case '07':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__operate_tickets_operate_tickets__["a" /* OperateTicketsPage */], param);
                break;
            // 抢修单
            case '08':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__repair_ticket_repair_ticket__["a" /* RepairTicketPage */], param);
                break;
            // 检修预试
            case '04':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_11__maintains_maintains__["a" /* MaintainsPage */], param);
                break;
            // 巡视检查
            case '02':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__inspections_inspections__["a" /* InspectionsPage */], param);
                break;
            default:
                break;
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])('echarts'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["ElementRef"])
    ], Operations.prototype, "echarts", void 0);
    Operations = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'operations',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/operations.html"*/'<!-- <ion-header>\n    <ion-navbar>\n        <ion-title>运维</ion-title>\n    </ion-navbar>\n</ion-header> -->\n<ion-content>\n    <div class = \'operation-top\'>\n        <div class = \'date-select font-my\'>\n            <ion-datetime\n                cancelText="取消"\n                doneText="确定"\n                displayFormat="YYYY-MM"\n                [(ngModel)]="startDate"\n                [max]="toDate"\n                (ionChange)="changeDate()"\n            ></ion-datetime>\n        </div>\n        <div class = \'tab-my font-my\'>\n            <span [class.unselected] = \'dataType === "1"\' (click) = \'changeDataType("0")\'>我的</span><span [class.unselected] = \'dataType === "0"\' (click) = \'changeDataType("1")\'>全部</span>\n        </div>\n        <div class = \'operation-echart\'>\n            <div #echarts   class="echarts-content-div" ></div>\n        </div>\n        <div class = \'statistics font-my\'>\n            <div (click) = \'toOrderDay(0)\'>\n                <div>{{unexecuted }}</div>\n                <span>{{dataType===\'0\'?\'待办\':\'未完成\'}}</span>\n            </div>\n            <div (click) = \'toOrderDay(1)\'>\n                <div>{{executed }}</div>\n                <span>{{dataType===\'0\'?\'已办\':\'完成\'}}</span>\n            </div>\n        </div>\n    </div>\n    <div class = \'operation-mid operation-card\'>\n        <div class = \'operation-mid-table\'>\n            <span>工单类型</span>\n            <span class = \'unexecuted-color\'>{{dataType===\'0\'?\'待办\':\'未完成\'}}</span>\n            <span class = \'executed-color\'>{{dataType===\'0\'?\'已办\':\'完成\'}}</span>\n            <span>完成率</span>\n        </div>\n        <div class = \'operation-mid-table\' *ngFor = \'let ordersType of ordersTypeList;let i = index\' >\n            <span>{{ordersType.orderTypeText}}</span>\n            <span class = \'unexecuted-color\' (click) = \'toPage(ordersType,"01")\'>{{ordersType.unexecuted}}</span>\n            <span class = \'executed-color\' (click) = \'toPage(ordersType,"03")\'>{{ordersType.executed}}</span>\n            <span>{{ordersType.rate}}{{ordersType.rate?\'%\':\'\'}}</span>\n        </div>\n    </div>\n    <div class = \'operation-calendar operation-card\'>\n        <div *ngFor = \'let calendar of calendarDateList\'>\n            <span>{{calendar.v}}</span>\n        </div>\n        <div *ngFor = \'let calendar of calendarList\' class = \'calendarV\'  (click) = \'toOrderDay(calendar,true)\'>\n            <span >{{calendar.v}}</span>\n            <span *ngIf = \'calendar.total\' class = \'order-day-value\'  [class.font-red] = \'calendar.style === "alarm"\' [class.font-blue] = \'calendar.style === "normal"\'>{{calendar.total}}</span>\n        </div>\n    </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/operations.html"*/,
        })
        /**
         * 运维
         */
        ,
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2__providers_home_service__["a" /* HomeService */],
            __WEBPACK_IMPORTED_MODULE_3__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_4__providers_operations_service__["a" /* OperationsService */],
            __WEBPACK_IMPORTED_MODULE_6__providers_echarts_service__["a" /* EchartsService */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */]])
    ], Operations);
    return Operations;
}());

//# sourceMappingURL=operations.js.map

/***/ }),

/***/ 839:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OrderPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_operations_service__ = __webpack_require__(356);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__defect_management_defect_management__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__operate_tickets_operate_tickets__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__repair_ticket_repair_ticket__ = __webpack_require__(130);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__maintains_maintains__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__inspections_inspections__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var OrderPage = /** @class */ (function () {
    function OrderPage(operationsService, mutilservice, menuController, viewCtrl, navparams, navCtrl) {
        this.operationsService = operationsService;
        this.mutilservice = mutilservice;
        this.menuController = menuController;
        this.viewCtrl = viewCtrl;
        this.navparams = navparams;
        this.navCtrl = navCtrl;
        this.workbenchOrdersList = [];
        this.page = 0;
        this.canInfinite = false;
        this.dataType = this.navparams.get('dataType');
        this.status = this.navparams.get('status');
        var singleDay = this.navparams.get('singleDay');
        var d = this.navparams.get('startDate');
        if (!singleDay) {
            this.startDate = __WEBPACK_IMPORTED_MODULE_9_moment__(d).startOf('month').format('YYYY-MM-DD');
            this.endDate = __WEBPACK_IMPORTED_MODULE_9_moment__(d).endOf('month').format('YYYY-MM-DD');
        }
        else {
            this.startDate = __WEBPACK_IMPORTED_MODULE_9_moment__(d).format('YYYY-MM-DD');
            this.endDate = __WEBPACK_IMPORTED_MODULE_9_moment__(d).format('YYYY-MM-DD');
        }
    }
    OrderPage.prototype.ionViewDidLoad = function () {
        this.workbenchOrders();
    };
    /**列表 */
    OrderPage.prototype.workbenchOrders = function (refresher) {
        var _this = this;
        this.operationsService
            .workbenchOrders(this.dataType, this.status, this.startDate, this.endDate, this.page)
            .subscribe(function (e) {
            // if (e) {
            //     this.workbenchOrdersList = e['content'];
            // }
            // console.log(e)
            if (e && e['content'] && e['content'].length > 0) {
                _this.workbenchOrdersList = _this.workbenchOrdersList.concat(e['content']);
                // this.modulesList = e.content;
            }
            if (_this.workbenchOrdersList.length >= e.totalElements) {
                _this.canInfinite = false;
            }
            else {
                _this.canInfinite = true;
            }
            if (refresher) {
                refresher.complete();
                console.log('加载完成后，关闭刷新');
            }
        });
    };
    /**催单 */
    OrderPage.prototype.workbenchRemind = function (orderId) {
        var _this = this;
        this.operationsService.workbenchRemind(orderId).subscribe(function (e) {
            _this.mutilservice.popToastView(e);
        });
    };
    OrderPage.prototype.openSearchBar = function () { };
    /**查询 */
    OrderPage.prototype.submit = function () {
        this.menuController.close('orderPageSearch');
        this.workbenchOrdersList = [];
        this.workbenchOrders();
    };
    /**重置 */
    OrderPage.prototype.reset = function () {
        var back = JSON.parse(JSON.stringify(this.backupsModulesDetails));
        if (back) {
            this.status = back.status;
            this.startDate = back.startDate;
            this.endDate = back.endDate;
        }
    };
    /**搜索菜单打开时 */
    OrderPage.prototype.menuInit = function () {
        this.backupsModulesDetails = JSON.parse(JSON.stringify({
            status: this.status,
            startDate: this.startDate,
            endDate: this.endDate,
        }));
    };
    /**搜索菜单关闭时 */
    OrderPage.prototype.ionClose = function () { };
    /**控制侧边栏 */
    OrderPage.prototype.serchMenu = function () {
        this.menuController.enable(true, 'orderPageSearch');
        this.menuController.open('orderPageSearch');
    };
    OrderPage.prototype.changeStatus = function (status) {
        this.status = status;
    };
    /**时间选择 */
    OrderPage.prototype.changeDate = function (type) {
        // this[type] = this[type];
    };
    OrderPage.prototype.goBack = function () {
        this.viewCtrl.dismiss();
    };
    OrderPage.prototype.toPage = function (workbenchOrders) {
        switch (workbenchOrders.type) {
            // 缺陷管理
            case '01':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__defect_management_defect_management__["a" /* DefectManagementPage */]);
                break;
            // 操作票
            case '07':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__operate_tickets_operate_tickets__["a" /* OperateTicketsPage */]);
                break;
            // 抢修单
            case '08':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__repair_ticket_repair_ticket__["a" /* RepairTicketPage */]);
                break;
            // 检修预试
            case '04':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_7__maintains_maintains__["a" /* MaintainsPage */]);
                break;
            // 巡视检查
            case '02':
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_8__inspections_inspections__["a" /* InspectionsPage */]);
                break;
            default:
                break;
        }
    };
    /**
     * 下拉刷新
     *
     */
    OrderPage.prototype.doRefresh = function (refresher) {
        console.log('下拉刷新');
        this.page = 0;
        this.workbenchOrdersList = [];
        this.workbenchOrders(refresher);
    };
    /**
     * 上拉加载
     * @param infiniteScroll
     */
    OrderPage.prototype.doInfinite = function (infiniteScroll) {
        console.log('Begin async operation');
        this.page++;
        this.workbenchOrders(infiniteScroll);
    };
    OrderPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Component"])({
            selector: 'order-page',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/orderPage/order.page.html"*/'<!-- <ion-header>\n    <ion-navbar>\n        <ion-title>工单</ion-title>\n        <ion-buttons end>\n            <button ion-button icon-only (click)="serchMenu()">\n                <ion-icon name="search" style="font-size: 1.4em;"></ion-icon>\n            </button>\n        </ion-buttons>\n    </ion-navbar>\n</ion-header> -->\n<ion-header>\n  <ion-navbar>\n    <ion-buttons start>\n      <button (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>工单</ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="serchMenu()">\n        <ion-icon name="ios-search" class="title-bar-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n<ion-content padding class="card-list" #orderPageSearch>\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="下拉刷新"\n      refreshingSpinner="circles"\n      refreshingText="刷新..."\n    >\n    </ion-refresher-content>\n  </ion-refresher>\n  <ion-list>\n    <div\n      class="card-item"\n      *ngFor="let workbenchOrders of workbenchOrdersList"\n      (click)="toPage(workbenchOrders)"\n    >\n      <div class="left-line">\n        <div class="line-icon alarm01"></div>\n        <!-- [ngClass]="{alarm01: alarm.icon===\'alarm-01.png\',alarm02: alarm.icon===\'alarm-02.png\',alarm03: alarm.icon===\'alarm-03.png\',alarm04: alarm.icon===\'alarm-04.png\'}" -->\n      </div>\n      <div class="right-content">\n        <div class="title">{{workbenchOrders.time}}</div>\n        <ion-card>\n          <ion-card-header>\n            {{workbenchOrders.title}}\n            <span\n              class="card-cd"\n              (click)="workbenchRemind(workbenchOrders)"\n              *ngIf=\'workbenchOrders.button == "remind"\'\n              >催单</span\n            >\n          </ion-card-header>\n          <ul class="ion-card-content">\n            <li class="ell">{{workbenchOrders.item1}}</li>\n            <li class="ell">{{workbenchOrders.item2}}</li>\n            <li class="ell">{{workbenchOrders.item3}}</li>\n          </ul>\n          <div\n            *ngIf="workbenchOrders.status"\n            class="card-tip"\n            [style.background-color]="workbenchOrders.statusStyle"\n          >\n            {{workbenchOrders.status}}\n          </div>\n        </ion-card>\n      </div>\n    </div>\n  </ion-list>\n  <ion-infinite-scroll\n    (ionInfinite)="doInfinite($event)"\n    threshold="5%"\n    *ngIf="canInfinite"\n  >\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n\n<ion-menu\n  [content]="orderPageSearch"\n  side="right"\n  (ionOpen)="menuInit()"\n  (ionClose)="ionClose()"\n  id="orderPageSearch"\n  type="overlay"\n  swipeEnabled="true"\n  class="search-menu"\n>\n  <ion-content class="outer-content" no-bounce class="my-custom-menu">\n    <div>\n      <div class="condition">\n        <p>状态</p>\n        <span\n          class="had-endtime"\n          [class.selected]=\'status == "0"\'\n          (click)=\'changeStatus("0")\'\n        >\n          {{dataType===\'0\'?\'已办\':\'已完成\'}}\n        </span>\n        <span\n          class="had-endtime"\n          [class.selected]=\'status == "1"\'\n          (click)=\'changeStatus("1")\'\n        >\n          {{dataType===\'0\'?\'待办\':\'未完成\'}}\n        </span>\n      </div>\n      <div class="condition">\n        <p>日期</p>\n        <span class="had-endtime">\n          <!-- {{(modulesDetails && modulesDetails.startDate || \'\') | date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="startDate"\n            (ionChange)="changeDate(\'startDate\')"\n          ></ion-datetime>\n        </span>\n        <span class="had-endtime">\n          <!-- {{(modulesDetails && modulesDetails.endDate || \'\')| date:\'yyyy-MM-dd\'}} -->\n          <ion-datetime\n            cancelText="取消"\n            doneText="确定"\n            displayFormat="YYYY-MM-DD"\n            [(ngModel)]="endDate"\n            (ionChange)="changeDate(\'endDate\')"\n          ></ion-datetime>\n        </span>\n      </div>\n    </div>\n    <div class="my-button">\n      <button (click)="reset()">重置</button>\n      <button (click)="submit()">查询</button>\n    </div>\n  </ion-content>\n</ion-menu>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/orderPage/order.page.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__providers_operations_service__["a" /* OperationsService */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["m" /* MenuController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["w" /* ViewController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */]])
    ], OrderPage);
    return OrderPage;
}());

//# sourceMappingURL=order.page.js.map

/***/ }),

/***/ 840:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_app_version__ = __webpack_require__(185);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__password_password__ = __webpack_require__(841);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var MyPage = /** @class */ (function () {
    function MyPage(navCtrl, events, mUtils, appVersion) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.events = events;
        this.mUtils = mUtils;
        this.appVersion = appVersion;
        this.user = JSON.parse(localStorage.getItem('USER_INFO'));
        this.appVersion
            .getVersionNumber()
            .then(function (e) {
            _this.version = e;
        })
            .catch(function (error) {
            console.error(error);
        });
    }
    MyPage.prototype.changePassword = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__password_password__["a" /* PasswordPage */]);
    };
    MyPage.prototype.loginOut = function () {
        var _this = this;
        this.mUtils.customPrompt({ msg: '是否退出?' }, function () {
            _this.events.publish('login:out');
        });
    };
    MyPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'page-my',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/my/my.html"*/'<ion-header class="page-header">\n  <ion-navbar>\n    <ion-title> 我的 </ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <div class="title-container">\n    <div class="title-message">\n      <img src="assets/imgs/avatar/{{user.attr3||\'00.png\'}}" />\n      <p>{{user.userName}}</p>\n      <p>{{user.realName}}</p>\n    </div>\n  </div>\n  <ion-list>\n    <ion-item detail-push (tap)="changePassword($event)">\n      <ion-avatar item-start>\n        <img src="assets/imgs/my/icons/password.png" />\n      </ion-avatar>\n      修改密码\n    </ion-item>\n    <ion-item>\n      <ion-avatar item-start>\n        <img src="assets/imgs/my/icons/post.png" />\n      </ion-avatar>\n      职务\n      <span item-end>{{user?.titleText}}</span>\n    </ion-item>\n    <ion-item>\n      <ion-avatar item-start>\n        <img src="assets/imgs/my/icons/phone.png" />\n      </ion-avatar>\n      电话\n      <span item-end>{{user?.telephone}}</span>\n    </ion-item>\n    <ion-item>\n      <ion-avatar item-start>\n        <img src="assets/imgs/my/icons/email.png" />\n      </ion-avatar>\n      邮箱\n      <span item-end>{{user?.email}}</span>\n    </ion-item>\n    <ion-item>\n      <ion-avatar item-start>\n        <img src="assets/imgs/my/icons/version.png" />\n      </ion-avatar>\n      版本\n      <span item-end>{{version}}</span>\n    </ion-item>\n  </ion-list>\n\n  <div class="bottom-button">\n    <div class="logout dif-cor" (click)="loginOut()">退出登录</div>\n  </div>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/my/my.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_2__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_3__ionic_native_app_version__["a" /* AppVersion */]])
    ], MyPage);
    return MyPage;
}());

//# sourceMappingURL=my.js.map

/***/ }),

/***/ 841:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PasswordPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_user_servicer__ = __webpack_require__(171);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the PasswordPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var PasswordPage = /** @class */ (function () {
    function PasswordPage(navCtrl, navParams, fb, mutilservice, alertCtrl, userservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.mutilservice = mutilservice;
        this.alertCtrl = alertCtrl;
        this.userservice = userservice;
        this.user = JSON.parse(localStorage.getItem('USER_INFO'));
        this.form = this.fb.group({
            oldPassword: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            newPassword: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null)
        });
    }
    PasswordPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad PasswordPage');
    };
    PasswordPage.prototype.changePassword = function () {
        var _this = this;
        this.form.value;
        if (!this.mutilservice.isValid(this.form)) {
            var alert_1 = this.alertCtrl.create({
                title: '提示',
                subTitle: '请检查必填项！',
                buttons: ['关闭']
            });
            alert_1.present();
            return;
        }
        else {
            this.userservice.changePassword(this.form.value).subscribe(function (res) {
                _this.mutilservice.popToastView('密码修改成功');
                _this.navCtrl.pop();
            });
        }
    };
    PasswordPage.prototype.goBack = function () {
        this.navCtrl.pop();
    };
    PasswordPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_3__angular_core__["Component"])({
            selector: 'page-password',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/my/password/password.html"*/'<!--\n  Generated template for the PasswordPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar hideBackButton="true">\n    <ion-buttons start>\n      <button (click)="goBack()">\n        <ion-icon name="ios-arrow-back" class="my-back white-icon"></ion-icon>\n      </button>\n    </ion-buttons>\n    <ion-title>修改密码</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <form [formGroup]="form">\n    <div class="title-container">\n      <div class="title-message">\n        <img src="assets/imgs/avatar/{{user.attr3||\'00.png\'}}" />\n        <p>{{user.userName}}</p>\n        <p>{{user.realName}}</p>\n      </div>\n    </div>\n    <ion-list padding no-lines no-margin>\n      <ion-item no-lines>\n        <ion-input\n          type="password"\n          formControlName="oldPassword"\n          placeholder="原密码"\n        ></ion-input>\n      </ion-item>\n      <ion-item no-lines>\n        <ion-input\n          type="password"\n          formControlName="newPassword"\n          placeholder="新密码"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div padding-horizontal no-padding-top class="change-password-btn">\n      <button type="button" (click)="changePassword()">确定</button>\n    </div>\n\n    <div padding margin-top class="desc">\n      <p>\n        <ion-icon name="version"></ion-icon>\n        密码要求：\n      </p>\n      <p>1. 密码长度为8~16个字符</p>\n      <p>2. 由含字母、数字和特殊字符组成</p>\n      <p>3. 必须包含字母和数字</p>\n      <p>4. 不要使用123456等容易破解的密码</p>\n    </div>\n  </form>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/my/password/password.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_4_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_0__providers_user_servicer__["a" /* UserService */]])
    ], PasswordPage);
    return PasswordPage;
}());

//# sourceMappingURL=password.js.map

/***/ }),

/***/ 842:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ToolBorrow; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_components_util__ = __webpack_require__(179);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ToolBorrow = /** @class */ (function () {
    function ToolBorrow(util, navCtrl) {
        this.util = util;
        this.navCtrl = navCtrl;
    }
    ToolBorrow.prototype.sort = function () {
        this.util.showPopupList({
            buttons: [
                {
                    text: '正常库存',
                    handler: function () {
                        console.log("正常库存");
                    }
                }, {
                    text: '异常库存',
                    handler: function () {
                        console.log("异常库存");
                    }
                }
            ]
        });
    };
    ToolBorrow.prototype.next = function () {
        this.navCtrl.pop();
    };
    ToolBorrow = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'tool-borrow',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/tool-page/tool-borrow/tool-borrow.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>借用</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <ion-list no-lines>\n        <div ion-item>\n            <ion-label>仓库名称</ion-label>\n            <div item-right class="gray">仓库名称不可编辑</div>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>借用类别</ion-label>\n            <div item-right class="gray">选择借用类别</div>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>借用时间</ion-label>\n            <ion-datetime cancelText=\'取消\' doneText="确定" displayFormat="YYYY-MM-DD HH:mm" [(ngModel)]="myDate"></ion-datetime>\n            <!-- <div item-right class="gray">2018-05-23 16:00</div> -->\n        </div>\n        <div ion-item>\n            <ion-label>库存类别</ion-label>\n            <div item-right class="gray">库存类别1</div>\n        </div>\n        <div ion-item>\n            <ion-label>工具类别</ion-label>\n            <div item-right class="gray">工具类别1</div>\n        </div>\n        <div ion-item>\n            <ion-label>数量</ion-label>\n            <ion-input class="rinhtInput"  placeholder="输入数量"></ion-input>\n        </div>\n        <div ion-item>\n            <ion-label>单位</ion-label>\n            <ion-input class="rinhtInput" item-end placeholder="单位"></ion-input>\n        </div>\n        <ion-item class="textarea">\n            <ion-label class="textareaTitle" stacked>说明</ion-label>\n            <ion-textarea placeholder="不超过100字"></ion-textarea>\n        </ion-item>\n    </ion-list>\n    <div class="buttons">\n        <div class="buttonfull"   (click)="next()">取消</div>\n        <div class="buttonfull blue"   (click)="next()">确定</div>\n    </div>\n    \n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/tool-page/tool-borrow/tool-borrow.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__util_components_util__["a" /* ComponentsUtil */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */]])
    ], ToolBorrow);
    return ToolBorrow;
}());

//# sourceMappingURL=tool-borrow.js.map

/***/ }),

/***/ 843:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ToolReturn; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_components_util__ = __webpack_require__(179);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ToolReturn = /** @class */ (function () {
    function ToolReturn(util, navCtrl) {
        this.util = util;
        this.navCtrl = navCtrl;
    }
    ToolReturn.prototype.sort = function () {
        this.util.showPopupList({
            buttons: [
                {
                    text: '正常库存',
                    handler: function () {
                        console.log("正常库存");
                    }
                }, {
                    text: '异常库存',
                    handler: function () {
                        console.log("异常库存");
                    }
                }
            ]
        });
    };
    ToolReturn.prototype.next = function () {
        this.navCtrl.pop();
    };
    ToolReturn = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'tool-return',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/tool-page/tool-return/tool-return.html"*/'<ion-header>\n    <ion-navbar>\n        <ion-title>归还</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <ion-list no-lines>\n        <div ion-item>\n            <ion-label>仓库名称</ion-label>\n            <ion-input class="rinhtInput"  placeholder="输入仓库名称"></ion-input>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>归还类别</ion-label>\n            <div item-right class="gray">选择归还类别</div>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>归还时间</ion-label>\n            <ion-datetime cancelText=\'取消\' doneText="确定" displayFormat="YYYY-MM-DD HH:mm" [(ngModel)]="myDate"></ion-datetime>\n            <!-- <div item-right class="gray">2018-05-23 16:00</div> -->\n        </div>\n        <div ion-item detail-push (click)="sort()">\n            <ion-label>库存类别</ion-label>\n            <div item-right class="gray">选择库存类别</div>\n        </div>\n        <div ion-item detail-push>\n            <ion-label>工具类别</ion-label>\n            <div item-right class="gray">选择工具类别</div>\n        </div>\n        <div ion-item>\n            <ion-label>数量</ion-label>\n            <ion-input class="rinhtInput"  placeholder="输入数量"></ion-input>\n        </div>\n        <div ion-item>\n            <ion-label>单位</ion-label>\n            <ion-input class="rinhtInput" item-end placeholder="单位"></ion-input>\n        </div>\n        <ion-item class="textarea">\n            <ion-label class="textareaTitle" stacked>说明</ion-label>\n            <ion-textarea placeholder="不超过100字"></ion-textarea>\n        </ion-item>\n    </ion-list>\n    <div class="buttons">\n        <div class="buttonfull"   (click)="next()">取消</div>\n        <div class="buttonfull blue"   (click)="next()">确定</div>\n    </div>\n    \n</ion-content>'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/tool-page/tool-return/tool-return.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__util_components_util__["a" /* ComponentsUtil */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */]])
    ], ToolReturn);
    return ToolReturn;
}());

//# sourceMappingURL=tool-return.js.map

/***/ }),

/***/ 844:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DefectObjectsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the DefectObjectsPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DefectObjectsPage = /** @class */ (function () {
    function DefectObjectsPage(navCtrl, navParams, fb, mutilservice, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.mutilservice = mutilservice;
        this.viewCtrl = viewCtrl;
        this.objName = null;
        this.objCompany = null;
        this.objProvider = null;
        this.form = this.fb.group({
            objName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            objCompany: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            objProvider: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null)
        });
    }
    DefectObjectsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad DefectObjectsPage');
    };
    DefectObjectsPage.prototype.ok = function () {
        if (!this.form.value.objName) {
            this.mutilservice.popToastView('设备名称必填');
            return;
        }
        this.viewCtrl.dismiss({ value: this.form.value });
    };
    DefectObjectsPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    DefectObjectsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["Component"])({
            selector: 'page-defect-objects',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/defect-objects/defect-objects.html"*/'<!--\n  Generated template for the DefectObjectsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-content no-scroll>\n  <ion-icon name="close" (tap)="close()"></ion-icon>\n  <form [formGroup]="form">\n    <h6>设施名称<b>*</b></h6>\n    <ion-input type="text" formControlName="objName"></ion-input>\n    <h6>厂家</h6>\n    <ion-input type="text" formControlName="objCompany"></ion-input>\n    <h6>供应商</h6>\n    <ion-input type="text" formControlName="objProvider"></ion-input>\n    <ion-grid>\n      <ion-row>\n        <ion-col col-12>\n          <button type="button" ion-button small class="ok-btn" (tap)="ok()">\n            确定\n          </button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </form>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/util/modal/defect-objects/defect-objects.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_0__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_3_ionic_angular__["w" /* ViewController */]])
    ], DefectObjectsPage);
    return DefectObjectsPage;
}());

//# sourceMappingURL=defect-objects.js.map

/***/ }),

/***/ 854:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SettingsProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Rx__ = __webpack_require__(845);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Rx___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_rxjs_Rx__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_app_config__ = __webpack_require__(13);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



var SettingsProvider = /** @class */ (function () {
    function SettingsProvider(appConfig) {
        this.appConfig = appConfig;
        this.theme = new __WEBPACK_IMPORTED_MODULE_1_rxjs_Rx__["BehaviorSubject"](appConfig.theme);
        document.body.classList = appConfig.theme;
    }
    SettingsProvider.prototype.setActiveTheme = function (val) {
        this.theme.next(val);
    };
    SettingsProvider.prototype.getActiveTheme = function () {
        return this.theme.asObservable();
    };
    SettingsProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_2__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [Object])
    ], SettingsProvider);
    return SettingsProvider;
}());

//# sourceMappingURL=settings.js.map

/***/ }),

/***/ 855:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__ = __webpack_require__(856);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_module__ = __webpack_require__(860);


Object(__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__["a" /* platformBrowserDynamic */])().bootstrapModule(__WEBPACK_IMPORTED_MODULE_1__app_module__["a" /* AppModule */]);
//# sourceMappingURL=main.js.map

/***/ }),

/***/ 860:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common_http__ = __webpack_require__(139);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__ = __webpack_require__(95);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_android_permissions__ = __webpack_require__(370);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_app_update__ = __webpack_require__(373);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_app_version__ = __webpack_require__(185);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_camera__ = __webpack_require__(96);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__ = __webpack_require__(374);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_chooser__ = __webpack_require__(375);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_path__ = __webpack_require__(376);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_file_picker__ = __webpack_require__(97);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_file_transfer__ = __webpack_require__(377);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_geolocation__ = __webpack_require__(246);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_image_picker__ = __webpack_require__(114);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__ionic_native_media__ = __webpack_require__(866);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_photo_viewer__ = __webpack_require__(98);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_qr_scanner__ = __webpack_require__(378);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__ionic_native_screen_orientation__ = __webpack_require__(379);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_splash_screen__ = __webpack_require__(380);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__ionic_native_status_bar__ = __webpack_require__(247);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_ngx_echarts__ = __webpack_require__(462);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22_videogular2_buffering__ = __webpack_require__(1201);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22_videogular2_buffering___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_22_videogular2_buffering__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_videogular2_controls__ = __webpack_require__(1204);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_videogular2_controls___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_23_videogular2_controls__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24_videogular2_core__ = __webpack_require__(1219);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24_videogular2_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_24_videogular2_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25_videogular2_overlay_play__ = __webpack_require__(1223);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25_videogular2_overlay_play___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_25_videogular2_overlay_play__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26_videogular2_streaming__ = __webpack_require__(1226);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26_videogular2_streaming___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_26_videogular2_streaming__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__components_components_module__ = __webpack_require__(1229);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__pages_barcode_scanner_barcode_scanner__ = __webpack_require__(170);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__pages_common_allCompany_all_company__ = __webpack_require__(816);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__pages_common_allCompany_all_companys__ = __webpack_require__(1255);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__pages_common_deviceModel_device_model__ = __webpack_require__(350);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__pages_device_archive_device_archive__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__pages_device_doc_device_doc__ = __webpack_require__(818);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__pages_device_topo_device_topo__ = __webpack_require__(819);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__pages_home_daily_report_daily_report__ = __webpack_require__(347);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__pages_home_daily_report_report_detail_report_detail__ = __webpack_require__(805);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__pages_home_energy_report_energy_report__ = __webpack_require__(814);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__pages_home_equipment_message_equipment_message__ = __webpack_require__(90);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__pages_home_home__ = __webpack_require__(820);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__pages_home_log_list_log_list__ = __webpack_require__(822);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__pages_home_modules_details_modules_details1_device_details_device_details__ = __webpack_require__(801);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__pages_home_modules_details_modules_details1_modules_details1__ = __webpack_require__(795);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__pages_home_modules_details_modules_details2_modules_details2__ = __webpack_require__(806);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__pages_home_modules_details_modules_details3_modules_details3__ = __webpack_require__(807);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__pages_home_modules_details_modules_details4_modules_details4__ = __webpack_require__(349);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__pages_home_modules_details_modules_new__ = __webpack_require__(834);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__pages_home_new_log_new_log__ = __webpack_require__(835);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__pages_home_new_log_new_log__ = __webpack_require__(823);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__pages_home_report_production_monthly_ly_report_production_monthly_ly__ = __webpack_require__(813);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51__pages_home_run_log_edit_log_edit_log__ = __webpack_require__(836);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52__pages_home_run_log_run_log__ = __webpack_require__(1259);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53__pages_home_scan_message_scan_message__ = __webpack_require__(1261);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54__pages_home_warn_details_warn_details__ = __webpack_require__(789);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55__pages_home_warn_message_warn_message__ = __webpack_require__(176);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56__pages_login_login__ = __webpack_require__(354);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57__pages_modal_check_warehouse_check_warehouse__ = __webpack_require__(351);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58__pages_modal_search_warehouse_search_warehouse__ = __webpack_require__(352);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_59__pages_monitor_camera_hls_camera_hls__ = __webpack_require__(797);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_60__pages_monitor_camera_list_camera_list__ = __webpack_require__(796);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_61__pages_monitor_equipment_equipmentList__ = __webpack_require__(798);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_62__pages_monitor_monitor__ = __webpack_require__(235);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_63__pages_monitor_power_station_records_pow_sta_records__ = __webpack_require__(799);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_64__pages_my_my__ = __webpack_require__(840);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_65__pages_my_password_password__ = __webpack_require__(841);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_66__pages_operations_cargo_manage_cargo_in_cargo_in__ = __webpack_require__(829);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_67__pages_operations_cargo_manage_cargo_manage__ = __webpack_require__(827);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_68__pages_operations_cargo_manage_cargo_out_cargo_out__ = __webpack_require__(828);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_69__pages_operations_defect_management_details_defect_management_details__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_70__pages_operations_defect_management_defect_management__ = __webpack_require__(132);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_71__pages_operations_inspections_details_inspection_device_inspection_device__ = __webpack_require__(778);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_72__pages_operations_inspections_details_inspection_item_his_inspection_item_his__ = __webpack_require__(793);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_73__pages_operations_inspections_details_inspections_details__ = __webpack_require__(777);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_74__pages_operations_inspections_details_more_menu_more_menu__ = __webpack_require__(787);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_75__pages_operations_inspections_inspections__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_76__pages_operations_inspections_inspections_menus_inspections_menus__ = __webpack_require__(557);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_77__pages_operations_inventoris_inventoris__ = __webpack_require__(131);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_78__pages_operations_inventoris_inventoris_menus_inventoris_menus__ = __webpack_require__(342);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_79__pages_operations_inventoris_inventoris_out_in_inventoris_out_in__ = __webpack_require__(173);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_80__pages_operations_inventoris_inventoris_record_inventoris_record__ = __webpack_require__(341);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_81__pages_operations_job_record_details_job_record_details__ = __webpack_require__(802);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_82__pages_operations_job_record_job_record__ = __webpack_require__(346);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_83__pages_operations_maintains_details_maintains_details__ = __webpack_require__(809);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_84__pages_operations_maintains_details_maintains_device_maintains_device__ = __webpack_require__(810);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_85__pages_operations_maintains_details_maintains_item_his_maintains_item_his__ = __webpack_require__(812);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_86__pages_operations_maintains_details_more_menu_more_menu__ = __webpack_require__(811);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_87__pages_operations_maintains_maintains__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_88__pages_operations_maintains_maintains_menus_maintains_menus__ = __webpack_require__(808);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_89__pages_operations_notice_details_notice_details__ = __webpack_require__(831);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_90__pages_operations_notice_list_notice_list__ = __webpack_require__(830);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_91__pages_operations_operate_task_operate_task__ = __webpack_require__(832);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_92__pages_operations_operate_tickets_details_operate_tickets_details__ = __webpack_require__(340);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_93__pages_operations_operate_tickets_operate_tickets__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_94__pages_operations_operations__ = __webpack_require__(838);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_95__pages_operations_orderPage_order_page__ = __webpack_require__(839);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_96__pages_operations_repair_ticket_details_repair_ticket_details__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_97__pages_operations_repair_ticket_repair_ticket__ = __webpack_require__(130);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_98__pages_operations_tool_page_tool_borrow_tool_borrow__ = __webpack_require__(842);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_99__pages_operations_tool_page_tool_page__ = __webpack_require__(1262);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_100__pages_operations_tool_page_tool_return_tool_return__ = __webpack_require__(843);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_101__pages_operations_tool_v1_tool__ = __webpack_require__(824);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_102__pages_operations_tool_v1_tool_content_one__ = __webpack_require__(825);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_103__pages_operations_tool_v1_tool_content_two__ = __webpack_require__(826);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_104__pages_operations_work_ticket1_work_ticket1__ = __webpack_require__(780);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_105__pages_operations_work_ticket2_work_ticket2__ = __webpack_require__(781);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_106__pages_qr_result_bar_qr_result_bar__ = __webpack_require__(833);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_107__pages_register_register__ = __webpack_require__(837);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_108__pages_tabs_tabs__ = __webpack_require__(355);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_109__pages_util_common_defect_objects_common_defect_objects__ = __webpack_require__(1263);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_110__pages_util_common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_111__pages_util_common_equipment_selected_equipment_list_selected_equipment_list__ = __webpack_require__(775);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_112__pages_util_common_iotypes_common_iotypes__ = __webpack_require__(792);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_113__pages_util_common_materials_common_materials__ = __webpack_require__(229);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_114__pages_util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_115__pages_util_common_teams_common_teams__ = __webpack_require__(783);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_116__pages_util_common_typical_operate_tickets_common_typical_operate_tickets__ = __webpack_require__(785);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_117__pages_util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_118__pages_util_common_user_selected_user_list_selected_user_list__ = __webpack_require__(776);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_119__pages_util_global_search_global_search__ = __webpack_require__(821);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_120__pages_util_modal_common_check_memos_common_check_memos__ = __webpack_require__(790);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_121__pages_util_modal_common_check_common_check__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_122__pages_util_modal_common_defect_code_common_defect_code__ = __webpack_require__(782);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_123__pages_util_modal_common_dispatch_common_dispatch__ = __webpack_require__(232);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_124__pages_util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_125__pages_util_modal_common_operate_step_common_operate_step__ = __webpack_require__(784);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_126__pages_util_modal_common_radio_textarea_common_radio_textarea__ = __webpack_require__(343);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_127__pages_util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_128__pages_util_modal_defect_devices_defect_devices__ = __webpack_require__(786);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_129__pages_util_modal_defect_objects_defect_objects__ = __webpack_require__(844);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_130__pages_util_modal_inventoris_record_search_inventoris_record_search__ = __webpack_require__(791);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_131__pages_util_modal_job_record_losses_job_record_losses__ = __webpack_require__(803);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_132__pages_util_modal_job_record_search_job_record_search__ = __webpack_require__(804);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_133__pages_util_modal_operate_tickets_search_operate_tickets_search__ = __webpack_require__(794);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_134__pages_util_modal_warn_search_warn_search__ = __webpack_require__(788);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_135__pipes_keys_pipe__ = __webpack_require__(1264);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_136__providers_alarmlogs_service__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_137__providers_auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_138__providers_backend_service__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_139__providers_comment_comment__ = __webpack_require__(815);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_140__providers_core_http_interceptors__ = __webpack_require__(1265);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_141__providers_dailyreport_service__ = __webpack_require__(348);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_142__providers_defes_servicer__ = __webpack_require__(172);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_143__providers_echarts_service__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_144__providers_equipment_service__ = __webpack_require__(817);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_145__providers_home_service__ = __webpack_require__(135);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_146__providers_inspections_service__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_147__providers_location_plugin__ = __webpack_require__(339);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_148__providers_maintains_service__ = __webpack_require__(134);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_149__providers_material_service__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_150__providers_modules_service__ = __webpack_require__(92);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_151__providers_monitor_service__ = __webpack_require__(113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_152__providers_operate_tickets_service__ = __webpack_require__(233);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_153__providers_operations_service__ = __webpack_require__(356);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_154__providers_qr_search_service__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_155__providers_repair_tickets_service__ = __webpack_require__(231);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_156__providers_runlog_service__ = __webpack_require__(133);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_157__providers_user_servicer__ = __webpack_require__(171);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_158__providers_util_cache_service__ = __webpack_require__(227);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_159__providers_util_constants_service__ = __webpack_require__(353);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_160__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_161__providers_util_plugin_service__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_162__providers_video_service__ = __webpack_require__(345);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_163__util_components_util__ = __webpack_require__(179);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_164__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_165__pages_util_common_warehouse_common_warehouse__ = __webpack_require__(230);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_166__providers_settings_settings__ = __webpack_require__(854);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_167__providers_debounce_service__ = __webpack_require__(344);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_168__app_component__ = __webpack_require__(1528);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_169__modal_transitions__ = __webpack_require__(1529);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_170__pages_monitor_child_setting__ = __webpack_require__(800);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};











































































































































































var modals = [
    __WEBPACK_IMPORTED_MODULE_124__pages_util_modal_common_input_common_input__["a" /* CommonInputPage */],
    __WEBPACK_IMPORTED_MODULE_131__pages_util_modal_job_record_losses_job_record_losses__["a" /* JobRecordLossesPage */],
    __WEBPACK_IMPORTED_MODULE_110__pages_util_common_equipment_equipmentList__["a" /* EquipmentListPage */],
    __WEBPACK_IMPORTED_MODULE_111__pages_util_common_equipment_selected_equipment_list_selected_equipment_list__["a" /* SelectedEquipmentListPage */],
    __WEBPACK_IMPORTED_MODULE_117__pages_util_common_user_common_user__["a" /* CommonUserPage */],
    __WEBPACK_IMPORTED_MODULE_118__pages_util_common_user_selected_user_list_selected_user_list__["a" /* SelectedUserListPage */],
    __WEBPACK_IMPORTED_MODULE_127__pages_util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */],
    __WEBPACK_IMPORTED_MODULE_132__pages_util_modal_job_record_search_job_record_search__["a" /* JobRecordSearchPage */],
    __WEBPACK_IMPORTED_MODULE_113__pages_util_common_materials_common_materials__["a" /* CommonMaterialsPage */],
    __WEBPACK_IMPORTED_MODULE_165__pages_util_common_warehouse_common_warehouse__["a" /* CommonWarehousePage */],
    __WEBPACK_IMPORTED_MODULE_109__pages_util_common_defect_objects_common_defect_objects__["a" /* CommonDefectObjectsPage */],
    __WEBPACK_IMPORTED_MODULE_129__pages_util_modal_defect_objects_defect_objects__["a" /* DefectObjectsPage */],
    __WEBPACK_IMPORTED_MODULE_121__pages_util_modal_common_check_common_check__["a" /* CommonCheckPage */],
    __WEBPACK_IMPORTED_MODULE_123__pages_util_modal_common_dispatch_common_dispatch__["a" /* CommonDispatchPage */],
    __WEBPACK_IMPORTED_MODULE_122__pages_util_modal_common_defect_code_common_defect_code__["a" /* CommonDefectCodePage */],
    __WEBPACK_IMPORTED_MODULE_134__pages_util_modal_warn_search_warn_search__["a" /* WarnSearchPage */],
    __WEBPACK_IMPORTED_MODULE_120__pages_util_modal_common_check_memos_common_check_memos__["a" /* CommonCheckMemosPage */],
    __WEBPACK_IMPORTED_MODULE_115__pages_util_common_teams_common_teams__["a" /* CommonTeamsPage */],
    __WEBPACK_IMPORTED_MODULE_133__pages_util_modal_operate_tickets_search_operate_tickets_search__["a" /* OperateTicketsSearchPage */],
    __WEBPACK_IMPORTED_MODULE_125__pages_util_modal_common_operate_step_common_operate_step__["a" /* CommonOperateStepPage */],
    __WEBPACK_IMPORTED_MODULE_116__pages_util_common_typical_operate_tickets_common_typical_operate_tickets__["a" /* CommonTypicalOperateTicketsPage */],
    __WEBPACK_IMPORTED_MODULE_126__pages_util_modal_common_radio_textarea_common_radio_textarea__["a" /* CommonRadioTextareaPage */],
    __WEBPACK_IMPORTED_MODULE_128__pages_util_modal_defect_devices_defect_devices__["a" /* DefectDevicesPage */],
    __WEBPACK_IMPORTED_MODULE_112__pages_util_common_iotypes_common_iotypes__["a" /* CommonIotypesPage */],
    __WEBPACK_IMPORTED_MODULE_130__pages_util_modal_inventoris_record_search_inventoris_record_search__["a" /* InventorisRecordSearchPage */],
];
var homeTabPage = [__WEBPACK_IMPORTED_MODULE_50__pages_home_report_production_monthly_ly_report_production_monthly_ly__["a" /* ReportProductionMonthlyLyPage */], __WEBPACK_IMPORTED_MODULE_38__pages_home_energy_report_energy_report__["a" /* EnergyReportPage */]];
var operateTabPage = [
    __WEBPACK_IMPORTED_MODULE_70__pages_operations_defect_management_defect_management__["a" /* DefectManagementPage */],
    __WEBPACK_IMPORTED_MODULE_69__pages_operations_defect_management_details_defect_management_details__["a" /* DefectManagementDetailsPage */],
    __WEBPACK_IMPORTED_MODULE_97__pages_operations_repair_ticket_repair_ticket__["a" /* RepairTicketPage */],
    __WEBPACK_IMPORTED_MODULE_104__pages_operations_work_ticket1_work_ticket1__["a" /* WorkTicket1Page */],
    __WEBPACK_IMPORTED_MODULE_105__pages_operations_work_ticket2_work_ticket2__["a" /* WorkTicket2Page */],
    __WEBPACK_IMPORTED_MODULE_59__pages_monitor_camera_hls_camera_hls__["a" /* CameraHlsPage */],
    __WEBPACK_IMPORTED_MODULE_96__pages_operations_repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */],
    __WEBPACK_IMPORTED_MODULE_93__pages_operations_operate_tickets_operate_tickets__["a" /* OperateTicketsPage */],
    __WEBPACK_IMPORTED_MODULE_92__pages_operations_operate_tickets_details_operate_tickets_details__["a" /* OperateTicketsDetailsPage */],
    __WEBPACK_IMPORTED_MODULE_75__pages_operations_inspections_inspections__["a" /* InspectionsPage */],
    __WEBPACK_IMPORTED_MODULE_76__pages_operations_inspections_inspections_menus_inspections_menus__["a" /* InspectionsMenusPage */],
    __WEBPACK_IMPORTED_MODULE_73__pages_operations_inspections_details_inspections_details__["a" /* InspectionsDetailsPage */],
    __WEBPACK_IMPORTED_MODULE_71__pages_operations_inspections_details_inspection_device_inspection_device__["a" /* InspectionDevicePage */],
    __WEBPACK_IMPORTED_MODULE_72__pages_operations_inspections_details_inspection_item_his_inspection_item_his__["a" /* InspectionItemHisPage */],
    __WEBPACK_IMPORTED_MODULE_85__pages_operations_maintains_details_maintains_item_his_maintains_item_his__["a" /* MaintainsItemHisPage */],
    __WEBPACK_IMPORTED_MODULE_74__pages_operations_inspections_details_more_menu_more_menu__["a" /* InspectionsMoreMenuPage */],
    __WEBPACK_IMPORTED_MODULE_87__pages_operations_maintains_maintains__["a" /* MaintainsPage */],
    __WEBPACK_IMPORTED_MODULE_88__pages_operations_maintains_maintains_menus_maintains_menus__["a" /* MaintainsMenusPage */],
    __WEBPACK_IMPORTED_MODULE_83__pages_operations_maintains_details_maintains_details__["a" /* MaintainsDetailsPage */],
    __WEBPACK_IMPORTED_MODULE_84__pages_operations_maintains_details_maintains_device_maintains_device__["a" /* MaintainsDevicePage */],
    __WEBPACK_IMPORTED_MODULE_86__pages_operations_maintains_details_more_menu_more_menu__["a" /* MaintainsMoreMenuPage */],
    __WEBPACK_IMPORTED_MODULE_95__pages_operations_orderPage_order_page__["a" /* OrderPage */],
];
var AppModule = /** @class */ (function () {
    function AppModule(config) {
        this.config = config;
        this.setCustomTransitions();
    }
    AppModule.prototype.setCustomTransitions = function () {
        this.config.setTransition('modal-from-right-enter', __WEBPACK_IMPORTED_MODULE_169__modal_transitions__["a" /* ModalFromRightEnter */]);
        this.config.setTransition('modal-from-right-leave', __WEBPACK_IMPORTED_MODULE_169__modal_transitions__["b" /* ModalFromRightLeave */]);
        this.config.setTransition('modal-scale-enter', __WEBPACK_IMPORTED_MODULE_169__modal_transitions__["c" /* ModalScaleEnter */]);
        this.config.setTransition('modal-scale-leave', __WEBPACK_IMPORTED_MODULE_169__modal_transitions__["d" /* ModalScaleLeave */]);
    };
    AppModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["NgModule"])({
            declarations: __spreadArrays([
                __WEBPACK_IMPORTED_MODULE_168__app_component__["a" /* MyApp */],
                __WEBPACK_IMPORTED_MODULE_62__pages_monitor_monitor__["a" /* MonitorPage */],
                __WEBPACK_IMPORTED_MODULE_40__pages_home_home__["a" /* HomePage */],
                __WEBPACK_IMPORTED_MODULE_108__pages_tabs_tabs__["a" /* TabsPage */],
                __WEBPACK_IMPORTED_MODULE_94__pages_operations_operations__["a" /* Operations */],
                __WEBPACK_IMPORTED_MODULE_82__pages_operations_job_record_job_record__["a" /* JobRecordPage */],
                __WEBPACK_IMPORTED_MODULE_81__pages_operations_job_record_details_job_record_details__["a" /* JobRecordDetailsPage */],
                __WEBPACK_IMPORTED_MODULE_77__pages_operations_inventoris_inventoris__["a" /* InventorisPage */],
                __WEBPACK_IMPORTED_MODULE_78__pages_operations_inventoris_inventoris_menus_inventoris_menus__["a" /* InventorisMenusPage */],
                __WEBPACK_IMPORTED_MODULE_79__pages_operations_inventoris_inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */],
                __WEBPACK_IMPORTED_MODULE_80__pages_operations_inventoris_inventoris_record_inventoris_record__["a" /* InventorisRecordPage */],
                __WEBPACK_IMPORTED_MODULE_49__pages_home_new_log_new_log__["a" /* NewLog */],
                __WEBPACK_IMPORTED_MODULE_53__pages_home_scan_message_scan_message__["a" /* ScanMessage */],
                __WEBPACK_IMPORTED_MODULE_29__pages_barcode_scanner_barcode_scanner__["a" /* BarcodeScannerPage */],
                __WEBPACK_IMPORTED_MODULE_106__pages_qr_result_bar_qr_result_bar__["a" /* QrResultBarPage */],
                __WEBPACK_IMPORTED_MODULE_55__pages_home_warn_message_warn_message__["a" /* WarnMessage */],
                __WEBPACK_IMPORTED_MODULE_54__pages_home_warn_details_warn_details__["a" /* WarnDetails */],
                __WEBPACK_IMPORTED_MODULE_64__pages_my_my__["a" /* MyPage */],
                __WEBPACK_IMPORTED_MODULE_65__pages_my_password_password__["a" /* PasswordPage */],
                __WEBPACK_IMPORTED_MODULE_39__pages_home_equipment_message_equipment_message__["a" /* EquipmentMessage */],
                __WEBPACK_IMPORTED_MODULE_90__pages_operations_notice_list_notice_list__["a" /* NoticeList */],
                __WEBPACK_IMPORTED_MODULE_89__pages_operations_notice_details_notice_details__["a" /* NoticeDetails */],
                __WEBPACK_IMPORTED_MODULE_63__pages_monitor_power_station_records_pow_sta_records__["a" /* PowStaRecords */],
                __WEBPACK_IMPORTED_MODULE_67__pages_operations_cargo_manage_cargo_manage__["a" /* CargoManage */],
                __WEBPACK_IMPORTED_MODULE_57__pages_modal_check_warehouse_check_warehouse__["a" /* CheckWarehouse */],
                __WEBPACK_IMPORTED_MODULE_58__pages_modal_search_warehouse_search_warehouse__["a" /* SearchWarehouse */],
                __WEBPACK_IMPORTED_MODULE_68__pages_operations_cargo_manage_cargo_out_cargo_out__["a" /* CargoOut */],
                __WEBPACK_IMPORTED_MODULE_99__pages_operations_tool_page_tool_page__["a" /* ToolPage */],
                __WEBPACK_IMPORTED_MODULE_119__pages_util_global_search_global_search__["a" /* GlobalSearch */],
                __WEBPACK_IMPORTED_MODULE_66__pages_operations_cargo_manage_cargo_in_cargo_in__["a" /* CargoIn */],
                __WEBPACK_IMPORTED_MODULE_100__pages_operations_tool_page_tool_return_tool_return__["a" /* ToolReturn */],
                __WEBPACK_IMPORTED_MODULE_98__pages_operations_tool_page_tool_borrow_tool_borrow__["a" /* ToolBorrow */],
                __WEBPACK_IMPORTED_MODULE_91__pages_operations_operate_task_operate_task__["a" /* OperateTask */],
                __WEBPACK_IMPORTED_MODULE_41__pages_home_log_list_log_list__["a" /* LogList */],
                __WEBPACK_IMPORTED_MODULE_56__pages_login_login__["a" /* LoginPage */],
                __WEBPACK_IMPORTED_MODULE_107__pages_register_register__["a" /* RegisterPage */],
                __WEBPACK_IMPORTED_MODULE_135__pipes_keys_pipe__["a" /* KeysPipe */],
                __WEBPACK_IMPORTED_MODULE_170__pages_monitor_child_setting__["a" /* SettingPage */],
                __WEBPACK_IMPORTED_MODULE_33__pages_device_archive_device_archive__["a" /* DeviceArchivePage */],
                __WEBPACK_IMPORTED_MODULE_35__pages_device_topo_device_topo__["a" /* DeviceTopoPage */],
                __WEBPACK_IMPORTED_MODULE_34__pages_device_doc_device_doc__["a" /* DeviceDocPage */],
                /**临时 */
                __WEBPACK_IMPORTED_MODULE_36__pages_home_daily_report_daily_report__["a" /* DailyReport */],
                __WEBPACK_IMPORTED_MODULE_37__pages_home_daily_report_report_detail_report_detail__["a" /* ReportDetail */],
                __WEBPACK_IMPORTED_MODULE_52__pages_home_run_log_run_log__["a" /* RunLog */],
                __WEBPACK_IMPORTED_MODULE_51__pages_home_run_log_edit_log_edit_log__["a" /* EditLog */],
                __WEBPACK_IMPORTED_MODULE_48__pages_home_new_log_new_log__["a" /* NewLog_old */],
                __WEBPACK_IMPORTED_MODULE_30__pages_common_allCompany_all_company__["a" /* AllCompany */],
                __WEBPACK_IMPORTED_MODULE_61__pages_monitor_equipment_equipmentList__["a" /* EquipmentListPage */],
                __WEBPACK_IMPORTED_MODULE_101__pages_operations_tool_v1_tool__["a" /* ToolPageV1 */],
                __WEBPACK_IMPORTED_MODULE_102__pages_operations_tool_v1_tool_content_one__["a" /* ToolonePage */],
                __WEBPACK_IMPORTED_MODULE_103__pages_operations_tool_v1_tool_content_two__["a" /* TooltwoPage */],
                __WEBPACK_IMPORTED_MODULE_60__pages_monitor_camera_list_camera_list__["a" /* CameraListPage */],
                __WEBPACK_IMPORTED_MODULE_31__pages_common_allCompany_all_companys__["a" /* AllCompanys */],
                __WEBPACK_IMPORTED_MODULE_32__pages_common_deviceModel_device_model__["a" /* DeviceModel */],
                __WEBPACK_IMPORTED_MODULE_114__pages_util_common_station_common_station__["a" /* CommonStationPage */],
                __WEBPACK_IMPORTED_MODULE_43__pages_home_modules_details_modules_details1_modules_details1__["a" /* ModulesDetails1Page */],
                __WEBPACK_IMPORTED_MODULE_44__pages_home_modules_details_modules_details2_modules_details2__["a" /* ModulesDetails2Page */],
                __WEBPACK_IMPORTED_MODULE_47__pages_home_modules_details_modules_new__["a" /* ModulesNewPage */],
                __WEBPACK_IMPORTED_MODULE_42__pages_home_modules_details_modules_details1_device_details_device_details__["a" /* DeviceDetailsPage */],
                __WEBPACK_IMPORTED_MODULE_45__pages_home_modules_details_modules_details3_modules_details3__["a" /* ModulesDetails3Page */],
                __WEBPACK_IMPORTED_MODULE_46__pages_home_modules_details_modules_details4_modules_details4__["a" /* ModulesDetails4Page */]
            ], homeTabPage, operateTabPage, modals),
            imports: [
                __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_21_ngx_echarts__["a" /* NgxEchartsModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_common_http__["c" /* HttpClientModule */],
                __WEBPACK_IMPORTED_MODULE_27__components_components_module__["a" /* ComponentsModule */],
                __WEBPACK_IMPORTED_MODULE_24_videogular2_core__["VgCoreModule"],
                __WEBPACK_IMPORTED_MODULE_23_videogular2_controls__["VgControlsModule"],
                __WEBPACK_IMPORTED_MODULE_25_videogular2_overlay_play__["VgOverlayPlayModule"],
                __WEBPACK_IMPORTED_MODULE_22_videogular2_buffering__["VgBufferingModule"],
                __WEBPACK_IMPORTED_MODULE_26_videogular2_streaming__["VgStreamingModule"],
                __WEBPACK_IMPORTED_MODULE_20_ionic_angular__["i" /* IonicModule */].forRoot(__WEBPACK_IMPORTED_MODULE_168__app_component__["a" /* MyApp */], {
                    backButtonText: ' ',
                    iconMode: 'ios',
                    mode: 'ios',
                    tabsHideOnSubPages: true,
                }, {
                    links: []
                }),
            ],
            bootstrap: [__WEBPACK_IMPORTED_MODULE_20_ionic_angular__["g" /* IonicApp */]],
            entryComponents: __spreadArrays([
                __WEBPACK_IMPORTED_MODULE_168__app_component__["a" /* MyApp */],
                __WEBPACK_IMPORTED_MODULE_62__pages_monitor_monitor__["a" /* MonitorPage */],
                __WEBPACK_IMPORTED_MODULE_40__pages_home_home__["a" /* HomePage */],
                __WEBPACK_IMPORTED_MODULE_108__pages_tabs_tabs__["a" /* TabsPage */],
                __WEBPACK_IMPORTED_MODULE_94__pages_operations_operations__["a" /* Operations */],
                __WEBPACK_IMPORTED_MODULE_82__pages_operations_job_record_job_record__["a" /* JobRecordPage */],
                __WEBPACK_IMPORTED_MODULE_81__pages_operations_job_record_details_job_record_details__["a" /* JobRecordDetailsPage */],
                __WEBPACK_IMPORTED_MODULE_77__pages_operations_inventoris_inventoris__["a" /* InventorisPage */],
                __WEBPACK_IMPORTED_MODULE_78__pages_operations_inventoris_inventoris_menus_inventoris_menus__["a" /* InventorisMenusPage */],
                __WEBPACK_IMPORTED_MODULE_79__pages_operations_inventoris_inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */],
                __WEBPACK_IMPORTED_MODULE_80__pages_operations_inventoris_inventoris_record_inventoris_record__["a" /* InventorisRecordPage */],
                __WEBPACK_IMPORTED_MODULE_49__pages_home_new_log_new_log__["a" /* NewLog */],
                __WEBPACK_IMPORTED_MODULE_53__pages_home_scan_message_scan_message__["a" /* ScanMessage */],
                __WEBPACK_IMPORTED_MODULE_29__pages_barcode_scanner_barcode_scanner__["a" /* BarcodeScannerPage */],
                __WEBPACK_IMPORTED_MODULE_106__pages_qr_result_bar_qr_result_bar__["a" /* QrResultBarPage */],
                __WEBPACK_IMPORTED_MODULE_55__pages_home_warn_message_warn_message__["a" /* WarnMessage */],
                __WEBPACK_IMPORTED_MODULE_54__pages_home_warn_details_warn_details__["a" /* WarnDetails */],
                __WEBPACK_IMPORTED_MODULE_64__pages_my_my__["a" /* MyPage */],
                __WEBPACK_IMPORTED_MODULE_65__pages_my_password_password__["a" /* PasswordPage */],
                __WEBPACK_IMPORTED_MODULE_39__pages_home_equipment_message_equipment_message__["a" /* EquipmentMessage */],
                __WEBPACK_IMPORTED_MODULE_90__pages_operations_notice_list_notice_list__["a" /* NoticeList */],
                __WEBPACK_IMPORTED_MODULE_89__pages_operations_notice_details_notice_details__["a" /* NoticeDetails */],
                __WEBPACK_IMPORTED_MODULE_63__pages_monitor_power_station_records_pow_sta_records__["a" /* PowStaRecords */],
                __WEBPACK_IMPORTED_MODULE_67__pages_operations_cargo_manage_cargo_manage__["a" /* CargoManage */],
                __WEBPACK_IMPORTED_MODULE_57__pages_modal_check_warehouse_check_warehouse__["a" /* CheckWarehouse */],
                __WEBPACK_IMPORTED_MODULE_58__pages_modal_search_warehouse_search_warehouse__["a" /* SearchWarehouse */],
                __WEBPACK_IMPORTED_MODULE_68__pages_operations_cargo_manage_cargo_out_cargo_out__["a" /* CargoOut */],
                __WEBPACK_IMPORTED_MODULE_99__pages_operations_tool_page_tool_page__["a" /* ToolPage */],
                __WEBPACK_IMPORTED_MODULE_119__pages_util_global_search_global_search__["a" /* GlobalSearch */],
                __WEBPACK_IMPORTED_MODULE_66__pages_operations_cargo_manage_cargo_in_cargo_in__["a" /* CargoIn */],
                __WEBPACK_IMPORTED_MODULE_100__pages_operations_tool_page_tool_return_tool_return__["a" /* ToolReturn */],
                __WEBPACK_IMPORTED_MODULE_98__pages_operations_tool_page_tool_borrow_tool_borrow__["a" /* ToolBorrow */],
                __WEBPACK_IMPORTED_MODULE_91__pages_operations_operate_task_operate_task__["a" /* OperateTask */],
                __WEBPACK_IMPORTED_MODULE_41__pages_home_log_list_log_list__["a" /* LogList */],
                __WEBPACK_IMPORTED_MODULE_56__pages_login_login__["a" /* LoginPage */],
                __WEBPACK_IMPORTED_MODULE_107__pages_register_register__["a" /* RegisterPage */],
                __WEBPACK_IMPORTED_MODULE_170__pages_monitor_child_setting__["a" /* SettingPage */],
                __WEBPACK_IMPORTED_MODULE_33__pages_device_archive_device_archive__["a" /* DeviceArchivePage */],
                __WEBPACK_IMPORTED_MODULE_35__pages_device_topo_device_topo__["a" /* DeviceTopoPage */],
                __WEBPACK_IMPORTED_MODULE_34__pages_device_doc_device_doc__["a" /* DeviceDocPage */],
                /**临时 */
                __WEBPACK_IMPORTED_MODULE_36__pages_home_daily_report_daily_report__["a" /* DailyReport */],
                __WEBPACK_IMPORTED_MODULE_37__pages_home_daily_report_report_detail_report_detail__["a" /* ReportDetail */],
                __WEBPACK_IMPORTED_MODULE_52__pages_home_run_log_run_log__["a" /* RunLog */],
                __WEBPACK_IMPORTED_MODULE_51__pages_home_run_log_edit_log_edit_log__["a" /* EditLog */],
                __WEBPACK_IMPORTED_MODULE_48__pages_home_new_log_new_log__["a" /* NewLog_old */],
                __WEBPACK_IMPORTED_MODULE_30__pages_common_allCompany_all_company__["a" /* AllCompany */],
                __WEBPACK_IMPORTED_MODULE_61__pages_monitor_equipment_equipmentList__["a" /* EquipmentListPage */],
                __WEBPACK_IMPORTED_MODULE_101__pages_operations_tool_v1_tool__["a" /* ToolPageV1 */],
                __WEBPACK_IMPORTED_MODULE_102__pages_operations_tool_v1_tool_content_one__["a" /* ToolonePage */],
                __WEBPACK_IMPORTED_MODULE_103__pages_operations_tool_v1_tool_content_two__["a" /* TooltwoPage */],
                __WEBPACK_IMPORTED_MODULE_60__pages_monitor_camera_list_camera_list__["a" /* CameraListPage */],
                __WEBPACK_IMPORTED_MODULE_31__pages_common_allCompany_all_companys__["a" /* AllCompanys */],
                __WEBPACK_IMPORTED_MODULE_32__pages_common_deviceModel_device_model__["a" /* DeviceModel */],
                __WEBPACK_IMPORTED_MODULE_114__pages_util_common_station_common_station__["a" /* CommonStationPage */],
                __WEBPACK_IMPORTED_MODULE_43__pages_home_modules_details_modules_details1_modules_details1__["a" /* ModulesDetails1Page */],
                __WEBPACK_IMPORTED_MODULE_44__pages_home_modules_details_modules_details2_modules_details2__["a" /* ModulesDetails2Page */],
                __WEBPACK_IMPORTED_MODULE_47__pages_home_modules_details_modules_new__["a" /* ModulesNewPage */],
                __WEBPACK_IMPORTED_MODULE_42__pages_home_modules_details_modules_details1_device_details_device_details__["a" /* DeviceDetailsPage */],
                __WEBPACK_IMPORTED_MODULE_45__pages_home_modules_details_modules_details3_modules_details3__["a" /* ModulesDetails3Page */],
                __WEBPACK_IMPORTED_MODULE_46__pages_home_modules_details_modules_details4_modules_details4__["a" /* ModulesDetails4Page */]
            ], homeTabPage, operateTabPage, modals),
            providers: [
                __WEBPACK_IMPORTED_MODULE_4__ionic_native_app_update__["a" /* AppUpdate */],
                __WEBPACK_IMPORTED_MODULE_6__ionic_native_camera__["a" /* Camera */],
                __WEBPACK_IMPORTED_MODULE_11__ionic_native_file_transfer__["a" /* FileTransfer */],
                __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__["a" /* File */],
                __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_path__["a" /* FilePath */],
                __WEBPACK_IMPORTED_MODULE_13__ionic_native_image_picker__["a" /* ImagePicker */],
                __WEBPACK_IMPORTED_MODULE_15__ionic_native_photo_viewer__["a" /* PhotoViewer */],
                __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_chooser__["a" /* FileChooser */],
                __WEBPACK_IMPORTED_MODULE_10__ionic_native_file_picker__["a" /* IOSFilePicker */],
                __WEBPACK_IMPORTED_MODULE_5__ionic_native_app_version__["a" /* AppVersion */],
                __WEBPACK_IMPORTED_MODULE_19__ionic_native_status_bar__["a" /* StatusBar */],
                __WEBPACK_IMPORTED_MODULE_18__ionic_native_splash_screen__["a" /* SplashScreen */],
                __WEBPACK_IMPORTED_MODULE_143__providers_echarts_service__["a" /* EchartsService */],
                __WEBPACK_IMPORTED_MODULE_163__util_components_util__["a" /* ComponentsUtil */],
                __WEBPACK_IMPORTED_MODULE_137__providers_auth_http_service__["a" /* AuthHttpService */],
                __WEBPACK_IMPORTED_MODULE_160__providers_util_Mutil_service__["a" /* MutilService */],
                __WEBPACK_IMPORTED_MODULE_159__providers_util_constants_service__["a" /* ConstantsService */],
                __WEBPACK_IMPORTED_MODULE_145__providers_home_service__["a" /* HomeService */],
                __WEBPACK_IMPORTED_MODULE_151__providers_monitor_service__["a" /* MonitorService */],
                __WEBPACK_IMPORTED_MODULE_136__providers_alarmlogs_service__["a" /* alarmlogsService */],
                __WEBPACK_IMPORTED_MODULE_154__providers_qr_search_service__["a" /* QrSearchService */],
                __WEBPACK_IMPORTED_MODULE_157__providers_user_servicer__["a" /* UserService */],
                __WEBPACK_IMPORTED_MODULE_150__providers_modules_service__["a" /* ModulesService */],
                __WEBPACK_IMPORTED_MODULE_153__providers_operations_service__["a" /* OperationsService */],
                /**临时 */
                __WEBPACK_IMPORTED_MODULE_141__providers_dailyreport_service__["a" /* DailyReportService */],
                __WEBPACK_IMPORTED_MODULE_144__providers_equipment_service__["a" /* EquipmentService */],
                __WEBPACK_IMPORTED_MODULE_142__providers_defes_servicer__["a" /* DefesService */],
                __WEBPACK_IMPORTED_MODULE_161__providers_util_plugin_service__["a" /* PluginService */],
                __WEBPACK_IMPORTED_MODULE_156__providers_runlog_service__["a" /* RunLogService */],
                __WEBPACK_IMPORTED_MODULE_138__providers_backend_service__["a" /* BackendService */],
                __WEBPACK_IMPORTED_MODULE_158__providers_util_cache_service__["a" /* CacheService */],
                __WEBPACK_IMPORTED_MODULE_149__providers_material_service__["a" /* MaterialService */],
                __WEBPACK_IMPORTED_MODULE_162__providers_video_service__["a" /* VideoService */],
                __WEBPACK_IMPORTED_MODULE_3__ionic_native_android_permissions__["a" /* AndroidPermissions */],
                __WEBPACK_IMPORTED_MODULE_16__ionic_native_qr_scanner__["a" /* QRScanner */],
                __WEBPACK_IMPORTED_MODULE_17__ionic_native_screen_orientation__["a" /* ScreenOrientation */],
                __WEBPACK_IMPORTED_MODULE_139__providers_comment_comment__["a" /* CommentProvider */],
                __WEBPACK_IMPORTED_MODULE_155__providers_repair_tickets_service__["a" /* RepairTicketsProvider */],
                __WEBPACK_IMPORTED_MODULE_152__providers_operate_tickets_service__["a" /* OperateTicketsProvider */],
                __WEBPACK_IMPORTED_MODULE_146__providers_inspections_service__["a" /* InspectionsProvider */],
                __WEBPACK_IMPORTED_MODULE_12__ionic_native_geolocation__["a" /* Geolocation */],
                __WEBPACK_IMPORTED_MODULE_14__ionic_native_media__["a" /* Media */],
                __WEBPACK_IMPORTED_MODULE_147__providers_location_plugin__["a" /* NativeService */],
                __WEBPACK_IMPORTED_MODULE_148__providers_maintains_service__["a" /* MaintainsProvider */],
                __WEBPACK_IMPORTED_MODULE_140__providers_core_http_interceptors__["a" /* httpInterceptorProviders */],
                __WEBPACK_IMPORTED_MODULE_166__providers_settings_settings__["a" /* SettingsProvider */],
                __WEBPACK_IMPORTED_MODULE_167__providers_debounce_service__["a" /* DebounceService */],
                { provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["ErrorHandler"], useClass: __WEBPACK_IMPORTED_MODULE_20_ionic_angular__["h" /* IonicErrorHandler */] },
                { provide: __WEBPACK_IMPORTED_MODULE_28__models_app_config__["a" /* APP_CONFIG */], useValue: __WEBPACK_IMPORTED_MODULE_164__models_app_config__["b" /* DEV_CONFIG */] },
            ],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_20_ionic_angular__["e" /* Config */]])
    ], AppModule);
    return AppModule;
}());

//# sourceMappingURL=app.module.js.map

/***/ }),

/***/ 89:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DefectManagementDetailsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__work_ticket1_work_ticket1__ = __webpack_require__(780);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util_modal_common_input_common_input__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_forms__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__util_common_user_common_user__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_modal_common_textarea_common_textarea__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_defes_servicer__ = __webpack_require__(172);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__util_common_station_common_station__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__util_common_equipment_equipmentList__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__work_flow_chart__ = __webpack_require__(1246);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__util_modal_common_check_common_check__ = __webpack_require__(128);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__work_ticket2_work_ticket2__ = __webpack_require__(781);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__inventoris_inventoris_out_in_inventoris_out_in__ = __webpack_require__(173);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__util_modal_common_dispatch_common_dispatch__ = __webpack_require__(232);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__repair_ticket_details_repair_ticket_details__ = __webpack_require__(129);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__operate_tickets_details_operate_tickets_details__ = __webpack_require__(340);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__util_modal_defect_devices_defect_devices__ = __webpack_require__(786);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};























/**
 * Generated class for the JobRecordDetailsPage page.
 * 缺陷单
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var DefectManagementDetailsPage = /** @class */ (function () {
    function DefectManagementDetailsPage(navCtrl, navParams, fb, modalCtrl, actionSheetCtrl, alertCtrl, loadingCtrl, mutilservice, defesservice) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.fb = fb;
        this.modalCtrl = modalCtrl;
        this.actionSheetCtrl = actionSheetCtrl;
        this.alertCtrl = alertCtrl;
        this.loadingCtrl = loadingCtrl;
        this.mutilservice = mutilservice;
        this.defesservice = defesservice;
        this.toggleBaseInfo = true;
        this.toggleProcess = false;
        this.toggleProcessResult = false;
        this.toggleDefectInspection = false;
        this.toggleWorkFlow = false;
        this.toggleWorkflowLogs = false;
        this.toggleComment = false;
        this.buttonToggle = false;
        this.buttons = [];
        this.commentsList = [];
        this.ccUsers = [];
        this.orderId = null;
        this.alarmInfo = null;
        this.initForm();
    }
    DefectManagementDetailsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad JobRecordDetailsPage');
        this.defectId = this.navParams.get('defectId') ? this.navParams.get('defectId') : 0;
        this.deviceId = this.navParams.get('deviceId') ? this.navParams.get('deviceId') : null;
        this.parentOrderId = this.navParams.get('parentOrderId')
            ? this.navParams.get('parentOrderId')
            : null;
        this.alarmInfo = this.navParams.get('alarmInfo');
        this.getDefectManagementDetail();
    };
    DefectManagementDetailsPage.prototype.ionViewWillEnter = function () {
        this.freshPage = this.navParams.get('freshPage');
        if (this.freshPage) {
            this.freshPage = false;
            this.getDefectManagementDetail();
        }
    };
    DefectManagementDetailsPage.prototype.getDefectManagementDetail = function () {
        var _this = this;
        var loading = this.loadingCtrl.create({
            spinner: 'crescent',
        });
        loading.present();
        this.defesservice
            .getDefectDetail(this.defectId, { deviceId: this.deviceId })
            .subscribe(function (res) {
            loading.dismiss();
            if (res) {
                // 页面标题
                _this.title = res.title;
                // 字段描述
                _this.fields = res.fields || [];
                // 操作按钮
                _this.buttons = res.buttons || [];
                // 页面显示值
                var values = res.defect;
                if (_this.alarmInfo) {
                    values.alarmLogId = _this.alarmInfo.alarmLogId;
                    values.stationName = _this.alarmInfo.stationName;
                    values.stationId = _this.alarmInfo.stationId;
                    values.defectSource = _this.alarmInfo.defectSource;
                    values.defectSourceText = _this.alarmInfo.defectSourceText;
                    values.defectDevices = _this.alarmInfo.defectDevices;
                }
                if (_this.parentOrderId) {
                    values.parentOrderId = _this.parentOrderId;
                }
                // 图片权限
                _this.picPermission = res.picPermission;
                // 文档权限
                _this.docPermission = res.docPermission;
                // 抄送权限
                _this.ccPermission = res.ccPermission;
                // 评论权限
                _this.commentPermission = res.commentPermission;
                _this.orderId = values.orderId;
                // 处理发现时间
                values.reportTime = __WEBPACK_IMPORTED_MODULE_6_lodash__["isNumber"](values.reportTime)
                    ? __WEBPACK_IMPORTED_MODULE_9_moment__(values.reportTime).format()
                    : values.reportTime;
                // 处理缺陷发生时间
                values.originTime = __WEBPACK_IMPORTED_MODULE_6_lodash__["isNumber"](values.originTime)
                    ? __WEBPACK_IMPORTED_MODULE_9_moment__(values.originTime).format()
                    : values.originTime;
                // 处理缺陷设备
                if (values.defectDevices !== null) {
                    var control_1 = _this.form.get('defectDevices');
                    while (control_1.length) {
                        control_1.removeAt(control_1.length - 1);
                    }
                    values.defectDevices.map(function (item) {
                        control_1.push(_this.initDevice());
                    });
                }
                else {
                    values.defectDevices = [];
                }
                // 处理过程
                // 抢修单
                if (values.repairTickets !== null) {
                    var control_2 = _this.form.get('repairTickets');
                    while (control_2.length) {
                        control_2.removeAt(control_2.length - 1);
                    }
                    values.repairTickets.map(function (item) {
                        control_2.push(_this.initRepairTickets());
                    });
                }
                else {
                    values.repairTickets = [];
                }
                // 工作票
                if (values.workTickets !== null) {
                    var control_3 = _this.form.get('workTickets');
                    while (control_3.length) {
                        control_3.removeAt(control_3.length - 1);
                    }
                    values.workTickets.map(function (item) {
                        control_3.push(_this.initWorkTickets());
                    });
                }
                else {
                    values.workTickets = [];
                }
                // 操作票
                if (values.operationTickets !== null) {
                    var control_4 = _this.form.get('operationTickets');
                    while (control_4.length) {
                        control_4.removeAt(control_4.length - 1);
                    }
                    values.operationTickets.map(function (item) {
                        control_4.push(_this.initOperationTickets());
                    });
                }
                else {
                    values.operationTickets = [];
                }
                // 备品备件
                if (values.materials !== null) {
                    var control_5 = _this.form.get('materials');
                    while (control_5.length) {
                        control_5.removeAt(control_5.length - 1);
                    }
                    values.materials.map(function (item) {
                        control_5.push(_this.initMaterials());
                    });
                }
                else {
                    values.materials = [];
                }
                // 处理参与人
                if (values.players !== null) {
                    var control_6 = _this.form.get('players');
                    while (control_6.length) {
                        control_6.removeAt(control_6.length - 1);
                    }
                    var playersText = values.players.map(function (item) {
                        control_6.push(_this.initPlayers());
                        return item.userName;
                    });
                    values.playersText = playersText.join(',');
                }
                else {
                    values.players = [];
                }
                // 开始处理时间
                values.startTime = __WEBPACK_IMPORTED_MODULE_6_lodash__["isNumber"](values.startTime)
                    ? __WEBPACK_IMPORTED_MODULE_9_moment__(values.startTime).format()
                    : values.startTime;
                // 处理完成时间
                values.endTime = __WEBPACK_IMPORTED_MODULE_6_lodash__["isNumber"](values.endTime)
                    ? __WEBPACK_IMPORTED_MODULE_9_moment__(values.endTime).format()
                    : values.endTime;
                // 照片
                if (values.pics !== null) {
                    var control_7 = _this.form.get('pics');
                    while (control_7.length) {
                        control_7.removeAt(control_7.length - 1);
                    }
                    values.pics.map(function (item) {
                        control_7.push(_this.initDoc());
                    });
                }
                else {
                    values.pics = [];
                }
                // 文件
                if (values.docs !== null) {
                    var control_8 = _this.form.get('docs');
                    while (control_8.length) {
                        control_8.removeAt(control_8.length - 1);
                    }
                    values.docs.map(function (item) {
                        control_8.push(_this.initDoc());
                    });
                }
                else {
                    values.docs = [];
                }
                // 检查时间
                values.checkTime = __WEBPACK_IMPORTED_MODULE_6_lodash__["isNumber"](values.checkTime)
                    ? __WEBPACK_IMPORTED_MODULE_9_moment__(values.checkTime).format('YYYY-MM-DD HH:mm')
                    : values.checkTime;
                //工作流程
                if (values.workflow !== null) {
                    var workflow = values.workflow;
                    var _loop_1 = function (key) {
                        if (workflow.hasOwnProperty(key)) {
                            var element = workflow[key];
                            if (key === 'nodes') {
                                _this.nodes = element;
                                var control_9 = _this.form.get('workflow').controls[key];
                                while (control_9.length) {
                                    control_9.removeAt(control_9.length - 1);
                                }
                                element.map(function (item) {
                                    control_9.push(_this.initNodes());
                                });
                            }
                            else if (key === 'links') {
                                _this.links = element;
                                var control_10 = _this.form.get('workflow').controls[key];
                                while (control_10.length) {
                                    control_10.removeAt(control_10.length - 1);
                                }
                                element.map(function (item) {
                                    control_10.push(_this.initLinks());
                                });
                            }
                        }
                    };
                    for (var key in workflow) {
                        _loop_1(key);
                    }
                    _this.options = Object(__WEBPACK_IMPORTED_MODULE_13__work_flow_chart__["a" /* buildWorkFlow */])(_this.links, _this.nodes);
                }
                else {
                    values.workflow = {};
                }
                // 流程日志
                if (values.workflowLogs) {
                    var control_11 = _this.form.get('workflowLogs');
                    while (control_11.length) {
                        control_11.removeAt(control_11.length - 1);
                    }
                    values.workflowLogs.map(function (item) {
                        control_11.push(_this.initWorkflowLogs());
                    });
                }
                else {
                    values.workflowLogs = [];
                }
                // 抄送
                if (values.ccUsers !== null) {
                    _this.ccUsers = values.ccUsers;
                    var control_12 = _this.form.get('ccUsers');
                    while (control_12.length) {
                        control_12.removeAt(control_12.length - 1);
                    }
                    values.ccUsers.map(function (item) {
                        control_12.push(_this.initCcUser());
                    });
                }
                else {
                    _this.ccUsers = [];
                    values.ccUsers = [];
                }
                if (values.comments !== null) {
                    _this.commentsList = values.comments;
                }
                else {
                    _this.commentsList = [];
                    values.comments = [];
                }
                _this.form.patchValue(values);
            }
        });
    };
    DefectManagementDetailsPage.prototype.initForm = function () {
        this.form = this.fb.group({
            defectId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectCode: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            nodeId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            alarmLogId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            parentOrderId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            //基本信息
            stationId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            reporter: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            reporterName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            reportTime: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectType: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectTypeText: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            originTime: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectSource: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectSourceText: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectLevel: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectLevelText: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectDesc: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectDevices: this.fb.array([]),
            // 处理过程
            repairTickets: this.fb.array([]),
            workTickets: this.fb.array([]),
            operationTickets: this.fb.array([]),
            materials: this.fb.array([]),
            // 处理结果
            responsiblePerson: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            responsiblePersonName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            players: this.fb.array([]),
            playersText: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](''),
            startTime: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            endTime: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            workHours: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            lossEnergy: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectCost: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectStatus: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            defectStatusText: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            resultDesc: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            // 照片
            pics: this.fb.array([]),
            // 文件
            docs: this.fb.array([]),
            // 缺陷检查
            checkStatus: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            checkStatusText: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            checker: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            checkerName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            checkTime: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            checkMemo: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            // 工作流程
            workflow: this.fb.group({
                nodes: this.fb.array([]),
                links: this.fb.array([]),
            }),
            // 流程日志
            workflowLogs: this.fb.array([]),
            //抄送
            ccUsers: this.fb.array([]),
        });
    };
    DefectManagementDetailsPage.prototype.openInputModal = function (type, editable) {
        var _this = this;
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_3__util_modal_common_input_common_input__["a" /* CommonInputPage */], {
            value: this.form.value[type],
            title: this.fields[type]['name'],
        }, {
            cssClass: 'commonModal commonInputModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            var _a;
            if (data) {
                _this.form.patchValue((_a = {},
                    _a[type] = data.value,
                    _a));
            }
        });
        modal.present();
    };
    DefectManagementDetailsPage.prototype.openSheetModal = function (type, typeText) {
        var _this = this;
        var options = this.fields[type]['props'];
        var buttons = options.map(function (item) {
            return {
                text: item.second,
                handler: function () {
                    var _a;
                    _this.form.patchValue((_a = {},
                        _a[type] = item.first,
                        _a[typeText] = item.second,
                        _a));
                },
            };
        });
        var actionSheet = this.actionSheetCtrl.create({
            title: '',
            buttons: buttons,
            cssClass: 'commonSheet',
        });
        actionSheet.present();
    };
    DefectManagementDetailsPage.prototype.initWorkflowLogs = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            logId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            action: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            executeTime: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            flowId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            nextNodeId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            nextNodeName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            nodeId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            orderId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            preNodeId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            preNodeName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            userId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.buttonFunction = function (button) {
        var _this = this;
        // 表单检查
        if (button.formCheck === '1') {
            this.defesservice.checkNullable(button.targetNodeId).subscribe(function (res) {
                var _loop_2 = function (key) {
                    if (res.hasOwnProperty(key)) {
                        if (key.indexOf('.') === -1) {
                            var element = res[key];
                            if (_this.form.value[key] === null && !element) {
                                var alert_1 = _this.alertCtrl.create({
                                    title: '警告',
                                    subTitle: _this.fields[key].name + '字段不能为空',
                                    buttons: ['关闭'],
                                });
                                alert_1.present();
                                return { value: void 0 };
                            }
                        }
                        else {
                            var aNewKey_1 = key.split('.');
                            var element = res[key];
                            if (_this.form.value[aNewKey_1[0]] &&
                                _this.form.value[aNewKey_1[0]].length > 0 &&
                                !element) {
                                var flag_1 = true;
                                _this.form.value[aNewKey_1[0]].every(function (item) {
                                    console.log(flag_1);
                                    if (item[aNewKey_1[1]] === null) {
                                        var alert_2 = _this.alertCtrl.create({
                                            title: '警告',
                                            subTitle: _this.fields[aNewKey_1[0]].name + '字段不能为空',
                                            buttons: ['关闭'],
                                        });
                                        alert_2.present();
                                        flag_1 = false;
                                        return false;
                                    }
                                });
                                if (!flag_1) {
                                    return { value: void 0 };
                                }
                            }
                        }
                    }
                };
                for (var key in res) {
                    var state_1 = _loop_2(key);
                    if (typeof state_1 === "object")
                        return state_1.value;
                }
                _this.switchFunction(button);
            });
        }
        else {
            this.switchFunction(button);
        }
    };
    DefectManagementDetailsPage.prototype.switchFunction = function (button) {
        switch (button.buttonAction) {
            case '$remind$':
                this.remindFunction(this.defectId);
                break;
            case '$check$':
                this.checkFunction();
                break;
            case 'repairTicket':
                this.repairTicketFunction(button);
                break;
            case 'rejectRepair':
                this.rejectRepairFunction(button);
                break;
            case 'finishRepair':
                this.finishRepairFunction(button);
                break;
            case 'workTicket1':
                this.workTicket1Function(button.buttonId);
                break;
            case 'workTicket2':
                this.workTicket2Function(button.buttonId);
                break;
            case 'materialOut':
                this.materialOutFunction();
                break;
            case 'materialIn':
                this.materialInFunction();
                break;
            case 'dispatch':
                this.dispatchFunction(button);
                break;
            case '$save$':
                this.actionFunction(button);
                break;
            case 'reject':
                this.actionFunction(button);
                break;
            case 'close':
                this.actionFunction(button);
                break;
            case 'finish':
                this.finishFunction(button);
                break;
            case 'delete':
                this.deleteFunction();
                break;
            default:
                break;
        }
    };
    // 催单操作
    DefectManagementDetailsPage.prototype.remindFunction = function (defectId) {
        var _this = this;
        this.defesservice.remind(defectId).subscribe(function (res) {
            _this.mutilservice.popToastView('已发送催单消息');
        });
    };
    // 检查操作
    DefectManagementDetailsPage.prototype.checkFunction = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_14__util_modal_common_check_common_check__["a" /* CommonCheckPage */], {
            options: this.fields['checkStatus'].props,
        }, {
            cssClass: 'commonModal commonCheckModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    console.log(data);
                    var params = {
                        defectId: _this.defectId,
                        checkStatus: data.value.checkStatus,
                        checkMemo: data.value.checkMemo,
                    };
                    _this.defesservice.check(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.form.patchValue(res);
                    });
                }
            }
        });
        modal.present();
    };
    // 抢修单
    DefectManagementDetailsPage.prototype.repairTicketFunction = function (button) {
        var _this = this;
        this.formatISOTime();
        var params = {
            title: this.title,
            defect: this.form.value,
            action: button,
            nextUserIds: null,
            memo: null,
        };
        this.defesservice.defectAction(params).subscribe(function (res) {
            _this.mutilservice.popToastView('提交成功');
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_18__repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */], {
                parentOrderId: _this.form.value.orderId,
                pageInfo: {
                    stationId: _this.form.value.stationId,
                    stationName: _this.form.value.stationName,
                },
            });
        });
    };
    // 抢修单 回退
    DefectManagementDetailsPage.prototype.rejectRepairFunction = function (button) {
        var _this = this;
        if (this.form.value.repairTickets.length !== 0) {
            this.mutilservice.customPrompt({ msg: '回退将删除已创建的抢修单，确定要回退么？' }, function () {
                _this.formatISOTime();
                var params = {
                    title: _this.title,
                    defect: _this.form.value,
                    action: button,
                    nextUserIds: null,
                    memo: null,
                };
                _this.defesservice.defectAction(params).subscribe(function (res) {
                    _this.mutilservice.popToastView('提交成功');
                    _this.navCtrl.getPrevious().data.freshPage = true;
                    _this.navCtrl.pop();
                });
            });
        }
        else {
            this.formatISOTime();
            var params = {
                title: this.title,
                defect: this.form.value,
                action: button,
                nextUserIds: null,
                memo: null,
            };
            this.defesservice.defectAction(params).subscribe(function (res) {
                _this.mutilservice.popToastView('提交成功');
                _this.navCtrl.getPrevious().data.freshPage = true;
                _this.navCtrl.pop();
            });
        }
    };
    // 抢修单 完成
    DefectManagementDetailsPage.prototype.finishRepairFunction = function (button) {
        var _this = this;
        if (this.form.value.repairTickets.length !== 0) {
            this.formatISOTime();
            var params = {
                title: this.title,
                defect: this.form.value,
                action: button,
                nextUserIds: null,
                memo: null,
            };
            this.defesservice.defectAction(params).subscribe(function (res) {
                _this.mutilservice.popToastView('提交成功');
                _this.navCtrl.getPrevious().data.freshPage = true;
                _this.navCtrl.pop();
            });
        }
        else {
            this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_18__repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */], {
                pageInfo: {
                    stationId: this.form.value.stationId,
                    stationName: this.form.value.stationName,
                },
            });
        }
    };
    // 一种工作票
    DefectManagementDetailsPage.prototype.workTicket1Function = function (buttonId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_0__work_ticket1_work_ticket1__["a" /* WorkTicket1Page */], {
            parentId: this.form.value.orderId,
            parentButtonId: buttonId,
        });
    };
    // 二种工作票
    DefectManagementDetailsPage.prototype.workTicket2Function = function (buttonId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__work_ticket2_work_ticket2__["a" /* WorkTicket2Page */], {
            parentId: this.form.value.orderId,
            parentButtonId: buttonId,
        });
    };
    // 出库
    DefectManagementDetailsPage.prototype.materialOutFunction = function () {
        var user = JSON.parse(localStorage.getItem('USER_INFO'));
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_16__inventoris_inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
            type: 'out',
            relaBusinessTypeText: '抢修单号',
            value: {
                relaBusinessId: this.form.value.orderId,
                relaBusinessCode: this.form.value.defectCode,
                ioOperator: user.userId,
                ioTime: __WEBPACK_IMPORTED_MODULE_9_moment__().format(),
                ioOperatorName: user.realName,
            },
        });
    };
    // 入库
    DefectManagementDetailsPage.prototype.materialInFunction = function () {
        var user = JSON.parse(localStorage.getItem('USER_INFO'));
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_16__inventoris_inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
            type: 'in',
            relaBusinessTypeText: '抢修单号',
            value: {
                relaBusinessId: this.form.value.orderId,
                relaBusinessCode: this.form.value.defectCode,
                ioOperator: user.userId,
                ioTime: __WEBPACK_IMPORTED_MODULE_9_moment__().format(),
                ioOperatorName: user.realName,
            },
        });
    };
    // 派单/转派
    DefectManagementDetailsPage.prototype.dispatchFunction = function (button) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_17__util_modal_common_dispatch_common_dispatch__["a" /* CommonDispatchPage */], {}, {
            cssClass: 'commonModal commonDispatchModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    _this.formatISOTime();
                    var params = {
                        title: _this.title,
                        defect: _this.form.value,
                        action: button,
                        nextUserIds: data.value.nextUserIds,
                        memo: data.value.memo,
                    };
                    _this.defesservice.defectAction(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.navCtrl.getPrevious().data.freshPage = true;
                        _this.navCtrl.pop();
                    });
                }
            }
        });
        modal.present();
    };
    // 驳回/关闭/完成/保存
    DefectManagementDetailsPage.prototype.actionFunction = function (button) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: '说明',
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok') {
                    _this.formatISOTime();
                    var params = {
                        title: _this.title,
                        defect: _this.form.value,
                        action: button,
                        nextUserIds: null,
                        memo: data.value,
                    };
                    _this.defesservice.defectAction(params).subscribe(function (res) {
                        _this.mutilservice.popToastView('提交成功');
                        _this.navCtrl.getPrevious().data.freshPage = true;
                        _this.navCtrl.pop();
                    });
                }
            }
        });
        modal.present();
    };
    // 完成
    DefectManagementDetailsPage.prototype.finishFunction = function (button) {
        var _this = this;
        this.mutilservice.customPrompt({ msg: '你确定提交吗?' }, function () {
            _this.formatISOTime();
            var params = {
                title: _this.title,
                defect: _this.form.value,
                action: button,
                nextUserIds: null,
                memo: null,
            };
            _this.defesservice.defectAction(params).subscribe(function (res) {
                _this.mutilservice.popToastView('提交成功');
                _this.navCtrl.getPrevious().data.freshPage = true;
                _this.navCtrl.pop();
            });
        });
    };
    // 删除
    DefectManagementDetailsPage.prototype.deleteFunction = function () {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: '提示',
            message: '确定要删除该缺陷单么?',
            buttons: [
                {
                    text: '取消',
                    handler: function () {
                        console.log('Disagree clicked');
                    },
                },
                {
                    text: '确定',
                    handler: function () {
                        var defectId = _this.form.value.defectId;
                        _this.defesservice.defectActionDelete(defectId).subscribe(function (res) {
                            _this.mutilservice.popToastView('删除成功');
                            _this.navCtrl.pop();
                        });
                    },
                },
            ],
        });
        confirm.present();
    };
    // 电站选择
    DefectManagementDetailsPage.prototype.selectStation = function (event) {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_11__util_common_station_common_station__["a" /* CommonStationPage */], {});
        modal.onDidDismiss(function (e) {
            if (e) {
                _this.form.patchValue({
                    stationId: e.id,
                    stationName: e.title,
                });
            }
        });
        modal.present({ keyboardClose: true });
    };
    // 选择发现人
    DefectManagementDetailsPage.prototype.selectUser = function () {
        var _this = this;
        var value = this.form.value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
            selectedItem: [{ userId: value.reporter, userName: value.reporterName }],
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue({
                        reporter: data.value[0] ? data.value[0].userId : null,
                        reporterName: data.value[0] ? data.value[0].realName : null,
                    });
                }
                else {
                    _this.form.patchValue({
                        reporter: null,
                        reporterName: null,
                    });
                }
            }
        });
        modal.present();
    };
    // 多行文本内容
    DefectManagementDetailsPage.prototype.addTextarea = function (title, key, editable) {
        var _this = this;
        if (!editable) {
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_8__util_modal_common_textarea_common_textarea__["a" /* CommonTextareaPage */], {
            title: title,
            value: this.form.value[key],
        }, {
            cssClass: 'commonModal commonTextareaModal',
            showBackdrop: true,
            enableBackdropDismiss: true,
        });
        modal.onDidDismiss(function (data) {
            var _a, _b;
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue((_a = {}, _a[key] = data.value, _a));
                }
                else if (data.type == 'clear') {
                    _this.form.patchValue((_b = {}, _b[key] = null, _b));
                }
            }
        });
        modal.present();
    };
    //选择设备
    DefectManagementDetailsPage.prototype.selectEquipment = function (editable) {
        if (!this.form.value.stationId) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        var selectedItem = [];
        if (this.form.value.defectDevices !== null) {
            this.form.value.defectDevices.map(function (item) {
                selectedItem.push({
                    deviceId: item.objId,
                    displayName: item.objName,
                    psrId: item.psrId,
                    objType: item.deviceType,
                });
            });
        }
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__util_common_equipment_equipmentList__["a" /* EquipmentListPage */], {
            stationId: this.form.value.stationId,
            isSingle: false,
            editable: editable,
            selectedItem: selectedItem,
        });
    };
    DefectManagementDetailsPage.prototype.operateDefectDevices = function (type, editable, index) {
        var _this = this;
        if (!editable) {
            return;
        }
        if (!this.form.value.stationId) {
            this.mutilservice.popToastView('请先选择电站');
            return;
        }
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_20__util_modal_defect_devices_defect_devices__["a" /* DefectDevicesPage */], {
            stationId: this.form.value.stationId,
            value: type === 'edit' ? this.form.value.defectDevices[index] : null,
        }, {
            cssClass: 'commonModal defectDevicesModal',
            showBackdrop: true,
            enableBackdropDismiss: false,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type === 'ok' && type === 'add' && editable) {
                    var defectDevices = _this.form.value.defectDevices;
                    var control_13 = _this.form.get('defectDevices');
                    while (control_13.length) {
                        control_13.removeAt(control_13.length - 1);
                    }
                    defectDevices.push(data.value);
                    defectDevices.map(function (item) {
                        control_13.push(_this.initDevice());
                    });
                    _this.form.get('defectDevices').patchValue(defectDevices);
                }
                else if (data.type === 'ok' && type === 'edit') {
                    var control = _this.form.get('defectDevices');
                    control.controls[index].setValue(data.value);
                }
            }
        });
        modal.present();
    };
    DefectManagementDetailsPage.prototype.deleteDefectDevices = function (index, editable) {
        if (!editable) {
            return;
        }
        var control = this.form.get('defectDevices');
        control.removeAt(index);
    };
    DefectManagementDetailsPage.prototype.getDevices = function (form) {
        return form.controls.defectDevices.controls;
    };
    // 初始化 缺陷设备form
    DefectManagementDetailsPage.prototype.initDevice = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            objNo: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            objId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            deviceNo: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            objName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            psrId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            objCompany: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            objProvider: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            objClass: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            objClassName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            workHours: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            lossEnergy: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            objCost: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.getRepairTickets = function (form) {
        return form.controls.repairTickets.controls;
    };
    // 初始化抢修单
    DefectManagementDetailsPage.prototype.initRepairTickets = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            orderId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            orderCode: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.getWorkTickets = function (form) {
        return form.controls.workTickets.controls;
    };
    // 初始化工作票
    DefectManagementDetailsPage.prototype.initWorkTickets = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            orderId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            orderCode: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.getOperationTickets = function (form) {
        return form.controls.operationTickets.controls;
    };
    // 初始化操作票
    DefectManagementDetailsPage.prototype.initOperationTickets = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            orderId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            orderCode: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.getMaterials = function (form) {
        return form.controls.materials.controls;
    };
    // 初始化备品备件
    DefectManagementDetailsPage.prototype.initMaterials = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            detailId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            materialName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    // 选择负责人
    DefectManagementDetailsPage.prototype.selectResponsiblePerson = function () {
        var _this = this;
        var value = this.form.value;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: true,
            selectedItem: [
                {
                    userId: value.responsiblePerson,
                    userName: value.responsiblePersonName,
                },
            ],
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    _this.form.patchValue({
                        responsiblePerson: data.value[0] ? data.value[0].userId : null,
                        responsiblePersonName: data.value[0] ? data.value[0].realName : null,
                    });
                }
                else {
                    _this.form.patchValue({
                        responsiblePerson: null,
                        responsiblePersonName: null,
                    });
                }
            }
        });
        modal.present();
    };
    // 参与人
    DefectManagementDetailsPage.prototype.selectplayers = function (event, editable) {
        var _this = this;
        var value = this.form.value;
        var selectedItem = [];
        value.players.map(function (item) {
            selectedItem.push({
                userId: item.userId,
                realName: item.userName,
                userName: item.account,
                icon: item.userIcon,
                deptName: item.deptName,
            });
        });
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_7__util_common_user_common_user__["a" /* CommonUserPage */], {
            isSingle: false,
            selectedItem: selectedItem,
            editable: editable,
        });
        modal.onDidDismiss(function (data) {
            if (data) {
                if (data.type == 'ok') {
                    var control_14 = _this.form.get('players');
                    while (control_14.length) {
                        control_14.removeAt(control_14.length - 1);
                    }
                    var players_1 = [];
                    var playersText = data.value.map(function (item) {
                        players_1.push({
                            userId: item.userId,
                            userName: item.realName,
                            account: item.userName,
                            userIcon: item.icon,
                            deptName: item.deptName,
                        });
                        control_14.push(_this.initPlayers());
                        return item.realName;
                    });
                    _this.form.get('players').patchValue(players_1);
                    _this.form.get('playersText').patchValue(playersText.join(','));
                }
            }
            else if (data && data.length === 0) {
                _this.form.patchValue({
                    playersText: '',
                    players: [],
                });
            }
        });
        modal.present();
    };
    DefectManagementDetailsPage.prototype.initPlayers = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            account: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            userIcon: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            deptName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.setPics = function (data) {
        var _this = this;
        var value = this.form.value.pics || [];
        var control = this.form.get('pics');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initDoc());
            value.push(item);
        });
        this.form.get('pics').patchValue(value);
    };
    DefectManagementDetailsPage.prototype.initDoc = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            docId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            docName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            docType: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            folderId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            size: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            sizeDesc: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            memo: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            orderNo: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            customerId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            uri: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            updateTime: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            updater: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            stationId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            realName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            stationName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            recordType: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            recordId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            updaterName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.setDocs = function (data) {
        var _this = this;
        console.log(data);
        var value = this.form.value.docs || [];
        var control = this.form.get('docs');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initDoc());
            value.push(item);
        });
        this.form.get('docs').patchValue(value);
        console.log(this.form.value.docs);
    };
    DefectManagementDetailsPage.prototype.initNodes = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            statusText: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            name: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            nodeType: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            user: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            status: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.initLinks = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            sourceId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            targetId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            source: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            target: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.getWorkflowLogs = function (form) {
        return form.controls.workflowLogs.controls;
    };
    DefectManagementDetailsPage.prototype.ccUserEvent = function (data) {
        var _this = this;
        var control = this.form.get('ccUsers');
        while (control.length) {
            control.removeAt(control.length - 1);
        }
        data.map(function (item) {
            control.push(_this.initCcUser());
        });
        this.form.patchValue({
            ccUsers: data,
        });
    };
    DefectManagementDetailsPage.prototype.initCcUser = function () {
        return new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
            userId: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
            userName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null),
        });
    };
    DefectManagementDetailsPage.prototype.buttonFlex = function (length) {
        switch (length) {
            case 1:
                return 'col-12';
            case 2:
                return 'col-6';
            case 3:
                return 'col-4';
            case 4:
                return 'col-3';
            default:
                break;
        }
    };
    DefectManagementDetailsPage.prototype.showMoreButtons = function () {
        this.buttonToggle = !this.buttonToggle;
    };
    DefectManagementDetailsPage.prototype.viewMaterial = function (detailId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_16__inventoris_inventoris_out_in_inventoris_out_in__["a" /* InventorisOutInPage */], {
            view: true,
            detailId: detailId,
        });
    };
    DefectManagementDetailsPage.prototype.viewRepairTicket = function (orderId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_18__repair_ticket_details_repair_ticket_details__["a" /* RepairTicketDetailsPage */], {
            view: true,
            ticketId: orderId,
        });
    };
    DefectManagementDetailsPage.prototype.viewOperateTicket = function (orderId) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_19__operate_tickets_details_operate_tickets_details__["a" /* OperateTicketsDetailsPage */], {
            view: true,
            ticketId: orderId,
        });
    };
    DefectManagementDetailsPage.prototype.formatISOTime = function () {
        if (this.form.value.startTime) {
            if (this.form.value.startTime.indexOf('Z') != -1) {
                this.form.patchValue({
                    startTime: __WEBPACK_IMPORTED_MODULE_9_moment__(this.form.value.startTime.substr(0, this.form.value.startTime.length - 1)).format(),
                });
            }
        }
        if (this.form.value.endTime) {
            if (this.form.value.endTime.indexOf('Z') != -1) {
                this.form.patchValue({
                    endTime: __WEBPACK_IMPORTED_MODULE_9_moment__(this.form.value.endTime.substr(0, this.form.value.endTime.length - 1)).format(),
                });
            }
        }
        if (this.form.value.startTime && this.form.value.endTime) {
            if (__WEBPACK_IMPORTED_MODULE_9_moment__(this.form.value.endTime).valueOf() - __WEBPACK_IMPORTED_MODULE_9_moment__(this.form.value.startTime).valueOf() <
                0) {
                this.mutilservice.popToastView('开始处理时间要小于处理完成时间！');
                this.form.patchValue({
                    startTime: null,
                });
                return;
            }
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["ViewChild"])('echart'),
        __metadata("design:type", Object)
    ], DefectManagementDetailsPage.prototype, "echart", void 0);
    DefectManagementDetailsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["Component"])({
            selector: 'page-defect-management-details',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/defect-management-details/defect-management-details.html"*/'<!--\n  Generated template for the JobRecordDetailsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <ion-title>{{title}}</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content\n  [ngClass]="{\'h0\': buttons.length==0,\'h44\': buttons.length>4&&buttonToggle==false,\'h88\': buttons.length<=4&&buttons.length>0,\'h180\':buttons.length>4&&buttons.length<=8&&buttonToggle==true,\'h240\':buttons.length>8&&buttons.length<=12&&buttonToggle==true,\'h300\':buttons.length>12&&buttons.length<=16&&buttonToggle==true}"\n>\n  <form [formGroup]="form">\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleBaseInfo = !toggleBaseInfo">\n        基础信息\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleBaseInfo?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 基础信息 -->\n      <ng-container *ngIf="toggleBaseInfo">\n        <!--电站名称  -->\n        <ion-item\n          *ngIf="fields?.stationId.show"\n          [attr.detail-push]="fields?.stationId.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.stationId.nullable">*</b\n            >{{fields?.stationId.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectStation($event)"\n            formControlName="stationName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.stationId.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="stationName"\n          ></ion-input>\n        </ion-item>\n        <!-- 发现人 -->\n        <ion-item\n          *ngIf="fields?.reporter.show"\n          [attr.detail-push]="fields?.reporter.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.reporter.nullable">*</b\n            >{{fields?.reporter.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.reporter.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectUser($event)"\n            formControlName="reporterName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.reporter.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="reporterName"\n          ></ion-input>\n        </ion-item>\n        <!--发现时间  -->\n        <ion-item\n          *ngIf="fields?.reportTime.show"\n          [attr.detail-push]="fields?.reportTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.reportTime.nullable">*</b\n            >{{fields?.reportTime.name}}</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.reportTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="reportTime"\n          ></ion-datetime>\n          <ion-input\n            *ngIf="!fields?.reportTime.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="reportTime"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 缺陷类型 -->\n        <ion-item\n          *ngIf="fields?.defectType.show"\n          [attr.detail-push]="fields?.defectType.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.defectType.nullable">*</b\n            >{{fields?.defectType.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.defectType.editable"\n            (tap)="openSheetModal(\'defectType\',\'defectTypeText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectTypeText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.defectType.editable"\n            (tap)="openSheetModal(\'defectType\',\'defectTypeText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectTypeText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 缺陷发生时间  -->\n        <ion-item\n          *ngIf="fields?.originTime.show"\n          [attr.detail-push]="fields?.originTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.originTime.nullable">*</b\n            >{{fields?.originTime.name}}</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.originTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="originTime"\n          ></ion-datetime>\n          <ion-input\n            *ngIf="!fields?.originTime.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="originTime"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 缺陷来源 -->\n        <ion-item\n          *ngIf="fields?.defectSource.show"\n          [attr.detail-push]="fields?.defectSource.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.defectSource.nullable">*</b\n            >{{fields?.defectSource.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.defectSource.editable"\n            (tap)="openSheetModal(\'defectSource\',\'defectSourceText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectSourceText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.defectSource.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectSourceText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 缺陷等级 -->\n        <ion-item\n          *ngIf="fields?.defectLevel.show"\n          [attr.detail-push]="fields?.defectLevel.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.defectLevel.nullable">*</b\n            >{{fields?.defectLevel.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.defectLevel.editable"\n            (tap)="openSheetModal(\'defectLevel\',\'defectLevelText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectLevelText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.defectLevel.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectLevelText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 缺陷现象 -->\n        <ion-item\n          *ngIf="fields?.defectDesc.show"\n          [attr.detail-push]="fields?.defectDesc.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.defectDesc.nullable">*</b\n            >{{fields?.defectDesc.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.defectDesc.editable"\n            (tap)="addTextarea(fields?.defectDesc.name,\'defectDesc\',fields?.defectDesc.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            class="ell"\n            formControlName="defectDesc"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <ion-list class="new-list" style="margin: 0">\n      <ion-list-header class="defect-devices-header" no-lines\n        >缺陷设备</ion-list-header\n      >\n      <ion-grid class="defect-devices" formArrayName="defectDevices">\n        <ion-row\n          *ngFor="let device of getDevices(form); let i = index"\n          [formGroupName]="i"\n        >\n          <ion-col\n            col-6\n            (tap)="operateDefectDevices(\'edit\',fields?.defectDevices.editable,i)"\n          >\n            <div class="ell">{{ device.value.objName }}</div>\n          </ion-col>\n          <ion-col col-1>\n            <div text-center *ngIf="device.value.workHours">\n              <span class="ell">{{ device.value.workHours }}</span>\n              <span>h</span>\n            </div>\n          </ion-col>\n          <ion-col col-2>\n            <div text-center *ngIf="device.value.lossEnergy">\n              <span class="ell">{{ device.value.lossEnergy }}</span>\n              <span>kWh</span>\n            </div>\n          </ion-col>\n          <ion-col col-2>\n            <div text-center *ngIf="device.value.objCost">\n              <span class="ell">{{ device.value.objCost }}</span>\n              <span>元</span>\n            </div>\n          </ion-col>\n          <ion-col col-1>\n            <img\n              src="assets/imgs/buttons/delete-grey.png"\n              (tap)="deleteDefectDevices(i,fields?.defectDevices.editable)"\n            />\n          </ion-col>\n        </ion-row>\n        <ion-row class="add-row" *ngIf="fields?.defectDevices.editable">\n          <ion-col col-12>\n            <ion-icon\n              name="md-add-circle"\n              (tap)="operateDefectDevices(\'add\',fields?.defectDevices.editable)"\n            ></ion-icon>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-list>\n\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleProcess = !toggleProcess">\n        处理过程\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleProcess?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleProcess">\n        <!-- 抢修单 -->\n        <ion-item\n          *ngIf="form.value.repairTickets.length>0"\n          [attr.detail-push]="true"\n          no-lines\n          class="more-lines"\n        >\n          <ion-label>抢修单</ion-label>\n          <div\n            item-content\n            class="more-line-block"\n            formArrayName="repairTickets"\n          >\n            <ng-container\n              *ngFor="let item of getRepairTickets(form);let i =index"\n              [formGroupName]="i"\n            >\n              <div class="item-inner">\n                <ion-input\n                  (tap)="viewRepairTicket(item.value.orderId)"\n                  type="text"\n                  [readonly]="true"\n                  text-right\n                  formControlName="orderCode"\n                ></ion-input>\n              </div>\n            </ng-container>\n          </div>\n        </ion-item>\n        <!-- 工作票 -->\n        <ion-item\n          *ngIf="form.value.workTickets.length>0"\n          [attr.detail-push]="true"\n          no-lines\n          class="more-lines"\n        >\n          <ion-label>工作票</ion-label>\n          <div item-content class="more-line-block" formArrayName="workTickets">\n            <ng-container\n              *ngFor="let item of getWorkTickets(form);let i =index"\n              [formGroupName]="i"\n            >\n              <div class="item-inner">\n                <ion-input\n                  type="text"\n                  [readonly]="true"\n                  text-right\n                  formControlName="orderCode"\n                ></ion-input>\n              </div>\n            </ng-container>\n          </div>\n        </ion-item>\n        <!-- 操作票 -->\n        <ion-item\n          *ngIf="form.value.operationTickets.length>0"\n          [attr.detail-push]="true"\n          no-lines\n          class="more-lines"\n        >\n          <ion-label>操作票</ion-label>\n          <div\n            item-content\n            class="more-line-block"\n            formArrayName="operationTickets"\n          >\n            <ng-container\n              *ngFor="let item of getOperationTickets(form);let i =index"\n              [formGroupName]="i"\n            >\n              <div class="item-inner">\n                <ion-input\n                  (tap)="viewOperateTicket(item.value.orderId)"\n                  type="text"\n                  [readonly]="true"\n                  text-right\n                  formControlName="orderCode"\n                ></ion-input>\n              </div>\n            </ng-container>\n          </div>\n        </ion-item>\n        <!-- 备品备件 -->\n        <ion-item\n          *ngIf="form.value.materials.length>0"\n          [attr.detail-push]="true"\n          no-lines\n          class="more-lines"\n        >\n          <ion-label>备品备件</ion-label>\n          <div item-content class="more-line-block" formArrayName="materials">\n            <ng-container\n              *ngFor="let item of getMaterials(form);let i =index"\n              [formGroupName]="i"\n            >\n              <div class="item-inner">\n                <ion-input\n                  (tap)="viewMaterial(item.value.detailId)"\n                  type="text"\n                  [readonly]="true"\n                  text-right\n                  formControlName="materialName"\n                ></ion-input>\n              </div>\n            </ng-container>\n          </div>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleProcessResult = !toggleProcessResult"\n      >\n        处理结果\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleProcessResult?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <!-- 处理结果 -->\n      <ng-container *ngIf="toggleProcessResult">\n        <!-- 负责人 -->\n        <ion-item\n          *ngIf="fields?.responsiblePerson.show"\n          [attr.detail-push]="fields?.responsiblePerson.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.responsiblePerson.nullable">*</b\n            >{{fields?.responsiblePerson.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.responsiblePerson.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectResponsiblePerson($event)"\n            formControlName="responsiblePersonName"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.responsiblePerson.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="responsiblePersonName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 参与人 -->\n        <ion-item\n          *ngIf="fields?.players.show"\n          [attr.detail-push]="fields?.players.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.players.nullable">*</b\n            >{{fields?.players.name}}</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            (tap)="selectplayers($event,fields?.players.editable)"\n            formControlName="playersText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 开始时间 -->\n        <ion-item\n          *ngIf="fields?.startTime.show"\n          [attr.detail-push]="fields?.startTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.startTime.nullable">*</b\n            >{{fields?.startTime.name}}</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.startTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n          ></ion-datetime>\n          <ion-input\n            *ngIf="!fields?.startTime.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="startTime"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 完成时间 -->\n        <ion-item\n          *ngIf="fields?.endTime.show"\n          [attr.detail-push]="fields?.endTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.endTime.nullable">*</b\n            >{{fields?.endTime.name}}</ion-label\n          >\n          <ion-datetime\n            *ngIf="fields?.endTime.editable"\n            doneText="确定"\n            cancelText="清除"\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n          ></ion-datetime>\n          <ion-input\n            *ngIf="!fields?.endTime.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            displayFormat="YYYY-MM-DD HH:mm"\n            formControlName="endTime"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 工作量 -->\n        <ion-item\n          *ngIf="fields?.workHours.show"\n          [attr.detail-push]="fields?.workHours.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.workHours.nullable">*</b\n            >{{fields?.workHours.name}}</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'workHours\',fields?.workHours.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="workHours"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 损失电量 -->\n        <ion-item\n          *ngIf="fields?.lossEnergy.show"\n          [attr.detail-push]="fields?.lossEnergy.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.lossEnergy.nullable">*</b\n            >{{fields?.lossEnergy.name}}</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'lossEnergy\',fields?.lossEnergy.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="lossEnergy"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 消缺费用 -->\n        <ion-item\n          *ngIf="fields?.defectCost.show"\n          [attr.detail-push]="fields?.defectCost.editable"\n          no-lines\n        >\n          <ion-label\n            ><b *ngIf="!fields?.defectCost.nullable">*</b\n            >{{fields?.defectCost.name}}</ion-label\n          >\n          <ion-input\n            (tap)="openInputModal(\'defectCost\',fields?.defectCost.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectCost"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 缺陷状态 -->\n        <ion-item\n          *ngIf="fields?.defectStatus.show"\n          [attr.detail-push]="fields?.defectStatus.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.defectStatus.nullable">*</b\n            >{{fields?.defectStatus.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.defectStatus.editable"\n            (tap)="openSheetModal(\'defectStatus\',\'defectStatusText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectStatusText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.defectStatus.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="defectStatusText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 处理结果说明 -->\n        <ion-item\n          *ngIf="fields?.resultDesc.show"\n          [attr.detail-push]="fields?.resultDesc.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.resultDesc.nullable">*</b\n            >{{fields?.resultDesc.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.resultDesc.editable"\n            (tap)="addTextarea(fields?.resultDesc.name,\'resultDesc\',fields?.resultDesc.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="resultDesc"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 照片 -->\n    <ion-list class="new-list">\n      <upload-pics\n        [orderId]="orderId"\n        [picPermission]="picPermission"\n        [pics]="form.value.pics"\n        (picsEvent)="setPics($event)"\n      ></upload-pics>\n    </ion-list>\n\n    <!-- 附件 -->\n    <ion-list class="new-list">\n      <upload-files\n        [orderId]="orderId"\n        [docPermission]="docPermission"\n        [docs]="form.value.docs"\n        (docsEvent)="setDocs($event)"\n      ></upload-files>\n    </ion-list>\n\n    <!-- 缺陷检查 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleDefectInspection = !toggleDefectInspection"\n      >\n        缺陷检查\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleDefectInspection?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleDefectInspection">\n        <!-- 检查结果 -->\n        <ion-item\n          *ngIf="fields?.checkStatus.show"\n          [attr.detail-push]="fields?.checkStatus.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkStatus.nullable">*</b\n            >{{fields?.checkStatus.name}}</ion-label\n          >\n          <ion-input\n            *ngIf="fields?.checkStatus.editable"\n            (tap)="openSheetModal(\'checkStatus\',\'checkStatusText\')"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n          <ion-input\n            *ngIf="!fields?.checkStatus.editable"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkStatusText"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查人 -->\n        <ion-item\n          *ngIf="fields?.checker.show"\n          [attr.detail-push]="fields?.checker.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checker.nullable">*</b\n            >{{fields?.checker.name}}</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkerName"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查时间 -->\n        <ion-item\n          *ngIf="fields?.checkTime.show"\n          [attr.detail-push]="fields?.checkTime.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkTime.nullable">*</b\n            >{{fields?.checkTime.name}}</ion-label\n          >\n          <ion-input\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkTime"\n          ></ion-input>\n        </ion-item>\n\n        <!-- 检查备注 -->\n        <ion-item\n          *ngIf="fields?.checkMemo.show"\n          [attr.detail-push]="fields?.checkMemo.editable"\n          no-lines\n        >\n          <ion-label>\n            <b *ngIf="!fields?.checkMemo.nullable">*</b\n            >{{fields?.checkMemo.name}}</ion-label\n          >\n          <ion-input\n            (tap)="addTextarea(fields?.checkMemo.name,\'checkMemo\',fields?.checkMemo.editable)"\n            type="text"\n            [readonly]="true"\n            text-right\n            formControlName="checkMemo"\n          ></ion-input>\n        </ion-item>\n      </ng-container>\n    </ion-list>\n\n    <!-- 工作流程 -->\n    <ion-list class="new-list">\n      <ion-list-header no-lines (tap)="toggleWorkFlow = !toggleWorkFlow">\n        工作流程\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWorkFlow?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWorkFlow">\n        <div echarts #echart [options]="options" class="workflow-chart"></div>\n      </ng-container>\n    </ion-list>\n\n    <!-- 流程日志 -->\n    <ion-list class="new-list">\n      <ion-list-header\n        no-lines\n        (tap)="toggleWorkflowLogs = !toggleWorkflowLogs"\n      >\n        流程日志\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon\n            name="{{toggleWorkflowLogs?\'arrow-up\':\'arrow-down\'}}"\n          ></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleWorkflowLogs">\n        <ng-container formArrayName="workflowLogs">\n          <ng-container\n            *ngFor="let item of getWorkflowLogs(form); let i = index"\n            [formGroupName]="i"\n          >\n            <div class="workflow-log">\n              <p>\n                {{item.value.executeTime | date:\'yyyy-MM-dd HH:mm\'}}\n                {{item.value.userName }}\n              </p>\n              <div class="action-content">{{item.value.action}}</div>\n            </div>\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </ion-list>\n\n    <!-- 抄送 -->\n    <ion-list class="new-list">\n      <cc\n        [ccPermission]="ccPermission"\n        [users]="ccUsers"\n        (userEvent)="ccUserEvent($event)"\n      ></cc>\n    </ion-list>\n\n    <!-- 评论  -->\n    <ion-list class="new-list" *ngIf="defectId!==0">\n      <ion-list-header no-lines (tap)="toggleComment = !toggleComment">\n        评论\n        <button ion-button icon-only item-end clear type="button">\n          <ion-icon name="{{toggleComment?\'arrow-up\':\'arrow-down\'}}"></ion-icon>\n        </button>\n      </ion-list-header>\n      <ng-container *ngIf="toggleComment">\n        <comment [orderId]="orderId" [commentsList]="commentsList"></comment>\n      </ng-container>\n    </ion-list>\n  </form>\n</ion-content>\n\n<ion-footer *ngIf="buttons.length>0">\n  <ion-toolbar class="footer-bar">\n    <ng-container *ngIf="buttons.length<=4">\n      <ion-grid>\n        <ion-row>\n          <ion-col\n            *ngFor="let button of buttons"\n            class="{{buttonFlex(buttons.length)}}"\n          >\n            <div class="btn">\n              <!-- <img\n                (tap)="buttonFunction(button)"\n                src="assets/imgs/buttons/{{button.buttonIcon}}"\n                alt=""\n              /> -->\n              <ion-icon\n                (tap)="buttonFunction(button)"\n                [name]="button.buttonIcon.split(\'.\')[0]"\n              ></ion-icon>\n              <p>{{button.buttonText}}</p>\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ng-container>\n    <ng-container *ngIf="buttons.length>4">\n      <button\n        ion-button\n        block\n        (tap)="showMoreButtons()"\n        *ngIf="buttonToggle==false"\n        style="background-color: #54a4e4"\n      >\n        <span style="margin-right: 5px">处理</span\n        ><ion-icon name="arrow-up"></ion-icon>\n      </button>\n      <ng-container *ngIf="buttonToggle==true">\n        <ion-grid>\n          <ion-row>\n            <ion-col *ngFor="let button of buttons" class="col-3">\n              <div class="btn">\n                <!-- <img\n                  (tap)="buttonFunction(button)"\n                  src="assets/imgs/buttons/{{button.buttonIcon}}"\n                  alt=""\n                /> -->\n                <ion-icon\n                  (tap)="buttonFunction(button)"\n                  [name]="button.buttonIcon.split(\'.\')[0]"\n                ></ion-icon>\n                <p>{{button.buttonText}}</p>\n              </div>\n            </ion-col>\n          </ion-row>\n          <ion-row>\n            <ion-col col-12 style="padding-top: 10px">\n              <ion-icon\n                name="arrow-down"\n                (tap)="showMoreButtons()"\n                style="font-size: 1.6em"\n              ></ion-icon>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ng-container>\n    </ng-container>\n  </ion-toolbar>\n</ion-footer>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/operations/defect-management-details/defect-management-details.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["p" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["q" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_5__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["a" /* ActionSheetController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["l" /* LoadingController */],
            __WEBPACK_IMPORTED_MODULE_1__providers_util_Mutil_service__["a" /* MutilService */],
            __WEBPACK_IMPORTED_MODULE_10__providers_defes_servicer__["a" /* DefesService */]])
    ], DefectManagementDetailsPage);
    return DefectManagementDetailsPage;
}());

//# sourceMappingURL=defect-management-details.js.map

/***/ }),

/***/ 9:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MutilService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_app_update__ = __webpack_require__(373);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular_platform_platform__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






var MutilService = /** @class */ (function () {
    function MutilService(platform, alertCtrl, appUpdate, toastCtrl, events, loadingCtrl, appConfig) {
        var _this = this;
        this.platform = platform;
        this.alertCtrl = alertCtrl;
        this.appUpdate = appUpdate;
        this.toastCtrl = toastCtrl;
        this.events = events;
        this.loadingCtrl = loadingCtrl;
        this.appConfig = appConfig;
        this.updateUrl = this.appConfig.checkUpdateUrl;
        this.events.subscribe('AUTH_ERROR', function (e) {
            console.log(e);
            if (e) {
                _this.popToastView(e.message);
            }
            _this.popToastView('');
        });
    }
    /**
     * 弱提示框
     */
    MutilService.prototype.popToastView = function (message) {
        this.toastCtrl
            .create({
            message: message,
            position: 'middle',
            duration: 2000,
        })
            .present();
    };
    /**
     * 判断密码是否符合规范
     * @param password
     */
    MutilService.prototype.isValidPassword = function (password) {
        if (!/^[A-Za-z0-9]{6,16}$/.test(password)) {
            this.popToastView('密码为6-16位的字母或数字');
            return false;
        }
        else {
            return true;
        }
    };
    /**
     * 判断邮箱号是否正确
     * @param mail
     */
    MutilService.prototype.isValidMail = function (mail) {
        if (!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(mail)) {
            this.popToastView('请输入正确的邮箱');
            return false;
        }
        else {
            return true;
        }
    };
    /**
     * 判断电话号码是否正确
     * @param mobile
     */
    MutilService.prototype.isValidMobile = function (mobile) {
        if (!/^1[3|4|5|7|8]\d{9}$/.test(mobile)) {
            this.popToastView('请输入正确的手机号');
            return false;
        }
        else {
            return true;
        }
    };
    /**格式化时间 */
    MutilService.prototype.buildTime = function (type, time) {
        if (!type || !time) {
            return '';
        }
        var arrs = type.split('-');
        var t = '';
        var d = new Date(time);
        for (var _i = 0, arrs_1 = arrs; _i < arrs_1.length; _i++) {
            var arr = arrs_1[_i];
            switch (arr) {
                case 'yyyy':
                    t = t + d.getFullYear() + '-';
                    break;
                case 'MM':
                    var m = '0' + (d.getMonth() + 1);
                    m = m.substring(m.length - 2, m.length);
                    t = t + m + '-';
                    break;
                case 'dd':
                    var dd = '0' + d.getDate();
                    dd = dd.substring(dd.length - 2, dd.length);
                    t = t + dd + ' ';
                    break;
                case 'hh':
                    t = t + d.getHours() + ':';
                    break;
                case 'mm':
                    t = t + d.getMinutes() + ':';
                    break;
            }
        }
        return t.substring(0, t.length - 1);
    };
    /**获取当月最后一天日期 日 */
    MutilService.prototype.getLastDay = function (d) {
        var year = parseInt(d.split('-')[0]);
        var month = parseInt(d.split('-')[1]);
        var new_year = year; //取当前的年份
        var new_month = month + 1; //取下一个月的第一天，方便计算（最后一天不固定）
        if (month > 12) {
            //如果当前大于12月，则年份转到下一年
            new_month -= 12; //月份减
            new_year++; //年份增
        }
        var new_date = new Date(new_year + "-" + new_month + "-" + 1); //取当年当月中的第一天
        return new Date(new_date.getTime() - 1000 * 60 * 60 * 24).getDate(); //获取当月最后一天日期
    };
    MutilService.prototype.showLoading = function () {
        if (!this.loading) {
            this.loading = this.loadingCtrl.create({
                spinner: 'crescent',
            });
            this.loading.present();
        }
    };
    MutilService.prototype.hideLoading = function () {
        if (this.loading) {
            this.loading.dismiss();
            this.loading = null;
        }
    };
    /**
     * alert提示
     * @param res
     * @param backfunction
     */
    MutilService.prototype.customAlert = function (res, backfunction) {
        if (!(res && res['msg'])) {
            return;
        }
        var alert = this.alertCtrl.create({
            title: res['title'] || '提示',
            subTitle: res['msg'],
            buttons: [
                {
                    text: '确定',
                    handler: function (data) {
                        if (backfunction) {
                            backfunction();
                        }
                    },
                },
            ],
        });
        alert.present();
    };
    MutilService.prototype.customPrompt = function (res, backfunction) {
        var _this = this;
        if (!(res && res['msg'])) {
            return;
        }
        if (this.prompt) {
            return;
        }
        this.prompt = this.alertCtrl.create({
            title: res['title'] || '提示',
            subTitle: res['msg'],
            buttons: [
                {
                    text: '取消',
                    role: 'cancel',
                    handler: function () {
                        _this.prompt = null;
                        console.log('Cancel clicked');
                    },
                },
                {
                    text: '确定',
                    role: 'ok',
                    handler: function (data) {
                        if (backfunction) {
                            backfunction();
                        }
                        _this.prompt = null;
                    },
                },
            ],
        });
        this.prompt.present();
    };
    MutilService.prototype.updateApp = function () {
        if (this.platform.is('ios')) {
            console.log('ios无法自动更新');
            return;
        }
        this.appUpdate
            .checkAppUpdate(this.updateUrl)
            .then(function (res) {
            console.log(res);
        })
            .catch(function (err) {
            console.log(err);
        });
    };
    //退出
    MutilService.prototype.showExit = function () {
        var _this = this;
        this.customPrompt({ msg: '是否退出应用？' }, function (rs) {
            _this.platform.exitApp();
        });
    };
    MutilService.prototype.isValid = function (form) {
        for (var key in form.controls) {
            if (form.controls.hasOwnProperty(key)) {
                if (form.controls[key].controls) {
                    this.isValid(form.controls[key]);
                }
                else {
                    if (!form.controls[key].valid) {
                        form.controls[key].markAsDirty();
                    }
                }
            }
        }
        return form.valid;
    };
    MutilService.prototype.filterEffectParam = function (params) {
        __WEBPACK_IMPORTED_MODULE_5_lodash__["forEach"](params, function (value, key) {
            if (__WEBPACK_IMPORTED_MODULE_5_lodash__["isObject"](value) || __WEBPACK_IMPORTED_MODULE_5_lodash__["isArray"](value)) {
                if (__WEBPACK_IMPORTED_MODULE_5_lodash__["isEmpty"](value)) {
                    params = __WEBPACK_IMPORTED_MODULE_5_lodash__["omit"](params, key);
                }
            }
            if (__WEBPACK_IMPORTED_MODULE_5_lodash__["isNull"](value)) {
                params = __WEBPACK_IMPORTED_MODULE_5_lodash__["omit"](params, key);
            }
        });
        return params;
    };
    MutilService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Injectable"])(),
        __param(6, Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_4__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular_platform_platform__["a" /* Platform */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["b" /* AlertController */],
            __WEBPACK_IMPORTED_MODULE_2__ionic_native_app_update__["a" /* AppUpdate */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["v" /* ToastController */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["f" /* Events */],
            __WEBPACK_IMPORTED_MODULE_0_ionic_angular__["l" /* LoadingController */], Object])
    ], MutilService);
    return MutilService;
}());

//# sourceMappingURL=Mutil.service.js.map

/***/ }),

/***/ 90:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EquipmentMessage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular_navigation_nav_params__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_echarts_service__ = __webpack_require__(91);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_monitor_service__ = __webpack_require__(113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__device_archive_device_archive__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__warn_message_warn_message__ = __webpack_require__(176);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var EquipmentMessage = /** @class */ (function () {
    function EquipmentMessage(echartsService, monitorService, navPrarams, modalCtrl, navCtrl) {
        this.echartsService = echartsService;
        this.monitorService = monitorService;
        this.navPrarams = navPrarams;
        this.modalCtrl = modalCtrl;
        this.navCtrl = navCtrl;
        this.telemetry = [
            {
                title: '总发电量：',
                shuju: '8k',
                danwei: 'kwh',
            },
            {
                title: '机内温度',
                shuju: '31.8',
                danwei: '℃',
            },
            {
                title: '设备开/关时长：',
                shuju: '80/60',
                danwei: 'h',
            },
            {
                title: '设备功率：',
                shuju: '98',
                danwei: '%',
            },
            {
                title: '有功功率：',
                shuju: '15.55',
                danwei: 'kwh',
            },
        ];
        this.task = 'telemetry';
        this.deviceInfo = {};
        this.ycPoints = [];
        this.yxPoints = [];
        this.statusPoints = [];
        this.showYaoCe = false;
        this.showYaoXin = false;
        this.showActivity = false;
        this.deviceId = this.navPrarams.get('deviceId');
        // this.deviceId = '000200000211'
    }
    EquipmentMessage.prototype.ionViewWillEnter = function () {
        this.getEquipmentInfo();
        this.getDeviceAlarmCount();
    };
    EquipmentMessage.prototype.getEquipmentInfo = function () {
        var _this = this;
        this.monitorService.getEquipmentInfo(this.deviceId).subscribe(function (e) {
            if (e) {
                _this.deviceInfo = e;
                //    this.trendChartOption = this.echartsService.initEc3(this.deviceInfo.charts);
                if (_this.deviceInfo.ycPoints) {
                    _this.ycPoints = _this.deviceInfo.ycPoints.show;
                }
                if (_this.deviceInfo.yxPoints) {
                    _this.yxPoints = _this.deviceInfo.yxPoints.show;
                }
                if (_this.deviceInfo.statusPoints) {
                    _this.statusPoints = _this.deviceInfo.statusPoints.show;
                }
            }
        });
    };
    EquipmentMessage.prototype.showYaoCeClick = function () {
        this.showYaoCe = !this.showYaoCe;
        if (this.showYaoCe &&
            this.deviceInfo.ycPoints.hide &&
            this.deviceInfo.ycPoints.hide.length > 0) {
            // this.ycPoints = this.ycPoints.push.apply(this.ycPoints, this.deviceInfo.ycPoints.hide);
            this.ycPoints = this.ycPoints.concat(this.deviceInfo.ycPoints.hide);
        }
        else {
            this.ycPoints = this.deviceInfo.ycPoints.show;
        }
    };
    EquipmentMessage.prototype.showYaoXinClick = function () {
        this.showYaoXin = !this.showYaoXin;
        if (this.showYaoXin &&
            this.deviceInfo.yxPoints.hide &&
            this.deviceInfo.yxPoints.hide.length > 0) {
            this.yxPoints = this.yxPoints.push.apply(this.yxPoints, this.deviceInfo.yxPoints.hide);
            // this.yxPoints = this.yxPoints.concat(this.deviceInfo.yxPoints.hide)
        }
        else {
            this.yxPoints = this.deviceInfo.yxPoints.show;
        }
    };
    EquipmentMessage.prototype.showActivityClick = function () {
        this.showActivity = !this.showActivity;
        if (this.showActivity &&
            this.deviceInfo.statusPoints.hide &&
            this.deviceInfo.statusPoints.hide.length > 0) {
            this.statusPoints = this.statusPoints.push.apply(this.statusPoints, this.deviceInfo.statusPoints.hide);
        }
        else {
            this.statusPoints = this.deviceInfo.statusPoints.show;
        }
    };
    EquipmentMessage.prototype.getDeviceAlarmCount = function () {
        var _this = this;
        this.monitorService.getDeviceAlarmCount(this.deviceId).subscribe(function (e) {
            _this.alarmCount = e;
        });
    };
    EquipmentMessage.prototype.deviceAlarmClick = function () {
        // let modal = this.modalCtrl.create(WarnMessage, { objType: '02', objIds: this.deviceId });
        // modal.onDidDismiss(e => { })
        // modal.present();
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_6__warn_message_warn_message__["a" /* WarnMessage */], {
            equipment: {
                deviceId: this.deviceId,
                deviceName: this.deviceInfo.deviceName,
            },
            queryYears: true,
        });
    };
    EquipmentMessage.prototype.deviceArchivePageClick = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__device_archive_device_archive__["a" /* DeviceArchivePage */], {
            deviceId: this.deviceId,
        });
    };
    EquipmentMessage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
            selector: 'equipment-message',template:/*ion-inline-start:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/equipment-message/equipment.message.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>{{deviceInfo.deviceName}}</ion-title>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n  <div class="equiment">\n    <img src="assets/imgs/home/equiment.png" />\n    <div class="ell">\n      <span>{{deviceInfo.label1}}</span>\n      ：{{deviceInfo.value1}}\n    </div>\n    <div class="ell">\n      <span>{{deviceInfo.label2}}</span>\n      ：{{deviceInfo.value2}}\n    </div>\n    <div class="ell">\n      <span>{{deviceInfo.label3}}</span>\n      ：{{deviceInfo.value3}}\n    </div>\n    <div class="ell">\n      <span>{{deviceInfo.label4}}</span>\n      ：{{deviceInfo.value4}}\n    </div>\n  </div>\n  <div>\n    <ion-segment [(ngModel)]="task">\n      <!-- <ion-segment-button value="trend">运行趋势</ion-segment-button> -->\n      <ion-segment-button value="telemetry">遥测数据</ion-segment-button>\n      <ion-segment-button value="yaoxin">遥信数据</ion-segment-button>\n      <ion-segment-button value="activity">活动状态</ion-segment-button>\n    </ion-segment>\n  </div>\n  <div [ngSwitch]="task">\n    <!-- *****运行趋势***** -->\n    <div *ngSwitchCase="\'trend\'" class="rankechart">\n      <div class="e-title">\n        <div class="time-dl">\n          日期：<span class="time">05/15</span> 电量：<span>1600</span>\n        </div>\n      </div>\n      <div\n        echarts\n        #echart\n        [options]="trendChartOption"\n        class="trend-chart"\n      ></div>\n      <div class="date-classify">\n        <span>时</span>\n        <span>日</span>\n        <span>月</span>\n        <span>年</span>\n      </div>\n    </div>\n    <!-- *****遥测数据***** -->\n    <div *ngSwitchCase="\'telemetry\'">\n      <!-- <div class="rank">\n                <span class="line"></span>\n                <span class="r-title">设备数据</span>\n                <span class="line"></span>\n            </div> -->\n      <ion-list no-lines>\n        <ion-item *ngFor="let point of ycPoints">\n          {{point.pointName}}\n          <span>{{point.displayValue}}</span>\n          {{point.unit}}\n        </ion-item>\n      </ion-list>\n      <!-- <div class="telemetry">\n                <div *ngFor="let point of ycPoints">\n                    {{point.pointName}}\n                    <span>{{point.displayValue}}</span>\n                    {{point.unit}}\n                </div>\n            </div> -->\n      <!-- <div class="rank">\n                <span class="line"></span>\n                <span class="r-title">其他数据</span>\n                <span class="line"></span>\n            </div>\n            <div class="telemetry">\n                <div *ngFor="let tel of telemetry;">\n                    {{tel.title}}\n                    <span>{{tel.shuju}}</span>\n                    {{tel.danwei}}\n                </div>\n            </div> -->\n      <div class="unfold" (click)="showYaoCeClick()">\n        <ion-icon *ngIf="!showYaoCe" name="add"></ion-icon>\n        <ion-icon *ngIf="showYaoCe" name="remove"></ion-icon>\n        {{showYaoCe? \'收起\' : \'展开\'}}\n      </div>\n    </div>\n    <!-- *****遥信数据***** -->\n    <div *ngSwitchCase="\'yaoxin\'">\n      <ion-list no-lines>\n        <ion-item *ngFor="let point of yxPoints">\n          <span\n            class="dot"\n            [class.one]=\'point.pic=="on"\'\n            [class.three]=\'point.pic=="off"\'\n          ></span>\n          {{point.pointName}}({{point.displayValue}})\n        </ion-item>\n      </ion-list>\n      <div class="unfold" (click)="showYaoXinClick()">\n        <ion-icon *ngIf="!showYaoXin" name="add"></ion-icon>\n        <ion-icon *ngIf="showYaoXin" name="remove"></ion-icon>\n        {{showYaoXin ? \'收起\' : \'展开\'}}\n      </div>\n    </div>\n    <!-- *****活动状态***** -->\n    <div *ngSwitchCase="\'activity\'">\n      <ion-list no-lines>\n        <ion-item *ngFor="let point of statusPoints">\n          <span\n            class="dot"\n            [class.one]=\'point.pic=="fault"\'\n            [class.two]=\'point.pic=="warn"\'\n            [class.three]=\'point.pic=="info"\'\n            [class.four]=\'point.pic=="log"\'\n          ></span>\n          {{point.pointName}}\n        </ion-item>\n      </ion-list>\n      <div class="unfold" (click)="showActivityClick()">\n        <ion-icon *ngIf="!showActivity" name="add"></ion-icon>\n        <ion-icon *ngIf="showActivity" name="remove"></ion-icon>\n        {{showActivity ? \'收起\' : \'展开\'}}\n      </div>\n    </div>\n  </div>\n  <ion-list no-lines>\n    <button ion-item detail-none (click)="deviceAlarmClick()">\n      <ion-avatar item-start>\n        <img src="assets/imgs/jiance/dzgj.png" class="smile-img" />\n      </ion-avatar>\n      设备告警\n\n      <span item-end class="alarmCount">{{alarmCount}}</span>\n    </button>\n    <button ion-item (click)="deviceArchivePageClick()">\n      <ion-avatar item-start>\n        <img src="assets/imgs/jiance/sbda.png" class="smile-img" />\n      </ion-avatar>\n      设备档案\n    </button>\n  </ion-list>\n</ion-content>\n'/*ion-inline-end:"/Users/zhanghao/Downloads/zyet_fore_code/nems-app/src/pages/home/equipment-message/equipment.message.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__providers_echarts_service__["a" /* EchartsService */],
            __WEBPACK_IMPORTED_MODULE_4__providers_monitor_service__["a" /* MonitorService */],
            __WEBPACK_IMPORTED_MODULE_2_ionic_angular_navigation_nav_params__["a" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* ModalController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* NavController */]])
    ], EquipmentMessage);
    return EquipmentMessage;
}());

//# sourceMappingURL=equipment.message.js.map

/***/ }),

/***/ 91:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EchartsService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_echarts__ = __webpack_require__(197);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_echarts___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_echarts__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var EchartsService = /** @class */ (function () {
    function EchartsService() {
        this.center = {
            normal: {
                position: 'center',
            },
        };
        this.textStyle = {
            color: '#ffffff',
            fontSize: 12,
        };
        this.radiusCncircle = ['35%', '39%'];
        this.itemStyle = {
            normal: { color: '#fff' },
        };
        this.placeHolderStyle = {
            normal: {
                color: '#90c8ed',
                labelLine: {
                    show: false,
                },
            },
        };
    }
    /*********** 月发电量月计划发电量 ************/
    EchartsService.prototype.initEc1 = function (chartOption, theme) {
        if (theme === void 0) { theme = null; }
        return {
            tooltip: {
                show: true,
                trigger: 'axis',
                axisPointer: {
                    type: 'cross',
                    lineStyle: {
                        color: '#FFF',
                        type: 'dashed',
                    },
                    crossStyle: {
                        color: '#FFF',
                    },
                },
            },
            grid: {
                left: 10,
                top: 30,
                right: 10,
                bottom: 10,
            },
            color: [theme === 'dark-theme' ? '#00E3ED' : '#fff', '#F5F908'],
            legend: {
                left: 'left',
                top: 'top',
                orient: 'vertical',
                icon: 'circle',
                textStyle: {
                    color: '#FFF',
                    fontSize: 10,
                },
                data: chartOption.legend.data,
            },
            xAxis: {
                type: 'category',
                data: chartOption.xAxis.data,
                boundaryGap: false,
                splitNumber: 12,
                minInterval: 12,
                axisLine: { show: false },
                axisTick: {
                    interval: 0,
                    show: true,
                    inside: true,
                    lineStyle: {
                        color: '#FFF',
                        width: 1,
                    },
                },
                axisLabel: { show: false },
            },
            yAxis: [
                {
                    show: false,
                    name: '电量(万KWh)',
                    type: 'value',
                },
            ],
            series: [
                {
                    name: chartOption.series[0].name,
                    data: chartOption.series[0].data,
                    type: 'line',
                    smooth: true,
                    symbolSize: 1,
                },
                {
                    name: chartOption.series[1].name,
                    data: chartOption.series[1].data,
                    type: 'line',
                    smooth: true,
                    symbolSize: 1,
                },
            ],
        };
    };
    EchartsService.prototype.initEc2 = function (axisData) {
        return {
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c} ({d}%)',
            },
            grid: {
                bottom: '15',
            },
            series: [
                {
                    name: '饼图二',
                    type: 'pie',
                    clockWise: false,
                    hoverAnimation: false,
                    radius: ['76%', '92%'],
                    label: {
                        normal: {
                            position: 'center',
                        },
                    },
                    data: [
                        {
                            value: axisData,
                            name: '占有率',
                            itemStyle: {
                                normal: {
                                    color: new __WEBPACK_IMPORTED_MODULE_1_echarts___default.a.graphic.LinearGradient(1, 1, 0, 1, [
                                        {
                                            offset: 0,
                                            color: '#ead36f',
                                        },
                                        {
                                            offset: 1,
                                            color: '#a9f9b8',
                                        },
                                    ]),
                                },
                            },
                            label: {
                                normal: {
                                    show: false,
                                },
                            },
                        },
                        {
                            value: 100 - axisData,
                            // name: '占位',
                            hoverAnimation: false,
                            // label: {
                            //     normal: {
                            //         formatter: '\n实施功率\n' + axisData + '万KW\n' + '容量-1.02GW',
                            //         textStyle: {
                            //             color: '#000',//字体颜色
                            //             fontSize: 12
                            //         }
                            //     }
                            // },
                            tooltip: {
                                show: true,
                            },
                            itemStyle: {
                                normal: {
                                    color: '#92cbf1',
                                },
                                emphasis: {
                                    color: '#red',
                                },
                            },
                        },
                    ],
                },
            ],
        };
    };
    EchartsService.prototype.initEc3 = function (chartOption, theme) {
        if (theme === void 0) { theme = null; }
        var color = '#3D7C88';
        return {
            tooltip: {
                show: true,
                trigger: 'axis',
                axisPointer: {
                    type: 'cross',
                    lineStyle: {
                        color: '#D4D4D4',
                        type: 'dashed',
                    },
                    crossStyle: {
                        color: '#D4D4D4',
                    },
                },
            },
            grid: {
                left: '4%',
                right: '4%',
                top: '50',
                bottom: '3%',
                containLabel: true,
            },
            title: {
                text: chartOption.title.text,
                top: 'top',
                left: 10,
                textStyle: { fontSize: 14, color: '#3F4248' }
            },
            color: ['rgba(91,143,249,0.85)', 'rgba(90,216,166,0.85)'],
            legend: {
                left: 'right',
                top: 'top',
                textStyle: { color: '#5C6370', fontSize: 12 },
                data: chartOption.legend.data,
                itemWidth: 8,
                itemHeight: 8,
            },
            xAxis: {
                type: 'category',
                data: chartOption.xAxis.data,
                axisLine: {
                    show: true,
                    lineStyle: {
                        color: theme === 'dark-theme' ? color : '#999',
                        width: 1,
                        fontSize: 7,
                    },
                },
                axisTick: {
                    show: false,
                },
                axisLabel: { show: true, color: '#5C6370' },
            },
            yAxis: [
                {
                    show: true,
                    type: 'value',
                    splitNumber: 3,
                    textStyle: {
                        fontSize: 10,
                        color: '#5C6370'
                    },
                    axisLine: {
                        show: false,
                    },
                    axisTick: {
                        show: false,
                    },
                    axisLabel: { show: true, color: '#5C6370' },
                },
            ],
            series: [
                {
                    name: chartOption.series[0].name,
                    data: chartOption.series[0].data,
                    type: 'bar',
                    // smooth: true,
                    symbolSize: 1,
                },
                {
                    name: chartOption.series[1].name,
                    data: chartOption.series[1].data,
                    type: 'bar',
                    // smooth: true,
                    symbolSize: 1,
                },
            ],
        };
    };
    EchartsService.prototype.initEc4 = function (axisData, theme, sort) {
        if (theme === void 0) { theme = null; }
        /* 正序：asc 倒序：desc */
        var len = axisData.yAxisData.length;
        for (var i = 0; i < len; i++) {
            for (var j = 0; j < len - 1 - i; j++) {
                if (axisData.yAxisData[j] < axisData.yAxisData[j + 1]) {
                    var temp = axisData.xAxisData[j];
                    var temp2 = axisData.yAxisData[j];
                    axisData.xAxisData[j] = axisData.xAxisData[j + 1];
                    axisData.xAxisData[j + 1] = temp;
                    axisData.yAxisData[j] = axisData.yAxisData[j + 1];
                    axisData.yAxisData[j + 1] = temp2;
                }
            }
        }
        // 排序后倒序需要倒转
        if (sort = "desc") {
            axisData.xAxisData.reverse();
            axisData.yAxisData.reverse();
        }
        return {
            tooltip: {
                show: false,
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow',
                },
            },
            grid: {
                top: '5%',
                left: '12%',
                bottom: '0%',
                containLabel: false,
            },
            // x轴的数据和样式
            xAxis: {
                type: 'value',
                axisTick: { show: false },
                axisLine: { show: false },
                axisLabel: { show: false },
                splitLine: { show: false }
            },
            // y轴的数据和样式
            yAxis: [
                {
                    type: 'category',
                    axisLabel: {
                        color: '#3F4248',
                        show: true,
                        margin: 0,
                        align: 'left',
                        fontSize: 13,
                        verticalAlign: 'bottom',
                        padding: [5, 10, 2, -34],
                        formatter: function (value, index) {
                            var no = -(index - axisData.xAxisData.length);
                            // let no = index + 1;  
                            return '{' + no + '| }\r\r\r' + value.split(' ')[0];
                        },
                        rich: {
                            1: {
                                height: 24,
                                width: 24,
                                padding: [0, 0, 0, 0],
                                backgroundColor: {
                                    image: "assets/imgs/monitor/chart_rank/no1.png",
                                },
                            },
                            2: {
                                height: 24,
                                width: 24,
                                padding: [0, 0, 0, 0],
                                backgroundColor: {
                                    image: "assets/imgs/monitor/chart_rank/no2.png",
                                },
                            },
                            3: {
                                height: 24,
                                width: 24,
                                padding: [0, 0, 0, 0],
                                backgroundColor: {
                                    image: "assets/imgs/monitor/chart_rank/no3.png",
                                },
                            },
                            4: {
                                height: 24,
                                width: 24,
                                padding: [0, 0, 0, 0],
                                backgroundColor: {
                                    image: "assets/imgs/monitor/chart_rank/no4.png",
                                },
                            },
                            5: {
                                height: 24,
                                width: 24,
                                padding: [0, 0, 0, 0],
                                backgroundColor: {
                                    image: "assets/imgs/monitor/chart_rank/no5.png",
                                },
                            },
                            6: {
                                height: 24,
                                width: 24,
                                padding: [0, 0, 0, 0],
                                backgroundColor: {
                                    image: "assets/imgs/monitor/chart_rank/no6.png",
                                },
                            },
                        }
                    },
                    axisTick: { show: false },
                    axisLine: { show: false },
                    data: axisData.xAxisData,
                },
                {
                    type: 'category',
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: {
                        color: '#2A2B2F',
                        show: true,
                        margin: 0,
                        fontSize: 13,
                        align: 'right',
                        verticalAlign: 'top',
                        padding: [5, 0, 8, -15],
                        formatter: function (value) {
                            return value.split(' ')[1];
                        },
                        zIndex: 1000,
                    },
                    data: axisData.xAxisData
                }
            ],
            series: [
                {
                    name: ' ',
                    type: 'bar',
                    yAxisIndex: 1,
                    silent: true,
                    barWidth: 10,
                    itemStyle: {
                        normal: {
                            show: false,
                            color: '#D5DDE3',
                            borderWidth: 0,
                            borderRadius: 5,
                            barBorderRadius: 5
                        }
                    },
                    barCategoryGap: '20%',
                    data: this.allmax(axisData.yAxisData),
                },
                {
                    name: '时间区间',
                    type: 'bar',
                    barWidth: 8,
                    itemStyle: {
                        normal: {
                            show: false,
                            color: new __WEBPACK_IMPORTED_MODULE_1_echarts___default.a.graphic.LinearGradient(0, 0, 0, 1, [
                                {
                                    offset: 0,
                                    color: '#4db8ff',
                                }
                            ]),
                            borderWidth: 0,
                            borderRadius: 5,
                            barBorderRadius: 5
                        },
                    },
                    barCategoryGap: '20%',
                    data: axisData.yAxisData,
                },
            ],
        };
    };
    EchartsService.prototype.initEc5 = function (subInfos, theme) {
        if (theme === void 0) { theme = null; }
        var itemStyle = {
            normal: { color: '#00E3ED' },
        };
        var placeHolderStyle = {
            normal: {
                color: '#003740',
                labelLine: {
                    show: false,
                },
            },
        };
        var textStyle = {
            color: '#B9FCFF',
            fontSize: 12,
        };
        return {
            series: [
                {
                    type: 'pie',
                    clockWise: false,
                    center: ['15%', '25%'],
                    radius: this.radiusCncircle,
                    hoverAnimation: false,
                    avoidLabelOverlap: false,
                    label: this.center,
                    data: [
                        {
                            value: subInfos[0].ratio,
                            name: '01',
                            label: {
                                normal: {
                                    formatter: subInfos[0].title,
                                    textStyle: theme === 'dark-theme' ? textStyle : this.textStyle,
                                },
                            },
                            itemStyle: theme === 'dark-theme' ? itemStyle : this.itemStyle,
                        },
                        {
                            value: 100 - subInfos[0].ratio,
                            itemStyle: theme === 'dark-theme'
                                ? placeHolderStyle
                                : this.placeHolderStyle,
                            hoverAnimation: false,
                        },
                    ],
                },
                {
                    type: 'pie',
                    clockWise: false,
                    center: ['60%', '25%'],
                    radius: this.radiusCncircle,
                    hoverAnimation: false,
                    avoidLabelOverlap: false,
                    label: this.center,
                    data: [
                        {
                            value: subInfos[1].ratio,
                            name: '01',
                            label: {
                                normal: {
                                    formatter: subInfos[1].title,
                                    textStyle: theme === 'dark-theme' ? textStyle : this.textStyle,
                                },
                            },
                            itemStyle: theme === 'dark-theme' ? itemStyle : this.itemStyle,
                        },
                        {
                            value: 100 - subInfos[1].ratio,
                            itemStyle: theme === 'dark-theme'
                                ? placeHolderStyle
                                : this.placeHolderStyle,
                            hoverAnimation: false,
                        },
                    ],
                },
                {
                    type: 'pie',
                    clockWise: false,
                    center: ['15%', '72%'],
                    radius: this.radiusCncircle,
                    hoverAnimation: false,
                    avoidLabelOverlap: false,
                    label: this.center,
                    data: [
                        {
                            value: subInfos[2].ratio,
                            name: '01',
                            label: {
                                normal: {
                                    formatter: subInfos[2].title,
                                    textStyle: theme === 'dark-theme' ? textStyle : this.textStyle,
                                },
                            },
                            itemStyle: theme === 'dark-theme' ? itemStyle : this.itemStyle,
                        },
                        {
                            value: 100 - subInfos[2].ratio,
                            itemStyle: theme === 'dark-theme'
                                ? placeHolderStyle
                                : this.placeHolderStyle,
                            hoverAnimation: false,
                        },
                    ],
                },
                {
                    type: 'pie',
                    clockWise: false,
                    center: ['60%', '72%'],
                    radius: this.radiusCncircle,
                    hoverAnimation: false,
                    avoidLabelOverlap: false,
                    label: this.center,
                    data: [
                        {
                            value: subInfos[3].ratio,
                            name: '01',
                            label: {
                                normal: {
                                    formatter: subInfos[3].title,
                                    textStyle: theme === 'dark-theme' ? textStyle : this.textStyle,
                                },
                            },
                            itemStyle: theme === 'dark-theme' ? itemStyle : this.itemStyle,
                        },
                        {
                            value: 100 - subInfos[3].ratio,
                            itemStyle: theme === 'dark-theme'
                                ? placeHolderStyle
                                : this.placeHolderStyle,
                            hoverAnimation: false,
                        },
                    ],
                },
            ],
        };
    };
    /**
     * 得到数据最大值
     */
    EchartsService.prototype.allmax = function (a) {
        var max = Math.max.apply(null, a);
        var arr = new Array(a.length);
        for (var i = 0; i < arr.length; i++) {
            // arr[i] = (Number(Math.round(max).toString().substr(0, 1)) + 1) * Math.pow(10, Math.round(max).toString().length - 1);
            arr[i] = 100;
        }
        return arr;
    };
    EchartsService.prototype.buildNullArr = function (a) {
        var ar = new Array(a.length);
        for (var i = 0; i < a.length; i++) {
            ar[i] = '';
        }
        return ar;
    };
    /**
     * 运行效率
     * @param datas
     * @param datas
     * @param datas
     */
    EchartsService.prototype.buildYXXLGroupEchartOption = function (datas) {
        var option = {
            tooltip: {
                trigger: 'axis',
                confine: true,
                formatter: '{b}: {c}',
            },
            grid: {
                left: '5%',
                right: '5%',
                top: '17%',
                bottom: '5%',
                containLabel: false,
            },
            xAxis: {
                type: 'category',
                // data: ['90%-100%', '80%-90%', '70%-80%', '60%-70%', '50%-60%', '40%-50%', '30%-40%', '20%-30%', '10%-20%', '0%-10%'],
                axisLine: { show: false },
                splitLine: { show: false },
                axisLabel: { show: false },
                axisTick: { show: false },
            },
            yAxis: {
                type: 'value',
                axisLine: { show: false },
                splitLine: { show: false },
                axisLabel: { show: false },
                axisTick: { show: false },
            },
            series: [
                {
                    type: 'bar',
                    label: {
                        show: true,
                        position: 'top',
                        color: '#dedbdb',
                        fontSize: 10,
                    },
                    color: '#5daee5',
                    data: datas,
                },
            ],
        };
        return option;
    };
    /**
     * 损失电量统计
     * 损失电量
     * @param datas
     * @param datas
     * @param datas
     */
    EchartsService.prototype.buildSSDLTJEchartOption = function (datas, type) {
        var option = {};
        if (type === 'lossNum') {
            option = {
                grid: {
                    left: '20%',
                    right: '20%',
                    containLabel: true,
                },
                title: {
                    show: true,
                    text: '发生次数',
                    left: 'center',
                    textStyle: {
                        fontSize: 12,
                    },
                },
                tooltip: {
                    show: true,
                    formatter: '{b}: {c} 次',
                },
                series: [
                    {
                        type: 'pie',
                        radius: '50%',
                        center: ['50%', '55%'],
                        data: datas,
                        label: {
                            show: true,
                            formatter: '{b}:\n{c} 次',
                            position: 'outer',
                        },
                    },
                ],
            };
        }
        else {
            option = {
                grid: {
                    top: '10%',
                    containLabel: true,
                },
                title: {
                    show: true,
                    text: '损失电量',
                    left: 'center',
                    textStyle: {
                        fontSize: 12,
                    },
                },
                tooltip: {
                    show: true,
                    formatter: '{b}: {c} kWh',
                },
                series: [
                    {
                        type: 'pie',
                        radius: '55%',
                        center: ['50%', '55%'],
                        data: datas,
                        label: {
                            show: true,
                            formatter: '{b}:\n{c} kWh',
                            position: 'outer',
                        },
                    },
                ],
            };
        }
        return option;
    };
    /**运维界面图表 */
    EchartsService.prototype.bulidOrdersTypeEchartOption = function (datas, rate) {
        return {
            color: ['#F2F9FF', '#91CBF1'],
            grid: {
                left: '20%',
                right: '20%',
                containLabel: true,
            },
            title: {
                text: rate,
                left: 'center',
                top: 'middle',
                itemGap: 0,
                textStyle: { fontSize: '32', color: '#FFFFFF' },
                subtext: '完成率(%)',
                subtextStyle: { fontSize: '10', color: '#FFFFFF' },
                borderWidth: 0,
            },
            tooltip: {
                show: false,
            },
            series: [
                {
                    type: 'pie',
                    radius: ['65%', '75%'],
                    center: ['50%', '50%'],
                    data: datas,
                    label: {
                        show: false,
                    },
                },
            ],
        };
    };
    EchartsService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __metadata("design:paramtypes", [])
    ], EchartsService);
    return EchartsService;
}());

//# sourceMappingURL=echarts.service.js.map

/***/ }),

/***/ 92:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModulesService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_app_config__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__auth_http_service__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__util_Mutil_service__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util_plugin_service__ = __webpack_require__(67);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





var ModulesService = /** @class */ (function () {
    function ModulesService(puginService, http, mutil, appConfig) {
        this.puginService = puginService;
        this.http = http;
        this.mutil = mutil;
        this.appConfig = appConfig;
        this.modules2Url =
            this.appConfig.apiEndpoint + '/api/m/v2/framework/modules2'; // 新首页模块列表
        this.stationInitUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/monitor/station/init'; // 新首页模块详情初始化
        this.dispersionInitUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/monitor/dispersion/init'; // 新首页模块运行效率详情初始化
        this.modulesListUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/monitor/station/'; // 功率监视等模块 数据列表
        this.groupDatasListUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/monitor/dispersion/groupDatas/'; // 运行效率 数据列表
        this.regionsUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/regions?parentId='; // 省列表
        this.stationTypeUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/props?typeId=stationType'; // 电站类型列表
        this.deviceListInitUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/monitor/device/init'; // 设备运行状态，设备通行状态初始化
        this.deviceListUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/monitor/device'; // 设备运行状态，设备通行状态列表
        this.lossLossTypesUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/report/loss/lossTypes'; //损失电量统计图标
        this.lossStationLossTypesUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/report/loss/stationLossTypes'; //损失电量统计列表
        this.lossDetailUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/report/loss/details'; //损失电量统计详情列表
        this.exportStationLossTypesUrl =
            this.appConfig.apiEndpoint +
                '/api/m/v2/report/loss/export/stationLossTypes'; //损失电量统计文件下载地址
        this.exportStationLossTypesDetailsUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/report/loss/export/details'; //损失电量统计详情文件下载地址
        this.reportEnergyInitUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/report/energy/init'; //电量报表初始化
        this.reportEnergyListUrl =
            this.appConfig.apiEndpoint + '/api/m/v2/report/energy'; //电量报表列表
    }
    /**拼接图片路径 */
    ModulesService.prototype.getImg = function (imgName) {
        return this.appConfig.fileEndpoint + imgName;
    };
    ModulesService.prototype.modules2 = function () {
        var url = this.modules2Url;
        return this.http.get(url);
    };
    /**
     * 新首页模块详情初始化接口
     * @param param 根据参数不同调用不同接口
     */
    ModulesService.prototype.modulesDetailsInit = function (param) {
        var url = '';
        switch (param) {
            case 'group':
                url = this.dispersionInitUrl;
                break;
            default:
                url = this.stationInitUrl;
        }
        url = url + '?data=' + param;
        return this.http.get(url);
    };
    /**
     * 新首页模块详情列表接口
     * @param param 根据参数不同调用不同接口
     */
    ModulesService.prototype.modulesList = function (param, data) {
        var url = '';
        switch (param) {
            case 'group':
                url = this.groupDatasListUrl + '?';
                break;
            default:
                url = this.modulesListUrl;
                url = url + param + '?';
        }
        if (data) {
            for (var key in data) {
                if (key && (data[key] || data[key] === 0)) {
                    url = url + key + '=' + data[key] + '&';
                }
            }
            return this.http.get(url);
        }
    };
    ModulesService.prototype.getModuleChart = function (param, data) {
        var url = '';
        switch (param) {
            case 'group':
                url = this.groupDatasListUrl + '?';
                break;
            default:
                url = this.modulesListUrl;
                url = url + param + '/charts';
        }
        return this.http.get(url, { params: data });
    };
    /**
     * 查询省，市，县
     * @param parentId id若是省则默认为CN
     */
    ModulesService.prototype.regions = function (parentId) {
        if (!parentId) {
            parentId = 'CN';
        }
        var url = this.regionsUrl + parentId;
        return this.http.get(url);
    };
    /**查询电站类型 */
    ModulesService.prototype.stationType = function () {
        var url = this.stationTypeUrl;
        return this.http.get(url);
    };
    /**
     * 设备运行状态初始化  data:runStatus
     * 设备通信状态初始化
     * @param data id若是省则默认为CN
     */
    ModulesService.prototype.deviceListInit = function (data, deviceType, stationId) {
        var url = this.deviceListInitUrl;
        url = url + "?data=" + data + "&deviceType=" + deviceType + "&stationId=" + stationId;
        // switch(data){
        //     case'runStatus':
        //         url = `${url}?data=${data}&deviceType=${deviceType}&stationId=${stationId}`
        //     break;
        //     default:
        // }
        return this.http.get(url);
    };
    /**
     * 设备运行状态初始化  data:runStatus
     * 设备通信状态初始化
     * @param param 运行状态或通行状态 参数不同
     * @param data id若是省则默认为CN
     */
    ModulesService.prototype.deviceList = function (param, data) {
        var url = this.deviceListUrl + '/' + param + '?';
        // switch(param){
        //     case'runStatus':
        //         url = this.deviceListUrl +'/' +  + '?';
        //     break;
        //     case'commuStatus':
        //         url = this.deviceListUrl + '?';
        //     break;
        // }
        if (data) {
            for (var key in data) {
                if (key && (data[key] || data[key] === 0)) {
                    url = url + key + '=' + data[key] + '&';
                }
            }
            return this.http.get(url);
        }
    };
    /**
     * 损失电量统计列表
     * @param startDate 开始时间 默认一月
     * @param endDate 结束时间 默认当天
     * @param stationIds 电站id 可以不填
     */
    ModulesService.prototype.lossStationLossTypes = function (data) {
        var url = this.lossStationLossTypesUrl + "?";
        // if (stationIds) {
        //     url = `${url}&stationIds=${stationIds}`
        // }
        for (var key in data) {
            if (key && (data[key] || data[key] === 0)) {
                url = url + key + '=' + data[key] + '&';
            }
        }
        return this.http.get(url);
    };
    /**
     * 损失电量统计图标
     * @param startDate 开始时间 默认一月
     * @param endDate 结束时间 默认当天
     * @param stationIds 电站id 可以不填
     */
    ModulesService.prototype.lossLossTypes = function (data) {
        var url = this.lossLossTypesUrl + "?";
        // if (stationIds) {
        //     url = `${url}&stationIds=${stationIds}`
        // }
        for (var key in data) {
            if (key && (data[key] || data[key] === 0)) {
                url = url + key + '=' + data[key] + '&';
            }
        }
        return this.http.get(url);
    };
    /**
     * 损失电量统计列表
     * @param data
     */
    ModulesService.prototype.lossDetail = function (data) {
        var url = this.lossDetailUrl + "?";
        // if (stationIds) {
        //     url = `${url}&stationIds=${stationIds}`
        // }
        for (var key in data) {
            if (key && (data[key] || data[key] === 0)) {
                url = url + key + '=' + data[key] + '&';
            }
        }
        return this.http.get(url);
    };
    /**
     * 损失电量统计文件下载地址
     */
    ModulesService.prototype.exportStationLossTypes = function (data, docName) {
        console.log('下载文件名：', docName);
        var url = this.exportStationLossTypesUrl + "?";
        for (var key in data) {
            if (key && (data[key] || data[key] === 0)) {
                url = url + key + '=' + data[key] + '&';
            }
        }
        this.puginService.downloadFile(url, docName);
    };
    /**
     * 损失电量统计详情文件下载地址
     */
    ModulesService.prototype.exportStationLossTypesDetails = function (data, docName) {
        console.log('下载文件名：', docName);
        var url = this.exportStationLossTypesDetailsUrl + "?";
        for (var key in data) {
            if (key && (data[key] || data[key] === 0)) {
                url = url + key + '=' + data[key] + '&';
            }
        }
        this.puginService.downloadFile(url, docName);
    };
    ModulesService.prototype.reportEnergyInit = function () {
        return this.http.get(this.reportEnergyInitUrl);
    };
    ModulesService.prototype.reportEnergyList = function (params) {
        return this.http.get(this.reportEnergyListUrl, {
            params: this.mutil.filterEffectParam(params),
        });
    };
    ModulesService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
        __param(3, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Inject"])(__WEBPACK_IMPORTED_MODULE_1__models_app_config__["a" /* APP_CONFIG */])),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__util_plugin_service__["a" /* PluginService */],
            __WEBPACK_IMPORTED_MODULE_2__auth_http_service__["a" /* AuthHttpService */],
            __WEBPACK_IMPORTED_MODULE_3__util_Mutil_service__["a" /* MutilService */], Object])
    ], ModulesService);
    return ModulesService;
}());

//# sourceMappingURL=modules.service.js.map

/***/ })

},[855]);
//# sourceMappingURL=main.js.map